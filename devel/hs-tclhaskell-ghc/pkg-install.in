#!/bin/sh

GHC_LIB=$PKG_PREFIX/lib/ghc-GHC_VERSION

if [ x"$2" = xPOST-INSTALL ]; then
cat << CONFEOF | $PKG_PREFIX/bin/ghc-pkg -a
Package
   {name = "TclHaskell",
    import_dirs = ["$GHC_LIB/imports/tclhaskell/"],
    source_dirs = [],
    library_dirs = ["$GHC_LIB/"],
    hs_libraries = ["HSTclHaskell"],
    extra_libraries = ["tcl83","tk83","HSTclHaskell_cbits"],
    include_dirs = ["$GHC_LIB/include"],
    c_includes = [],
    package_deps = [ "rts","lang","concurrent","data" ],
    extra_ghc_opts = [ "-fglasgow-exts", "-fvia-C" ],
    extra_cc_opts = [],
    extra_ld_opts = [ "-L$PKG_PREFIX/lib", "-lncurses"  ]
}
CONFEOF
/bin/rm -f $PKG_PREFIX/lib/ghc-GHC_VERSION/package.conf.old
fi
