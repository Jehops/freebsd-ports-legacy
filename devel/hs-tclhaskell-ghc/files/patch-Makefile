
$FreeBSD$

--- Makefile.orig
+++ Makefile
@@ -72,7 +72,7 @@
 HIS = *.hi
 
 GHC_OPTS = -O -fglasgow-exts -recomp -dcore-lint -fvia-C \
-           -package concurrent -package-name TclHaskell
+           -package concurrent -package lang -package-name TclHaskell
 
 GHC_INC =
 
@@ -95,13 +95,13 @@
 all : libHSTclHaskell.a HSTclHaskell.o libHSTclHaskell_cbits.a HSTclHaskell_cbits.o
 
 install : libHSTclHaskell.a HSTclHaskell.o
-	mkdir -p $(LIBDIR)
-	mkdir -p $(IMPORTS)
-	cp -p libHSTclHaskell.a $(LIBDIR)/
-	cp -p HSTclHaskell.o $(LIBDIR)/
-	cp -p libHSTclHaskell_cbits.a $(LIBDIR)/
-	cp -p HSTclHaskell_cbits.o $(LIBDIR)/
-	cp -p $(HIS) $(IMPORTS)/
+	${MKDIR} $(LIBDIR)
+	${MKDIR} $(IMPORTS)
+	${INSTALL_DATA} libHSTclHaskell.a $(LIBDIR)/
+	${INSTALL_DATA} HSTclHaskell.o $(LIBDIR)/
+	${INSTALL_DATA} libHSTclHaskell_cbits.a $(LIBDIR)/
+	${INSTALL_DATA} HSTclHaskell_cbits.o $(LIBDIR)/
+	${INSTALL_DATA} $(HIS) $(IMPORTS)/
 
 pkg : 
 	ghc-pkg -a < tclhaskell.conf
@@ -134,7 +134,7 @@
 		@:
 
 TclCompatibilityGhc.o: Check.h TclPrim.hi
-	$(GHC) $(GHC_OPTS) $(GHC_INC) '-#include "Check.h"' -c  $(SUPPORTCONCURRENCY) -ohi TclCompatibility.hi -o $@ 
+	$(GHC) $(GHC_OPTS) $(GHC_INC) -c  $(SUPPORTCONCURRENCY) -ohi TclCompatibility.hi -o $@ 
 
 
 
