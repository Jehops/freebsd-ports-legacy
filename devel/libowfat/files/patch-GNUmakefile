--- GNUmakefile.orig	Sat Mar 27 18:25:44 2004
+++ GNUmakefile	Sat Mar 27 20:31:04 2004
@@ -4,20 +4,16 @@
 # in /opt/diet, where they are in the default search path for my diet libc
 # work but don't conflict with anything there.  YMMV.
 
-prefix=/opt/diet
+prefix=${PREFIX}
 LIBDIR=${prefix}/lib
-INCLUDEDIR=${prefix}/include
-MAN3DIR=${prefix}/man/man3
+INCLUDEDIR=${prefix}/include/libowfat
+MAN3DIR=${MANPREFIX}/man/man3
 
 LIBS=byte.a fmt.a scan.a str.a uint.a open.a stralloc.a unix.a socket.a \
 buffer.a mmap.a taia.a tai.a dns.a case.a mult.a array.a io.a textcode.a
 
 all: t $(LIBS) libowfat.a libsocket
 
-CC=gcc
-CFLAGS=-pipe -Wall -O2 -fomit-frame-pointer
-#CFLAGS=-pipe -Os -march=pentiumpro -mcpu=pentiumpro -fomit-frame-pointer -fschedule-insns2 -Wall
-
 # startrip
 ifneq ($(DEBUG),)
 CFLAGS=-pipe -Wall -g
@@ -146,10 +142,10 @@
 openreadclose.h readclose.h ndelay.h array.h io.h safemult.h iob.h havealloca.h
 
 install: libowfat.a
-	install -d $(INCLUDEDIR) $(MAN3DIR) $(LIBDIR)
-	install -m 644 $(INCLUDES) $(INCLUDEDIR)
-	install -m 644 $(wildcard */*.3) $(MAN3DIR)
-	install -m 644 libowfat.a $(LIBDIR)
+	${INSTALL} -d $(INCLUDEDIR) $(MAN3DIR) $(LIBDIR)
+	${BSD_INSTALL_DATA} $(INCLUDES) $(INCLUDEDIR)
+	${BSD_INSTALL_MAN} $(wildcard */*.3) $(MAN3DIR)
+	${BSD_INSTALL_DATA} libowfat.a $(LIBDIR)
 
 uninstall:
 	rm -f $(patsubst %.h,$(INCLUDEDIR)/%.h,$(INCLUDES))
