--- Makefile.orig	Mon Jan  1 04:13:48 2001
+++ Makefile	Mon Jan  7 14:28:39 2002
@@ -18,23 +18,23 @@
 #
 
 # directory for TeX inputs (cwebmac.tex goes here)
-MACROSDIR= /usr/local/texmf/tex/generic
+MACROSDIR= ${PREFIX}/share/texmf/tex/generic/misc
 
 # directory for CWEB inputs in @i files
-CWEBINPUTS= /usr/local/lib/cweb
+CWEBINPUTS= ${PREFIX}/share/cweb
 
 # extension for manual pages ("l" distinguishes local from system stuff)
-MANEXT= l
-#MANEXT= 1
+#MANEXT= l
+MANEXT= 1
 
 # directory for manual pages (cweb.1 goes here)
-MANDIR= /usr/man/man$(MANEXT)
+MANDIR= ${PREFIX}/man/man$(MANEXT)
 
 # destination directory for executables; must end in /
-DESTDIR= /usr/local/bin/
+DESTDIR= ${PREFIX}/bin/
 
 # directory for GNU EMACS Lisp code (cweb.el goes here)
-EMACSDIR= /usr/local/emacs/lisp
+EMACSDIR= ${PREFIX}/share/emacs/site-lisp
 
 # Set DESTPREF to null if you want to call the executables "tangle" and "weave"
 # (probably NOT a good idea; we recommend leaving DESTPREF=c)
@@ -50,9 +50,9 @@
 WCHANGES=
 
 # We keep debugging info around, for fun, but most users don't need it
-CFLAGS = -g
+#CFLAGS = -g
 #CFLAGS = -O
-LINKFLAGS = -g
+#LINKFLAGS = -g
 #LINKFLAGS = -s # for smaller (stripped) executables on many UNIX systems
 
 # What C compiler are you using?
@@ -162,21 +162,16 @@
 	  *.log *.dvi *.toc *.idx *.scn *.pdf core cweave ctangle
 
 install: all
-	- mkdir $(DESTDIR)
 	$(CP) cweave $(DESTDIR)$(DESTPREF)weave
 	chmod 755 $(DESTDIR)$(DESTPREF)weave
 	$(CP) ctangle $(DESTDIR)$(DESTPREF)tangle
 	chmod 755 $(DESTDIR)$(DESTPREF)tangle
-	- mkdir $(MANDIR)
 	$(CP) cweb.1 $(MANDIR)/cweb.$(MANEXT)
 	chmod 644 $(MANDIR)/cweb.$(MANEXT)
-	- mkdir $(MACROSDIR)
 	$(CP) cwebmac.tex $(MACROSDIR)
 	chmod 644 $(MACROSDIR)/cwebmac.tex
-	- mkdir $(EMACSDIR)
 	$(CP) cweb.el $(EMACSDIR)
 	chmod 644 $(EMACSDIR)/cweb.el
-	- mkdir $(CWEBINPUTS)
 	$(CP) c++lib.w $(CWEBINPUTS)
 	chmod 644 $(CWEBINPUTS)/c++lib.w
 
