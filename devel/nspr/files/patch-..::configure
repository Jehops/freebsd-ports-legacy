
$FreeBSD$

--- ../configure.orig	Sat Mar 30 17:35:05 2002
+++ ../configure	Thu Aug  8 19:35:46 2002
@@ -3290,16 +3290,17 @@
 #define HAVE_BSD_FLOCK 1
 EOF
 
-    CFLAGS="$CFLAGS $(DSO_CFLAGS) -ansi -Wall"
+    CFLAFS="$CFLAGS $DSO_CFLAGS -ansi -Wall -pipe -DXP_UNIX"
     MOZ_OBJFORMAT=`test -x /usr/bin/objformat && /usr/bin/objformat || echo aout`
     if test "$MOZ_OBJFORMAT" = "elf"; then
-        DLL_SUFFIX=so
+        DLL_SUFFIX=so.1
     else
         DLL_SUFFIX=so.1.0
     fi
     MKSHLIB='$(CC) $(DSO_LDOPTS) -o $@'
     DSO_CFLAGS=-fPIC
     DSO_LDOPTS='-shared -Wl,-soname -Wl,$(notdir $@)'
+    DSO_LDOPTS="$DSO_LDOPTS $BSD_PTHREAD_LIBS"
     MDCPUCFG_H=_freebsd.cfg
     PR_MD_CSRCS=freebsd.c
     ;;
