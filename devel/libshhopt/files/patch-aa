--- Makefile	Fri Mar 10 11:45:19 2000
+++ /home/andy/tmp/wrk/Makefile	Sun Mar 19 16:34:15 2000
@@ -6,10 +6,10 @@
 VERSION		= $(VERMAJ).$(VERMIN).$(VERPAT)
 
 # Define SHARED as 1 for Linux shared ELF library
-#SHARED		= 1
+SHARED		= 1
 
 ifeq ($(SHARED),1)
-LIBTARGET	= lib$(DIST).so.$(VERSION)
+LIBTARGET	= lib$(DIST).so.$(VERMAJ)
 LIBTARGETSO	= lib$(DIST).so
 LIBTARGETSOMAJ	= $(LIBTARGETSO).$(VERMAJ)
 CCSHRD		= -fPIC
@@ -20,15 +20,16 @@
 LIBHEAD		= $(DIST).h
 TARGETS		= $(LIBTARGET)
 
-INSTBASEDIR	= /usr/local
+PREFIX		?= /usr/local
+INSTBASEDIR	= $(PREFIX)
 INSTLIBDIR	= $(INSTBASEDIR)/lib
 INSTINCDIR	= $(INSTBASEDIR)/include
-INSTALL		= install -m 644
-INSTALLPROG	= install -m 755
+INSTALL		= install -c -m 644
+INSTALLPROG	= install -c -m 755
 MKDIRP		= install -d -m 755
 
-CC		= gcc
-OPTIM		= -O2
+CC		?= gcc
+OPTIM		= $(CFLAGS)
 
 INCDIR		= -I.
 
@@ -67,9 +68,7 @@
 	$(INSTALL) $(LIBTARGET) $(INSTLIBDIR)
 	$(INSTALL) $(LIBHEAD) $(INSTINCDIR)
 ifeq ($(SHARED),1)
-	ln -sf $(LIBTARGET) $(INSTLIBDIR)/$(LIBTARGETSOMAJ)
-	ln -sf $(LIBTARGETSOMAJ) $(INSTLIBDIR)/$(LIBTARGETSO)
-	echo "If you use GNU/Linux, remember to run ldconfig"
+	ln -sf $(LIBTARGET) $(INSTLIBDIR)/$(LIBTARGETSO)
 endif
 
 clean:
