--- makefile.orig	Fri Nov  4 14:23:52 2005
+++ makefile	Mon Jan  1 13:16:52 2007
@@ -1,7 +1,7 @@
 
 # $Id: patch-makefile,v 1.1 2007/01/01 18:25:35 jcooper Exp $
 
-INSTALL	= /opt
+INSTALL	= $(PREFIX)
 
 # Install directories
 
@@ -40,12 +40,13 @@
 	$(MKDIR) $(I_PLG)
 
 install: install_dirs
-	$(CP) aunit/framework/*.ad* aunit/text_reporter/*.ad* $(I_INC)
-	$(CP) aunit/lib/* $(I_LIB)
-	$(CP) template/*.ad* template/*.gpr $(I_TPL)
-	$(CP) docs/*.html docs/*.info docs/*.pdf docs/*.txt $(I_DOC)
-	$(CP) support/aunit.gpr $(I_GPR)
-	$(CP) support/aunit.xml $(I_PLG)
+	$(INSTALL_DATA) aunit/framework/*.ad* aunit/text_reporter/*.ad* \
+		$(I_INC)
+	$(INSTALL_DATA) aunit/lib/* $(I_LIB)
+	$(INSTALL_DATA) template/*.ad* template/*.gpr $(I_TPL)
+	$(INSTALL_DATA) docs/*.html docs/*.info docs/*.pdf docs/*.txt $(I_DOC)
+	$(INSTALL_DATA) support/aunit.gpr $(I_GPR)
+	$(INSTALL_DATA) support/aunit.xml $(I_PLG)
 
 doc:
 	${MAKE} -C docs
@@ -56,7 +57,7 @@
 	gnatmake -Paunit_tests
 	./harness
 
-RMDIR	= rmdir
-MKDIR	= mkdir -p
-RM	= rm
-CP	= cp -p
+RMDIR		= rmdir
+MKDIR		= mkdir -p
+RM		= rm
+INSTALL_DATA	= install -o root -g wheel -m 444
