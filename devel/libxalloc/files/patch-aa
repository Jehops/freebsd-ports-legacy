--- Makefile.orig	Mon Jul  6 02:15:59 1998
+++ Makefile	Tue Jul  4 21:40:59 2000
@@ -8,7 +8,7 @@
 ###########################################################################
 
 # Define SHARED as 1 for Linux shared ELF library
-#SHARED		= 1
+SHARED		= 1
 
 ifeq ($(SHARED),1)
 LIBTARGET	= lib$(DIST).so.$(VERSION)
@@ -24,21 +24,21 @@
 
 ###########################################################################
 
-INSTBASEDIR	= /usr/local
+INSTBASEDIR	= ${PREFIX}
 INSTLIBDIR	= $(INSTBASEDIR)/lib
 INSTINCDIR	= $(INSTBASEDIR)/include
-INSTALL		= install -m 644
-MKDIRP		= install -d -m 755
+INSTALL		= ${BSD_INSTALL_DATA}
+MKDIRP		= install -d -m 755
 
 ###########################################################################
 
-CC		= gcc
+#CC		= gcc
 OPTIM		= -O2
 
 LIBDIR		= -L.
 INCDIR		= -I.
 
-CCOPT		= -Wall $(OPTIM) $(INCDIR)
+CCOPT		= $(INCDIR) $(CFLAGS)
 LDOPT		= $(LIBDIR)
 
 # Object files to store in the library
@@ -50,7 +50,7 @@
 
 $(LIBTARGET): $(LIBOBJS)
 ifeq ($(SHARED),1)
-	$(CC) -shared -Wl,-soname,$(LIBTARGETSOMAJ) -o $(LIBTARGET) $(LIBOBJS)
+	$(CC) -shared -Wl,-soname,$(LIBTARGETSOMAJ) -o $(LIBTARGETSOMAJ) $(LIBOBJS)
 else
 	ar rcs $(LIBTARGET) $(LIBOBJS)
 endif
@@ -63,12 +63,10 @@
 
 install: $(LIBTARGET)
 	$(MKDIRP) $(INSTLIBDIR) $(INSTINCDIR)
-	$(INSTALL) $(LIBTARGET) $(INSTLIBDIR)
+	$(INSTALL) $(LIBTARGETSOMAJ) $(INSTLIBDIR)
 	$(INSTALL) $(LIBHEAD) $(INSTINCDIR)
 ifeq ($(SHARED),1)
-	ln -sf $(LIBTARGET) $(INSTLIBDIR)/$(LIBTARGETSOMAJ)
 	ln -sf $(LIBTARGETSOMAJ) $(INSTLIBDIR)/$(LIBTARGETSO)
-	echo "If you use GNU/Linux, remember to run ldconfig"
 endif
 
 clean:
