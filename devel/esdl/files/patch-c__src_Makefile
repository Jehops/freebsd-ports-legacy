
$FreeBSD$

--- c_src/Makefile.orig	Mon May 26 16:13:17 2003
+++ c_src/Makefile	Fri Jul 18 11:42:01 2003
@@ -5,7 +5,7 @@
 #     $Id: Makefile,v 1.8 2003/05/26 08:00:46 dgud Exp $
 #
 
-OGLDIR  = /usr
+OGLDIR  = ${X11BASE}
 
 # Uncomment these if your opengl header is located in another directory than
 # the usual $(OGLDIR)/include/GL/gl.h
@@ -15,13 +15,13 @@
 GL_LIBS		= -L$(OGLDIR)/lib -lGL -lGLU 
 GL_INCS		= -I$(OGLDIR)/include/$(GL_INCLUDE_DIR)
 
-SDL_LIBS	= $(shell sdl-config --libs)
+SDL_LIBS	= $(shell $(SDL_CONFIG) --libs)
 LIBS		= $(GL_LIBS) $(SDL_LIBS) -lm 
 
-SDLINCS		= $(shell sdl-config --cflags)
+SDLINCS		= $(shell $(SDL_CONFIG) --cflags)
 
-CFLAGS	= -g -O2 -funroll-loops -Wall -ffast-math -fpic -fomit-frame-pointer \
-            $(USE_GL_INCLUDE_DIR) -DSHM -DPTHREADS $(GL_INCS) $(SDLINCS) $(ERLINC)
+CFLAGS	+= -funroll-loops -Wall -ffast-math -fpic -fomit-frame-pointer \
+            $(USE_GL_INCLUDE_DIR) -DSHM -DPTHREADS $(GL_INCS) $(SDLINCS)
 
 TARGETDIR = ../priv
 
@@ -29,8 +29,8 @@
 ERL_DIR := $(shell echo 'io:format("~s~n",[code:root_dir()]),halt().' | erl | sed 's,^[0-9]*> *,,g' | tail +2)
 ERLINC = -I$(ERL_DIR)/usr/include
 
-CC = gcc
-GCC_O	= $(CC) -c $(CFLAGS) $(INCS) $<
+CC ?= gcc
+GCC_O	= $(CC) -c $(CFLAGS) $(INCS) $(ERLINC) $<
 
 # Files
 
