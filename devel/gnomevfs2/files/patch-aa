--- configure.orig	Tue Mar  9 14:55:35 2004
+++ configure	Tue Mar  9 16:41:53 2004
@@ -19711,6 +19711,7 @@
 
 # This can be used to rebuild libtool when needed
 LIBTOOL_DEPS="$ac_aux_dir/ltmain.sh"
+$ac_aux_dir/ltconfig $LIBTOOL_DEPS
 
 # Always use our own libtool.
 LIBTOOL='$(SHELL) $(top_builddir)/libtool'
@@ -24792,6 +24793,7 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/param.h>
 #ifdef HAVE_SYS_VFS_H
 #include <sys/vfs.h>
 #endif
@@ -24844,6 +24846,7 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/param.h>
 #ifdef HAVE_SYS_VFS_H
 #include <sys/vfs.h>
 #endif
@@ -24918,6 +24921,7 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/param.h>
 #ifdef HAVE_SYS_VFS_H
 #include <sys/vfs.h>
 #endif
@@ -24970,6 +24974,7 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/param.h>
 #ifdef HAVE_SYS_VFS_H
 #include <sys/vfs.h>
 #endif
@@ -25044,6 +25049,7 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/param.h>
 #include <unistd.h>
 #ifdef HAVE_SYS_VFS_H
 #include <sys/vfs.h>
@@ -25104,6 +25110,7 @@
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 #include <unistd.h>
+#include <sys/param.h>
 #ifdef HAVE_SYS_VFS_H
 #include <sys/vfs.h>
 #endif
@@ -26099,8 +26106,8 @@
   done
 fi
 
-echo "$as_me:$LINENO: checking for bzCompressInit in -lbz2" >&5
-echo $ECHO_N "checking for bzCompressInit in -lbz2... $ECHO_C" >&6
+echo "$as_me:$LINENO: checking for BZ2_bzCompressInit in -lbz2" >&5
+echo $ECHO_N "checking for BZ2_bzCompressInit in -lbz2... $ECHO_C" >&6
 if test "${ac_cv_lib_bz2_bzCompressInit+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
@@ -26119,11 +26126,11 @@
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char bzCompressInit ();
+char BZ2_bzCompressInit ();
 int
 main ()
 {
-bzCompressInit ();
+BZ2_bzCompressInit ();
   ;
   return 0;
 }
@@ -26917,7 +26924,7 @@
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
-		LDFLAGS="$LDFLAGS -L$with_openssl_libs -lssl -lcrypto -ldl"
+		LDFLAGS="$LDFLAGS -L$with_openssl_libs -lssl -lcryptofoo -ldl"
 		cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -26982,9 +26989,9 @@
 
 		msg_openssl="yes"
                 if test x$with_openssl_libs != x/usr/lib; then
-                        OPENSSL_LIBS="-L$with_openssl_libs -lssl -lcrypto"
+                        OPENSSL_LIBS="-L$with_openssl_libs -lssl -lcryptofoo"
                 else
-                	OPENSSL_LIBS="-lssl -lcrypto"
+                	OPENSSL_LIBS="-lssl -lcryptofoo"
                 fi
 
 
@@ -29285,6 +29292,7 @@
 s,@ORBIT_IDL@,$ORBIT_IDL,;t t
 s,@BONOBO_IDLDIR@,$BONOBO_IDLDIR,;t t
 s,@WARN_CFLAGS@,$WARN_CFLAGS,;t t
+s,@PTHREAD_LIB@,$BSD_PTHREAD_LIBS,;t t
 s,@GETTEXT_PACKAGE@,$GETTEXT_PACKAGE,;t t
 s,@USE_NLS@,$USE_NLS,;t t
 s,@MSGFMT@,$MSGFMT,;t t
