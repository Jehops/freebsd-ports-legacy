--- config/Make.rules.orig	Thu Mar  1 20:11:25 2007
+++ config/Make.rules	Fri Apr 13 19:42:32 2007
@@ -7,6 +7,8 @@
 #
 # **********************************************************************
 
+ICE_HOME		= %%LOCALBASE%%
+
 ifndef ICE_HOME
    ifneq ($(shell test -f /usr/include/Ice/Ice.h && echo 0),0)
       $(error Ice installation not found, please set ICE_HOME!)
@@ -18,7 +20,7 @@
 # if it does not exist.
 #
 
-prefix			= /opt/IcePy-$(VERSION)
+prefix			= %%PREFIX%%
 
 #
 # The "root directory" for runpath embedded in executables. Can be unset
@@ -69,13 +71,13 @@
     # version used for building the Ice extension, then set PYTHON_VERSION
     # to "python2.3" or "python2.4".
     #
-    PYTHON_VERSION	?= $(word 1,$(notdir $(wildcard /usr/include/python2.[345]*)))
+    PYTHON_VERSION	?= $(word 1,$(notdir $(wildcard %%LOCALBASE%%/include/python2.[345]*)))
     ifeq ($(PYTHON_VERSION),)
       python_darwin_home = /System/Library/Frameworks/Python.framework/Versions/Current
       PYTHON_VERSION 	= $(word 1,$(notdir $(wildcard $(python_darwin_home)/include/python2.[345]*)))
     endif
-    PYTHON_INCLUDE_DIR	= /usr/include/$(PYTHON_VERSION)
-    PYTHON_LIB_DIR	= /usr/lib/$(PYTHON_VERSION)/config
+    PYTHON_INCLUDE_DIR	= %%LOCALBASE%%/include/$(PYTHON_VERSION)
+    PYTHON_LIB_DIR	= %%LOCALBASE%%/lib/$(PYTHON_VERSION)/config
 endif
 
 ifeq ($(PYTHON_VERSION),)
@@ -102,10 +104,10 @@
 libdir			= $(top_srcdir)/python
 
 install_slicedir	= $(prefix)/slice
-install_pythondir	= $(prefix)/python
+install_pythondir	= %%PYTHON_SITELIBDIR%%/Ice
 
-INSTALL			= cp -fp
-INSTALL_PROGRAM		= ${INSTALL}
+INSTALL			= install -C  -o root -g wheel -m 444
+INSTALL_PROGRAM		= install -C  -s -o root -g wheel -m 555
 INSTALL_LIBRARY		= ${INSTALL}
 INSTALL_DATA		= ${INSTALL}
 
@@ -136,12 +138,12 @@
 endif
 
 ifneq ($(ICE_HOME),)
-    slicedir		= $(ICE_HOME)/slice
+    slicedir		= $(ICE_HOME)/share/Ice
 else
     slicedir		= /usr/share/Ice-$(VERSION)/slice
 endif
 
-install_libdir	        = $(prefix)/python
+install_libdir	        = %%PYTHON_SITELIBDIR%%/Ice
 
 ifneq ($(embedded_runpath_prefix),)
    ifeq ($(LP64),yes)
