TARGET = Qsci.so
OFILES = sipQscicmodule.o sipQsciQList.o sipQsciQsciPrinter.o sipQsciQsciMacro.o sipQsciQsciLexerVHDL.o sipQsciQsciLexerTeX.o sipQsciQsciLexerSQL.o sipQsciQsciLexerRuby.o sipQsciQsciLexerPython.o sipQsciQsciLexerProperties.o sipQsciQsciLexerPOV.o sipQsciQsciLexerPerl.o sipQsciQsciLexerMakefile.o sipQsciQsciLexerLua.o sipQsciQsciLexerJavaScript.o sipQsciQsciLexerJava.o sipQsciQsciLexerIDL.o sipQsciQsciLexerHTML.o sipQsciQsciLexerDiff.o sipQsciQsciLexerD.o sipQsciQsciLexerCSS.o sipQsciQsciLexerCSharp.o sipQsciQsciLexerCPP.o sipQsciQsciLexerCMake.o sipQsciQsciLexerBatch.o sipQsciQsciLexerBash.o sipQsciQsciLexer.o sipQsciQsciDocument.o sipQsciQsciCommandSet.o sipQsciQsciCommand.o sipQsciQsciAPIs.o sipQsciQsciScintillaBase.o sipQsciQsciScintilla.o
HFILES = sipAPIQsci.h 

CC = cc
CXX = c++
LINK = c++
CPPFLAGS = -DQT_NO_DEBUG -DQT_CORE_LIB -DQT_GUI_LIB\
		-I%%LOCALBASE%%/include/python%%PYVER%%\
		-I%%LOCALBASE%%/share/qt4/mkspecs/freebsd-g++\
		-I%%QT_INCDIR%%/QtCore\
		-I%%QT_INCDIR%%/QtGui\
		-I%%QT_INCDIR%%\
		-I. -I%%LOCALBASE%%/include
CFLAGS = -pipe -fPIC -O2 -fno-strict-aliasing -Wall -W
CXXFLAGS = -pipe -fPIC -O2 -fno-strict-aliasing -Wall -W
LFLAGS = -shared -pthread -Wl,-rpath,%%LOCALBASE%%/lib
LIBS = -L%%QT_LIBDIR%% -L%%LOCALBASE%%/lib -lqscintilla2 -lQtCore -lz -lm -pthread\
	-lgthread-2.0 -lglib-2.0 -liconv -lQtGui -lXt -lpng -lSM -lICE\
	-lXi -lXrender -lXrandr -lXfixes -lXcursor -lXinerama -lfreetype\
	-lfontconfig -lXext -lX11
MOC = %%LOCALBASE%%/bin/moc-qt4
.SUFFIXES: .c .o .cpp .cc .cxx .C


.cpp.o:
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

.cxx.o:
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

.C.o:
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

.c.o:
	$(CC) -c $(CFLAGS) $(CPPFLAGS) -o $@ $<

$(TARGET): $(OFILES)
	$(LINK) $(LFLAGS) -o $(TARGET) $(OFILES) $(LIBS)

$(OFILES): $(HFILES)

install: $(TARGET)
	@test -d $(DESTDIR)%%LOCALBASE%%/lib/python%%PYVER%%/site-packages/PyQt4 || mkdir -p $(DESTDIR)%%LOCALBASE%%/lib/python%%PYVER%%/site-packages/PyQt4
	cp -f $(TARGET) $(DESTDIR)%%LOCALBASE%%/lib/python%%PYVER%%/site-packages/PyQt4/$(TARGET)
	@test -d $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci || mkdir -p $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci
	cp -f sip/qscilexermakefile.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexermakefile.sip
	cp -f sip/qscilexerperl.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerperl.sip
	cp -f sip/qscicommand.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscicommand.sip
	cp -f sip/qscilexercmake.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexercmake.sip
	cp -f sip/qscilexercpp.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexercpp.sip
	cp -f sip/qscilexerproperties.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerproperties.sip
	cp -f sip/qscilexercss.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexercss.sip
	cp -f sip/qscilexer.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexer.sip
	cp -f sip/qscilexerdiff.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerdiff.sip
	cp -f sip/qscicommandset.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscicommandset.sip
	cp -f sip/qscilexerhtml.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerhtml.sip
	cp -f sip/qsciprinter.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qsciprinter.sip
	cp -f sip/qscilexerruby.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerruby.sip
	cp -f sip/qscimod3.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscimod3.sip
	cp -f sip/qscimod4.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscimod4.sip
	cp -f sip/qscilexersql.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexersql.sip
	cp -f sip/qscilexertex.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexertex.sip
	cp -f sip/qscimacro.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscimacro.sip
	cp -f sip/qscilexerlua.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerlua.sip
	cp -f sip/qsciapis.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qsciapis.sip
	cp -f sip/qsciscintilla.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qsciscintilla.sip
	cp -f sip/qscidocument.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscidocument.sip
	cp -f sip/qscimodcommon.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscimodcommon.sip
	cp -f sip/qscilexeridl.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexeridl.sip
	cp -f sip/qscilexerjava.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerjava.sip
	cp -f sip/qscilexerd.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerd.sip
	cp -f sip/qscilexervhdl.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexervhdl.sip
	cp -f sip/qscilexerpython.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerpython.sip
	cp -f sip/qscilexerjavascript.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerjavascript.sip
	cp -f sip/qscilexercsharp.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexercsharp.sip
	cp -f sip/qscilexerpov.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerpov.sip
	cp -f sip/qscilexerbatch.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerbatch.sip
	cp -f sip/qsciscintillabase3.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qsciscintillabase3.sip
	cp -f sip/qsciscintillabase4.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qsciscintillabase4.sip
	cp -f sip/qscilexerbash.sip $(DESTDIR)%%LOCALBASE%%/share/py-sip/Qsci/qscilexerbash.sip
	@test -d $(DESTDIR)%%LOCALBASE%%/share/qt4/qsci/api/python || mkdir -p $(DESTDIR)%%LOCALBASE%%/share/qt4/qsci/api/python
	cp -f QScintilla2.api $(DESTDIR)%%LOCALBASE%%/share/qt4/qsci/api/python/QScintilla2.api

clean:
	-rm -f $(TARGET)
	-rm -f sipQscicmodule.o
	-rm -f sipQsciQList.o
	-rm -f sipQsciQsciPrinter.o
	-rm -f sipQsciQsciMacro.o
	-rm -f sipQsciQsciLexerVHDL.o
	-rm -f sipQsciQsciLexerTeX.o
	-rm -f sipQsciQsciLexerSQL.o
	-rm -f sipQsciQsciLexerRuby.o
	-rm -f sipQsciQsciLexerPython.o
	-rm -f sipQsciQsciLexerProperties.o
	-rm -f sipQsciQsciLexerPOV.o
	-rm -f sipQsciQsciLexerPerl.o
	-rm -f sipQsciQsciLexerMakefile.o
	-rm -f sipQsciQsciLexerLua.o
	-rm -f sipQsciQsciLexerJavaScript.o
	-rm -f sipQsciQsciLexerJava.o
	-rm -f sipQsciQsciLexerIDL.o
	-rm -f sipQsciQsciLexerHTML.o
	-rm -f sipQsciQsciLexerDiff.o
	-rm -f sipQsciQsciLexerD.o
	-rm -f sipQsciQsciLexerCSS.o
	-rm -f sipQsciQsciLexerCSharp.o
	-rm -f sipQsciQsciLexerCPP.o
	-rm -f sipQsciQsciLexerCMake.o
	-rm -f sipQsciQsciLexerBatch.o
	-rm -f sipQsciQsciLexerBash.o
	-rm -f sipQsciQsciLexer.o
	-rm -f sipQsciQsciDocument.o
	-rm -f sipQsciQsciCommandSet.o
	-rm -f sipQsciQsciCommand.o
	-rm -f sipQsciQsciAPIs.o
	-rm -f sipQsciQsciScintillaBase.o
	-rm -f sipQsciQsciScintilla.o
