--- configure.orig	Sun Jul 25 03:43:08 2004
+++ configure	Sun Jul 25 03:54:07 2004
@@ -23359,17 +23359,15 @@
 if test x$have_abstract_sockets = xyes ; then
    abstract_sockets=1
    DBUS_PATH_OR_ABSTRACT=abstract
+   cat >>confdefs.h <<_ACEOF
+#define HAVE_ABSTRACT_SOCKETS $abstract_sockets
+_ACEOF
 else
    abstract_sockets=0
    DBUS_PATH_OR_ABSTRACT=path
 fi
 
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_ABSTRACT_SOCKETS $abstract_sockets
-_ACEOF
-
-
 # this is used in addresses to prefer abstract, e.g.
 # unix:path=/foo or unix:abstract=/foo
 
@@ -24198,14 +24196,14 @@
 echo "${ECHO_T}not found" >&6
 fi
 
-if (! kde-config >& /dev/null); then
+if (! kde-config > /dev/null 2>&1); then
     have_qt=no
 else
     kdelibs=`kde-config --install lib --expandvars 2>/dev/null`
-    if test -z $kdelibs -o ! -f $kdelibs/libkdecore.la; then
+    if test -z $kdelibs -o ! -f $kdelibs/libkdecore.so; then
         have_qt=no
     else
-        DBUS_QT_LIBS="$kdelibs/libkdecore.la"
+        DBUS_QT_LIBS="$kdelibs/libkdecore.so"
     fi
 fi
 
