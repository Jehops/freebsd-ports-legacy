--- configure	Tue Aug 21 01:52:30 2001
+++ configure	Fri Feb  8 11:52:30 2002
@@ -1487,5 +1487,5 @@
 #include "confdefs.h"
 
-main(){return(0);}
+int main(){return(0);}
 EOF
 if { (eval echo configure:1492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
@@ -2658,7 +2658,7 @@
 
 if test "${SHARED_BUILD}" = "1" ; then
-    CFLAGS='${CFLAGS_DEFAULT} ${CFLAGS_WARNING} ${SHLIB_CFLAGS}'
+    CFLAGS='${CFLAGS_WARNING} ${SHLIB_CFLAGS}'
 else
-    CFLAGS='${CFLAGS_DEFAULT} ${CFLAGS_WARNING}'
+    CFLAGS='${CFLAGS_WARNING}'
 fi
 
@@ -2690,6 +2690,6 @@
 	    ;;
 	*)
-	    MAKE_STATIC_LIB="\${STLIB_LD} \$@ \$(\$@_OBJECTS)"
-	    MAKE_SHARED_LIB="\${SHLIB_LD} -o \$@ \$(\$@_OBJECTS) \${SHLIB_LDFLAGS} \${SHLIB_LD_LIBS}"
+	    MAKE_STATIC_LIB="\${STLIB_LD} \$@ \$(.ALLSRC)"
+	    MAKE_SHARED_LIB="\${SHLIB_LD} -o \$@ \$(.ALLSRC) \${SHLIB_LDFLAGS} \${SHLIB_LD_LIBS}"
 	    ;;
     esac
