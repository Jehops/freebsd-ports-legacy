--- ltconfig.orig	Thu Apr 29 15:30:36 1999
+++ ltconfig	Sat May 22 15:52:24 1999
@@ -169,7 +169,7 @@
 # Constants:
 PROGRAM=ltconfig
 PACKAGE=libtool
-VERSION=1.3
+VERSION=1.3-freebsd-ports
 TIMESTAMP=" (1.385.2.117 1999/04/29 13:07:13)"
 ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.c 1>&5'
 ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.c $LIBS 1>&5'
@@ -184,6 +184,7 @@
 # All known linkers require a `.a' archive for static linking.
 enable_static=yes
 enable_fast_install=yes
+install_ltlibs=no
 enable_dlopen=unknown
 enable_win32_dll=no
 ltmain=
@@ -244,6 +245,7 @@
     --disable-shared       do not build shared libraries
     --disable-static       do not build static libraries
     --disable-fast-install do not optimize for fast installation
+    --install-ltlibs       install the .la archives
     --enable-dlopen        enable dlopen support
     --enable-win32-dll     enable building dlls on win32 hosts
     --help                 display this help and exit
@@ -277,6 +279,8 @@
 
   --disable-fast-install) enable_fast_install=no ;;
 
+  --install-ltlibs) install_ltlibs=yes ;;
+
   --enable-dlopen) enable_dlopen=yes ;;
 
   --enable-win32-dll) enable_win32_dll=yes ;;
@@ -927,11 +931,11 @@
   $rm conftest.dat
   if ln -s X conftest.dat 2>/dev/null; then
     $rm conftest.dat
-    LN_S="ln -s"
+    LN_S="ln -sf"
   else
     LN_S=ln
   fi
-  if test "$LN_S" = "ln -s"; then
+  if test "$LN_S" = "ln -sf"; then
     echo "$ac_t"yes 1>&6
   else
     echo "$ac_t"no 1>&6
@@ -1742,19 +1746,17 @@
   case "$version_type" in
     freebsd-elf*)
       deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'
-      file_magic_cmd=/usr/bin/file
-      file_magic_test_file=`echo /usr/lib/libc.so*`
-      library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so $libname.so'
-      need_version=no
-      need_lib_prefix=no
       ;;
     freebsd-*)
-      deplibs_check_method=unknown
-      library_names_spec='${libname}${release}.so$versuffix $libname.so$versuffix'
-      need_version=yes
+      deplibs_check_method='file_magic FreeBSD.* shared library'
       ;;
   esac
-  finish_cmds='PATH="\$PATH:/sbin" OBJFORMAT="'"$objformat"'" ldconfig -m $libdir'
+  file_magic_cmd=/usr/bin/file
+  file_magic_test_file=`echo /usr/lib/libc.so.*`
+  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so'
+  need_version=no
+  need_lib_prefix=no
+  finish_cmds='/usr/bin/env OBJFORMAT="'"$objformat"'" /sbin/ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
@@ -2613,6 +2615,12 @@
 
 # Shell to use when invoking shell scripts.
 SHELL=$LTSHELL
+
+# Install PREFIX
+PREFIX=$PREFIX
+
+# Whether to waste disk space.
+install_ltlibs=$install_ltlibs 
 
 # Whether or not to build shared libraries.
 build_libtool_libs=$enable_shared
