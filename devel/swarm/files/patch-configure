--- configure.orig	Sun Mar 26 05:00:14 2000
+++ configure	Tue Nov  4 01:12:43 2003
@@ -1306,7 +1306,7 @@
 test -n "$OBJC" || OBJC="$CC"
 
 test -n "$OBJCFLAGS" || OBJCFLAGS="$CFLAGS"
-OBJCFLAGS="$OBJCFLAGS -Wall -Wno-import -Wno-protocol -Werror"
+OBJCFLAGS="$OBJCFLAGS -Wall -Wno-import -Wno-protocol"
 
 
 # Check whether --enable-shared or --disable-shared was given.
@@ -1691,8 +1691,8 @@
 LD="$LD" LDFLAGS="$LDFLAGS" LIBS="$LIBS" \
 LN_S="$LN_S" NM="$NM" RANLIB="$RANLIB" \
 DLLTOOL="$DLLTOOL" AS="$AS" OBJDUMP="$OBJDUMP" \
-${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \
-$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $host \
+${CONFIG_SHELL-/bin/sh} %%LTCONFIG%% --no-reexec \
+$libtool_flags --no-verify --disable-ltlibs %%LTMAIN%% $host \
 || { echo "configure: error: libtool configure failed" 1>&2; exit 1; }
 
 # Reload cache, that may have been modified by ltconfig
@@ -1706,7 +1706,7 @@
 
 
 # This can be used to rebuild libtool when needed
-LIBTOOL_DEPS="$ac_aux_dir/ltconfig $ac_aux_dir/ltmain.sh"
+LIBTOOL_DEPS="%%LTCONFIG%% %%LTMAIN%%"
 
 # Always use our own libtool.
 LIBTOOL='$(SHELL) $(top_builddir)/libtool'
@@ -2926,6 +2926,36 @@
 if test -n "$with_tcldir" ; then               
   PATH=${with_tcldir}/bin:$PATH
 fi
+# Extract the first word of "tclsh8.4", so it can be a program name with args.
+set dummy tclsh8.4; ac_word=$2
+echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
+echo "configure:2933: checking for $ac_word" >&5
+if eval "test \"`echo '$''{'ac_cv_prog_tclsh84_found'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  if test -n "$tclsh83_found"; then
+  ac_cv_prog_tclsh84_found="$tclsh84_found" # Let the user override the test.
+else
+  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
+  ac_dummy="$PATH"
+  for ac_dir in $ac_dummy; do
+    test -z "$ac_dir" && ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      ac_cv_prog_tclsh84_found="yes"
+      break
+    fi
+  done
+  IFS="$ac_save_ifs"
+  test -z "$ac_cv_prog_tclsh84_found" && ac_cv_prog_tclsh84_found="no"
+fi
+fi
+tclsh84_found="$ac_cv_prog_tclsh84_found"
+if test -n "$tclsh84_found"; then
+  echo "$ac_t""$tclsh84_found" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+fi
+
 # Extract the first word of "tclsh8.3", so it can be a program name with args.
 set dummy tclsh8.3; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
@@ -3085,7 +3115,9 @@
   fi
 fi
 tclLibrary=''
-if test $tclsh83_found = yes; then
+if test $tclsh84_found = yes; then
+  tclLibrary=`echo "puts [info library]" | tclsh8.4`
+elif test $tclsh83_found = yes; then
   tclLibrary=`echo "puts [info library]" | tclsh8.3`
 elif test $tclsh82_found = yes; then
   tclLibrary=`echo "puts [info library]" | tclsh8.2`
@@ -3195,7 +3227,7 @@
         break
       fi
     else
-      for version in 83 8.3 82 8.2 81 8.1 80 8.0 76 7.6 7.5 7.4 ''; do
+      for version in 84 8.4 83 8.3 82 8.2 81 8.1 80 8.0 76 7.6 7.5 7.4 ''; do
         if test -r $expand_dir/libtcl${version}${suffix}; then
           tcllibdir=$dir  
           tcllibname=tcl$version
@@ -3352,7 +3384,7 @@
         break
       fi
     else
-      for version in 83 8.3 82 8.2 81 8.1 80 8.0 42 4.2 4.1 4.0 ''; do
+      for version in 84 8.4 83 8.3 82 8.2 81 8.1 80 8.0 42 4.2 4.1 4.0 ''; do
         if test -r $expand_dir/libtk${version}${suffix}; then
           tklibdir=$dir
           tklibname=tk${version}
@@ -4108,7 +4140,7 @@
 echo $ac_n "checking how to avoid implicit int return warning""... $ac_c" 1>&6
 echo "configure:4110: checking how to avoid implicit int return warning" >&5
 CFLAGS_NOWARN_IMPLICIT_INT=-Wno-implicit-int
-CFLAGS="-Wall -Werror $CFLAGS_NOWARN_IMPLICIT_INT $CFLAGS"
+CFLAGS="-Wall $CFLAGS_NOWARN_IMPLICIT_INT $CFLAGS"
 cat > conftest.$ac_ext <<EOF
 #line 4114 "configure"
 #include "confdefs.h"
@@ -4133,7 +4165,7 @@
 echo $ac_n "checking how to avoid unknown pragma warning""... $ac_c" 1>&6
 echo "configure:4135: checking how to avoid unknown pragma warning" >&5
 CFLAGS_NOWARN_UNKNOWN_PRAGMAS=-Wno-unknown-pragmas
-CFLAGS="-Wall -Werror $CFLAGS_NOWARN_UNKNOWN_PRAGMAS"
+CFLAGS="-Wall $CFLAGS_NOWARN_UNKNOWN_PRAGMAS"
 cat > conftest.$ac_ext <<EOF
 #line 4139 "configure"
 #include "confdefs.h"
@@ -5049,6 +5081,7 @@
       JAVAINCLUDES="$JAVAINCLUDES -I$jdkincludedir/freebsd"
       threads=green
       proc=i386
+      JAVACMD="\${jdkdir}/bin/java"
     elif test -f $expand_jdkincludedir/irix/jni_md.h; then
       JAVAINCLUDES="$JAVAINCLUDES -I$jdkincludedir/irix"
       threads=green
