--- make/linux/Makefile.orig	2011-01-21 01:11:45.000000000 -0500
+++ make/linux/Makefile	2011-01-21 01:18:16.000000000 -0500
@@ -3,18 +3,17 @@
 #
 
 TARGET	= libdistorm3.so
-COBJS	= ../../mnemonics.o ../../src/wstring.o ../../src/textdefs.o ../../src/x86defs.o ../../src/prefix.o ../../src/operands.o ../../src/insts.o ../../src/instructions.o ../../src/distorm.o ../../src/decoder.o
-CC	= gcc
-CFLAGS	= -fPIC -O2 -Wall -DSUPPORT_64BIT_OFFSET -DLIBDISTORM
+COBJS	= ../../include/mnemonics.o ../../src/wstring.o ../../src/textdefs.o ../../src/x86defs.o ../../src/prefix.o ../../src/operands.o ../../src/insts.o ../../src/instructions.o ../../src/distorm.o ../../src/decoder.o
+CFLAGS	+= -fPIC -DSUPPORT_64BIT_OFFSET -DLIBDISTORM
 
 all: clib
 
 clean:
-	/bin/rm -rf ../../src/*.o ${TARGET} ../../distorm3.a ../../mnemonics.o ../../*.o
+	/bin/rm -rf ../../src/*.o ${TARGET} libdistorm3.a ../../include/mnemonics.o
 
 clib: ${COBJS}
-	${CC} ${CFLAGS} ${VERSION} ${COBJS} -shared -o ${TARGET}
-	ar rs ../../distorm3.a ${COBJS}
+	${CC} ${CFLAGS} ${LDFLAGS} ${COBJS} -shared -o ${TARGET}
+	${AR} rs libdistorm3.a ${COBJS}
 
 install: libdistorm3.so
 	install -s ${TARGET} /usr/local/lib
