# ex:ts=8
# Ports collection makefile for:	g-wrap
# Date created:		Jun 29, 2000
# Whom:			Matthew Condell (mcondell@alum.mit.edu)
#
# $FreeBSD$
#    $MCom: ports/devel/g-wrap/Makefile,v 1.4 2006/09/12 21:27:18 ahze Exp $

PORTNAME=	g-wrap
PORTVERSION=	1.9.6
PORTREVISION=	2
CATEGORIES=	devel scheme
MASTER_SITES=	SAVANNAH

MAINTAINER=	gnome@FreeBSD.org
COMMENT=	A tool for exporting C libraries into Scheme interpreters

BUILD_DEPENDS=	slib-guile>0:${PORTSDIR}/lang/slib-guile
LIB_DEPENDS=	guile.15:${PORTSDIR}/lang/guile
RUN_DEPENDS=	slib-guile>0:${PORTSDIR}/lang/slib-guile

INFO=		g-wrap

USE_LDCONFIG=	yes
GNU_CONFIGURE=	yes
USE_GMAKE=	yes
USE_GNOME=	glib20 gnomehack

post-patch:
	@${REINPLACE_CMD} -e 's|"glib"|"glib-2.0"|' \
		${WRKSRC}/configure

pre-install:
	@${REINPLACE_CMD} -e 's|libffi||' ${WRKSRC}/${MAKEFILE}

post-install:
	${MKDIR} ${PREFIX}/include/g-wrap/ffi
.for f in ffi.h ffitarget.h
	${INSTALL_DATA} ${WRKSRC}/libffi/include/${f} ${PREFIX}/include/g-wrap/ffi
.endfor

.include <bsd.port.mk>
