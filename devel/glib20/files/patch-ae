--- configure.orig	Fri Jul 14 22:09:59 2000
+++ configure	Tue Jul 18 10:06:24 2000
@@ -4580,6 +4580,12 @@
 	  linux*)
 	    G_MODULE_LDFLAGS='-rdynamic'
 	    ;;
+	  freebsd*)
+	    objformat=`test -x /usr/bin/objformat && /usr/bin/objformat || echo aout`
+	    if test $objformat = "elf"; then
+	      G_MODULE_LDFLAGS='-Wl,-E'
+	    fi
+	    ;;
 	esac
 	LIBS_orig="$LIBS"
 	LDFLAGS_orig="$LDFLAGS"
@@ -4864,8 +4870,8 @@
 				add_thread_lib=""
 				IN=""
 			else
-				add_thread_lib="-l$thread_lib"
-				IN=" in -l$thread_lib"
+				add_thread_lib="-$thread_lib"
+				IN=" in -$thread_lib"
 			fi
 			if test x"$have_threads" = xposix; then
 				defattr=NULL
@@ -5042,7 +5048,7 @@
 
 if test x"$enable_threads" = xyes; then
 
-    G_THREAD_CFLAGS="$G_THREAD_CFLAGS -D_REENTRANT" # good default guess
+    G_THREAD_CFLAGS="$G_THREAD_CFLAGS -D_REENTRANT -D_THREAD_SAFE" # good default guess
 
     case $host in
 	*-aix*)
