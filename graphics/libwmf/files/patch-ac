--- libxfig/Makefile.in.orig	Wed Sep 27 06:00:22 2000
+++ libxfig/Makefile.in	Sat Nov  4 20:08:07 2000
@@ -28,7 +28,7 @@
 
 SHELL = /bin/sh
 
-.SUFFIXES: .C .o
+.SUFFIXES: .c .o .so
 
 XFOBJECTS = \
 	color.o \
@@ -41,18 +41,26 @@
 	epsfileops.o
 
 
-all: libxfig.a libeps.a
+all: libxfig.a libxfig.so.1 libeps.a libeps.so.1
 
 libxfig.a:  $(XFOBJECTS)
 	$(AR) rc libxfig.a $(XFOBJECTS)
 	$(RANLIB) libxfig.a 
 
+libxfig.so.1:  $(XFOBJECTS:.o=.so)
+	$(CC) -shared -Wl,-soname,$@ -o $@ $(XFOBJECTS:.o=.so) $(LIBS)
+	ln -sf libxfig.so.1 libxfig.so
+
 libeps.a:  $(EPSOBJECTS)
 	$(AR) rc libeps.a $(EPSOBJECTS)
 	$(RANLIB) libeps.a 
 
-%.o: %.c
-	$(CC) $(CFLAGS) -c $*.c
+libeps.so.1:  $(EPSOBJECTS:.o=.so)
+	$(CC) -shared -Wl,-soname,$@ -o $@ $(EPSOBJECTS:.o=.so) $(LIBS)
+	ln -sf libeps.so.1 libeps.so
+
+.c.so:
+	$(CC) $(CFLAGS) -fPIC -DPIC -o $@ -c $<
 
 clean:
 	rm -rf *.o *.a core
@@ -62,7 +70,11 @@
 
 install: all installdirs
 	$(INSTALL_DATA) libxfig.a @libdir@/libxfig.a
+	$(INSTALL_DATA) libxfig.so.1 @libdir@/libxfig.so.1
+	ln -sf libxfig.so.1 @libdir@/libxfig.so
 	$(INSTALL_DATA) libeps.a @libdir@/libeps.a
+	$(INSTALL_DATA) libeps.so.1 @libdir@/libeps.so.1
+	ln -sf libeps.so.1 @libdir@/libeps.so
 
 installdirs:
 	$(MKINSTALLDIRS) @libdir@ \
