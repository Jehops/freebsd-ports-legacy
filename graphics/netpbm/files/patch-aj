--- pbmplus.h.orig	Sat May  6 16:37:46 2000
+++ pbmplus.h	Mon May  8 00:00:00 2000
@@ -25,6 +25,9 @@
 #include <errno.h>
 #endif
 #endif
+#if (defined(__unix__) || defined(unix)) && !defined(USG)
+#include <sys/param.h>
+#endif
 
 #if defined(USG) || defined(SVR4) || defined(VMS) || defined(__SVR4)
 #define SYSV
@@ -35,7 +38,7 @@
 ** and if you run on an Amiga, set AMIGA. If your compiler is ANSI C, you're
 ** probably better off setting SYSV - all it affects is string handling.
 */
-#define BSD
+/* #define BSD */
 /* #define SYSV */
 /* #define MSDOS */
 /* #define AMIGA */
@@ -50,7 +53,7 @@
    might be already set right now.  I couldn't figure out how, so I changed
    their meanings and they are now set unconditionally.  -Bryan 00.05.03.
 */
-#define RGB_DB1 "/usr/lib/X11/rgb.txt"
+#define RGB_DB1 "%%X11BASE%%/lib/X11/rgb.txt"
 #define RGB_DB2 "/usr/openwin/lib/rgb.txt"
 #ifdef VMS
 #define RGB_DB1 "PBMplus_Dir:RGB.TXT"
@@ -286,37 +289,6 @@
 int pm_writelittleshort ARGS(( FILE* out, short s ));
 int pm_readlittlelong ARGS(( FILE* in, long* lP ));
 int pm_writelittlelong ARGS(( FILE* out, long l ));
-
-/* By making this <> instead of "", we avoid making shhopt.h a dependency
-   of every program in the package when we do make dep.
-*/
-#include <shhopt.h>
-
-void pm_optParseOptions(int *argc, char *argv[],
-                        optStruct opt[], int allowNegNum);
-/* Use pm_optParseOptions instead of optParseOptions in order to use the
-   shared Netpbm libraries
-*/
-
-/* You can use OPTENTRY to assign a value to a dynamically or automatically
-   allocated optStruct structure with minimal typing and easy readability.
-
-   Here is an example:
-
-       unsigned int option_def_index = 0;
-       optStruct *option_def = malloc(100*sizeof(optStruct));
-       OPTENTRY('h', "help",     OPT_FLAG, &help_flag, 0);
-       OPTENTRY(0,   "alphaout", OPT_STRING, &alpha_filename, 0);
-*/       
-
-#define OPTENTRY(shortvalue,longvalue,typevalue,outputvalue,flagvalue) {\
-    option_def[option_def_index].shortName = (shortvalue); \
-    option_def[option_def_index].longName = (longvalue); \
-    option_def[option_def_index].type = (typevalue); \
-    option_def[option_def_index].arg = (outputvalue); \
-    option_def[option_def_index].flags = (flagvalue); \
-    option_def[++option_def_index].type = OPT_END; \
-    }
 
 /* Compatibility stuff */
 
