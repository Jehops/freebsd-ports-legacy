# $FreeBSD$

PREFIX?=	/usr/local
SHLIB_VER?=	2

LIB=		gd1
LIBDIR=		${PREFIX}/lib
SHLIB_MAJOR=	${SHLIB_VER}
SHLIB_MINOR=	0
NOPROFILE=	yes
NOOBJ=		yes

INCS=		gd.h gd_io.h gdcache.h gdfontg.h gdfontl.h gdfontmb.h \
		gdfonts.h gdfontt.h
INCSDIR=	${PREFIX}/include/gd
INCDIR=		${INSCDIR}	# for pre-bsd.incs.mk API

SRCS=		gd.c gd_gd.c gd_gd2.c gd_io.c gd_io_dp.c gd_io_file.c gd_ss.c \
		gd_io_ss.c gd_png.c gd_jpeg.c gdxpm.c gdfontt.c gdfonts.c \
		gdfontmb.c gdfontl.c gdfontg.c gdtables.c gdft.c gdttf.c \
		gdcache.c gdkanji.c wbmp.c gd_wbmp.c gdhelpers.c gd_gif_in.c

CFLAGS+=	-I${.CURDIR} -I${LOCALBASE}/include/freetype2/freetype \
		-I${LOCALBASE}/include/freetype2 -I${LOCALBASE}/include \
		-DHAVE_LIBPNG -DHAVE_LIBJPEG -DHAVE_LIBFREETYPE -DHAVE_LIBZ
LDADD=		-L${LOCALBASE}/lib -lfreetype -ljpeg -lpng -lz

.ifdef WITH_X11
CFLAGS+=	-I${X11BASE}/include/X11 -I${X11BASE}/include -DHAVE_LIBXPM
LDADD+=		-L${X11BASE}/lib -lXpm -lX11
.endif

beforeinstall:
	mkdir -p ${INCSDIR}

.include <bsd.lib.mk>
