--- flip.c.orig	Thu Dec 18 23:22:17 1997
+++ flip.c	Thu Dec 18 23:22:59 1997
@@ -659,15 +659,15 @@
 static void selectsupported(aa_context * c)
 {
     int supported = 0;
-    if (c->driver->params.supported & AA_NORMAL_MASK)
+    if (c->params.supported & AA_NORMAL_MASK)
 	supported |= yesno(0, 0, "May I use normal text?          ") ? AA_NORMAL_MASK : 0;
-    if (c->driver->params.supported & AA_DIM_MASK)
+    if (c->params.supported & AA_DIM_MASK)
 	supported |= yesno(0, 1, "May I use half bright(dim)?     ") ? AA_DIM_MASK : 0;
-    if (c->driver->params.supported & AA_BOLD_MASK)
+    if (c->params.supported & AA_BOLD_MASK)
 	supported |= yesno(0, 2, "May I use bold as double bright?") ? AA_BOLD_MASK : 0;
-    if (c->driver->params.supported & AA_BOLDFONT_MASK)
+    if (c->params.supported & AA_BOLDFONT_MASK)
 	supported |= yesno(0, 3, "May I use bold as bold font?    ") ? AA_BOLDFONT_MASK : 0;
-    if (c->driver->params.supported & AA_REVERSE_MASK)
+    if (c->params.supported & AA_REVERSE_MASK)
 	supported |= yesno(0, 4, "May I use reversed text?        ") ? AA_REVERSE_MASK : 0;
     aa_setsupported(c, supported);
 }
--- image.c.orig	Thu Dec 18 23:21:31 1997
+++ image.c	Thu Dec 18 23:21:50 1997
@@ -1,5 +1,5 @@
 #include <stdio.h>
-#include <malloc.h>
+#include <stdlib.h>
 
 int imgwidth, imgheight;
 unsigned char *imgdata;
--- ui.c.orig	Thu Dec 18 23:20:31 1997
+++ ui.c	Thu Dec 18 23:22:05 1997
@@ -1,6 +1,6 @@
 #include <stdio.h>
+#include <stdlib.h>
 #include <ctype.h>
-#include <malloc.h>
 #include <string.h>
 #include <aalib.h>
 #include "shrink.h"
@@ -56,15 +56,15 @@
 static void selectsupported(aa_context * c)
 {
     int supported = 0;
-    if (c->driver->params.supported & AA_NORMAL_MASK)
+    if (c->params.supported & AA_NORMAL_MASK)
 	supported |= yesno(0, 0, "May I use normal text?          ") ? AA_NORMAL_MASK : 0;
-    if (c->driver->params.supported & AA_DIM_MASK)
+    if (c->params.supported & AA_DIM_MASK)
 	supported |= yesno(0, 1, "May I use half bright(dim)?     ") ? AA_DIM_MASK : 0;
-    if (c->driver->params.supported & AA_BOLD_MASK)
+    if (c->params.supported & AA_BOLD_MASK)
 	supported |= yesno(0, 2, "May I use bold as double bright?") ? AA_BOLD_MASK : 0;
-    if (c->driver->params.supported & AA_BOLDFONT_MASK)
+    if (c->params.supported & AA_BOLDFONT_MASK)
 	supported |= yesno(0, 3, "May I use bold as bold font?    ") ? AA_BOLDFONT_MASK : 0;
-    if (c->driver->params.supported & AA_REVERSE_MASK)
+    if (c->params.supported & AA_REVERSE_MASK)
 	supported |= yesno(0, 4, "May I use reversed text?        ") ? AA_REVERSE_MASK : 0;
     aa_setsupported(c, supported);
 }
--- asciiview.orig	Thu Dec 18 23:25:19 1997
+++ asciiview	Thu Dec 18 23:25:29 1997
@@ -1,3 +1,4 @@
+#!/bin/sh
 # asciiview - an ascii art image browser script. Front end for aview/aaflip
 clear()
 {
