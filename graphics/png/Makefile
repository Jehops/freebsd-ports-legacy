# New ports collection makefile for:    PNG images library
# Date created:         5 Dec 1995
# Whom:                 ache
#
# $FreeBSD$
#

PORTNAME=	png
PORTVERSION=    1.2.2
PORTREVISION=   2
CATEGORIES=	graphics
MASTER_SITES=	http://www.libpng.org/pub/png/src/ \
		ftp://swrinde.nde.swri.edu/pub/png/src/ \
		${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR=	lib${PORTNAME}
DISTNAME=	lib${PORTNAME}-${PORTVERSION}

#PATCH_SITES=	ftp://ftp.libpng.org/pub/png/src/
#PATCHFILES=

MAINTAINER=	ache@FreeBSD.org

MAKEFILE=       ${WRKSRC}/scripts/makefile.freebsd
INSTALLS_SHLIB=	yes
SHLIB_VER=	5

MAKE_ENV=	SHLIB_VER="${SHLIB_VER}"
PLIST_SUB=	SHLIB_VER="${SHLIB_VER}"

MAN3=		libpng.3 libpngpf.3
MAN5=		png.5
MANCOMPRESSED=	maybe

.include <bsd.port.pre.mk>

post-extract:
# Please don't delete the following line - this link used by ghostscript* ports
	@${LN} -sf ${WRKSRC} ${WRKDIR}/libpng

post-patch:
	${CP} ${FILESDIR}/makefile.freebsd ${WRKSRC}/scripts/

pre-install:
	@[ -d ${PREFIX}/include/libpng ] || ${MKDIR} ${PREFIX}/include/libpng

.include <bsd.port.post.mk>
