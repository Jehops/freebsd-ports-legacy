--- drm_os_freebsd.h.orig	Thu Jan 31 13:44:39 2002
+++ drm_os_freebsd.h	Sat Apr 13 14:43:40 2002
@@ -47,7 +47,7 @@
 
 #if __FreeBSD_version >= 500000
 #define DRM_OS_SPINTYPE		struct mtx
-#define DRM_OS_SPININIT(l,name)	mtx_init(&l, name, MTX_DEF)
+#define DRM_OS_SPININIT(l,name)	mtx_init(&l, name, NULL, MTX_DEF)
 #define DRM_OS_SPINLOCK(l)	mtx_lock(l)
 #define DRM_OS_SPINUNLOCK(u)	mtx_unlock(u);
 #define DRM_OS_LOCK	lockmgr(&dev->dev_lock, LK_EXCLUSIVE, 0, curthread)
@@ -56,7 +56,7 @@
 #define DRM_OS_STRUCTPROC	struct thread
 #define DRM_OS_CURRENTPID       curthread->td_proc->p_pid
 #define DRM_OS_IOCTL 		dev_t kdev, u_long cmd, caddr_t data, int flags, struct thread *p
-#define DRM_OS_CHECKSUSER	suser(p->td_proc)
+#define DRM_OS_CHECKSUSER	suser(p)
 #else
 #define DRM_OS_CURPROC		curproc
 #define DRM_OS_STRUCTPROC	struct proc
