
$FreeBSD$

--- setup/togl_setup.py	2003/01/14 17:31:36	1.1
+++ setup/togl_setup.py	2003/01/14 17:37:16
@@ -40,7 +40,7 @@
     sources = [os.path.join('src',Togl,'togl.c')]
 
     include_dirs.append(os.path.join('src',Togl))
-    include_dirs.append(os.path.join(tk.getvar('tk_library'), '..', '..', 'include'))
+    include_dirs.append(tk.getvar('tk_library').replace('/lib/', '/include/'))
 
     lib_dirs.append(os.path.normpath(os.path.join(tk.getvar('tk_library'), '..')))
 
@@ -53,12 +53,12 @@
         libs.append('tcl' + string.replace(tk.getvar('tcl_version'), '.', ''))
         libs.append('tk' + string.replace(tk.getvar('tk_version'), '.', ''))
     else:
-        include_dirs.append(os.path.normpath(os.path.join(tk.getvar('tcl_library'), '..', '..', 'include')))
+        include_dirs.append(tk.getvar('tcl_library').replace('/lib/', '/include/'))
 
         lib_dirs.append(os.path.normpath(os.path.join(tk.getvar('tcl_library'), '..')))
 
-        libs.append('tcl' + tk.getvar('tcl_version'))
-        libs.append('tk' + tk.getvar('tk_version'))
+        libs.append('tcl' + string.replace(tk.getvar('tcl_version'),'.',''))
+        libs.append('tk' + string.replace(tk.getvar('tk_version'),'.',''))
 
     # rest of this function was inspired by build_ext.py , build_extensions() 
     
@@ -91,6 +91,7 @@
                             extra_postargs=extra_compile_args)
 
         # link all together
+	extra_link_args = ['-Wl,-E']
         build_ext.compiler.link_shared_object (
                 objects, 
                 output_filename,
