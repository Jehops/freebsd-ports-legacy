--- Imakefile.orig	Thu Jun 14 00:25:24 2001
+++ Imakefile	Thu Jun 14 00:26:01 2001
@@ -6,13 +6,15 @@
 /* if, for whatever reason, you're unable to get the JPEG library to compile
  * on your machine, *COMMENT OUT* the following line
  */
-#define HaveJpeg
+/* #define HaveJpeg */
+#define UseInstalledJpeg
 
 
 /* if, for whatever reason, you're unable to get the TIFF library to compile
  * on your machine, *COMMENT OUT* the following line
  */
-#define HaveTiff
+/* #define HaveTiff */
+#define UseInstalledTiff
 
 
 /* if, for whatever reason, you're unable to get the PDS/VICAR support
@@ -124,16 +126,30 @@
 JPEG = -DDOJPEG
 JPEGDIR = jpeg
 LIBJPEG = $(JPEGDIR)/libjpeg.a
+DEPLIBJPEG = $(LIBJPEG)
 JPEGINCLUDE = -I$(JPEGDIR)
 #endif
 
+#ifdef UseInstalledJpeg
+JPEG = -DDOJPEG
+LIBJPEG = -L${LOCALBASE}/lib -ljpeg
+JPEGINCLUDE = -I${LOCALBASE}/include
+#endif
+
 #ifdef HaveTiff
 TIFF = -DDOTIFF
 TIFFDIR = tiff
 LIBTIFF = $(TIFFDIR)/libtiff.a
+DEPLIBTIFF = $(LIBTIFF)
 TIFFINCLUDE = -I$(TIFFDIR)
 #endif
 
+#ifdef UseInstalledTiff
+TIFF = -DDOTIFF
+LIBTIFF = -L${LOCALBASE}/lib -ltiff
+TIFFINCLUDE = -I${LOCALBASE}/include
+#endif
+
 #ifdef HavePDS
 PDS = -DDOPDS
 #endif
@@ -149,12 +165,12 @@
 #endif
 
 
-DEPLIBS = $(LIBJPEG) $(LIBTIFF)
-LOCAL_LIBRARIES = $(XLIB) $(DEPLIBS)
+DEPLIBS = $(DEPLIBJPEG) $(DEPLIBTIFF)
+LOCAL_LIBRARIES = $(XLIB) $(LIBJPEG) $(LIBTIFF)
 
 DEFINES= $(SCO) $(UNIX) $(NODIRENT) $(VPRINTF) $(TIMERS) \
 	$(HPUX7) $(JPEG) $(TIFF) $(PDS) $(DXWM) $(RAND) \
-	$(BACKING_STORE) $(BSDTYPES) $(SGI) $(MGCSFX)
+	$(BACKING_STORE) $(BSDTYPES) $(SGI) $(MGCSFX) $(LOCALE_EXTENSION)
 
 INCLUDES = $(JPEGINCLUDE) $(TIFFINCLUDE)
 
@@ -254,10 +270,10 @@
 #endif
 
 
-NormalProgramTarget(xv,$(OBJS1),$(DEPLIBS),$(LOCAL_LIBRARIES),)
-NormalProgramTarget(bggen,$(OBJS2),$(DEPLIBS),$(LOCAL_LIBRARIES),)
-NormalProgramTarget(xcmap,$(OBJS4),$(DEPLIBS),$(LOCAL_LIBRARIES),)
-NormalProgramTarget(xvpictoppm,$(OBJS5),$(DEPLIBS),$(LOCAL_LIBRARIES),)
+NormalProgramTarget(xv,$(OBJS1),$(DEPLIBS),$(LOCAL_LIBRARIES),-lxpg4)
+NormalProgramTarget(bggen,$(OBJS2),$(DEPLIBS),$(LOCAL_LIBRARIES),-lxpg4)
+NormalProgramTarget(xcmap,$(OBJS4),$(DEPLIBS),$(LOCAL_LIBRARIES),-lxpg4)
+NormalProgramTarget(xvpictoppm,$(OBJS5),$(DEPLIBS),$(LOCAL_LIBRARIES),-lxpg4)
 
  
 InstallProgram(xv,$(BINDIR))
@@ -266,16 +282,16 @@
 InstallProgram(xvpictoppm,$(BINDIR))
 
 #ifdef HavePDS
-NormalProgramTarget(vdcomp,$(OBJS3),$(DEPLIBS),$(LOCAL_LIBRARIES),)
+NormalProgramTarget(vdcomp,$(OBJS3),$(DEPLIBS),$(LOCAL_LIBRARIES),-lxpg4)
 InstallProgram(vdcomp,$(BINDIR))
 #endif
 
  
-InstallManPageLong(docs/xv,$(MANDIR),xv)
-InstallManPageLong(docs/bggen,$(MANDIR),bggen)
-InstallManPageLong(docs/xcmap,$(MANDIR),xcmap)
-InstallManPageLong(docs/xvp2p,$(MANDIR),xvpictoppm)
-InstallManPageLong(docs/vdcomp,$(MANDIR),vdcomp)
+InstallManPage(xv,$(MANDIR))
+InstallManPage(bggen,$(MANDIR))
+InstallManPage(xcmap,$(MANDIR))
+InstallManPage(xvp2p,$(MANDIR))
+InstallManPage(vdcomp,$(MANDIR))
 
 InstallNonExecFile(xv_mgcsfx.sample,$(MGCSFXDIR))
 
