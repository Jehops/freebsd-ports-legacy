--- src/filter/filter.c--	Thu Mar  5 03:19:12 1998
+++ src/filter/filter.c	Fri Jul  3 13:43:18 1998
@@ -1,5 +1,12 @@
+#if defined(HAVE_SYS_PARAM_H)
+#include <sys/param.h>
+#endif
 #ifndef _plan9_
+#if (!defined(BSD) || (BSD < 199506))
 #include <malloc.h>
+#else
+#include <stdlib.h>
+#endif
 #else
 #include <u.h>
 #include <libc.h>
--- src/filter/image.c--	Thu Mar  5 03:19:12 1998
+++ src/filter/image.c	Fri Jul  3 13:40:07 1998
@@ -1,5 +1,12 @@
+#if defined(HAVE_SYS_PARAM_H)
+#include <sys/param.h>
+#endif
 #ifndef _plan9_
+#if (!defined(BSD) || (BSD < 199506))
 #include <malloc.h>
+#else
+#include <stdlib.h>
+#endif
 #include <string.h>
 #include <fconfig.h>
 #include <assert.h>
--- src/filter/palette.c--	Thu Mar  5 03:19:12 1998
+++ src/filter/palette.c	Fri Jul  3 14:54:09 1998
@@ -1,3 +1,6 @@
+#if defined(HAVE_SYS_PARAM_H)
+#include <sys/param.h>
+#endif
 #ifdef _plan9_
 #include <u.h>
 #include <libc.h>
@@ -10,7 +13,9 @@
 #include <config.h>
 #include <assert.h>
 #include <stdio.h>
+#if (!defined(BSD) || (BSD < 199506))
 #include <malloc.h>
+#endif
 #include <limits.h>
 #endif
 #include <fconfig.h>
