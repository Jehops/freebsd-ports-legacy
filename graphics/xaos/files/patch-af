--- src/ui/ui-drv/curses/mktable.c--	Thu Mar  5 03:19:12 1998
+++ src/ui/ui-drv/curses/mktable.c	Fri Jul  3 16:43:57 1998
@@ -20,10 +20,15 @@
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
  */
+#if defined(HAVE_SYS_PARAM_H)
+#include <sys/param.h>
+#endif
 #include <stdio.h>
 #include <ctype.h>
 #include <stdlib.h>
+#if (!defined(BSD) || (BSD < 199506))
 #include <malloc.h>
+#endif
 #include "mktable.h"
 #include <config.h>
 #ifdef CURSES_DRIVER
@@ -396,6 +401,7 @@
 #define postoparams(pos,i1,i2,i3,i4) \
   ((i1)=(pos)>>12),((i2)=((pos)>>8)&15),((i3)=((pos)>>4)&15),((i4)=((pos))&15)
 
+#undef isset
 #define isset(n,i) (((i)&1<<(n))!=0)
 #define canset(n,i) (!isset(n,i)&&isset(n+1,i))
 static int width = 8;
--- src/ui/ui-drv/curses/ui_curses.c--	Fri Jul  3 16:40:53 1998
+++ src/ui/ui-drv/curses/ui_curses.c	Fri Jul  3 16:40:24 1998
@@ -19,11 +19,16 @@
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
  */
+#if defined(HAVE_SYS_PARAM_H)
+#include <sys/param.h>
+#endif
 #include "aconfig.h"
 #ifdef CURSES_DRIVER
 #include <stdio.h>
 #include <stdlib.h>
+#if (!defined(BSD) || (BSD < 199506))
 #include <malloc.h>
+#endif
 #include <signal.h>
 #include <sys/stat.h>
 #include <unistd.h>
