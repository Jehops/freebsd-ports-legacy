--- examples/Makefile.orig	2009-02-17 13:08:45.000000000 +0100
+++ examples/Makefile	2009-02-21 15:02:01.000000000 +0100
@@ -78,8 +78,8 @@
 # Set correct variables and paths
 #---------------------------------
 CIMG_VERSION = 1.30
-X11PATH      = /usr/X11R6
-CC           = g++
+#X11PATH      = /usr/X11R6
+#CC           = g++
 CCVER        = `$(CC) -v 2>&1 | tail -n 1`
 EXEPFX       =
 
@@ -106,7 +106,7 @@
 ifeq ($(CC),icc)
 CIMG_OPT_CFLAGS = -O3 -ipo -no-prec-div
 else
-CIMG_OPT_CFLAGS = -O3 -ffast-math -fno-tree-pre
+CIMG_OPT_CFLAGS = -ffast-math -fno-tree-pre
 endif
 
 # Flags to enable OpenMP support.
@@ -158,8 +158,8 @@
 
 # Flags to enable native support for various video files, using the FFMPEG library.
 # ( http://www.ffmpeg.org/ )
-CIMG_FFMPEG_CFLAGS = -Dcimg_use_ffmpeg -I/usr/include/ffmpeg
-CIMG_FFMPEG_LDFLAGS = -lavcodec -lavformat
+#CIMG_FFMPEG_CFLAGS = -Dcimg_use_ffmpeg -I$(LOCALBASE)/include/ffmpeg
+#CIMG_FFMPEG_LDFLAGS = -lavcodec -lavformat
 
 # Flags to enable native support for compressed .cimgz files, using the Zlib library.
 # ( http://www.zlib.net/ )
@@ -182,14 +182,17 @@
 
 # Flags to enable the use of LAPACK routines for matrix computation
 # ( http://www.netlib.org/lapack/ )
-CIMG_LAPACK_CFLAGS = -Dcimg_use_lapack
-CIMG_LAPACK_LDFLAGS = -lblas -lg2c -llapack
+#CIMG_LAPACK_CFLAGS = -Dcimg_use_lapack
+#CIMG_LAPACK_LDFLAGS = -lblas -llapack
 
 # Flags to enable the use of the Board library
 # ( http://libboard.sourceforge.net/ )
-CIMG_BOARD_CFLAGS = -Dcimg_use_board -I/usr/include/board
+CIMG_BOARD_CFLAGS = -Dcimg_use_board -I$(LOCALBASE)/include/board
 CIMG_BOARD_LDFLAGS = -lboard
 
+# Flags to compile on FreeBSD
+CIMG_FREEBSD_LDFLAGS = -ansi -ffast-math  -I$(X11PATH)/include $(EXTRA_FLAGS) -lX11 -L$(X11PATH)/lib
+
 # Flags to compile on Sun Solaris
 CIMG_SOLARIS_LDFLAGS = -R$(X11PATH)/lib -lrt -lnsl -lsocket
 
@@ -205,7 +208,7 @@
 	@echo
 	@echo "** Compiling '$* ($(CIMG_VERSION))' with '`$(CC) -v 2>&1 | tail -n 1`'"
 	@echo
-	$(CC) -o $(EXEPFX)$* $< $(CFLAGS) $(LDFLAGS) $(CONF_CFLAGS) $(CONF_LDFLAGS)
+	$(CXX) -o $(EXEPFX)$* $< $(CFLAGS) $(LDFLAGS) $(CONF_CFLAGS) $(CONF_LDFLAGS)
 ifeq ($(MACOSX_APP),true)
 	mkdir -p $(EXEPFX)${*}.app/Contents/MacOS
 	mv $(EXEPFX)${*} $(EXEPFX)${*}.app/Contents/MacOS
@@ -227,6 +230,9 @@
 	@echo "  > mlinux   : Linus/BSD/MacOSX target, no display, minimal features, optimizations enabled."
 	@echo "  > Mlinux   : Linux/BSD/MacOSX target, X11 display, maximal features, optimizations enabled."
 	@echo
+	@echo "  > dFreeBSD   : FreeBSD, X11 display, debug mode."
+	@echo "  > oFreeBSD   : FreeBSD target, X11 display, maximal features for packages."
+	@echo
 	@echo "  > solaris  : Sun Solaris target, X11 display, optimizations disabled."
 	@echo "  > dsolaris : Sun Solaris target, X11 display, debug mode."
 	@echo "  > osolaris : Sun Solaris target, X11 display, optimizations enabled."
@@ -270,7 +276,7 @@
 	@echo
 	@echo "** Compiling 'greycstoration4gimp ($(CIMG_VERSION))' with '$(CCVER)'"
 	@echo
-	$(CC) -I.. -I./plugins -o $(EXEPFX)greycstoration4gimp greycstoration4gimp.cpp `gimptool-2.0 --cflags` `gimptool-2.0 --libs` -lpthread $(CIMG_OPT_CFLAGS) $(CIMG_GIMP_CFLAGS)
+	$(CXX) -I.. -I./plugins -o $(EXEPFX)greycstoration4gimp greycstoration4gimp.cpp `gimptool-2.0 --cflags` `gimptool-2.0 --libs` -lpthread $(CIMG_OPT_CFLAGS) $(CIMG_GIMP_CFLAGS)
 
 # Specific targets for the 'gmic4gimp' plug-in for GIMP.
 gmic4gimp_def: gmic4gimp_def.raw
@@ -281,7 +287,7 @@
 	$(CC) -I.. -o gmic4gimp.o -c gmic.cpp -Dgmic_minimal $(CIMG_OPT_CFLAGS) $(CIMG_FFTW3_CFLAGS)
 
 gmic4gimp: gmic4gimp.o gmic4gimp.cpp
-	$(CC) -I.. -I./plugins -o $(EXEPFX)gmic4gimp gmic4gimp.cpp gmic4gimp.o `gimptool-2.0 --cflags` `gimptool-2.0 --libs` -lpthread $(CIMG_OPT_FLAGS) $(CIMG_FFTW3_LDFLAGS) $(CIMG_GIMP_CFLAGS)
+	$(CXX) -I.. -I./plugins -o $(EXEPFX)gmic4gimp gmic4gimp.cpp gmic4gimp.o `gimptool-2.0 --cflags` `gimptool-2.0 --libs` -lpthread $(CIMG_OPT_CFLAGS) $(CIMG_FFTW3_LDFLAGS) $(CIMG_GIMP_CFLAGS)
 
 # Specific targets for 'gmic'.
 gmic_def: gmic_def.raw
@@ -309,7 +315,7 @@
 gmic_double.o: gmic.cpp
 	$(CC) -o gmic_double.o -c gmic.cpp -I. -Dgmic_separate_compilation -Dgmic_double $(CFLAGS) $(CONF_CFLAGS)
 gmic: gmic_bool.o gmic_uchar.o gmic_char.o gmic_ushort.o gmic_short.o gmic_uint.o gmic_int.o gmic_float.o gmic_double.o gmic.cpp
-	$(CC) -o $(EXEPFX)gmic gmic.cpp -I. -Dgmic_separate_compilation -Dgmic_main \
+	$(CXX) -o $(EXEPFX)gmic gmic.cpp -I. -Dgmic_separate_compilation -Dgmic_main \
 		 gmic_bool.o gmic_uchar.o gmic_char.o gmic_ushort.o gmic_short.o \
 		 gmic_uint.o gmic_int.o gmic_float.o gmic_double.o $(CFLAGS) $(LDFLAGS) $(CONF_CFLAGS) $(CONF_LDFLAGS)
 
@@ -399,6 +405,56 @@
 "STRIP_EXE=true" \
 all use_jpeg_buffer greycstoration4gimp gmic4gimp
 
+# FreeBSD targets
+dFreeBSD:
+	make \
+"CONF_CFLAGS = \
+$(CIMG_DEBUG_CFLAGS) \
+$(CIMG_VT100_CFLAGS) \
+$(CIMG_X11_CFLAGS) \
+$(CIMG_XSHM_CFLAGS) \
+$(CIMG_XRANDR_CFLAGS) \
+$(CIMG_ZLIB_CFLAGS)" \
+"CONF_LDFLAGS = \
+$(CIMG_FREEBSD_LDFLAGS) \
+$(CIMG_ZLIB_LDFLAGS) \
+$(CIMG_X11_LDFLAGS) \
+$(CIMG_XSHM_LDFLAGS) \
+$(CIMG_XRANDR_LDFLAGS)" \
+all
+
+oFreeBSD:
+	make \
+"CONF_CFLAGS = \
+$(CIMG_OPT_CFLAGS) \
+$(CIMG_VT100_CFLAGS) \
+$(CIMG_X11_CFLAGS) \
+$(CIMG_XSHM_CFLAGS) \
+$(CIMG_XRANDR_CFLAGS) \
+$(CIMG_TIFF_CFLAGS) \
+$(CIMG_PNG_CFLAGS) \
+$(CIMG_JPEG_CFLAGS) \
+$(CIMG_ZLIB_CFLAGS) \
+$(CIMG_MAGICK_CFLAGS) \
+$(CIMG_FFMPEG_CFLAGS) \
+$(CIMG_LAPACK_CFLAGS) \
+$(CIMG_FFTW3_CFLAGS)" \
+"CONF_LDFLAGS = \
+$(CIMG_FREEBSD_LDFLAGS) \
+$(CIMG_X11_LDFLAGS) \
+$(CIMG_XSHM_LDFLAGS) \
+$(CIMG_XRANDR_LDFLAGS) \
+$(CIMG_TIFF_LDFLAGS) \
+$(CIMG_PNG_LDFLAGS) \
+$(CIMG_JPEG_LDFLAGS) \
+$(CIMG_ZLIB_LDFLAGS) \
+$(CIMG_MAGICK_LDFLAGS) \
+$(CIMG_FFMPEG_LDFLAGS) \
+$(CIMG_LAPACK_LDFLAGS) \
+$(CIMG_FFTW3_LDFLAGS)" \
+"STRIP_EXE=true" \
+all use_jpeg_buffer greycstoration4gimp gmic4gimp
+
 # Sun Solaris targets, with X11 display.
 solaris:
 	@make \
