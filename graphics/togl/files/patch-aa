
$FreeBSD$

--- Makefile.orig	Thu Mar 12 06:11:26 1998
+++ Makefile	Tue Aug 14 12:52:23 2001
@@ -58,26 +58,30 @@
 
 
 # The C compiler:
-CC = cc
+CC ?= cc
 
 # Compiler options:
-COPTS = -c -O
+COPTS = -c -w
 
 # Shared library linker command:
-SHLINK = cc -G
+SHLINK = ${CC} -shared
 
 # Name for the shared lib:
-#SH_LIB = libtogl.so.1.3
-SH_LIB = 
+SH_LIB = libtogl.so.1.3
+#SH_LIB = 
 
-# Where to find tcl.h, tk.h, OpenGL/Mesa headers, etc:
-INCLUDES = -I/usr/local/include -I/usr/include/tcl
+# Where to find tc.hl, tk.h, OpenGL/Mesa headers, etc:
+INCLUDES = -I${LOCALBASE}/include/tcl8.4 \
+           -I${LOCALBASE}/include/tk8.4 \
+           -I${LOCALBASE}/include/tk8.4/generic \
+           -I${X11BASE}/include
 
 # Where to find libtcl.a, libtk.a, OpenGL/Mesa libraries:
-LIBDIRS = -L/usr/local/lib
+LIBDIRS = -L${LOCALBASE}/lib \
+          -L${X11BASE}/lib
 
 # Libraries to link with (-ldl for Linux only?):
-LIBS = -ltk -ltcl -lGLU -lGL -L/usr/X11/lib -lX11 -lXmu -lXext -lXt -lm -ldl
+LIBS = -ltk84 -ltcl84 -lGLU -lGL -lX11 -lXmu -lXext -lXt -lm $(PTHREAD_LIBS)
 
 TK_FLAGS =
 
@@ -85,7 +89,7 @@
 #### Shouldn't have to change anything beyond this point ####
 
 
-CFLAGS = $(COPTS) $(INCLUDES) $(TK_FLAGS)
+CFLAGS += $(COPTS) $(INCLUDES) $(TK_FLAGS) $(PTHREAD_CFLAGS)
 
 LFLAGS = $(LIBDIRS)
 
@@ -144,8 +148,8 @@
 	$(CC) $(CFLAGS) togl.c
 
 
-#$(SH_LIB): togl.o
-#	$(SHLINK) $(LFLAGS) togl.o $(LIBS) -o $@ 
+$(SH_LIB): togl.o
+	$(SHLINK) $(LFLAGS) togl.o $(LIBS) -o $@ 
 
 
 
