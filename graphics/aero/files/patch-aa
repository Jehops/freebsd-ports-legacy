--- Makefile.linux.orig	Sat Aug 31 02:19:25 1996
+++ Makefile.linux	Sat Feb 24 11:29:47 2001
@@ -34,8 +34,8 @@
 # Set path where you want to install xaero and it's application-default
 # resource file.
 
-XAEROBIN  = /usr/local/bin                # or local: $HOME/bin
-XAEROAPPL = /usr/local/lib/app-defaults   # or local: $HOME/app-defaults
+XAEROBIN  = ${PREFIX}/bin                    # or local: $HOME/bin
+XAEROAPPL = ${PREFIX}/lib/X11/app-defaults   # or local: $HOME/app-defaults
 
 
 ###########################################################################
@@ -43,19 +43,19 @@
 # of X11 in parallel on their systems, e.g. X11R5 and X11R6. So here
 # you can choose the one you want.
 
-XINCLUDE   = /usr/local/X11R5/include      
-XLIB       = /usr/local/X11R5/lib 
-FWFINCLUDE = /usr/local/lib/FWF/include
-FWFLIB	   = /usr/local/lib/FWF/lib.$(HOSTTYPE)
+XINCLUDE   = ${PREFIX}/include      
+XLIB       = ${PREFIX}/lib 
+FWFINCLUDE = $(XINCLUDE)
+FWFLIB     = $(XLIB)
 
 
 ###########################################################################
 # Compiler and Linker definitions.
 
-CC       = gcc
-COPTS    = -ansi -Wall $(OPTIMIZE) 
+CC       ?= gcc
+COPTS    = -ansi $(OPTIMIZE)
 DEBUG    = 
-OPTIMIZE = -O2 -DNODEBUG
+OPTIMIZE = -DNODEBUG
 
 LD       = ld
 
@@ -63,16 +63,16 @@
 #libraries if needed; use -L and -l syntax, e.g.
 # ADDFWFLIB = -L/usr/local/lib -lxpm
 
-ADDFWFLIB =
+ADDFWFLIB = -lXpm
 ADDXLIB   =
-ADDSYSLIB = 
+ADDSYSLIB = # -lSM -lICE
 
 
 ###########################################################################
 # Tools
 
 RM   = rm -f
-CP   = cp -i
+CP   = cp
 
 
 ###########################################################################
@@ -101,7 +101,7 @@
 ###########################################################################
 # compiler-options
 
-CFLAGS = $(COPTS) $(DEBUG) -I$(XINCLUDE) -I$(FWFINCLUDE)
+CFLAGS += $(COPTS) $(DEBUG) -I$(XINCLUDE) -I$(FWFINCLUDE)
 
 
 ###########################################################################
@@ -134,7 +134,7 @@
 # The default rule for compiling .o files from .c files
 
 .c.o:
-	$(CC) $(CFLAGS) -c $*.c
+	$(CC) $(CFLAGS) -c $<
 
 
 ###########################################################################
@@ -157,8 +157,24 @@
 # to compile this application type 'make all'. For infos type 'make help'.
 
 copyFilesToDestination::
-	$(CP) xaero $(XAEROBIN)
-	$(CP) ../app-defaults/XAero $(XAEROAPPL)
+	${BSD_INSTALL_PROGRAM} xaero $(XAEROBIN)
+	[ -d $(XAEROAPPL) ] || mkdir -p $(XAEROAPPL)
+	[ -d ${PREFIX}/lib/X11/xaero ] || mkdir -p ${PREFIX}/lib/X11/xaero
+	${BSD_INSTALL_DATA} ../app-defaults/XAero $(XAEROAPPL)
+	${BSD_INSTALL_SCRIPT} ../scripts/povsubst $(XAEROBIN)
+	${BSD_INSTALL_SCRIPT} ../scripts/rayclear $(XAEROBIN)
+	${BSD_INSTALL_SCRIPT} ../scripts/raystart $(XAEROBIN)
+	${BSD_INSTALL_SCRIPT} ../scripts/raystat $(XAEROBIN)
+	chmod +x $(XAEROBIN)/raymany
+	sed 's:__XAERO_LIB_PATH__:${PREFIX}/lib/X11/xaero:' ../scripts/raymany > ../scripts/raymany.in
+	${BSD_INSTALL_SCRIPT} ../scripts/raymany.in $(XAEROBIN)/raymany
+	${BSD_INSTALL_DATA} ../povray-include/FILELIST.povray-include ${PREFIX}/lib/X11/xaero
+	${BSD_INSTALL_DATA} ../povray-include/aeromat2.inc ${PREFIX}/lib/X11/xaero
+	${BSD_INSTALL_DATA} ../povray-include/aerop1materials.inc ${PREFIX}/lib/X11/xaero
+	${BSD_INSTALL_DATA} ../povray-include/aeropov1.inc ${PREFIX}/lib/X11/xaero
+	${BSD_INSTALL_DATA} ../povray-include/aeropov2.inc ${PREFIX}/lib/X11/xaero
+	mkdir -p ${PREFIX}/lib/X11/xaero/examples
+	${BSD_INSTALL_DATA} ../examples/* ${PREFIX}/lib/X11/xaero/examples
 
 all:: xaero
 	strip xaero
