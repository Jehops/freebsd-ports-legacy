--- Make/makedefs.orig	Sat Dec 10 09:51:33 2005
+++ Make/makedefs	Wed Nov  1 18:19:31 2006
@@ -55,7 +55,7 @@
 DEF        = -DPRODUCER_VERSION=\"$(VERSION)\"\
              -DPRODUCER_VERSION_REVISION="$(VERSION_REVISION)"
 
-INC        = -I$(TOPDIR)/include 
+INC	   +=  -I${LOCALBASE}/include -I${X11BASE}/include
 
 CXXFLAGS   = $(ARCHARGS) $(DOF) $(DEF) $(INC)
 LDFLAGS    = $(ARCHARGS) $(DOF) $(LINKARGS) -L$(TOPDIR)/lib/$(OS)$(ARCH) 
@@ -64,20 +64,20 @@
 	     	 $(YACCFILES:.y=.o)\
 	     	 $(LEXFILES:.l=.o)	    
 
-DOF        = $(OPTF)
+OPTF	   = ${CXXFLAGS}
 DEBUGDIR   = $(OS)$(ARCH).Debug
 OPTDIR     = $(OS)$(ARCH).Opt
 BININST    = bin
 LIBINST    = lib
 
-INST_LOCATION      ?= /usr/local
+INST_LOCATION      = $(PREFIX)
 INST_LIBS          = $(INST_LOCATION)/lib$(ARCH_EXT)
 INST_INCLUDE       = $(INST_LOCATION)/include
 INST_SHARE         = $(INST_LOCATION)/share/Producer
-INST_DEMOS         = $(INST_SHARE)/bin
-INST_SRC           = $(INST_SHARE)/src
-INST_DOC           = $(INST_SHARE)/doc
-INST_DATA          = $(INST_SHARE)/data
+INST_DEMOS         = $(EXAMPLESDIR)/bin
+INST_SRC           = $(EXAMPLESDIR)/src
+INST_DOC           = $(DOCSDIR)
+INST_DATA          = $(DATADIR)
 INST_DEMO_SRC      = $(INST_SRC)/demos
 
 LINK               = ln -sf
@@ -124,7 +124,7 @@
 LDFLAGS += -L$(OPENTHREADS_LIB_DIR)
 endif
 
-OPEN_THREAD_LIB = -lOpenThreads
+OPEN_THREAD_LIB = -lOpenThreads ${PTHREAD_LIBS}
 PTHREAD_LIB = -lpthread
 
 STATICLIB_EXT = a
