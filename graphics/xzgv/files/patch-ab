--- doc/Makefile.orig	Mon Nov 22 17:23:34 1999
+++ doc/Makefile	Thu Oct 19 12:58:50 2000
@@ -10,12 +10,11 @@
 
 all: info man
 
-info: xzgv.gz
+info: xzgv
 dvi: xzgv.dvi
 
-xzgv.gz: xzgv.texi
-	makeinfo xzgv.texi
-	gzip -f xzgv xzgv-?
+xzgv: xzgv.texi
+	makeinfo --no-split xzgv.texi
 
 # `-c' removes the huge number of associated files created by TeX.
 # This saves doing a `make clean' from hell. :-)
@@ -27,24 +26,25 @@
 man: xzgv.1
 xzgv.1: xzgv.texi makeman.awk
 	@echo 'Making man page from xzgv.texi...'
-	gawk -f makeman.awk <xzgv.texi >xzgv.1
+	awk -f makeman.awk <xzgv.texi >xzgv.1
 
 installdirs:
 	/bin/sh ../mkinstalldirs $(INFODIR) $(MANDIR)
 
 # I think this one's getting just a tiny bit confusing :-}
 ifeq ($(INFO_DIR_UPDATE),no)
-install: installdirs
+install:
 else
 install: ../src/install-info installdirs
 endif
+	gzip -dc xzgv.gz > xzgv
 	install -m 444 xzgv.1 $(MANDIR)
-	install -m 444 xzgv.gz xzgv-?.gz $(INFODIR)
+	install -m 444 xzgv $(INFODIR)
 # Update info `dir' file.
 # Info always uses a dir file in preference to a dir.gz, so we don't use
 # dir.gz unless it's the only game in town.
 ifneq ($(INFO_DIR_UPDATE),no)
-	gzip -d xzgv.gz
+gzip -dc xzgv.gz > xzgv
 	if [ -f $(INFODIR)/dir.gz -a ! -f $(INFODIR)/dir ]; then \
 	  gzip -d $(INFODIR)/dir.gz; \
 	  ../src/install-info xzgv $(INFODIR)/dir; \
@@ -53,7 +53,6 @@
 	  ../src/install-info xzgv $(INFODIR)/dir; \
 	fi
 	chmod a+r $(INFODIR)/dir
-	gzip xzgv
 endif
 
 ../src/install-info: ../src/install-info.c
