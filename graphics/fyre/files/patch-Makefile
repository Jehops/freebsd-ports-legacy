--- Makefile.orig	Sun Jul 11 02:26:40 2004
+++ Makefile	Mon Jul 12 08:52:21 2004
@@ -1,21 +1,21 @@
 # -march=i686 speeds this up quite a bit on my machine (even more so
 # than -march=athlon-xp) so if this looks like a recent x86 machine,
 # stick that in CFLAGS
-CFLAGS  += $(shell if grep mmx /proc/cpuinfo > /dev/null; then echo -march=i686; fi)
+#CFLAGS  += $(shell if grep mmx /proc/cpuinfo > /dev/null; then echo -march=i686; fi)
 
 # -O3 and -ffast-math should make it go much faster on any system
-ifeq ($(CC),icc)
-	CFLAGS  += -O3
-else
-	CFLAGS  += -O3 -ffast-math
-endif
+#ifeq ($(CC),icc)
+#	CFLAGS  += -O3
+#else
+#	CFLAGS  += -O3 -ffast-math
+#endif
 
 # Disable glibc versions of functions that have faster versions
 # as gcc inlines. This should speed up trig on some systems.
-CFLAGS  += -D__NO_INLINE__
+#CFLAGS  += -D__NO_INLINE__
 
 PKGS    += libglade-2.0 gtk+-2.0
-CFLAGS  += '-DGLADEDIR="data"'
+CFLAGS  += '-DGLADEDIR="${PREFIX}/share/gnome/fyre"'
 CFLAGS  += $(shell pkg-config --cflags $(PKGS))
 LIBS    += $(shell pkg-config --libs $(PKGS))
 
@@ -47,10 +47,10 @@
 
 
 $(BIN): $(OBJS)
-	$(CC) -o $@ $(OBJS) $(LIBS)
+	$(CC) -o $@ $(OBJS) $(LIBS) $(LDFLAGS)
 
 %.o: %.c src/*.h
-	$(CC) -c -o $@ $< $(CFLAGS)
+	$(CC) -c -o $@ $< $(CFLAGS) $(CPPFLAGS)
 
 clean:
 	rm -f $(BIN) src/*.o
