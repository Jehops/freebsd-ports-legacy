--- libtiff/Makefile.in.orig	Wed Aug 20 19:42:17 2003
+++ libtiff/Makefile.in	Wed Oct  8 00:16:03 2003
@@ -223,8 +223,8 @@
 	  @LN@ @LN_S@ libtiff.@DSOSUF_VERSION@ libtiff.@DSOSUF@; \
 	fi
 	touch $@
-# NetBSD 1.1 or FreeBSD (old style)
-NETBSDdso FREEBSDdso oldOPENBSDdso: ${OBJS}
+# NetBSD 1.1 (old style)
+NETBSDdso oldOPENBSDdso: ${OBJS}
 	@rm -f libtiff_pic.a
 	@${AR} cq libtiff_pic.a `lorder ${OBJS} | tsort -q`
 	${RANLIB} libtiff_pic.a
@@ -242,6 +242,14 @@
 # OSF/1 3.2 shared lib rule
 OSFdso: ${OBJS}
 	${LD} -o libtiff.@DSOSUF@ -shared -error_unresolved ${OBJS} @LIBJPEG@ @LIBGZ@ -lc -lm
+# FreeBSD shared lib rule
+FREEBSDdso: ${OBJS}
+	${CC} -shared -Wl,-soname,libtiff.@DSOSUF_VERSION@ \
+	    -o libtiff.@DSOSUF_VERSION@  ${OBJS} \
+		@LIBJPEG@ @LIBGZ@ @MACHDEPLIBS@
+	rm -f libtiff.@DSOSUF@
+	@LN@ @LN_S@ libtiff.@DSOSUF_VERSION@ libtiff.@DSOSUF@
+	touch $@
 
 OPENBSDdso: ${OBJS}
 	${CC} -shared @LIBCOPTS@ -o libtiff.@DSOSUF_VERSION@ ${OBJS} @LIBJPEG@ @LIBGZ@ -lm
@@ -374,18 +382,15 @@
 	${INSTALL} -idb tiff.sw.dev -m 755 -dir ${DESTDIR}@DIR_INC@
 	for i in ${INCS_PRIVATE}; do					\
 	    f=`basename $$i`;						\
-	    ${INSTALL} -idb tiff.sw.dev -m 444 -F ${DESTDIR}@DIR_INC@	\
-		-src $$i -O $$f;					\
+	    ${BSD_INSTALL_DATA} $$i ${DESTDIR}@DIR_INC@/$$f;		\
 	done
 
 installDSO: @DSO@dso
 	if [ @DSOSUF_VERSION@ != @DSOSUF@ ]; then			\
-	    ${INSTALL} -idb tiff.sw.tools.nostrip -m 555		\
-		-F ${DESTDIR}@DIR_LIB@ -O libtiff.@DSOSUF_VERSION@;	\
+	    ${BSD_INSTALL_DATA} libtiff.@DSOSUF_VERSION@		\
+		${DESTDIR}@DIR_LIB@;					\
 	    ${INSTALL} -idb tiff.sw.tools -F ${DESTDIR}@DIR_LIB@	\
 		-lns libtiff.@DSOSUF_VERSION@ -O libtiff.@DSOSUF@;	\
-	    ${INSTALL} -idb tiff.sw.tools -F ${DESTDIR}@DIR_LIB@	\
-		-lns libtiff.@DSOSUF@ -O libtiff.so;			\
 	else								\
 	    ${INSTALL} -idb tiff.sw.tools.nostrip -m 555		\
 		-F ${DESTDIR}@DIR_LIB@ -O libtiff.@DSOSUF@;		\
@@ -393,7 +398,7 @@
 
 install: all installHdrs
 	${INSTALL} -idb tiff.sw.dev -m 755 -dir ${DESTDIR}@DIR_LIB@
-	${INSTALL} -idb tiff.sw.dev -m 444 -F ${DESTDIR}@DIR_LIB@ -O libtiff.a
+	${BSD_INSTALL_DATA} libtiff.a ${DESTDIR}@DIR_LIB@
 	if [ @DSO@dso != nodso ]; then					\
 	    ${MAKE} -${MAKEFLAGS} installDSO;				\
 	else								\
