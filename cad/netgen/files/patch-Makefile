--- Makefile.orig	Tue Nov 16 15:29:39 2004
+++ Makefile	Mon May 28 22:20:53 2007
@@ -21,7 +21,7 @@
 # system libraries:
 #
 #
-tcltklib = -ltix8.1.8.4 -ltk8.4  -ltcl8.4
+tcltklib = `echo $(TIX_BUILD_LIB_SPEC)` `echo $(TK_LIB_SPEC)` `echo $(TCL_LIB_FLAG)`
 # tcltklib = -ltix4.1.8.3 -ltk8.3 -ltcl8.3
 # tcltklib = -ltix8.2 -ltk8.3 -ltcl8.3
 # tcltklib = /usr/lib/libtix8.1.8.3.so -ltk8.3 -ltcl8.3
@@ -29,7 +29,7 @@
 # tcltklib = -ltix8.2 -ltk8.4 -ltcl8.4
 #
 #
-syslib = $(tcltklib) -lGL -lGLU -lX11  -lXi -lm  -ldl -lpthread $(SYSLIB2)
+syslib = $(tcltklib) -lGL -lGLU -lX11  -lXi -lm $(PTHREAD_LIBS) $(SYSLIB2)
 # (maybe you have to remove -ldl)
 #
 #
@@ -43,12 +43,12 @@
 # OCCINC_DIR=$(OCC_DIR)/inc
 # OCCLIB_DIR=$(OCC_DIR)/lib
 #
-OCC_DIR=/opt/OpenCASCADE5.2
-OCCINC_DIR=$(OCC_DIR)/ros/inc
-OCCLIB_DIR=$(OCC_DIR)/ros/lin/lib
+#OCC_DIR=/opt/OpenCASCADE5.2
+#OCCINC_DIR=$(OCC_DIR)/ros/inc
+#OCCLIB_DIR=$(OCC_DIR)/ros/lin/lib
 
 # add libs in makefile.mach.$(MACHINE)
-# occlib = -L$(OCCLIB_DIR) -lTKIGES -lTKBRep -lTKSTEP -lTKSTL
+# occlib = -L$(OCCLIB_DIR) -lTKIGES -lTKBRep -lTKSTEP -lTKSTL -pthread
 #
 include $(LIBSRC_DIR)/makefile.mach.$(MACHINE)
 #
@@ -58,7 +58,7 @@
 #
 #
 #
-CPLUSPLUSFLAGS1 = -c -I$(LIBSRC_DIR)/include -I$(OCCINC_DIR)  -I./ngsolve/include -Ilibsrc/interface -DOPENGL $(METISINC)
+CPLUSPLUSFLAGS1 = -c -I$(LIBSRC_DIR)/include -I$(OCCINC_DIR)  -I./ngsolve/include -Ilibsrc/interface -DOPENGL $(METISINC) $(PTHREAD_CFLAGS)
 #
 LINKFLAGS1 =   -lGL -lGLU -lX11 -lXext -lXmu   
 #
@@ -74,7 +74,7 @@
 # Additional NETGEN Applications:
 #
 # the demo add-on application:
-# appdemo = -L./demoapp -ldemoapp
+appdemo = -L./demoapp -ldemoapp
 #
 # appaddon = -L./addon -laddon
 
@@ -102,7 +102,7 @@
 	cd libsrc; $(MAKE)
 #
 applib:
-#	cd demoapp; $(MAKE);
+	cd demoapp; $(MAKE);
 #	cd addon; $(MAKE)
 #	cd ngsolve; $(MAKE);
 #	cd metis; $(MAKE)
