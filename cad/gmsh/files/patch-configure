--- configure.orig	Thu Jul 12 18:08:39 2007
+++ configure	Mon Jul 23 22:45:54 2007
@@ -3192,7 +3192,7 @@
   GMSH_DIRS="${GMSH_DIRS} Graphics Fltk"
   GMSH_LIBS="-Llib -lGmshFltk -lGmshParser -lGmshGraphics -lGmshMesh -lGmshGeo"
   GMSH_LIBS="${GMSH_LIBS} -lGmshPlugin -lGmshPost -lGmshCommon -lGmshDataStr -lGmshNumeric"
-  GMSH_LIBS="${GMSH_LIBS} -lGmshParallel"
+  GMSH_LIBS="${GMSH_LIBS} -lGmshParallel ${LDFLAGS}"
   FLAGS="-DHAVE_FLTK ${FLAGS}"
 
   if test "x${FLTK_PREFIX}" != "x" ; then
@@ -4541,7 +4541,7 @@
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lcgns  $LIBS"
+LIBS="-lcgns -lhdf5 $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -4604,7 +4604,7 @@
       GMSH_LIBS="${GMSH_LIBS} -lcgns"
       FLAGS="${FLAGS} -DHAVE_LIBCGNS"
     else
-      GMSH_LIBS="${GMSH_LIBS} -L${CGNS_PREFIX}/lib -lcgns"
+      GMSH_LIBS="${GMSH_LIBS} -L${CGNS_PREFIX}/lib -lcgns -lhdf5"
       FLAGS="${FLAGS} -DHAVE_LIBCGNS -I${CGNS_PREFIX}/include"
     fi
   fi
@@ -4698,7 +4698,7 @@
       FLAGS="${FLAGS} -DHAVE_OCC"
     else
       GMSH_LIBS="${GMSH_LIBS} -L${OCC_PREFIX}/lib ${OCC_LIBS}"
-      FLAGS="${FLAGS} -DHAVE_OCC -I${OCC_PREFIX}/inc"
+      FLAGS="${FLAGS} -DHAVE_OCC -DHAVE_WOK_CONFIG_H -DFREEBSD -D${ARCH} -I${OCC_PREFIX}/inc"
     fi
   fi
 fi
