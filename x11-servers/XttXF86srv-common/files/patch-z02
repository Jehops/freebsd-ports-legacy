--- lib/font/X-TrueType/xttfuncs.c.ORIG	Mon Jun 19 11:38:08 2000
+++ lib/font/X-TrueType/xttfuncs.c	Mon Jun 19 11:41:00 2000
@@ -698,7 +698,7 @@
 
         if ((entry = FontCacheGetEntry()) == NULL) {
             charInfo = &nocharinfo;
-            fprintf(stderr, "can't get cache entry\n");
+            fprintf(stderr, "get_metrics: can't get cache entry\n");
             goto next;
         }
         FC_TT_SETVFUNC(entry);
@@ -786,10 +786,9 @@
             char_width.pixel = char_width.raw = 0;
         get_metrics(ft, c, char_width);
         /* Retry to get it created in get_metrics(). */
-        FontCacheSearchEntry(ft->cache, c, &entry);
-        if (!charInfo) {
+		if (!FontCacheSearchEntry(ft->cache, c, &entry)) {
             charInfo = &nocharinfo;
-            fprintf(stderr, "can't get cache entry\n");
+            fprintf(stderr, "get_glyph: can't get cache entry\n");
             goto next;
         }
     }
