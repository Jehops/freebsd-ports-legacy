--- programs/Xserver/hw/xfree86/etc/scanpci.c.orig	Fri Dec  3 04:43:47 1999
+++ programs/Xserver/hw/xfree86/etc/scanpci.c	Mon Dec  4 14:14:39 2000
@@ -101,7 +101,17 @@
 #endif
 #if defined(__FreeBSD__) || defined(__386BSD__)
 #include <sys/file.h>
-#include <machine/console.h>
+#if defined(__FreeBSD__)
+#  include <osreldate.h>
+#  if __FreeBSD_version >= 410000
+#    include <sys/consio.h>
+#    include <sys/kbio.h>
+#  else
+#   include <machine/console.h>
+#  endif
+#else 
+#  include <machine/console.h>
+#endif
 #ifndef GCCUSESGAS
 #define GCCUSESGAS
 #endif
