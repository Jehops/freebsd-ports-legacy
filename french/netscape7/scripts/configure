#!/bin/sh
#
# $FreeBSD$

echo ${WRKSRC}/components.conf
if [ -f ${WRKSRC}/components.conf ]; then
	exit
fi

tempfile=`/usr/bin/mktemp -t checklist`

if [ -z "${BATCH}" ]; then

/usr/bin/dialog --title "Netscape 6 Sélection composants" --clear \
	--checklist "\n\

Choisissez les composants que vous souhaitez télécharger et installer. \n\
Appuyez sur la barre d'espace pour basculer entre les états \n\
sélectionné et désélectionné." -1 -1 10 \
"browser"	"navigateur"						ON \
"deflfrfr"	"profil français par défaut"			ON \
"flash"		"plugin Flash"						ON \
"jre"		"plugin Java"						ON \
"langfrfr"	"locale français"					ON \
"mail"		"lecteur de courrier et de nouvelles"			ON \
"regfr"		"configurations régionales pour la France"		ON \
"regus"		"configurations régionales pour les Etats-Unis"	ON \
"spellchecker"	"vérificateur d'orthographe"				ON \
"talkback"	"analyseur de problèmes (envoi à Netscape)"	ON \
2> /tmp/checklist.tmp.$$

retval=$?

choice=`cat /tmp/checklist.tmp.$$`
rm -f /tmp/checklist.tmp.$$

case $retval in
	0)	if [ -z "$choice" ]; then
			echo "Aucune sélection"
			exit 1;
	fi
	;;
	1)	echo "Annulation demandée."
		exit 1
	;;
esac

echo "$choice" \
	| sed -e "s/\"//g" \
	| sed -e "s/mail/mail browser/g" \
	| sed -e "s/browser/AIM browser psm xpcom/g" \
	| sort -u \
	| sed -e "s/ /.xpi /g" \
	| sed -e "s/$/.xpi/g" \
	| perl -pi -e "s/ /\n/g" \
	> ${WRKSRC}/components.conf
fi
