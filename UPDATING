This file documents some of the problems you may encounter when
upgrading your ports.  We try our best to minimize these disruptions,
but sometimes they are unavoidable.

You should get into the habit of checking this file for changes each
time you update your ports collection, before attempting any port
upgrades.

20040730:
  AFFECTS: users of lang/perl5.8
  AUTHOR: tobez@FreeBSD.org, mat@FreeBSD.org, marcus@FreeBSD.org

  lang/perl5.8 has been updated to 5.8.5. you should update everything
  depending on perl, that is:
    * first, upgrade your perl5.8 installation.
    * run "use.perl port", so that the system knows you have 5.8.5.
    * now, run some magic incantations to upgrade all ports depending on perl,
      that is run something like :
      portupgrade -f `(pkg_info -R perl-5.8.5 |tail +4; \
        find /usr/local/lib/perl5/site_perl/5.8.[124] -type f -print0 \
        | xargs -0 pkg_which -fv | sed -e '/: ?/d' -e 's/.*: //')|sort -u`
      This is likely to fail for a few ports, you'll have to upgrade them
      afterwards.
      Please note, that this last step is, strictly speaking, not necessary,
      if you are upgrading from 5.8.4.  But it is cleaner to do so anyway.

20040726:
  AFFECTS: users of devel/apache-ant
  AUTHOR: glewis@FreeBSD.org

  The update to Ant 1.6.2 introduces the following changes which may break
  older environments, according to the 1.6.2 release notes:

  . The import task used the canonical version of a file path. This
    has been changed to use the absolute path. Bugzilla 28505.
  . ant-xalan2.jar has been removed since the only class contained
    in it didn't depend on Xalan-J 2 at all. Its sole dependency has
    always been TraX and so it has been merged into ant-trax.jar.
  . All exceptions thrown by tasks are now wrapped in a buildexception
    giving the location in the buildfile of the task.
  . Nested elements for namespaced tasks and types may belong to
    the Ant default namespace as well as the task's or type's namespace.
  . <junitreport> will very likely no longer work with Xalan-J 1.

20040724:
  AFFECTS: users for xorg and GNOME
  AUTHOR: gnome@FreeBSD.org

  After migrating from XFree86 to X.Org, you must rebuild
  x11-toolkits/libwnck and x11/libxklavier for full GNOME functionality
  to be restored.

  If you receive an XKB initialization error when starting GNOME, edit
  your XF86Config or xorg.conf, and remove the line:

Option "XkbRules" "xfree86"

20040723:
  AFFECTS: users of FreeBSD-current, users of xorg
  AUTHOR: anholt@FreeBSD.org

  The XFREE86_VERSION variable is deprecated and has been replaced by the
  X_WINDOW_SYSTEM variable. X_WINDOW_SYSTEM may be set to xorg, xfree86-4, or
  xfree86-3.  X_WINDOW_SYSTEM defaults to xorg on FreeBSD-current.  If you are
  switching to xorg, you should follow this set of commands to cleanly upgrade:

  pkg_delete -f /var/db/pkg/imake-4* /var/db/pkg/XFree86-*
  cd /usr/ports/x11/xorg && make install
  pkgdb -F

  Users of -stable or older -current can switch to X.Org by setting
  X_WINDOW_SYSTEM=xorg in make.conf and following the same process.

20040719:
  AFFECTS: users of PHP
  AUTHOR: ale@FreeBSD.org

  The old lang/php4 and lang/php5 ports have been splitted into 'base' PHP,
  PEAR, and shared extensions to allow more flexibility and add new features.
  Upgrading your current PHP installation will result in a 'base' PHP
  installation (no PEAR and no extensions).
  PEAR can be found in the new devel/php4-pear and devel/php5-pear ports, while
  the set of PHP extensions to install can be choosen via the meta-ports
  lang/php4-extensions and lang/php5-extensions, or installing singular
  extensions individually.
  If you have a previous php.ini configuration file, be sure to comment out
  the extension_dir parameter, since the correct path is statically compiled
  into the PHP binary.
  For an overview of the modules used with the old PHP binary, use
  the command "php -m".

20040717:
  AFFECTS: users of net/openldap21{,-sasl}-client
  AUTHOR: eik@FreeBSD.org

  OpenLDAP version 2.2 is now the default. To upgrade all ports do
    portupgrade -rfo net/openldap22-client openldap-client
  (or a similar command for the SASL variant). If you do not want to
  upgrade, add the line `WANT_OPENLDAP_VER?=21' to /etc/make.conf

  Note that when you want to upgrade openldap21{,sasl}-server, you have
  to use slapcat/slapadd to migrate the database, since the internal
  format is not binary compatible. Simply upgrading the server without
  doing a slapcat first can corrupt your database.

20040717:
  AFFECTS: users of mail/exim on FreeBSD 5.x
  AUTHOR: eik@FreeBSD.org

  The default location of the startup script has been changed to
  ${PREFIX}/etc/rc.d. When you depend on the previous behaviour,
  build the port with WITH_RCORDER=yes.

  Setting WITH_OPENLDAP_VER and WITH_MYSQL_VER do not automatically
  imply the corresponding WITH_ varibale. The use of these options
  is discouraged, use the global settings (WANT_OPENLDAP_VER and
  DEFAULT_MYSQL_VER) to set system wide defaults.

20040709:
  AFFECTS: users of mail/sender-milter
  AUTHOR: vs@FreeBSD.org

  Milter-sender version 0.58 released.
  When updating to version 0.58, beware if you have a personalised
  configuration file (milter-sender.cf).  The meaning of the
  MxAcceptsAllAction variable has changed and its default has changed
  from 4 to 6.  If this variable is not updated, greylisting might be
  more aggressive than expected.

20040708:
  AFFECTS: users of www/opera
  AUTHOR: osa@FreeBSD.org

  Opera 7.52 released.
  The file search.ini has been changed to ensure correct default
  addresses for dictionary and encyclopedia searches.  Existing
  versions will be overwritten on upgrade.  Users who have a
  customized search.ini file that they would like to keep, should
  edit its version number to 4 before upgrading.  Note that you
  have to edit the search.ini file located in the /.opera folder.

  [Version]
  File Version=4

  Other changes you are may find in changelog, its
  available at http://www.opera.com/freebsd/changelogs/752/

20040706:
  AFFECTS: users of Python bindings for textproc/lib{xml2,xslt} libraries
  AUTHOR: gnome@FreeBSD.org

  Python bindings for libxml2 and libxslt libraries were moved out into
  separate slave ports. Please install textproc/py-libxml2 and
  textproc/py-libxslt to get bindings back to your system.

20040703:
  AFFECTS: users of net/netatalk-devel
  AUTHOR: marcus@FreeBSD.org

  Netatalk-devel has been converted to use RCng.  That means all of the
  netatalk daemons must be enabled in /etc/rc.conf before they will start
  (previously, all netatalk daemons would start by default).  The following
  variables are used by the new netatalk.sh script:

  atalkd_enable
  cnid_metad_enable
  papd_enable
  afpd_enable
  timelord_enable

  See the netatalk.sh script for more details.

20040701:
  AFFECTS: users of security/portaudit
  AUTHOR: eik@FreeBSD.org

  The preference file format, as well as the periodic(8)
  names have changed. If you use the default settings,
  no modifications are necessary.

  new settings in /usr/local/etc/portaudit.conf:
    portaudit_fetch_env="HTTP_PROXY="
    portaudit_fetch_cmd="fetch -1amp"
    portaudit_sites="http://www.FreeBSD.org/ports/"

  new settings in periodic.conf(5):
    daily_status_security_portaudit_enable="YES"
    daily_status_security_portaudit_expiry="2"
    daily_status_security_portaudit_user="nobody"

20040629:
  AFFECTS: users of net/daapd
  AUTHOR: lth@FreeBSD.org

  Daapd must now be enabled in rc.conf. Add this to your /etc/rc.conf:
  daapd_enable="YES"

20040626:
  AFFECTS: users of php4 and php5 with the PDFlib extension
  AUTHOR: ale@FreeBSD.org

  The PDFlib extension has been removed from the archive and moved to PECL.
  Consequently to enable it you have to install print/pecl-pdflib.
  Alternatively you may want to try the experimental print/pecl-panda.

20040625:
  AFFECTS: users of ftp/pure-ftpd
  AUTHOR: pav@FreeBSD.org

  Pure-ftpd must be enabled in rc.conf now. Add this to your /etc/rc.conf:
  pureftpd_enable="YES"

20040622:
  AFFECTS: users of net/openslp
  AUTHOR: kuriyama@FreeBSD.org

  The openslp port must now be enabled / disabled and configured in
  rc.conf.  See the script for details.

20040619:
  AFFECTS: users of sysutils/webmin and sysutils/usermin
  AUTHOR: olgeni@FreeBSD.org

  The webmin and usermin ports must now be enabled in rc.conf.
  See the pkg-message or script for details.

20040618:
  AFFECTS: users of japanese/ptex-tetex
  AUTHOR: hrs@FreeBSD.org

  The texmf.cnf file for pTeX is now installed in texmf/web2c-ptex.

20040618:
  AFFECTS: users of japanese/ptex-pkfonts*
  AUTHOR: hrs@FreeBSD.org

  The japanese/ptex-pkfonts* has been removed because pkfonts are
  already included in the teTeX distribution.

20040618:
  AFFECTS: users of japanese/xdvik-vflib*
  AUTHOR: hrs@FreeBSD.org

  The japanese/xdvik-vflib no longer supports VFlib2, and now depends on
  print/freetype2.  For the configuration details, see vfontmap file which
  installed as texmf/xdvi/vfontmap.  japanese/kochi-ttfonts is used for
  min and goth by default.

  xdvik-vflib-pk* variants has been removed because pkfonts are already included
  in the teTeX distribution.

20040618:
  AFFECTS: users of print/teTeX
  AUTHOR: hrs@FreeBSD.org

  The print/teTeX has been split into print/teTeX-base and print/teTeX-texmf,
  and print/teTeX is now a meta-port for the two and print/dvipsk-tetex and
  print/xdvik.  print/teTeX installs dvips and xdvi by default again (via
  print/dvipsk-tetex and print/xdvik).   For people who want to use teTeX,
  simply install print/teTeX with options set by default.

  print/teTeX-base has additional options for adding xdvi and dvips included
  in the teTeX distribution itself, but use of them are not recommended if
  you do not understand what you are trying to do.  Especially, when the
  options are set by yourself, do not install ports that match *xdvi* and
  *dvips* because they break the installed print/teTeX-base's dviware
  and such conflicts will not be detected.  In most cases, a combination
  of print/teTeX-base + print/dvipsk-tetex + print/xdvik (which are
  installed by print/teTeX by default) will be sufficient.

20040615:
  AFFECTS: users of www/firefox
  AUTHOR: gnome@FreeBSD.org

  The firefox-0.9 update has a special requirement before you can run it.
  You must first run firefox as root before running it as another user.
  The best way to do this is to su - to root or log
  in as root (i.e. do not su -m to root).  After becoming root, simply run
  ``firefox''.  You can then quit the browser, then run it as any other
  user.  If you do not run firefox as root first, the browser window will
  not appear.

20040608:
  AFFECTS: users of net/haproxy
  AUTHOR: clement@FreeBSD.org

  The haproxy port must now be enabled / disabled and configured in
  rc.conf.  See the pkg-message or script for details.

20040605:
  AFFECTS: users of www/apache2
  AUTHOR: clement@FreeBSD.org

  The apache2 port must now be enabled / disabled and configured in
  rc.conf.  See the pkg-message or script for details.

20040602:
  AFFECTS: users of sysutils/mkisofs and sysutils/mkisofs-devel
  AUTHOR: netchild@FreeBSD.org, marius@FreeBSD.org

  sysutils/mkisofs and sysutils/mkisofs-devel were merged into
  sysutils/cdrtools and sysutils/cdrtools-devel respectively.

  To update them generate ("make index") or fetch ("make fetchindex") a
  new INDEX/INDEX-5. Run "pkgdb -F" and unregister the mkisofs/-devel
  port. Then forcefully update the cdrtools port and all of its
  dependencies (e.g. "portupgrade -rf cdrtools"). After the update
  it may be necessary to rerun "pkgdb -F" and resolve a stale
  dependency to cdrtools.

20040531:
  AFFECTS: users of lang/perl5.8
  AUTHOR: mat@FreeBSD.org, marcus@FreeBSD.org

  lang/perl5.8 has been updated to 5.8.4. you should update everything
  depending on perl, that is :
    * first, upgrade your perl5.8 installation.
    * run "use.perl port", so that the system knows you have 5.8.4.
    * now, run some magic incantations to upgrade all ports depending on perl,
      that is run something like :
      portupgrade -f `(pkg_info -R perl-5.8.4 |tail +4; \
        find /usr/local/lib/perl5/site_perl/5.8.2 -type f -print0 \
        | xargs -0 pkg_which -fv | sed -e '/: ?/d' -e 's/.*: //')|sort -u`
      This is likely to fail for a few ports, you'll have to upgrade them
      afterward.

20040529:
  AFFECTS: users of mail/mailman and japanese/mailman
  AUTHOR: nork@FreeBSD.org

  In Mailman 2.1.5, some significant changes have been made to the
  file formats for qfiles and the pendings database.  See
  $PREFIX/share/doc/mailman/UPGRADING for details (if you define
  NOPORTDOCS, refer relevant file in an archive).

20040527:
  AFFECTS: users of net/openldap22-client
  AUTHOR: eik@FreeBSD.org

  The OpenLDAP library soname has changed, requiring a recompilation
  of all dependent ports:

  portupgrade -rf net/openldap22-client

20040525:
  AFFECTS: users of databases/postgresql-client
  AUTHOR: mat@FreeBSD.org

  This port was removed because of dependencies problem. If you still want to
  have it, install databases/postgresql7 with -DWITHOUT_SERVER

20040521:
  AFFECTS: users of irc/ircd-hybrid-ru
  AUTHOR: krion@FreeBSD.org

  UID/GID were changed from 6667 to 555, please manually delete
  old entries from /etc/passwd /etc/master.passwd and /etc/group

20040514:
  AFFECTS: users of audio/faad
  AUTHOR: pav@FreeBSD.org

  If the compilation of faad fails, please manually delete older
  installed version of faad and reinstall from port.

20040512:
  AFFECTS: users of print/teTeX
  AUTHOR: hrs@FreeBSD.org

  The print/teTeX no longer installs dvipsk by default.  To build and
  install dvipsk, you have to specify WITH_DVIPSK, or the dvipsk utility
  in the print/teTeX is also available print/dvipsk-tetex separately.
  This change is to resolve conflicts between various versions of dvips.

20040504:
  AFFECTS: users of mail/drac
  AUTHOR: nork@FreeBSD.org

  The "drac_flags" rc.conf(5) variable has been renamed to "dracd_flags".
  See the pkg-message or script for details.

20040501:
  AFFECTS: users of www/apache13
  AUTHOR: nork@FreeBSD.org

  The apache13 port must now be enabled / disabled and configured in
  rc.conf.  See the pkg-message or script for details.

20040429:
  AFFECTS: users of sysutils/smartmontools
  AUTHOR: nork@FreeBSD.org

  The smartmontools port must now be enabled / disabled and configured in
  rc.conf.  See the pkg-message or script for details.

20040420:
  AFFECTS: users of sysutils/cdrtools
  AUTHOR: netchild@FreeBSD.org

  The cdrecord program now uses ${PREFIX}/etc (e.g. /usr/local/etc) instead
  of /etc/default as the location of the global configuration file. If you
  created such a configuration file you need to copy it over to the new
  location.

20040420:
  AFFECTS: users of x11/kdebase3
  AUTHOR: kde@FreeBSD.org

  If you update KDE from version 3.2.1 or earlier to version 3.2.2 while
  running a KDE session, newly opened instances of Konqueror might hang
  or crash, depending on how far the update has progressed.

  If this happens, it is necessary to restart your KDE session in order to
  restore proper operations.

20040404:
  AFFECTS: GNOME desktop users
  AUTHOR: gnome@FreeBSD.org

  GNOME has been updated to 2.6.  Simply portupgrading will cause serious
  problems if you are using the desktop itself.  If you are a GNOME desktop
  user, you should carefully read the instructions at:

  http://www.freebsd.org/gnome/docs/faq26.html

  And use the gnome_upgrade.sh script to properly upgrade to GNOME 2.6.  If
  you are just a casual user of some of the GNOME libraries, portupgrade
  should be sufficient to update your ports.

20040316:
  AFFECTS: users of net/isc-dhcp3-*
  AUTHOR: des@FreeBSD.org

  The isc-dhcp3-* ports must now be enabled / disabled and configured in
  rc.conf.  See the pkg-message for details.

20040313:
  AFFECTS: users of textproc/expat2
  AUTHOR: marcus@FreeBSD.org

  Users of expat2 (and its many dependencies) should do the following to
  properly update expat2 and all of its dependencies:

  portupgrade -rf textproc/expat2

20040311:
  AFFECTS: users of databases/postgresql7
  AUTHOR: osa@FreeBSD.org

  PostgreSQL 7.4.2 Released and release notes available at
  http://www.postgresql.org/news/173.html

  NOTICE: unlike most minor versions, this version does require some
  updates to the pg_* system tables. Full instructions for how to do
  this are included in the full HISTORY file.

  DO NOT UPGRADE WITHOUT READING THESE INSTRUCTIONS.

20040309:
  AFFECTS: users of x11/kdelibs3 and x11/kdebase3
  AUTHOR: kde@FreeBSD.org

  If you update kdelibs from version 3.2.0 to version 3.2.1 while running
  a KDE 3.2.0 session, newly opened instances of Konqueror will silently
  crash as soon as the new version of kdelibs has been installed, due to
  mismatching linker symbols.

  It is recommended you quit your KDE session at that point and update
  kdebase to version 3.2.1, then restart KDE.

20040309:
  AFFECTS: users of audio/arts and x11/kdebase
  AUTHOR: kde@FreeBSD.org

  The arts port, PORTVERSION 1.2.1 does not include artswrapper anymore.
  Instead, artswrapper is now installed by a new port audio/artswrapper.

  Installation of artswrapper is optional, however:

  If you presently run KDE and you have "Run with the highest possible
  priority (realtime priority)" checked in Control Center/Sound & Multimedia/
  Sound System and you choose to NOT install audio/artswrapper, you need to

  - Uncheck "Run with the highest possible priority (realtime priority)"
    in Control Center/Sound & Multimedia/Sound System BEFORE updating arts

  OR

  - AFTER updating arts and kdebase, go to Control Center/Sound & Multimedia/
    Sound System, click on the unchecked "Run with the highest possible priority
    (realtime priority)", dismiss the message telling you that realtime is un-
    available or artswrapper is missing and then click Apply.

20040305:
  AFFECTS: users of security/antivir-milter
  AUTHOR: netchild@FreeBSD.org

  When updating from a previous version of security/antivir-milter you
  have to do the following after deinstalling the old port:
      rm <PREFIX>/AntiVir/antivir
      rm <PREFIX>/AntiVir/antivir.vdf
      chown root:wheel <PREFIX>/AntiVir
      chown root:smmsp <PREFIX>/AntiVir/hbedv.key
    In your SENDMAIL_MC change
      `S=unix:<PREFIX>/AntiVir/avmilter.sock, F=T, T=S:10m;R:10m;E:5m'
    to:
      `S=unix:/var/spool/avmilter/avmilter.sock, F=T, T=S:10m;R:10m;E:10m'
    and rebuild sendmail.cf.
    If /var/spool/avmilter exist you have to:
      chown -R smmsp:smmsp /var/spool/avmilter
    If you are using a customized <PREFIX>/etc/avmilter.conf the port
    won't remove it on deinstall and you have to manually change User
    and Group to smmsp there.
    Afterwards you can install the new version of this port. You then
    should run antivirupdater to get a current VDF.

20040226:
  AFFECTS: i386 users of ruby and portupgrade
  AUTHOR: knu@FreeBSD.org

  Change the default version of ruby to 1.8 for i386.

  If you are a ruby developer and want to keep ruby 1.6 as default,
  please add RUBY_DEFAULT_VER=1.6 to /etc/make.conf.

  Otherwise, please run the following series of commands to migrate to
  ruby 1.8:

  1) Reinstall portupgrade manually (and as a result ruby 1.8 will be
     installed):
	pkg_delete portupgrade-\*
	(cd /usr/ports/sysutils/portupgrade; make install clean)

  2) Reinstall everything that depends on ruby 1.6 to use ruby 1.8
     instead:
	portupgrade -fr lang/ruby16

  3) Reinstall ruby 1.8 (because the previous step kills symlinks):
	portupgrade -f lang/ruby18

  4) Deinstall ruby 1.6 stuff (if you are paranoia):
	pkg_deinstall -ri lang/ruby16

  5) If the above commands do now work somehow and portupgrade starts
     causing LoadError, please reinstall portupgrade manually again.
     Whenever you get confused, you can always deinstall portupgrade
     and all the ruby stuff (run "pkg_delete -r ruby-\*") and
     reinstall portupgrade as a last resort.

20040204:
  AFFECTS: 5.2-CURRENT users who started with a 5.2-RELEASE or older.
  AUTHOR: obrien@FreeBSD.org

  Change the default version of perl to 5.8.

  1) Force perl-5.6.1 to be upgraded with perl-5.8.
        portupgrade -o lang/perl5.8 -f perl-5.6.1_15

  2) Update all p5-* modules.
	portupgrade -f p5-\*

$FreeBSD$
