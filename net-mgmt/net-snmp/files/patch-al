--- configure.in.orig	Tue May  7 08:12:10 2002
+++ configure.in	Mon Jun 24 09:38:33 2002
@@ -1772,6 +1772,26 @@
 AC_CACHE_CHECK(type of rtentry structure,ac_cv_RTENTRY_TYPE,
 [
 
+dnl 4.4 compatible but renamed on FreeBSD
+AC_TRY_COMPILE([
+#include <sys/types.h>
+#define KERNEL
+#define _KERNEL
+#include <sys/socket.h>
+#undef KERNEL
+#undef _KERNEL
+#include <net/route.h>
+],[
+
+#ifndef STRUCT_RTENTRY_HAS_RT_DST
+#define rt_dst rt_nodes->rn_key
+#endif
+
+  struct rtentry rt; 
+  rt.rt_nodes[0].rn_bit = 1;
+  rt.rt_dst;
+  ], ac_cv_RTENTRY_TYPE="BSD-4.4")
+
 dnl 4.4 compat
 AC_TRY_COMPILE([
 #ifdef HAVE_SYS_PARAM_H
@@ -2117,29 +2137,29 @@
 #endif
 ],swdevt,sw_nblksenabled)
 
-AC_CHECK_STRUCT_FOR([
-#ifdef HAVE_SYS_STAT_H
-#include <sys/stat.h>
-#endif
-#if HAVE_SYS_STATFS_H
-#include <sys/statfs.h>
-#endif
-#if HAVE_SYS_STATVFS_H
-#include <sys/statvfs.h>
-#endif
-],statvfs,f_frsize)
-
-AC_CHECK_STRUCT_FOR([
-#ifdef HAVE_SYS_STAT_H
-#include <sys/stat.h>
-#endif
-#if HAVE_SYS_STATFS_H
-#include <sys/statfs.h>
-#endif
-#if HAVE_SYS_STATVFS_H
-#include <sys/statvfs.h>
-#endif
-],statvfs,f_files)
+dnl AC_CHECK_STRUCT_FOR([
+dnl #ifdef HAVE_SYS_STAT_H
+dnl #include <sys/stat.h>
+dnl #endif
+dnl #if HAVE_SYS_STATFS_H
+dnl #include <sys/statfs.h>
+dnl #endif
+dnl #if HAVE_SYS_STATVFS_H
+dnl #include <sys/statvfs.h>
+dnl #endif
+dnl ],statvfs,f_frsize)
+
+dnl AC_CHECK_STRUCT_FOR([
+dnl #ifdef HAVE_SYS_STAT_H
+dnl #include <sys/stat.h>
+dnl #endif
+dnl #if HAVE_SYS_STATFS_H
+dnl #include <sys/statfs.h>
+dnl #endif
+dnl #if HAVE_SYS_STATVFS_H
+dnl #include <sys/statvfs.h>
+dnl #endif
+dnl ],statvfs,f_files)
 
 AC_CHECK_STRUCT_FOR([
 #if HAVE_NLIST_H
