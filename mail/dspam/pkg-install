#!/bin/sh

# $FreeBSD$

PATH=/bin:/usr/sbin

upgradewarning() {
	echo "

	=======================================================================
	Note for upgraders from dspam 2.x:
	- DSPAM v3.0 has moved many features out to the commandline.
	- Other configure-time arguments have also been changed or removed.
	- The stucture of the database (MySQL, Oracle) has changed; if you use
	one of this the PKGMESSAGE will tell you what do do.

	While this port tries his best to help you with the upgrade, be sure
	to read the section UPGRADING of 1.1 INSTALLATION - UPGRADING from
	%%PORTDOCS%%/%%DOCSDIR%%/README. Because of the command line changes you
	risk to have all you mails going to the bit bucket with NO WARNING.
	
	Do not continue to install this port without shutting down your MTA
	and/or disableing dspam (if you are installing in the same place).
	If you whant to test the new version, install with PREFIX != /usr/local 
	and choose WITH_NO_CONFLICT in the OPTIONS menu; otherwise if you have 
	dspam-2.x this port will refuse to install.
	========================================================================
"
        sleep 3
}

featurewarning() {
	echo "
	
	Known issues:
	- WITH_ORACLE does not configure.
	- the new POP3 Proxy integration is not yet handled by this port
	- due to the removal of postgress client port from the Ports Tree
	if you choose WITH_POSTRESQL Postgresql 7.3 will be installed; if you
	plan to use a server on another machine do:
		1. Hit Ctrl+C now.
		2. Go in databases/postgresql73 and make -DWITHOUT_SERVER install
		3. Come back here and make install
	- the cgi part is really untested and requires more work
	- some changes from rc2 are not merged yet.
	- no supplimantary {platform|MTA|LDA,etc.} documentaion is in yet
	- qmail dspam-filter (http://sourceforge.net/projects/dspam-filter/)
	is not yet integrated.
	"
	sleep 8
}

case $2 in
PRE-INSTALL)
	upgradewarning
	featurewarning
	;;
UPGRADEWARNING)
	upgradewarning
	;;
esac
