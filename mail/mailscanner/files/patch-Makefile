--- ../MailScanner-4.22-5.old/Makefile	Thu Jan  1 01:00:00 1970
+++ Makefile	Mon Aug 11 12:36:06 2003
@@ -0,0 +1,150 @@
+BINOWN=		root
+BINGRP=		wheel
+BINMODE=	555
+SHAREOWN=	root
+SHAREGRP=	wheel
+SHAREMODE=	444
+
+
+INSTALL_SCRIPT=	install -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} 
+INSTALL_DATA=	install -o ${SHAREOWN} -g ${SHAREGRP} -m ${SHAREMODE}
+PREFIX=		/usr/local
+
+OVERWRITE_FILENAMERULES=no
+OVERWRITE_REPORTS=no
+
+all:	
+
+build:
+
+install:	install_libexec install_etc install_share install_lib install_startstop install_bin
+
+install_bin:
+.if !exists(.install_bin_DONE)
+	${INSTALL_SCRIPT} bin/tnef.linux ${PREFIX}/bin/tnef
+	touch .install_bin_DONE
+.endif
+
+install_libexec:
+.if !exists(.install_libexec_DONE)
+	@-mkdir ${PREFIX}/libexec/MailScanner 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/libexec/MailScanner 2>/dev/null
+	${INSTALL_SCRIPT} bin/MailScanner ${PREFIX}/libexec/MailScanner
+
+	# copy wrapper scripts
+	( cd lib ; find * -name "*-wrapper" -exec ${INSTALL_SCRIPT} '{}' ${PREFIX}'/libexec/MailScanner/{}'.sample \; ) 
+
+	# copy autoupdate scripts
+	( cd lib ; find * -name "*-autoupdate" -exec ${INSTALL_SCRIPT} '{}' ${PREFIX}'/libexec/MailScanner/{}'.sample \; )
+
+	touch .install_libexec_DONE
+.endif
+
+
+install_etc:
+.if !exists(.install_etc_DONE)
+	@-mkdir ${PREFIX}/etc/MailScanner 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/etc/MailScanner 2>/dev/null
+	${INSTALL_DATA} etc/MailScanner.conf ${PREFIX}/etc/MailScanner/MailScanner.conf.sample
+
+	# depending on the setting OVERWRITE_FILENAMERULES we will copy them or append a .sample (default)
+.if (${OVERWRITE_FILENAMERULES} == "yes")
+	${INSTALL_DATA} etc/filename.rules.conf ${PREFIX}/etc/MailScanner/filename.rules.conf
+.else
+	${INSTALL_DATA} etc/filename.rules.conf ${PREFIX}/etc/MailScanner/filename.rules.conf.sample
+.endif
+
+	${INSTALL_DATA} etc/spam.assassin.prefs.conf ${PREFIX}/etc/MailScanner/spam.assassin.prefs.conf.sample
+	${INSTALL_DATA} etc/spam.lists.conf ${PREFIX}/etc/MailScanner/spam.lists.conf.sample
+	${INSTALL_DATA} etc/virus.scanners.conf ${PREFIX}/etc/MailScanner/virus.scanners.conf
+
+	# rules subdir
+	@-mkdir ${PREFIX}/etc/MailScanner/rules 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/etc/MailScanner/rules 2>/dev/null
+	${INSTALL_DATA} etc/rules/EXAMPLES ${PREFIX}/etc/MailScanner/rules/EXAMPLES
+	${INSTALL_DATA} etc/rules/README ${PREFIX}/etc/MailScanner/rules/README
+	${INSTALL_DATA} etc/rules/spam.whitelist.rules ${PREFIX}/etc/MailScanner/rules/spam.whitelist.rules.sample
+
+	touch .install_etc_DONE
+.endif
+	
+install_share:
+.if !exists(.install_share_DONE)
+	@-mkdir ${PREFIX}/share/doc 2>/dev/null
+
+	@-mkdir ${PREFIX}/share/MailScanner
+	@-chmod -R ${BINMODE} ${PREFIX}/share/MailScanner 2>/dev/null
+
+	@-mkdir ${PREFIX}/share/doc/MailScanner 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/share/doc/MailScanner 2>/dev/null
+	
+	# First we create subdirectories if there are any
+	( cd docs ; find * -type d -exec mkdir ${PREFIX}'/share/doc/MailScanner/{}' \; )
+	( cd docs ; find * -type f ! -name "*.orig" -exec ${INSTALL_DATA} '{}' ${PREFIX}'/share/doc/MailScanner/{}' \; )
+
+	${INSTALL_DATA} INSTALL ${PREFIX}/share/doc/MailScanner/INSTALL
+	${INSTALL_DATA} INSTALL.FreeBSD ${PREFIX}/share/doc/MailScanner/INSTALL.FreeBSD
+	${INSTALL_DATA} INSTALL.OpenBSD ${PREFIX}/share/doc/MailScanner/INSTALL.OpenBSD
+	${INSTALL_DATA} README ${PREFIX}/share/doc/MailScanner/README
+
+        # reports subdir
+        # Create report subdirectories and set modes
+	( cd etc ; find reports -type d -exec mkdir ${PREFIX}'/share/MailScanner/{}' \; ) 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/share/MailScanner/reports
+
+        # Copy the individual reports
+        # depending on the setting OVERWRITE_REPORTS we will copy them or append a .sample (default)
+.if (${OVERWRITE_REPORTS} == "yes")
+	( cd etc ; find reports -type f ! -name "*.orig" -exec ${INSTALL_DATA} '{}' ${PREFIX}'/share/MailScanner/{}' \; )
+.else
+	( cd etc ; find reports -type f ! -name "*.orig" -exec ${INSTALL_DATA} '{}' ${PREFIX}'/share/MailScanner/{}'.sample \; )
+.endif
+
+	touch .install_share_DONE
+.endif
+	
+install_lib:
+.if !exists(.install_lib_DONE)
+	@-mkdir ${PREFIX}/lib/MailScanner 2>/dev/null
+	@-mkdir ${PREFIX}/lib/MailScanner/MailScanner 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/lib/MailScanner 2>/dev/null
+	@-chmod -R ${BINMODE} ${PREFIX}/lib/MailScanner/MailScanner 2>/dev/null
+
+	${INSTALL_SCRIPT} lib/MailScanner.pm ${PREFIX}/lib/MailScanner/MailScanner.pm
+	
+	(cd lib/MailScanner ; find * -type f ! -name "*.orig" -exec ${INSTALL_SCRIPT} '{}' ${PREFIX}'/lib/MailScanner/MailScanner/{}' \; )
+
+	touch .install_lib_DONE
+.endif 
+
+install_startstop:
+.if !exists(.install_startstop_DONE)
+
+	${INSTALL_SCRIPT} bin/mailscanner.sh ${PREFIX}/etc/rc.d/mailscanner.sh.sample
+	${INSTALL_SCRIPT} bin/mta.sh ${PREFIX}/etc/rc.d/mta.sh.sample
+
+	touch .install_startstop_DONE
+.endif
+
+initial-config:	install
+	# copy all files needed for standard config
+
+	# copy wrapper scripts
+	( cd lib ; find * -name "*-wrapper" -exec ${INSTALL_SCRIPT} '{}' ${PREFIX}'/libexec/MailScanner/{}' \; )
+
+	# copy autoupdate scripts
+	( cd lib ; find * -name "*-autoupdate" -exec ${INSTALL_SCRIPT} '{}' ${PREFIX}'/libexec/MailScanner/{}' \; )
+
+	${INSTALL_DATA} etc/MailScanner.conf ${PREFIX}/etc/MailScanner/MailScanner.conf
+	${INSTALL_DATA} etc/filename.rules.conf ${PREFIX}/etc/MailScanner/filename.rules.conf
+
+
+	${INSTALL_DATA} etc/spam.assassin.prefs.conf ${PREFIX}/etc/MailScanner/spam.assassin.prefs.conf
+	${INSTALL_DATA} etc/spam.lists.conf ${PREFIX}/etc/MailScanner/spam.lists.conf
+	${INSTALL_DATA} etc/virus.scanners.conf ${PREFIX}/etc/MailScanner/virus.scanners
+
+	${INSTALL_DATA} etc/rules/spam.whitelist.rules ${PREFIX}/etc/MailScanner/rules/spam.whitelist.rules
+
+	( cd etc/reports/en ; find * -type f ! -name "*.orig" -exec ${INSTALL_DATA} '{}' ${PREFIX}'/share/MailScanner/reports/en/{}' \; );
+
+
