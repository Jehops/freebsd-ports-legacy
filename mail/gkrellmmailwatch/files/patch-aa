--- Makefile.orig	Mon Sep 18 21:40:13 2000
+++ Makefile	Tue Mar 13 00:18:02 2001
@@ -1,32 +1,30 @@
 # Makefile for the GKrellM mailwatch plugin
 
-GTK_INCLUDE = `gtk-config --cflags`
-GTK_LIB = `gtk-config --libs`
+GTK_INCLUDE = `$(GTK_CONFIG) --cflags`
+GTK_LIB = `$(GTK_CONFIG) --libs`
 
-GKRELLM_INCLUDE= -I/usr/local/include
+GKRELLM_INCLUDE= -I$(PREFIX)/include
 
 IMLIB_INCLUDE = `imlib-config --cflags-gdk`
 IMLIB_LIB = `imlib-config --libs-gdk`
 
 INSTALL=install -c -s -m 755
 
-FLAGS = -O2 -Wall -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE) $(GKRELLM_INCLUDE)
+CFLAGS+= -Wall -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE) $(GKRELLM_INCLUDE)
 LIBS = $(GTK_LIB) $(IMLIB_LIB)
-LFLAGS = -shared -lpthread
-
-CC = gcc $(CFLAGS) $(FLAGS)
+LFLAGS = -shared -pthread
 
 OBJS = mailwatch.o
 
 all: mailwatch.so
 
 mailwatch.so: $(OBJS)
-	$(CC) $(OBJS) -o mailwatch.so $(LFLAGS) $(LIBS)
+	$(CC) $(CFLAGS) $(OBJS) -o mailwatch.so $(LFLAGS) $(LIBS)
 
 clean:
 	rm -f *.o core *.so* *.bak *~
+
 install: 
-	$(INSTALL) -c -s -m 755  mailwatch.so /usr/share/gkrellm/plugins
+	$(INSTALL) mailwatch.so $(PREFIX)/libexec/gkrellm/plugins
 
 mailwatch.c.o: mailwatch.c
-
