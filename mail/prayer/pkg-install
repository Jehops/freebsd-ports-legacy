#!/bin/sh

PATH=/bin:/usr/sbin

USER=_prayer
GROUP=prayer
UID=917
GID=917

case $2 in
  PRE-INSTALL)
  if pw group show "$GROUP" 2>/dev/null;then
    echo "You already have a group \"${GROUP}\", so I will use it."
  else
    if pw groupadd "${GROUP}" -g ${GID};then
      echo "Added group \"${GROUP}\"."
    else 
      echo "Adding group \"${GROUP}\" failed..."
      exit 1
    fi
  fi
  if pw user show "${USER}" 2>/dev/null; then
    echo "You already have a user \"${USER}\", so I will use it."
  else
    if pw useradd ${USER} -u ${UID} -g ${GROUP} -h - \
      -s /sbin/nologin -L daemon -d /nonexistent -c "Prayer Account"
    then
      echo "Added user \"${USER}\"."
    else
      echo "Adding user \"${USER}\" failed..."
      exit 1
    fi
  fi
  ;;
esac
