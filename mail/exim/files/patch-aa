--- scripts/exim_install.orig	Mon Nov  9 19:01:40 1998
+++ scripts/exim_install	Thu Nov 12 15:26:57 1998
@@ -121,18 +121,4 @@
 fi
 
-# If info directory is needed and doesn't exist, try to create it
-
-if [ "${INFO_DIRECTORY}" != "" -a ! -d "${INFO_DIRECTORY}" ]; then
-  echo mkdir -p ${INFO_DIRECTORY}
-  ${real} mkdir -p ${INFO_DIRECTORY}
-  if [ $? -ne 0 ]; then
-    echo $com ""
-    echo $com "**** Exim installation ${ver}failed ****"
-    exit 1
-  else
-    echo $com ${INFO_DIRECTORY} created
-  fi
-fi
-
 # If no arguments, install everything
 
@@ -202,4 +188,24 @@
 
 
+# Install exim.sh startup script in FreeBSD's ${PREFIX}/etc/rc.d so that
+# exim will start up on boot once sendmail is disabled and
+# ${PREFIX}/etc/exim/configure is in place.
+
+echo $com ""
+
+if [ -f ${PREFIX}/etc/rc.d/exim.sh ]; then
+  echo $com "${PREFIX}/etc/rc.d/exim.sh exists, not overwritten"
+else
+  echo $com "Installing exim.sh startup script in $PREFIX/etc/rc.d"
+  ${real} mkdir -p ${PREFIX}/etc/rc.d
+  echo ${CP} -p exim.sh ${PREFIX}/etc/rc.d/
+  ${real} ${CP} -p exim.sh ${PREFIX}/etc/rc.d/
+  if [ $? -ne 0 ]; then
+    echo $com ""
+    echo $com "**** Exim installation ${ver}failed ****"
+    exit 1
+  fi
+fi
+
 
 # If there is no configuration file, install the default,
@@ -208,7 +214,6 @@
 echo $com ""
 
-if [ ! -f ${CONFIGURE_FILE} ]; then
-  echo $com Installing default configuration in ${CONFIGURE_FILE}
-  echo $com because there is no existing configuration file.
+  echo $com Installing sample configuration file
+  ${real} mkdir -p ${CONFIGURE_FILE%/*}
   echo ${CP} ../src/configure.default ${CONFIGURE_FILE}
   ${real} ${CP} ../src/configure.default ${CONFIGURE_FILE}
@@ -218,44 +223,44 @@
     exit 1
   fi
-else
-  echo $com Configuration file ${CONFIGURE_FILE} already exists
-fi
 
-# Install info files if required; the existence of the directory is
-# tested above.
+# Install info files if the directory is defined and the Texinfo
+# source documentation is present.
 
-##### This enhancement is awaiting a shell equivalent of FreeBSD's
-##### 'install-info' command.
+if [ "${INFO_DIRECTORY}" != "" -a -f ../doc/spec.texinfo ] ; then
+  echo $com ""
+  if [ ! -d "${INFO_DIRECTORY}" ] ; then
+    echo mkdir -p ${INFO_DIRECTORY}
+    ${real} mkdir -p ${INFO_DIRECTORY}
+    if [ $? -ne 0 ]; then
+      echo $com ""
+      echo $com "**** Exim installation ${ver}failed ****"
+      exit 1
+    else
+      echo $com ${INFO_DIRECTORY} created
+    fi
+  fi
 
+  echo $com Info installation directory is ${INFO_DIRECTORY}
+  echo $com ""
 
-# if [ "${INFO_DIRECTORY}" != "" ] ; then
-#   echo $com ""
-#   echo $com Info installation directory is ${INFO_DIRECTORY}
-#   echo $com ""
-#
-#   if [ -f ../doc/spec.texinfo ]; then
-#     makeinfo --no-split --output exim_overview.info ../doc/oview.texinfo
-#     echo ${CP} exim_overview.info ${INFO_DIRECTORY}
-#     ${real} ${CP} exim_overview.info ${INFO_DIRECTORY}
-#     install-info --section="Exim" \
-#         --entry "* Overview: (exim_overview).    Overview of the Exim system" \
-#         ${INFO_DIRECTORY}/exim_overview.info ${INFO_DIRECTORY}/dir
-#     makeinfo --no-split --output exim.info ../doc/spec.texinfo
-#     echo ${CP} exim.info ${INFO_DIRECTORY}
-#     ${real} ${CP} exim.info ${INFO_DIRECTORY}
-#     install-info --section="Exim" \
-#         --entry "* User guide: (exim).           Exim manual" \
-#         ${INFO_DIRECTORY}/exim.info ${INFO_DIRECTORY}/dir
-#     makeinfo --no-split --output exim_filter.info ../doc/filter.texinfo
-#     echo ${CP} exim_filter.info ${INFO_DIRECTORY}
-#     ${real} ${CP} exim_filter.info ${INFO_DIRECTORY}
-#     install-info --section="Exim" \
-#         --entry "* Filtering: (exim_filter).     Filtering mail with Exim" \
-#         ${INFO_DIRECTORY}/exim_filter.info ${INFO_DIRECTORY}/dir
-#   else
-#     echo $com "**** Texinfo documentation not found in doc directory ****"
-#     exit 1
-#   fi
-# fi
+  makeinfo --no-split --output exim_overview.info ../doc/oview.texinfo
+  echo ${CP} exim_overview.info ${INFO_DIRECTORY}
+  ${real} ${CP} exim_overview.info ${INFO_DIRECTORY}
+  install-info --section="Exim" \
+      --entry "* Overview: (exim_overview).    Overview of the Exim system" \
+      ${INFO_DIRECTORY}/exim_overview.info ${INFO_DIRECTORY}/dir
+  makeinfo --no-split --output exim.info ../doc/spec.texinfo
+  echo ${CP} exim.info ${INFO_DIRECTORY}
+  ${real} ${CP} exim.info ${INFO_DIRECTORY}
+  install-info --section="Exim" \
+      --entry "* User guide: (exim).           Exim manual" \
+      ${INFO_DIRECTORY}/exim.info ${INFO_DIRECTORY}/dir
+  makeinfo --no-split --output exim_filter.info ../doc/filter.texinfo
+  echo ${CP} exim_filter.info ${INFO_DIRECTORY}
+  ${real} ${CP} exim_filter.info ${INFO_DIRECTORY}
+  install-info --section="Exim" \
+      --entry "* Filtering: (exim_filter).     Filtering mail with Exim" \
+      ${INFO_DIRECTORY}/exim_filter.info ${INFO_DIRECTORY}/dir
+fi
 
 # Everything OK
