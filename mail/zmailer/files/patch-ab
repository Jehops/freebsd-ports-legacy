--- configure.orig	Mon Jul 19 03:48:10 1999
+++ configure	Thu Feb 17 19:10:58 2000
@@ -94,6 +94,8 @@
   --with-getpwnam-library=\"-L.. -l..\"
                             Linking options for non-std getpwnam() libraries"
 ac_help="$ac_help
+  --with-openssl            Use openssl"
+ac_help="$ac_help
   --with-openssl-prefix=/dir/path (defines both include and lib)"
 ac_help="$ac_help
   --with-openssl-include=/dir/incl/path"
@@ -4661,7 +4663,7 @@
 done
 
 if test "$ac_cv_header_security_pam_appl_h" = "yes"; then
-    AUTHLIB="-lpam -ldl"
+    AUTHLIB="-lpam"
 else
     if test "$ac_cv_header_shadow_h" = "yes"; then
 	AUTHLIB="-lshadow"
@@ -7847,6 +7849,9 @@
 
 
 
+# Check whether we are using openssl.
+if test "x$with_openssl" != xno; then
+
 # Check whether --with-openssl-prefix or --without-openssl-prefix was given.
 if test "${with_openssl_prefix+set}" = set; then
   withval="$with_openssl_prefix"
@@ -7929,12 +7934,13 @@
     OPENSSLPREFIX="/usr"
     OPENSSLINCL=""
     if test -f "$OPENSSLPREFIX/lib/libssl.so" ; then
-      OPENSSLLIB="$OPENSSLPREFIX/lib/libssl.so $OPENSSLPREFIX/lib/libcrypto.so"
+      OPENSSLLIB="$OPENSSLPREFIX/lib/libssl.so $OPENSSLPREFIX/lib/libcrypto.so \$(EXTRA_SSL_LIBS)"
     else
-      OPENSSLLIB="$OPENSSLPREFIX/lib/libssl.a $OPENSSLPREFIX/lib/libcrypto.a"
+      OPENSSLLIB="$OPENSSLPREFIX/lib/libssl.a $OPENSSLPREFIX/lib/libcrypto.a \$(EXTRA_SSL_LIBS)"
     fi
     echo "$ac_t""You have OpenSSL version 0.9.3a (or newer) at system root!" 1>&6
   fi
+fi
 fi
 
 
