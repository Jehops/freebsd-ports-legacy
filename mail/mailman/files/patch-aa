--- Mailman/Utils.py.orig	Wed Jul 25 20:06:46 2001
+++ Mailman/Utils.py	Fri Sep 21 16:46:16 2001
@@ -405,7 +405,12 @@
         f = open(mm_cfg.SITE_PW_FILE)
         pw2 = f.read()
         f.close()
-        salt = pw2[:2]
+        # First we check for the Modular Crypt Format
+        mcf = re.match(r'\$\d\$(\w+)\$', pw2)
+        if mcf:     # Is it MCF?
+            salt=mcf.group(1)
+        else:       # No, it's traditional DES.
+            salt=pw2[:2]
         # crypt() has a bug in that if the salt is the empty string, it will
         # always return the empty string, regardless of the key. :(
         if len(salt) < 2:
