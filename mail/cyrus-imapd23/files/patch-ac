Index: configure
diff -u configure.orig configure
--- configure.orig	Sat May 29 03:08:17 2004
+++ configure	Sat May 29 04:38:20 2004
@@ -6551,7 +6551,7 @@
 	    BDB_LIBADD=""
 	fi
 
-        for dbname in db-4.2 db4.2 db42 db-4.1 db4.1 db41 db-4.0 db4.0 db-4 db40 db4 db-3.3 db3.3 db33 db-3.2 db3.2 db32 db-3.1 db3.1 db31 db-3 db30 db3 db
+        for dbname in ${with_bdb} db-4.2 db4.2 db42 db-4.1 db4.1 db41 db-4.0 db4.0 db-4 db40 db4 db-3.3 db3.3 db33 db-3.2 db3.2 db32 db-3.1 db3.1 db31 db-3 db30 db3 db
           do
             as_ac_Lib=`echo "ac_cv_lib_$dbname''_db_create" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for db_create in -l$dbname" >&5
@@ -6575,11 +6575,11 @@
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char db_create ();
+#include <db.h>
 int
 main ()
 {
-db_create ();
+db_create (0, 0, 0);
   ;
   return 0;
 }
@@ -13502,6 +13502,7 @@
     EXTRA_SUBDIRS="${EXTRA_SUBDIRS} perl"
     PERL_SUBDIRS="imap"
     PERL="${with_perl}"
+    eval `${PERL} -V:cccdlflags`
     PERL_CCCDLFLAGS="$cccdlflags"
 
 fi
@@ -14251,7 +14252,7 @@
 #define HAVE_UCDSNMP 1
 _ACEOF
 
-      LIB_UCDSNMP="-lucdagent -lucdmibs -lsnmp"
+      LIB_UCDSNMP="-lucdagent -lucdmibs -lsnmp -lkvm -ldevstat -lwrap"
       echo "$as_me:$LINENO: checking for rpmdbOpen in -lrpm" >&5
 echo $ECHO_N "checking for rpmdbOpen in -lrpm... $ECHO_C" >&6
 if test "${ac_cv_lib_rpm_rpmdbOpen+set}" = set; then
