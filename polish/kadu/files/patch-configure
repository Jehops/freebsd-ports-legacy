--- configure.ac.orig	2008-02-26 01:07:33.000000000 +0100
+++ configure.ac	2008-03-23 18:11:17.000000000 +0100
@@ -335,7 +335,7 @@
 				done; \
 			fi && \
 
-			if test $enable_final == yes; then \
+			if test "$enable_final" = "yes"; then \
 				for src in $MODULE_SOURCES; do \
 					if test "`echo $src | sed 's/.*\.\(.*\)$/\1/'`" == "cpp"; then \
 						echo "#include \"$src\"" >> modules/$mod/.final2.cpp; \
@@ -762,6 +762,7 @@
 	with_existing_libgadu=no
 fi
 if test "$with_existing_libgadu" != "no"; then
+	save_CXXFLAGS="$CXXFLAGS"
 	FIND_HEADER([libgadu.h],[$with_existing_libgadu $with_existing_libgadu/include],
 	[
 		GADU_INCLUDES="-I$FILE_DIR"
@@ -771,9 +772,11 @@
 	[
 		GADU_LIBS="$GADU_LIBS -L$FILE_DIR"
 	])
+	CXXFLAGS="$CXXFLAGS $GADU_INCLUDES"
 	AC_CHECK_MEMBER([struct gg_dcc7.uin], [],
 	[AC_MSG_ERROR([Your libgadu doesn't support for dcc7, please use our SVN snapshot by removing --with-existing-libgadu option !])],
 	[#include <libgadu.h>])
+	CXXFLAGS="$save_CXXFLAGS"
 else
 	MY_SUBDIRS="$MY_SUBDIRS libgadu"
 	GADU_LIBS="../libgadu/src/.libs/libgadu.a"
