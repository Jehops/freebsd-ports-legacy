--- Makefile.orig	2007-10-20 19:22:39.000000000 -0400
+++ Makefile	2007-10-29 13:17:56.000000000 -0400
@@ -46,10 +46,10 @@
 
 
 # compiler and preprocessor options
-CXX = g++
+CXX ?= g++
 
-INCLUDE_DIRS = src src/include src/irrxml
-CPPFLAGS = $(addprefix -I,$(INCLUDE_DIRS)) -DNDEBUG -DUSE_TLS=$(USE_TLS)
+INCLUDE_DIRS = src src/include src/irrxml 
+CPPFLAGS = $(addprefix -I,$(INCLUDE_DIRS)) -I%%LOCALBASE%%/include -DNDEBUG -DUSE_TLS=$(USE_TLS)
 
 #CXXFLAGS = -pipe $(shell fltk-config --cxxflags) -Wall -Wno-deprecated -O2 -ffast-math -fno-rtti -fexceptions
 CXXFLAGS = -pipe $(shell fltk-config --cxxflags) -Wno-uninitialized -Wno-deprecated \
@@ -63,8 +63,8 @@
 IMGLIBS = -lfltk_jpeg -lfltk_png -lfltk_z
 #LIB_DIRS = -L/usr/local/lib
 
-DYN_LDFLAGS = $(shell fltk-config --ldflags --use-images)
-STATIC_LDFLAGS = $(shell fltk-config --ldstaticflags --use-images)
+DYN_LDFLAGS = $(shell fltk-config --ldflags --use-images) -L%%LOCALBASE%%/lib
+STATIC_LDFLAGS = $(shell fltk-config --ldstaticflags --use-images) -L%%LOCALBASE%%/lib
 
 # our source files
 SRC_DIR = src
@@ -159,8 +159,9 @@
 
 #################### begin cfg
 ifeq ($(CTARG),hamlib)
-    CPPFLAGS += -DPORTAUDIO
-    LDFLAGS = $(DYN_LDFLAGS) -lportaudiocpp -lportaudio -lsndfile $(HAMLIBS)
+#    CPPFLAGS += -DPORTAUDIO
+#    LDFLAGS = $(DYN_LDFLAGS) -lportaudiocpp -lportaudio -lsndfile $(HAMLIBS)
+    LDFLAGS = $(DYN_LDFLAGS) -lsndfile $(HAMLIBS)
     SRC += $(HAMLIB_SRC)
 endif
 
