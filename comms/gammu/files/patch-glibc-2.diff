From 9d71b23a73186aad73453973e05a94fb36e16f4f Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Michal=20=C4=8Ciha=C5=99?= <mcihar@novell.com>
Date: Fri, 28 Jan 2011 16:08:32 +0100
Subject: [PATCH] Properly handle need for two include dirs for glib.

The second use is used for glibconfig.h.
---
 cmake/FindGlib.cmake |   15 ++++++++-------
 1 files changed, 8 insertions(+), 7 deletions(-)

diff --git a/cmake/FindGlib.cmake b/cmake/FindGlib.cmake
index 9bdee14..f1986c9 100644
--- cmake/FindGlib.cmake
+++ cmake/FindGlib.cmake
@@ -25,17 +25,18 @@ else (GLIB_PKG_FOUND)
     find_path(GLIB_INCLUDE_DIR NAMES glib.h PATH_SUFFIXES glib-2.0)
     find_path(GLIB_CONFIG_INCLUDE_DIR NAMES glibconfig.h PATHS ${GLIB_LIBRARIES_DIR} PATH_SUFFIXES glib-2.0/include)
 
-    if (GLIB_INCLUDE_DIR AND GLIB_CONFIG_INCLUDE_DIR AND GLIB_LIBRARIES)
-        set(GLIB_INCLUDE_DIRS ${GLIB_INCLUDE_DIR} ${GLIB_CONFIG_INCLUDE_DIR})
-    endif (GLIB_INCLUDE_DIR AND GLIB_CONFIG_INCLUDE_DIR AND GLIB_LIBRARIES)
 endif (GLIB_PKG_FOUND)
 
-if(GLIB_INCLUDE_DIR AND GLIB_LIBRARIES)
+if (GLIB_INCLUDE_DIR AND GLIB_CONFIG_INCLUDE_DIR AND GLIB_LIBRARIES)
+    set(GLIB_INCLUDE_DIRS ${GLIB_INCLUDE_DIR} ${GLIB_CONFIG_INCLUDE_DIR})
+endif (GLIB_INCLUDE_DIR AND GLIB_CONFIG_INCLUDE_DIR AND GLIB_LIBRARIES)
+
+if(GLIB_INCLUDE_DIRS AND GLIB_LIBRARIES)
    set(GLIB_FOUND TRUE CACHE INTERNAL "glib-2.0 found")
    message(STATUS "Found glib-2.0: ${GLIB_INCLUDE_DIR}, ${GLIB_LIBRARIES}")
-else(GLIB_INCLUDE_DIR AND GLIB_LIBRARIES)
+else(GLIB_INCLUDE_DIRS AND GLIB_LIBRARIES)
    set(GLIB_FOUND FALSE CACHE INTERNAL "glib-2.0 found")
    message(STATUS "glib-2.0 not found.")
-endif(GLIB_INCLUDE_DIR AND GLIB_LIBRARIES)
+endif(GLIB_INCLUDE_DIRS AND GLIB_LIBRARIES)
 
-mark_as_advanced(GLIB_INCLUDE_DIR GLIB_LIBRARIES)
+mark_as_advanced(GLIB_INCLUDE_DIR GLIB_CONFIG_INCLUDE_DIR GLIB_INCLUDE_DIRS GLIB_LIBRARIES)
-- 
1.6.1

