--- autoconf/fbsd.in.orig	Wed May 22 10:25:23 2002
+++ autoconf/fbsd.in	Wed May 22 10:25:28 2002
@@ -18,7 +18,7 @@
                  dansguardian.conf config.cache Makefile logrotation weightedphraselist
 
 PASSVARS = -DPROXYUSER=\"${PROXYUSER}\"
-PASSVARS += -DLOGLOCATION=\"${LOGLOCATION}access.log\"
+PASSVARS += -DLOGLOCATION=\"${LOGLOCATION}dansguardian.log\"
 PASSVARS += -DCONFFILELOCATION=\"${CONFFILELOCATION}dansguardian.conf\"
 PASSVARS += -DPIDDIR=\"${PIDDIR}\"
 
@@ -43,39 +43,36 @@
 	@test -d $I$(CONFFILELOCATION) || install -d $I$(CONFFILELOCATION)
 	@test -d $I$(CGIBINLOCATION) || install -d $I$(CGIBINLOCATION)
 	@test -d $I$(MANUALFILES)man8/ || install -d $I$(MANUALFILES)man8/
-	@test -d $I$(LOGLOCATION) || install -d $I$(LOGLOCATION)
-	@test -d $I$(BINARYLOCATION) || /usr/sbin/install -d $I$(BINARYLOCATION)
-	cp -f ./dansguardian $I$(BINARYLOCATION)dansguardian
-	cp -f ./dansguardian.conf $I$(CONFFILELOCATION)dansguardian.conf
-	cp -f ./bannedphraselist $I$(CONFFILELOCATION)bannedphraselist
-	cp -f ./exceptionphraselist $I$(CONFFILELOCATION)exceptionphraselist
-	cp -f ./weightedphraselist $I$(CONFFILELOCATION)weightedphraselist
-	cp -f ./weightedphraselist.goodwords $I$(CONFFILELOCATION)weightedphraselist.goodwords
-	cp -f ./weightedphraselist.personals $I$(CONFFILELOCATION)weightedphraselist.personals
-	cp -f ./weightedphraselist.pornsites $I$(CONFFILELOCATION)weightedphraselist.pornsites
-	cp -f ./weightedphraselist.pornwords $I$(CONFFILELOCATION)weightedphraselist.pornwords
-	cp -f ./weightedphraselist.warez $I$(CONFFILELOCATION)weightedphraselist.warez
-	cp -f ./bannediplist $I$(CONFFILELOCATION)bannediplist
-	cp -f ./banneduserlist $I$(CONFFILELOCATION)banneduserlist
-	cp -f ./bannedextensionlist $I$(CONFFILELOCATION)bannedextensionlist
-	cp -f ./bannedmimetypelist $I$(CONFFILELOCATION)bannedmimetypelist
-	cp -f ./bannedurllist $I$(CONFFILELOCATION)bannedurllist
-	cp -f ./bannedregexpurllist $I$(CONFFILELOCATION)bannedregexpurllist
-	cp -f ./bannedsitelist $I$(CONFFILELOCATION)bannedsitelist
-	cp -f ./exceptionsitelist $I$(CONFFILELOCATION)exceptionsitelist
-	cp -f ./exceptionurllist $I$(CONFFILELOCATION)exceptionurllist
-	cp -f ./exceptionuserlist $I$(CONFFILELOCATION)exceptionuserlist
-	cp -f ./exceptioniplist $I$(CONFFILELOCATION)exceptioniplist
-	cp -f ./pics $I$(CONFFILELOCATION)pics
-	cp -f ./template.html $I$(CONFFILELOCATION)template.html
-	cp -f ./logrotation $I$(CONFFILELOCATION)logrotation
-	cp -f ./dansguardian.bsdv $I$(SYSVLOCATION)dansguardian.sh
-	cp -f ./dansguardian.pl $I$(CGIBINLOCATION)dansguardian.pl
+	@test -d $I$(BINARYLOCATION) || install -d $I$(BINARYLOCATION)
+	install -o root -g wheel -m 755 ./dansguardian $I$(BINARYLOCATION)dansguardian
+	install -o root -g wheel -m 644 ./dansguardian.conf $I$(CONFFILELOCATION)dansguardian.conf
+	install -o root -g wheel -m 644 ./bannedphraselist $I$(CONFFILELOCATION)bannedphraselist
+	install -o root -g wheel -m 644 ./exceptionphraselist $I$(CONFFILELOCATION)exceptionphraselist
+	install -o root -g wheel -m 644 ./weightedphraselist $I$(CONFFILELOCATION)weightedphraselist
+	install -o root -g wheel -m 644 ./weightedphraselist.goodwords $I$(CONFFILELOCATION)weightedphraselist.goodwords
+	install -o root -g wheel -m 644 ./weightedphraselist.personals $I$(CONFFILELOCATION)weightedphraselist.personals
+	install -o root -g wheel -m 644 ./weightedphraselist.pornsites $I$(CONFFILELOCATION)weightedphraselist.pornsites
+	install -o root -g wheel -m 644 ./weightedphraselist.pornwords $I$(CONFFILELOCATION)weightedphraselist.pornwords
+	install -o root -g wheel -m 644 ./weightedphraselist.warez $I$(CONFFILELOCATION)weightedphraselist.warez
+	install -o root -g wheel -m 644 ./bannediplist $I$(CONFFILELOCATION)bannediplist
+	install -o root -g wheel -m 644 ./banneduserlist $I$(CONFFILELOCATION)banneduserlist
+	install -o root -g wheel -m 644 ./bannedextensionlist $I$(CONFFILELOCATION)bannedextensionlist
+	install -o root -g wheel -m 644 ./bannedmimetypelist $I$(CONFFILELOCATION)bannedmimetypelist
+	install -o root -g wheel -m 644 ./bannedurllist $I$(CONFFILELOCATION)bannedurllist
+	install -o root -g wheel -m 644 ./bannedregexpurllist $I$(CONFFILELOCATION)bannedregexpurllist
+	install -o root -g wheel -m 644 ./bannedsitelist $I$(CONFFILELOCATION)bannedsitelist
+	install -o root -g wheel -m 644 ./exceptionsitelist $I$(CONFFILELOCATION)exceptionsitelist
+	install -o root -g wheel -m 644 ./exceptionurllist $I$(CONFFILELOCATION)exceptionurllist
+	install -o root -g wheel -m 644 ./exceptionuserlist $I$(CONFFILELOCATION)exceptionuserlist
+	install -o root -g wheel -m 644 ./exceptioniplist $I$(CONFFILELOCATION)exceptioniplist
+	install -o root -g wheel -m 644 ./pics $I$(CONFFILELOCATION)pics
+	install -o root -g wheel -m 644 ./template.html $I$(CONFFILELOCATION)template.html
+	install -o root -g wheel -m 755 ./dansguardian.bsdv $I$(SYSVLOCATION)dansguardian.sh
+	install -o root -g wheel -m 755 ./dansguardian.pl $I$(CGIBINLOCATION)dansguardian.pl
 	chmod o+x $I$(CGIBINLOCATION)dansguardian.pl
-	cp -f ./dansguardian.8.gz $I$(MANUALFILES)man8/dansguardian.8.gz
-	chown -R $(PROXYUSER).$(PROXYGROUP) $I$(LOGLOCATION)
-	chmod -R u+wr $I$(LOGLOCATION)
-	chmod u+wrx $I$(LOGLOCATION)
+	install -o root -g wheel -m 644 ./dansguardian.8 $I$(MANUALFILES)man8/dansguardian.8
+	touch $I$(LOGLOCATION)/dansguardian.log
+	chown $(PROXYUSER):$(PROXYGROUP) $I$(LOGLOCATION)/dansguardian.log
 
 uninstall:
 	rm -f $(BINARYLOCATION)dansguardian
@@ -83,7 +80,7 @@
 	rm -f $(CGIBINLOCATION)dansguardian.pl
 	rm -f $(MANUALFILES)man8/dansguardian.8.gz
 	rm -fr $(CONFFILELOCATION)
-	rm -fr $(LOGLOCATION)
+	rm -f $(LOGLOCATION)dansguardian.log
 
 clean:
 	rm -f $(OBJ) $(PROG)
