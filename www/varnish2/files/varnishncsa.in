#!/bin/sh
#
# $FreeBSD$
#

# PROVIDE: varnishncsa
# REQUIRE: DAEMON
# KEYWORD: shutdown

#
# Add the following lines to /etc/rc.conf to enable varnishncsa:
#
#varnishncsa_enable="YES"
#
# Configuration variables and their default values:
#
#varnishncsa_file=${varnishncsa_file:-"/var/log/varnish-ncsa.log"}
#varnishncsa_flags=${varnishncsa_flags:-"-D -P ${pidfile} -a -w ${varnishncsa_file}"}
#
# See varnishncsa(1) for a detailed overview of command-line options.
#

. %%RC_SUBR%%

name=varnishncsa
rcvar=`set_rcvar`

command="%%PREFIX%%/bin/varnishncsa"
pidfile="/var/run/${name}.pid"

# read configuration and set defaults
load_rc_config ${name}
: ${varnishncsa_enable="NO"}
: ${varnishncsa_file="/var/log/varnish-ncsa.log"}
: ${varnishncsa_flags="-P ${pidfile} -D -a -w ${varnishncsa_file}"}

load_rc_config ${name}

run_rc_command "$1"
