--- autoconf/fbsd.in.orig	Sun Feb 20 07:25:10 2005
+++ autoconf/fbsd.in	Wed Mar  2 15:21:28 2005
@@ -21,16 +21,15 @@
 		 logrotate.dansguardian dansguardianf1.conf
 
 PASSVARS = -DPROXYUSER=\"${PROXYUSER}\"
-#PASSVARS += -DLOGLOCATION=\"${LOGLOCATION}access.log\"
+PASSVARS += -DLOGLOCATION=\"${LOGLOCATION}dansguardian.log\"
 PASSVARS += -DCONFFILELOCATION=\"${CONFFILELOCATION}dansguardian.conf\"
-#PASSVARS += -DPIDDIR=\"${PIDDIR}\"
+PASSVARS += -DPIDDIR=\"${PIDDIR}\"
 
 #Some advanced options:
 #WARNING = -Wall
-#OPTIMISE = -O2
-OPTIMISE = ${CXXFLAGS}
 #DEBUG += -DDGDEBUG
 #STATIC = -static
+OPTIMISE = ${CXXFLAGS}
 
 I = $(INSTALLPREFIX)
 CFLAGS = $(OPTIMISE) $(WARNING)
@@ -39,53 +38,43 @@
 .cpp.o:
 	$(CPP) $(DEBUG) $(CFLAGS) -c $<
 
-all:	$(OBJ) 
+all:	$(OBJ)
 	$(CPP) -o dansguardian $(DGCFLAGS) $(DEBUG) $(OBJ) $(LIBS) dansguardian.cpp
 
 install:
 	@test -d $I$(SYSVLOCATION) || install -d $I$(SYSVLOCATION)
 	@test -d $I$(CONFFILELOCATION) || install -d $I$(CONFFILELOCATION)
-	@test -d $I$(CONFFILELOCATION)phraselists || install -d $I$(CONFFILELOCATION)phraselists
 	@test -d $I$(CONFFILELOCATION)languages || install -d $I$(CONFFILELOCATION)languages
+	@test -d $I$(CONFFILELOCATION)samples || install -d $I$(CONFFILELOCATION)samples
 	@test -d $I$(CGIBINLOCATION) || install -d $I$(CGIBINLOCATION)
 	@test -d $I$(MANUALFILES)man8/ || install -d $I$(MANUALFILES)man8/
-	@test -d $I$(LOGLOCATION) || install -d $I$(LOGLOCATION)
 	@test -d $I$(BINARYLOCATION) || install -d $I$(BINARYLOCATION)
-	cp -f ./filtergroupslist $I$(CONFFILELOCATION)filtergroupslist
-	cp -f ./dansguardianf1.conf $I$(CONFFILELOCATION)dansguardianf1.conf
-	cp -f ./dansguardian $I$(BINARYLOCATION)dansguardian
-	cp -f ./dansguardian.conf $I$(CONFFILELOCATION)dansguardian.conf
-	cp -f ./bannedphraselist $I$(CONFFILELOCATION)bannedphraselist
-	cp -f ./exceptionphraselist $I$(CONFFILELOCATION)exceptionphraselist
-	cp -f ./weightedphraselist $I$(CONFFILELOCATION)weightedphraselist
-	cp -f -R ./phraselists/* $I$(CONFFILELOCATION)phraselists/
-	cp -f -R ./languages/* $I$(CONFFILELOCATION)languages/
-	cp -f ./bannediplist $I$(CONFFILELOCATION)bannediplist
-	cp -f ./banneduserlist $I$(CONFFILELOCATION)banneduserlist
-	cp -f ./bannedextensionlist $I$(CONFFILELOCATION)bannedextensionlist
-	cp -f ./bannedmimetypelist $I$(CONFFILELOCATION)bannedmimetypelist
-	cp -f ./bannedurllist $I$(CONFFILELOCATION)bannedurllist
-	cp -f ./bannedregexpurllist $I$(CONFFILELOCATION)bannedregexpurllist
-	cp -f ./bannedsitelist $I$(CONFFILELOCATION)bannedsitelist
-	cp -f ./contentregexplist $I$(CONFFILELOCATION)contentregexplist
-	cp -f ./greysitelist $I$(CONFFILELOCATION)greysitelist
-	cp -f ./greyurllist $I$(CONFFILELOCATION)greyurllist
-	cp -f ./exceptionsitelist $I$(CONFFILELOCATION)exceptionsitelist
-	cp -f ./exceptionurllist $I$(CONFFILELOCATION)exceptionurllist
-	cp -f ./exceptionuserlist $I$(CONFFILELOCATION)exceptionuserlist
-	cp -f ./exceptioniplist $I$(CONFFILELOCATION)exceptioniplist
-	cp -f ./pics $I$(CONFFILELOCATION)pics
-	cp -f ./transparent1x1.gif $I$(CONFFILELOCATION)transparent1x1.gif
-	cp -f ./logrotation $I$(CONFFILELOCATION)logrotation
-	cp -f ./dansguardian.bsdv $I$(SYSVLOCATION)dansguardian.sh
-	cp -f ./dansguardian.pl $I$(CGIBINLOCATION)dansguardian.pl
-	chmod o+x $I$(CGIBINLOCATION)dansguardian.pl
-	cp -f ./dansguardian.8.gz $I$(MANUALFILES)man8/dansguardian.8.gz
-	chown -R $(PROXYUSER):$(PROXYGROUP) $I$(LOGLOCATION)
-	chmod -R u+wr $I$(LOGLOCATION)
-	chmod -R og-w $I$(LOGLOCATION)
-	chmod u+wrx $I$(LOGLOCATION)
-	if [ -d $(LOGROTATELOCATION) ]; then cp -f ./logrotate.dansguardian $I$(LOGROTATELOCATION)dansguardian; fi
+	install -o root -g wheel -m 755 ./dansguardian $I$(BINARYLOCATION)dansguardian
+	install -o root -g wheel -m 644 ./filtergroupslist $I$(CONFFILELOCATION)samples/filtergroupslist
+	install -o root -g wheel -m 644 ./dansguardianf1.conf $I$(CONFFILELOCATION)samples/dansguardianf1.conf
+	install -o root -g wheel -m 644 ./dansguardian.conf $I$(CONFFILELOCATION)samples/dansguardian.conf
+	install -o root -g wheel -m 644 ./bannedphraselist $I$(CONFFILELOCATION)samples/bannedphraselist
+	install -o root -g wheel -m 644 ./exceptionphraselist $I$(CONFFILELOCATION)samples/exceptionphraselist
+	install -o root -g wheel -m 644 ./weightedphraselist $I$(CONFFILELOCATION)samples/weightedphraselist
+	install -o root -g wheel -m 644 ./bannediplist $I$(CONFFILELOCATION)samples/bannediplist
+	install -o root -g wheel -m 644 ./banneduserlist $I$(CONFFILELOCATION)samples/banneduserlist
+	install -o root -g wheel -m 644 ./bannedextensionlist $I$(CONFFILELOCATION)samples/bannedextensionlist
+	install -o root -g wheel -m 644 ./bannedmimetypelist $I$(CONFFILELOCATION)samples/bannedmimetypelist
+	install -o root -g wheel -m 644 ./bannedurllist $I$(CONFFILELOCATION)samples/bannedurllist
+	install -o root -g wheel -m 644 ./bannedregexpurllist $I$(CONFFILELOCATION)samples/bannedregexpurllist
+	install -o root -g wheel -m 644 ./bannedsitelist $I$(CONFFILELOCATION)samples/bannedsitelist
+	install -o root -g wheel -m 644 ./contentregexplist $I$(CONFFILELOCATION)samples/contentregexplist
+	install -o root -g wheel -m 644 ./greysitelist $I$(CONFFILELOCATION)samples/greysitelist
+	install -o root -g wheel -m 644 ./greyurllist $I$(CONFFILELOCATION)samples/greyurllist
+	install -o root -g wheel -m 644 ./exceptionsitelist $I$(CONFFILELOCATION)samples/exceptionsitelist
+	install -o root -g wheel -m 644 ./exceptionurllist $I$(CONFFILELOCATION)samples/exceptionurllist
+	install -o root -g wheel -m 644 ./exceptionuserlist $I$(CONFFILELOCATION)samples/exceptionuserlist
+	install -o root -g wheel -m 644 ./exceptioniplist $I$(CONFFILELOCATION)samples/exceptioniplist
+	install -o root -g wheel -m 644 ./pics $I$(CONFFILELOCATION)samples/pics
+	install -o root -g wheel -m 644 ./transparent1x1.gif $I$(CONFFILELOCATION)samples/transparent1x1.gif
+	install -o root -g wheel -m 755 ./dansguardian.pl $I$(CONFFILELOCATION)samples/dansguardian.pl
+	install -o root -g wheel -m 644 ./dansguardian.8 $I$(MANUALFILES)man8/dansguardian.8
+	cp -Rf ./languages/* $I$(CONFFILELOCATION)languages/
 
 uninstall:
 	rm -f $(BINARYLOCATION)dansguardian
