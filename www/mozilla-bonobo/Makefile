# New ports collection makefile for:	mozilla-bonobo
# Date created:			20 Nov 2003
# Whom:				Jean-Yves Lefort <jylefort@brutele.be>
#
# $FreeBSD$
#

PORTNAME=		mozilla-bonobo
PORTVERSION=		0.4.0
PORTREVISION=		7
CATEGORIES=		www
MASTER_SITES=		${MASTER_SITE_SAVANNAH}
MASTER_SITE_SUBDIR=	moz-bonobo

MAINTAINER=		ports@FreeBSD.org
COMMENT=		A Netscape/Mozilla plugin using Bonobo controls to display files

BUILD_DEPENDS=		${LOCALBASE}/lib/${MOZILLA}/components/libwidget_gtk2.so:${PORTSDIR}/www/${MOZILLA}
RUN_DEPENDS=		${LOCALBASE}/lib/${MOZILLA}/components/libwidget_gtk2.so:${PORTSDIR}/www/${MOZILLA}

MOZILLA=		mozilla
HEADERS_SUFX=

USE_XLIB=		yes
USE_GNOME=		gnomeprefix libgnomeui libgnomeprint
GNU_CONFIGURE=	yes

CONFIGURE_ARGS=		--with-plugin-install-dir="${PREFIX}/lib/browser_plugins" \
			--with-mozilla-include-dir="${LOCALBASE}/include/mozilla${HEADERS_SUFX}"

BROKEN=	"Does not build with new Mozilla"
DEPRECATED=	${BROKEN}
EXPIRATION_DATE=2006-12-01

post-patch:
	@${REINPLACE_CMD} -e \
		's|\$${prefix}/doc/mozilla-bonobo|${DOCSDIR}| ; \
		 s|COPYING\\|\\| ; \
		 s|INSTALL\\|\\| ; \
		 s|TODO\\|TODO| ; \
		 s|ABOUT-NLS||' ${WRKSRC}/Makefile.in
.if defined(NOPORTDOCS)
	@${REINPLACE_CMD} -e \
		's|\$$(libmozilla_bonobodoc_DATA)|| ; \
		 s|\$$(mkinstalldirs) \$$(DESTDIR)\$$(libmozilla_bonobodocdir)|| ; \
		 s| \$$(DESTDIR)\$$(libmozilla_bonobodocdir) | |' ${WRKSRC}/Makefile.in
.endif

.include <bsd.port.mk>
