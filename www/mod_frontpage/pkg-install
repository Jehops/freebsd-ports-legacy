#!/bin/sh
#
#	$FreeBSD: /tmp/pcvs/ports/www/mod_frontpage/Attic/pkg-install,v 1.1 2001-08-31 11:42:15 jedgar Exp $
#
# Created by: hetzels@westbend.net, Modified by mb@imp.ch

PKG_BATCH=${BATCH:=NO}
PKG_PREFIX=${PKG_PREFIX}
HOST_NAME=`/bin/hostname`

AP_SHARE=${PKG_PREFIX}/share/doc/apache

FPINSTALL=${PKG_PREFIX}/frontpage/version4.0/fp_install.sh
CHANGESERVER=${PKG_PREFIX}/frontpage/version4.0/change_server.sh
FPDOCDIR=${AP_SHARE}/manual/mod/mod_frontpage

fix_frontpage_scripts ()
{
    /bin/cat ${FPINSTALL}-dist | \
	/usr/bin/sed	-e 's;PREFIX;'${PKG_PREFIX}';' \
			-e 's;MOD_FPDOCDIR;'${FPDOCDIR}';' \
	> ${FPINSTALL}
    /bin/cat ${CHANGESERVER}-dist | \
	/usr/bin/sed	-e 's;PREFIX;'${PKG_PREFIX}';' \
	> ${CHANGESERVER}
    /bin/chmod 555 ${CHANGESERVER} ${FPINSTALL}
    /usr/sbin/chown bin ${CHANGESERVER} ${FPINSTALL}
}

case $2 in
    POST-INSTALL)
	# If we are not in batch mode then run the FP install script.
        if [ "${PKG_BATCH}" = "NO" ]; then
	    fix_frontpage_scripts
	    ${FPINSTALL}
	fi
	;;

esac
