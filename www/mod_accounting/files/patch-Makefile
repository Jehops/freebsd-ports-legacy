--- Makefile.back	Wed Jul 30 09:41:20 2003
+++ Makefile	Wed Jul 30 09:40:23 2003
@@ -5,13 +5,27 @@
 ##
 
 #   the used tools
-APXS=apxs
-APACHECTL=apachectl
 
 #   here's what you may need to change
-DEF=-DNEED_POSTGRES -DNEED_MYSQL -DNEED_PLAINTEXT
-INC=-I/usr/local/pgsql/include/ -I/usr/local/mysql/include/ -I/opt/postgresql/include -I/opt/mysql/include
-LIB=-L/opt/postgresql/lib -L/usr/local/pgsql/lib -lpq -L/opt/mysql/lib/mysql/ -L/usr/local/mysql/lib/mysql/ -lmysqlclient
+.if !defined(WITHOUT_PGSQL)
+DEF_PGSQL=      -DNEED_POSTGRES
+INC_PGSQL=      -I${LOCALBASE}/include
+LIB_PGSQL=      -L${LOCALBASE}/lib -lpq
+.endif
+
+.if !defined(WITHOUT_MYSQL)
+DEF_MYSQL=      -DNEED_MYSQL
+INC_MYSQL=      -I${LOCALBASE}/include
+LIB_MYSQL=      -L${LOCALBASE}/lib/mysql -lmysqlclient
+.endif
+
+.if !defined(WITHOUT_PLAINTEXT)
+DEF_PLAINTEXT=-DNEED_PLAINTEXT
+.endif
+
+DEF=${DEF_MYSQL} ${DEF_PGSQL} ${DEF_PLAINTEXT}
+INC=${INC_MYSQL} ${INC_PGSQL}
+LIB=${LIB_MYSQL} ${LIB_PGSQL}
 
 #   the default target
 all: mod_accounting.so
