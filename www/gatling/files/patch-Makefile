--- Makefile.orig	Tue Feb  1 17:50:50 2005
+++ Makefile	Tue Feb  1 17:53:20 2005
@@ -8,10 +8,6 @@
 
 all: $(TARGET)
 
-CC=gcc
-CFLAGS=-pipe -Wall -O -I../libowfat/
-LDFLAGS=-s -L../libowfat/ -lowfat
-
 gatling: gatling.o libsocket libiconv
 	$(CC) -o $@ gatling.o $(LDFLAGS) `cat libsocket libiconv`
 
@@ -34,7 +30,7 @@
 	$(CC) -static -o $@ forkbench.o $(LDFLAGS)
 
 pthreadbench: pthreadbench.o
-	$(CC) -o $@ pthreadbench.o $(LDFLAGS) -lpthread
+	$(CC) -o $@ pthreadbench.o $(LDFLAGS) $(PTHREAD_LIBS)
 
 mktestdata: mktestdata.o
 	$(CC) -o $@ mktestdata.o $(LDFLAGS)
@@ -50,7 +50,7 @@
 	$(CC) -c $< -I. $(CFLAGS)
 
 tlsgatling: gatling.c ssl.o
-	$(CC) -o $@ $(CFLAGS) $^ $(LDFLAGS) -lssl -lcrypto $(LDLIBS)
+	$(CC) -o $@ $(CFLAGS) $> -DSUPPORT_HTTPS $(LDFLAGS) -lssl -lcrypto $(LDLIBS)
 
 libsocket: trysocket.c
 	if $(DIET) $(CC) $(CFLAGS) -o trysocket trysocket.c >/dev/null 2>&1; then echo ""; else \
