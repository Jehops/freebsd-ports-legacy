--- Makefile.orig	Sat May  8 02:26:21 2004
+++ Makefile	Thu Aug 12 11:37:25 2004
@@ -2,16 +2,13 @@
 BINDIR=${prefix}/bin
 MANDIR=${prefix}/man
 man1dir=$(MANDIR)/man1
+CFLAGS+=-I${LOCALBASE}/include/libowfat
 
 TARGET=gatling httpbench dl bindbench mmapbench forkbench pthreadbench \
 mktestdata manymapbench ioerr forksbench
 
 all: $(TARGET)
 
-CC=gcc
-CFLAGS=-pipe -Wall -O -I../libowfat/
-LDFLAGS=-s -L../libowfat/ -lowfat
-
 gatling: gatling.o libsocket libiconv
 	$(CC) -o $@ gatling.o $(LDFLAGS) `cat libsocket libiconv`
 
@@ -34,7 +31,7 @@
 	$(CC) -static -o $@ forkbench.o $(LDFLAGS)
 
 pthreadbench: pthreadbench.o
-	$(CC) -o $@ pthreadbench.o $(LDFLAGS) -lpthread
+	$(CC) -o $@ pthreadbench.o $(LDFLAGS) $(PTHREAD_LIBS)
 
 mktestdata: mktestdata.o
 	$(CC) -o $@ mktestdata.o $(LDFLAGS)
