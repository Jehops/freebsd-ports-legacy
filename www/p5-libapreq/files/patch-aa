--- c/Makefile.PL.orig	Wed Mar 29 22:22:28 2000
+++ c/Makefile.PL	Wed Mar 14 11:21:17 2001
@@ -7,49 +7,23 @@
     win32_setup();
 }
 else {
-    require Apache::src;
-    my $src = Apache::src->new;
+    my $inc1 = `apxs -q INCLUDEDIR`;
+    my $inc2 = $inc1 ."/modules/perl";
 
     use Cwd;
     my $pwd = fastcwd;
     my @objs = qw(apache_request.o apache_cookie.o apache_multipart_buffer.o);
-    $MY_LD_RUN_PATH = "$Config{installsitearch}/auto/libapreq:$pwd"; 
 
     WriteMakefile(
-       #grr, problems with things finding libapreq.so, sort out later.
        'LINKTYPE' => 'static',
-#       'SKIP' => [qw(dynamic_lib dynamic_bs)],
        'NAME'	 => 'libapreq',
-       'INC' 	 => $src->inc,
-       'TYPEMAPS'   => $src->typemaps,
+       'INC' 	 => "-I$inc1 -I$inc2",
        'OBJECT' => "@objs",
     );
 }
 
 use Cwd;
 my $pwd = fastcwd;
-$ENV{LD_RUN_PATH} = 
-    "$ENV{LD_RUN_PATH}:$Config{installsitearch}/auto/libapr:$pwd";
-
-sub MY::dynamic {
-    my $self = shift;
-    my $string = $self->MM::dynamic;
-    $string =~ s/(Makefile\s+).*/$1/g;
-    $string;
-}
-
-sub MY::top_targets { 
-    my $self = shift; 
-    my $string = $self->MM::top_targets; 
-    my $libapreq = <<"EOF";
-LD_RUN_PATH = $ENV{LD_RUN_PATH}
-EOF
-
-    my $so = "\n".'$(DLBASE).$(DLEXT): $(INST_DYNAMIC)'."\n";
-
-    $string =~ s/(pure_all\s+::\s+)(.*)/$1 static $2/; 
-    return $libapreq . $so . $string;
-}
 
 sub MY::post_initialize { 
     my $self = shift; 
