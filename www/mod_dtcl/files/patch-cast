--- mod_dtcl.c	Tue May  1 11:56:01 2001
+++ mod_dtcl.c	Fri Jun  1 20:29:10 2001
@@ -792 +792,6 @@
-		chan = Tcl_MakeFileChannel((ClientData *)fileno(upload->fp), TCL_READABLE);
+		union {
+			ClientData handle;
+			int fd;
+		} handle;
+		handle.fd = fileno(upload->fp);
+		chan = Tcl_MakeFileChannel(handle.handle, TCL_READABLE);
