dnl $Id: config.m4,v 1.2 2001/02/08 21:41:29 opaque_ndst Exp $
dnl config.m4 for extension libming
dnl don't forget to call PHP_EXTENSION(ming)
dnl This file is a modified version of config.m4
dnl in php4/ext/mcrypt

PHP_ARG_WITH(ming, for ming support,
[  --with-ming[=DIR]        Include ming support])

if test "$PHP_MING" != "no"; then
  for i in /usr/lib /usr/local/ /usr/local/lib /usr $PHP_MING $PHP_MING/lib; do
    if test -r $i/libming.so; then
      MING_LIB_DIR=$i
    fi
  done

  if test -z "$MING_LIB_DIR"; then
    AC_MSG_ERROR(Please reinstall libming.so - I cannot find libming.so)
  fi

  for i in /usr/include /usr/local/include $PHP_MING $PHP_MING/include $PHP_MING/include/ming; do
    if test -r $i/ming.h; then
      MING_INC_DIR=$i
    fi
  done

  if test -z "$MING_INC_DIR"; then
    AC_MSG_ERROR(Please reinstall ming.h - I cannot find ming.h)
  fi

  AC_ADD_INCLUDE($MING_INC_DIR)

  AC_ADD_LIBRARY_WITH_PATH(ming, $MING_LIB_DIR, MING_SHARED_LIBADD)
  PHP_SUBST(MING_SHARED_LIBADD)
  AC_DEFINE(HAVE_MING,1,[ ])

  PHP_EXTENSION(ming, $ext_shared)
fi
