commit 821df39aefc0
Author: Nathan Froyd <froydnj@mozilla.com>
Date:   Mon Feb 26 11:08:55 2018 -0500

    Bug 1439723 - use a temporary in Animation::Tick(); r=mattwoodrow
---
 dom/animation/Animation.cpp | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git dom/animation/Animation.cpp dom/animation/Animation.cpp
index 6c5a55f0baf6e..7b89365f86811 100644
--- dom/animation/Animation.cpp
+++ dom/animation/Animation.cpp
@@ -693,8 +693,10 @@ Animation::Tick()
     // during the *previous* tick of the refresh driver, it can still be
     // ahead of the *current* timeline time when we are using the
     // vsync timer so we need to clamp it to the timeline time.
-    mPendingReadyTime.SetValue(std::min(mTimeline->GetCurrentTime().Value(),
-                                        mPendingReadyTime.Value()));
+    TimeDuration currentTime = mTimeline->GetCurrentTime().Value();
+    if (currentTime < mPendingReadyTime.Value()) {
+      mPendingReadyTime.SetValue(currentTime);
+    }
     FinishPendingAt(mPendingReadyTime.Value());
     mPendingReadyTime.SetNull();
   }
