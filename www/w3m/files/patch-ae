--- XMakefile.orig	Thu Oct 28 12:09:40 1999
+++ XMakefile	Tue Nov  2 17:20:30 1999
@@ -14,9 +14,9 @@
 
 INCLUDES=-I.
 
-DEFS=$(INCLUDES) #-DSTR_DEBUG # -DDEBUG
-CFLAGS=$(MYCFLAGS) $(DEFS) 
-LIBS=$(GCLIB) -lm $(LOCAL_LIBRARIES) $(SYS_LIBRARIES)
+DEFS+=$(INCLUDES) #-DSTR_DEBUG # -DDEBUG
+CFLAGS+=$(MYCFLAGS) $(DEFS) 
+LIBS+=$(GCLIB) -lm $(LOCAL_LIBRARIES) $(SYS_LIBRARIES)
 INSTALL=sh install.sh
 
 $(TARGET): $(ALLOBJS) $(GCTARGET)
@@ -28,21 +28,21 @@
 	cd gc; make CC='$(CC) $(MYCFLAGS)'
 
 install: $(TARGET)
-	-mkdir $(DESTDIR)$(BIN_DIR)
-	-mkdir $(DESTDIR)$(HELP_DIR)
-	$(INSTALL) -m 755 $(TARGET) $(DESTDIR)$(BIN_DIR)
-	$(INSTALL) -m 644 w3mhelp_en.html $(DESTDIR)$(HELP_DIR)
-	$(INSTALL) -m 644 w3mhelp_ja.html $(DESTDIR)$(HELP_DIR)
-	$(INSTALL) -m 644 w3mhelp-lynx_en.html $(DESTDIR)$(HELP_DIR)
-	$(INSTALL) -m 644 w3mhelp-lynx_ja.html $(DESTDIR)$(HELP_DIR)
-	$(INSTALL) -m 644 $(HELP_FILE) $(DESTDIR)$(HELP_DIR)/w3mhelp.html
+	-mkdir -p $(DESTDIR)$(BIN_DIR)
+	-mkdir -p $(DESTDIR)$(HELP_DIR)
+	-mkdir -p $(DESTDIR)$(HELP_DIR_JA)
+	${BSD_INSTALL_PROGRAM} $(TARGET) $(DESTDIR)$(BIN_DIR)
+	${BSD_INSTALL_DATA} w3mhelp_en.html $(DESTDIR)$(HELP_DIR)
+	${BSD_INSTALL_DATA} w3mhelp_ja.html $(DESTDIR)$(HELP_DIR_JA)
+	${BSD_INSTALL_DATA} w3mhelp-lynx_en.html $(DESTDIR)$(HELP_DIR)
+	${BSD_INSTALL_DATA} w3mhelp-lynx_ja.html $(DESTDIR)$(HELP_DIR_JA)
 
 uninstall:
 	-$(RM) $(BIN_DIR)/$(TARGET)
 	-$(RM) $(HELP_DIR)/w3mhelp-lynx_en.html
-	-$(RM) $(HELP_DIR)/w3mhelp-lynx_ja.html
+	-$(RM) $(HELP_DIR_JA)/w3mhelp-lynx_ja.html
 	-$(RM) $(HELP_DIR)/w3mhelp_en.html 
-	-$(RM) $(HELP_DIR)/w3mhelp_ja.html 
+	-$(RM) $(HELP_DIR_JA)/w3mhelp_ja.html 
 	-$(RM) $(HELP_DIR)/w3mhelp.html
 
 clean: sweep
