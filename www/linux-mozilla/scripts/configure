#!/bin/sh
#
# $FreeBSD$

echo ${WRKSRC}/components.conf
if [ -f ${WRKSRC}/components.conf ]; then
	exit
fi

tempfile=`/usr/bin/mktemp -t checklist`

echo "browser langenus regus venkman xpcom" > /tmp/checklist.tmp.$$;

/usr/bin/dialog --title "Mozilla component selection" --clear \
	--checklist "\n\
Choose which components of Mozilla to download and install. \n\
Press the space bar to toggle selections." -1 -1 7 \
"chatzilla"	"IRC client (102 kB)"					ON \
"deflenus"	"American English profile defaults (8 kB)"		ON \
"inspector"	"DOM inspector (240 kB)"				ON \
"mail"		"Mozilla Mail and News (1728 kB)"			ON \
"psm"		"Personal Security Manager--recommended (656 kB)"	ON \
"talkback"	"sends crash logs to Mozilla staff (832 kB)"		ON \
"venkman"	"JavaScript debugger (150 kB)"				ON \
2>> /tmp/checklist.tmp.$$

retval=$?

case $retval in
	1)	echo "Cancel pressed."
		exit 1
	;;
esac

choice=`cat /tmp/checklist.tmp.$$`
rm -f /tmp/checklist.tmp.$$

echo "$choice"
echo "$choice" \
	| sed -e "s/\"//g" \
	| sort -u \
	| sed -e "s/ /.xpi /g" \
	| sed -e "s/$/.xpi/g" \
	| perl -pi -e "s/ /\n/g" \
	> ${WRKSRC}/components.conf
