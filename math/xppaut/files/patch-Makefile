--- Makefile-orig	Sun Feb 20 16:47:13 2005
+++ Makefile	Sun Feb 20 16:48:42 2005
@@ -1,8 +1,9 @@
 # Copyright (C) 1990-2003 Bard Ermentrout
 # Edited for Debian GNU/Linux.
 DESTDIR =
-BINDIR = $(DESTDIR)/usr/X11R6/bin
-DOCDIR = $(DESTDIR)/usr/share/doc/xppaut
+BINDIR = $(PREFIX)/bin
+DOCDIR = $(PREFIX)/share/doc/xppaut
+EXAMPLESDIR = $(PREFIX)/share/examples/xppaut
 # End Debian Edit
 #################################
 #
@@ -13,12 +14,12 @@
 AUTLIBS= -lf2c -lX11 -lm 
 OTHERLIBS= libcvode.a libf2cm.a 
 #
 ################################## 
 # Standard Linux distributions   #
 ##################################
-CFLAGS=   -g -O -DAUTO -DCVODE_YES -DNOERRNO -DHAVEDLL -DMYSTR=$(VERSION)  -I/usr/X11R6/include
-LDFLAGS=  -L/usr/X11R6/lib
-LIBS= -lX11 -lm -ldl 
+CFLAGS+=   -DAUTO -DCVODE_YES -DNOERRNO -DHAVEDLL -DMYSTR=$(VERSION)  -I$(X11BASE)/include
+LDFLAGS=  -L$(X11BASE)/lib
+LIBS= -lX11 -lm 
 # NOTE: Recent (RedHat 8) versions of GCC seem to no longer have
 # the integer errno, so compile with the -DNOERRNO option as well
 #
@@ -145,6 +146,9 @@
 ######################################################################
 #
 #
+
+all: xppaut
+
 xppaut: mkI77 mkcvode   $(OBJECTS) $(AUTOOBJ)
 #
 ###########################################################
@@ -179,16 +183,16 @@
 install: xppaut 
 # Make necessary installation directories
 	mkdir -p $(BINDIR)
-	mkdir -p $(DOCDIR)/html
-	mkdir -p $(DOCDIR)/examples
-	mkdir -p $(DESTDIR)/usr/X11R6/man/man1
+# PORTDOCS	mkdir -p $(DOCDIR)/html
+# PORTDOCS	mkdir -p $(EXAMPLESDIR)
+	mkdir -p $(PREFIX)/man/man1
 # Put everything home
 	strip xppaut
 	cp xppaut $(BINDIR)
-	cp -r ode* $(DOCDIR)/examples
-	cp -r help/* $(DOCDIR)/html
-	cp README *.pdf $(DOCDIR) 
-	cp xppaut.1 $(DESTDIR)/usr/X11R6/man/man1
+# PORTDOCS	cp -r ode* $(EXAMPLESDIR)
+# PORTDOCS	cp -r help/* $(DOCDIR)/html
+# PORTDOCS	cp README *.pdf $(DOCDIR) 
+	cp xppaut.1 $(PREFIX)/man/man1
 # End Debian Ed
 uninstall: 
 # Remove everything you created
