# HG changeset patch
# User Jaroslav Hajek <highegg@gmail.com>
# Date 1223800240 -7200
# Node ID 712d9e045b1e4936708405de8be086bce580b588
# Parent 4c023cbfab27fe07ad5c65162c815bbccc601bbb
fix for SuiteSparse 3.2

--- liboctave/ChangeLog	Fri Oct 10 11:35:10 2008 +0200
+++ liboctave/ChangeLog	Sun Oct 12 10:30:40 2008 +0200
@@ -1,3 +1,9 @@ 2008-10-08  John W. Eaton  <jwe@octave.o
+2008-10-10  Jaroslav Hajek  <highegg@gmail.com>
+
+	* sparse-util.h (SparseCholPrint): Change char * argument to const
+	char *.
+	* sparse-util.cc (SparseCholPrint): Likewise.
+
 2008-10-08  John W. Eaton  <jwe@octave.org>
 
 	* Sparse-op-defs.h (SPARSE_SMSM_BOOL_OPS): Duplicate code for scalar
--- liboctave/sparse-util.cc	Fri Oct 10 11:35:10 2008 +0200
+++ liboctave/sparse-util.cc	Sun Oct 12 10:30:40 2008 +0200
@@ -30,8 +30,15 @@ along with Octave; see the file COPYING.
 #include "lo-error.h"
 #include "sparse-util.h"
 
+// FIXME this overload is here due to API change in SuiteSparse (3.1 -> 3.2)
 void
 SparseCholError (int status, char *file, int line, char *message)
+{
+  SparseCholError (status, file, line, message);
+}
+
+void
+SparseCholError (int status, const char *file, int line, const char *message)
 {
   (*current_liboctave_warning_handler)("warning %i, at line %i in file %s",
 				     status, line, file);
--- liboctave/sparse-util.h	Fri Oct 10 11:35:10 2008 +0200
+++ liboctave/sparse-util.h	Sun Oct 12 10:30:40 2008 +0200
@@ -24,7 +24,11 @@ along with Octave; see the file COPYING.
 #if !defined (octave_sparse_util_h)
 #define octave_sparse_util_h 1
 
-extern OCTAVE_API void SparseCholError (int status, char *file, int line, char *message);
+// FIXME this overload is here due to API change in SuiteSparse (3.1 -> 3.2)
+extern OCTAVE_API void SparseCholError (int status, char *file, 
+                                        int line, char *message);
+extern OCTAVE_API void SparseCholError (int status, const char *file, 
+                                        int line, const char *message);
 extern OCTAVE_API int SparseCholPrint (const char *fmt, ...);
 
 #endif

