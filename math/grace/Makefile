# New ports collection makefile for: grace
# Date created:		Dec 28 1998
# Whom:			Lars Köller <Lars.Koeller@Uni-Bielefeld.de>
#
# $FreeBSD$
#

PORTNAME=	grace
PORTVERSION=	5.1.21
PORTREVISION=	1
CATEGORIES=	math print
#
MASTER_SITES=	ftp://plasma-gate.weizmann.ac.il/pub/grace/src/stable/ \
		ftp://ftp.fu-berlin.de/unix/graphics/grace/src/stable/ \
		ftp://ftp.ntua.gr/pub/graphics/grace/src/stable/ \
		ftp://ftp.chg.ru/pub/math/grace/src/stable/ \
		ftp://ftp.u-aizu.ac.jp/pub/SciEng/math/grace/src/stable/ \
		ftp://linux.mathematik.tu-darmstadt.de/pub/linux/mirrors/misc/grace/src/stable/

MAINTAINER=	ports@FreeBSD.org
COMMENT=	A powerful plotting tool (successor of xmgr)

LIB_DEPENDS=	Xbae:${PORTSDIR}/x11-toolkits/xbae 	\
		netcdf.4:${PORTSDIR}/science/netcdf	\
		fftw.2:${PORTSDIR}/math/fftw		\
		tiff.4:${PORTSDIR}/graphics/tiff	\
		jpeg.9:${PORTSDIR}/graphics/jpeg	\
		png.5:${PORTSDIR}/graphics/png		\
		t1:${PORTSDIR}/devel/t1lib		\
		XmHTML.1:${PORTSDIR}/x11-toolkits/xmhtml\
		pdf.8:${PORTSDIR}/print/pdflib

MAN1=		convcal.1 grace.1 xmgrace.1 gracebat.1 grconvert.1

USE_GMAKE=	YES
USE_MOTIF=	YES
GNU_CONFIGURE=	YES
CONFIGURE_ARGS=	\
	--with-extra-incpath=${LOCALBASE}/include/X11:${LOCALBASE}/include \
	--with-extra-ldpath=${LOCALBASE}/lib --without-bundled_xbae \
	--enable-grace-home=${DATADIR}
CONFIGURE_TARGET=	--build=${MACHINE_ARCH}-portbld-freebsd${OSREL}
ALL_TARGET=	# empty
INSTALL_TARGET=	install links

pre-configure:
	@${REINPLACE_CMD} -e "s%-lXm %${MOTIFLIB} %" ${WRKSRC}/configure

post-install:
.if !defined(NOPORTDOCS)
	if [ ! -e ${DOCSDIR} ]; then \
	    ${LN} -s ${DATADIR}/doc ${DOCSDIR}; \
	fi
.endif

.include <bsd.port.mk>
