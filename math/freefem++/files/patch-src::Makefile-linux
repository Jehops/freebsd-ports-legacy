--- src/Makefile-linux.orig	Tue Feb 10 13:23:56 2004
+++ src/Makefile-linux	Thu May  6 21:52:05 2004
@@ -1,19 +1,18 @@
-LIBLOCAL = -ldl  -rdynamic  # for dlopen (see load.cpp)
-# for dlopen (see load.cpp and man dlopen)
-LIBX11= -L/usr/X11R6/lib -lX11 -lm 
-INCLUDEX11 = /usr/X11R6/include
-CXX=g++      #C++ compiler 
-CXXMPI=mpiCC   # compilation with mpi
-OOPTFLAGS= -O  # compilation with optimisation
+# $FreeBSD$
+#LIBLOCAL = -ldl # for dlopen (see load.cpp and man dlopen)
+LIBX11= -L$(X11BASE)/lib -lX11 -lm
+INCLUDEX11 = $(X11BASE)/include
+OOPTFLAGS= -Wno-deprecated
 GOPTFLAGS= -g  # compilation with debugging 
 #--------------------------------------------------
 #  the flag of eigen value part with arpack++ tools
 #-------------------------------------------------
-ARPACKDIR=../../arpack/ARPACK  #  here the arpack dir is at same level of FreeFem++v... dir
 EIGEN= eigenvalue.o
-LIBARPACK= -L$(ARPACKDIR) -larpack_linux -llapack -lblas
-LIBF77= -lg2c
-INCARPACKPP = -DEIGENVALUE -I../arpack/include # the FreeFem++ arpack++ files (in freefem tree)
+LIBARPACK= -L$(LOCALBASE)/lib ${LOCALBASE}/lib/libarpack.a -lalapack -lf77blas -lcblas -latlas
+LIBF77= -lg2c -lm
+INCARPACKPP = -DEIGENVALUE -I$(LOCALBASE)/include/ARPACK++ 
+IUMFPACK= -DUMFPACK -I$(LOCALBASE)/include/UMFPACK -I$(LOCALBASE)/include/AMD
+LIBUMFPACK= -L$(LOCALBASE)/lib -lumfpack -lamd
 # ------------------------------
 # compilation flags of FreeFem++ 
 # ------------------------------
@@ -32,7 +31,7 @@
 # ---------------------------
 #  install and compile dir.
 # ----------------------
-BIN_DIR=$(HOME)/bin-$(HOSTTYPE)
+BIN_DIR=$(PREFIX)/bin
 COMPILE_DIR=c-$(HOSTTYPE)
 #----------------------
 
