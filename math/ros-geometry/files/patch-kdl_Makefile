--- kdl/Makefile.orig	2010-11-22 19:18:28.000000000 +0100
+++ kdl/Makefile	2010-11-22 22:36:47.000000000 +0100
@@ -14,7 +14,6 @@
 BOOST_INCLUDE =$(shell rosboost-cfg --include_dirs)
 EIGEN2_INCLUDE_DIR=`rospack cflags-only-I eigen| cut -d ' ' -f 1`
 EIGEN2_DEFINE=`rospack cflags-only-other eigen`
-TINYXML_INCLUDE_DIR=`rospack cflags-only-I tinyxml| cut -d ' ' -f 1`
 CMAKE_ARGS = -DCMAKE_INSTALL_PREFIX=$(INSTALL_DIR)/ \
 		-DPYTHON_BINDINGS=ON \
                 -DCMAKE_CXX_FLAGS=$(EIGEN2_DEFINE) \
@@ -22,7 +21,6 @@
 		-DBUILD_MODELS=OFF \
 		-DBOOST:STRING=$(BOOST_INCLUDE)\
 		-DEIGEN2_INCLUDE_DIR=$(EIGEN2_INCLUDE_DIR)\
-		-DTINYXML_INCLUDE_DIR=$(TINYXML_INCLUDE_DIR)\
 		-DCMAKE_BUILD_TYPE="Release"
 
 
@@ -30,7 +28,11 @@
 	cd $(SOURCE_DIR) && patch -p0 < ../../$(PATCH)
 	mkdir -p $(SOURCE_DIR)/build
 	cd $(SOURCE_DIR)/build && $(CMAKE) $(CMAKE_ARGS) ..
+ifneq ($(MAKE),)
+	cd $(SOURCE_DIR)/build && $(MAKE) $(ROS_PARALLEL_JOBS) && touch src/orocos-kdl.pc && make install
+else
 	cd $(SOURCE_DIR)/build && make $(ROS_PARALLEL_JOBS) && touch src/orocos-kdl.pc && make install
+endif
 	if [ `uname` = Darwin ]; then \
 		install_name_tool -id `rospack find kdl`/kdl/lib/liborocos-kdl.1.0.dylib kdl/lib/liborocos-kdl.1.0.dylib; \
 	fi
@@ -42,14 +44,17 @@
 	ln -s $(SOURCE_DIR)/build/doc doc
 
 wiped: Makefile $(PATCH) kdl-31715.tar.gz.md5sum
+ifneq ($(MAKE),)
+	$(MAKE) wipe
+else
 	make wipe
+endif
 	touch wiped
 
 clean:
 	rm -rf lib
 	rm -rf include
 	rm -rf share
-	rm -rf build
 	rm -rf installed
 
 wipe: 	clean
