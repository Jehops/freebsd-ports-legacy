--- makefile.orig	Sat Jun 12 08:37:05 1999
+++ makefile	Tue Dec 14 15:34:07 1999
@@ -3,22 +3,27 @@
 #         June 1998 by Masaki Kawase (g93088@isc.chubu.ac.jp)
 #
 
-             CC = g++
-             LN = g++
-            OPT = -O2
+             CC = ${CXX}
+             LN = ${CC} 
+            OPT = ${CFLAGS} -fexpensive-optimizations -ffast-math \
+                  -fomit-frame-pointer -fforce-mem -fforce-addr
 
-   INCLUDE_PATH = -I/usr/local/X11R6/include
-       LIB_PATH = -L/usr/local/X11R6/lib
+    GLCLOCK_DIR = ${PREFIX}/lib/X11/glclock/
 
-           LIBS = -lglut -lGLU -lGL -lXext -lXmu -lX11 -lm
+   INCLUDE_PATH = -I${X11BASE}/include
+       LIB_PATH = -L${X11BASE}/lib -Wl,-rpath,/usr/X11R6/lib
+
+# Link with -lGL on FreeBSD so we use hardware-accelerated GL, when installed.
+# (see http://people.FreeBSD.org/~3d)
+           LIBS = -lglut -lGLU -lGL -lXext -lXmu -lX11 -lm -lXi ${PTHREAD_LIBS}
 
 #                 for Mesa
 #          LIBS = -lglut -lMesatk -lMesaGLU -lMesaGL -lXi -lXext -lXmu -lX11 -lm
 
-         CFLAGS = -c
+         CFLAGS += -w -DGLCLOCK_DIR=\"${GLCLOCK_DIR}\" ${PTHREAD_CFLAGS}
          LFLAGS =
 
-COMPILE = $(CC) $(CFLAGS) $(OPT) $(INCLUDE_PATH)
+COMPILE = $(CC) $(CFLAGS) $(OPT) -c $(INCLUDE_PATH)
 LINK = $(LN) $(LFLAGS) $(OPT) $(LIB_PATH)
 
 MAIN = glclock
