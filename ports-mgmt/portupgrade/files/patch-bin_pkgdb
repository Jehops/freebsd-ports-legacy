diff --git a/bin/pkgdb b/bin/pkgdb
index 34530fe..eae46fa 100755
--- bin/pkgdb
+++ bin/pkgdb
@@ -294,10 +294,11 @@ def get_real_run_deps(pkgname)
     puts "Disclose depends for #{pkgname}" if $verbose
 
     $origins[pkgname] = Hash.new
-    `cd #{$portsdb.portdir(origin)} && #{shelljoin(*make_env)} make #{shelljoin(*make_args)} package-depends-list`.map { |line|
+    `cd #{$portsdb.portdir(origin)} && #{shelljoin(*make_env)} make #{shelljoin(*make_args)} package-depends-list`.each_line { |line|
+      next if line.empty?
       a = line.chomp.split(/ /)
-      $origins[pkgname].store(a[0], a[2])
-    }.compact
+      $origins[pkgname].store(a[0], a[2]) unless a[0].nil? or a[1].nil?
+    }
   end
   $origins[pkgname]
 end
