--- bin/portupgrade.orig	2009-07-21 23:59:59.000000000 +0400
+++ bin/portupgrade	2009-07-22 00:02:08.000000000 +0400
@@ -597,6 +597,7 @@
 	      exit 1
 	    end
 
+	    list -= ['']
 	    list.each do |i|
 	      if i == first
 		$task_options[i][:origin] = $origin
@@ -654,12 +655,12 @@
 	    upgrade_tasks -= not_need_upgrade
 
 	    # Check dependencies for updates
+	    depends -= ['']
 	    if $upward_recursive
 	      STDERR.print '[Exclude up-to-date packages '
 	      not_need_upgrade = []
 	      depends.each do |task|
 		STDERR.print '.'
-		next if task == ''
 		begin
 		  pkg = PkgInfo.new(task)
 	        rescue ArgumentError => e
