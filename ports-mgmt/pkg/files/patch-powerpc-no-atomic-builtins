--- external/libucl/src/ucl_util.c.orig	2014-06-12 01:37:02 +0800
+++ external/libucl/src/ucl_util.c
@@ -160,7 +160,7 @@ static void
 ucl_object_dtor_unref_single (ucl_object_t *obj)
 {
 	if (obj != NULL) {
-#ifdef HAVE_ATOMIC_BUILTINS
+#if defined(HAVE_ATOMIC_BUILTINS) && !defined(__powerpc__)
 		unsigned int rc = __sync_sub_and_fetch (&obj->ref, 1);
 		if (rc == 0) {
 #else
@@ -1850,7 +1850,7 @@ ucl_object_ref (const ucl_object_t *obj)
 
 	if (obj != NULL) {
 		res = __DECONST (ucl_object_t *, obj);
-#ifdef HAVE_ATOMIC_BUILTINS
+#if defined(HAVE_ATOMIC_BUILTINS) && !defined(__powerpc__)
 		(void)__sync_add_and_fetch (&res->ref, 1);
 #else
 		res->ref ++;
@@ -1863,7 +1863,7 @@ void
 ucl_object_unref (ucl_object_t *obj)
 {
 	if (obj != NULL) {
-#ifdef HAVE_ATOMIC_BUILTINS
+#if defined(HAVE_ATOMIC_BUILTINS) && !defined(__powerpc__)
 		unsigned int rc = __sync_sub_and_fetch (&obj->ref, 1);
 		if (rc == 0) {
 #else
