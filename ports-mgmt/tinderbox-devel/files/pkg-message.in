misc/tinderbox is now installed, but it requires some additional setup.

The following walkthrough is for PostgreSQL databases:

- First, run the setup program:
    %%PREFIX%%/tinderbox/scripts/setup.sh

  Enter database driver (mysql pgsql): pgsql

  If the database is running on the same server as you're on now,
  and you have administrator access to it, answer this question
  with yes:
	"Does this host have access to connect to the Tinderbox database as a database administrator?"

  Enter database admin user [root]: pgsql
  Enter the desired username for the Tinderbox database : tinderbox
  Shall the new role be a superuser? (y/n) n
  Shall the new role be allowed to create databases? (y/n) y
  Shall the new role be allowed to create more new roles? (y/n) n

  The other questions should just be entered through.

The following walkthrough is for MySQL databases:

- First, run the setup program:
    %%PREFIX%%/tinderbox/scripts/setup.sh

  Enter database driver (mysql pgsql): mysql

  If the database is running on the same server as you're on now,
  and you have administrator access to it, answer this question
  with yes:
	"Does this host have access to connect to the Tinderbox database as a database administrator?"

  Enter the desired username for the Tinderbox database : tinderbox

  The other questions should just be entered through.

The following walkthrough is the tinderbox environment setup:

- Edit the file %%PREFIX%%/tinderbox/scripts/tinderbox.ph (copy from
  tinderbox.ph.dist)
  
  - $BUILD_ROOT should be "%%PREFIX%%/tinderbox"
  - $SUBJECT should be "My Tinderbox"
  - $SENDER should be your email address
  - $SMTP_HOST should be your SMTP server (localhost?)
  - $SERVER_HOST should be the name your machine is known as. If
    it is your own machine and your access it directory, try localhost
    here if nothing else sounds reasonable.
  - $TINDERBOX_URI should be "/tb".
  - Comment out the lines after "for www", and uncomment the lines "for www-exp".

- Edit the file %%PREFIX%%/tinderbox/scripts/www-exp/inc_ds.php
  (copy from inc_ds.php-dist)

  - $DB_HOST should be localhost
  - $DB_DRIVER should be pgsql
  - $DB_USER should be tinderbox

- Edit the file %%PREFIX%%/tinderbox/scripts/www-exp/inc_tinderbox.php
  (copy from inc_tinderbox.php-dist)

  - $rootdir should be %%PREFIX%%/tinderbox
  - $wwwrooturi should be /tb
  - $tinderbox_name should be "My Tinderbox"
  - $tinderbox_title should be "FreeBSD Packages"

The following walkthrough is the initial tinderbox population setup
and should be executed in %%PREFIX%%/tinderbox/scripts.

- Create a jail. A jail is a chrooted version of the FreeBSD operating
  system, for example 6.0-RELEASE or 5.4-RELEASE:
  ./create Jail -j 5.4 -d "FreeBSD 5.4-RELEASE" -t RELENG_5_4_0_RELEASE -u CVSUP
  You can have multiple jails on a single machine.
  This takes a while.

- Create a ports tree:
  ./create PortsTree -p FreeBSD -d "FreeBSD ports tree" -w http://www.freebsd.org/cgi/cvsweb.cgi/ports/
  This takes a while.

- And then link the two together in a build:
  ./create Build -b 5.4-FreeBSD -j 5.4 -p FreeBSD -d "5.4-RELEASE with FreeBSD ports tree"

The following walkthrough is the webserver setup:

- In your Apache configuration, add the following lines:

  Alias /tb/logs/ "%%PREFIX%%/tinderbox/logs/"
  Alias /tb/packages/ "%%PREFIX%%/tinderbox/packages/"
  Alias /tb/errors/ "%%PREFIX%%/tinderbox/errors/"
  Alias /tb/ "%%PREFIX%%/tinderbox/scripts/www-exp/"
  <Directory "%%PREFIX%%/tinderbox/">
      Order allow,deny
      Allow from all
  </Directory>

- In your Lighttpd configuration:

Turn on "mod_alias" and add the following lines:

alias.url = ( "/tb/packages/" => "%%PREFIX%%/tinderbox/packages/",
              "/tb/errors/" => "%%PREFIX%%/tinderbox/errors/",
              "/tb/" => "%%PREFIX%%/tinderbox/scripts/www-exp/" )
dir-listing.activate = "enable"

  Check your system by going to http://localhost/tb/

The following walkthrough is the first run for a port in the
tinderbox and should be executed in %%PREFIX%%/tinderbox/scripts.

- See the documents %%PREFIX%%/tinderbox/scripts/README and the
  "Using Tinderbox" section for more information.

- Add the port and its dependencies to the database:
  ./tc addPort -b 5.4-FreeBSD -d net/dhcpdump -r

- On the website you see now five ports on the build page.

- Start the build:
  ./tinderbuild -nullfs -b 5.4-FreeBSD dns/dnstracer

- On the page "Current and latest builds in this build" you see the
  current being-built port and the last n ports built.

- At a certain moment, when you refresh the page, you see that it
  has changed.

