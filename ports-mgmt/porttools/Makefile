# Created by: Sergei Kolobov <sergei@kolobov.com>
# $FreeBSD$

PORTNAME=	porttools
PORTVERSION=	1.00.2014.02.18
CATEGORIES=	ports-mgmt

MAINTAINER=	xmj@chaot.net
COMMENT=	Tools for testing and submitting port updates and new ports

LICENSE=	BSD2CLAUSE

RUN_DEPENDS=	portlint:${PORTSDIR}/ports-mgmt/portlint \
		cdiff:${PORTSDIR}/textproc/cdiff \
		sudo:${PORTSDIR}/security/sudo \
		svn:${PORTSDIR}/devel/subversion

USE_GITHUB=	yes
GH_ACCOUNT=	xmj
GH_COMMIT=	1c85bdc
GH_TAGNAME=	${GH_COMMIT}

# Make the version information of porttools itself
# available for inclusion in the PRs generated by it.
MAKE_ENV+=	DATADIR="${DATADIR}" DOCSDIR="${DOCSDIR}" PORTVERSION="${PORTVERSION}"

OPTIONS_DEFINE=		DOCS NEWFILE
OPTIONS_DEFAULT=	NEWFILE

NEWFILE_DESC=	Enable newfile support

NEWFILE_RUN_DEPENDS=	newfile:${PORTSDIR}/devel/newfile

.include <bsd.port.options.mk>

.if ${PORT_OPTIONS:MDOCS}
INSTALL_TARGET=	install install-docs
.endif

do-build:
	@${MAKE_ENV} ${MAKE_CMD} -C ${WRKSRC} pre-build
	@${MAKE_ENV} ${MAKE_CMD} -C ${WRKSRC} all

.include <bsd.port.mk>
