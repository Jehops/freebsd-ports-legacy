
$FreeBSD$

--- Makefile.orig	Fri Feb  8 10:15:02 2002
+++ Makefile	Mon Feb 11 15:03:03 2002
@@ -2,20 +2,20 @@
 
 NAME = GtkScintilla
 LIB_NAME = gtkscintilla
-VERSION = 0.8.2
-PREFIX = $(shell gtk-config --prefix)
+VERSION = 0
+PREFIX = $(shell $(GTK_CONFIG) --prefix)
 
 SCINTILLA_DIR = ./scintilla
-SCINTILLA_INCLUDE = $(SCINTILLA_DIR)/include
-SCINTILLA_LIB = $(SCINTILLA_DIR)/bin/scintilla.a
-SCINTILLA_IFACE = $(SCINTILLA_INCLUDE)/Scintilla.iface
-LEXERS = $(wildcard $(SCINTILLA_DIR)/gtk/Lex*.o)
-CFLAGS = $(shell gtk-config --cflags) -g -Wall -DGTK -DSCI_LEXER
-LDFLAGS_PRE = $(shell gtk-config --libs) -DGTK 
-LDFLAGS_POST =  $(LEXERS)  $(SCINTILLA_LIB) -lstdc++
+SCINTILLA_INCLUDE = $(X11BASE)/include/scintilla
+SCINTILLA_LIB = -lscintilla
+SCINTILLA_IFACE = scintilla/include/Scintilla.iface
+LEXERS = -lscintilla_lexers
+CFLAGS += $(shell $(GTK_CONFIG) --cflags) -Wall -DGTK -DSCI_LEXER -fPIC
+LDFLAGS_PRE = $(shell $(GTK_CONFIG) --libs) -DGTK 
+LDFLAGS_POST =  $(LEXERS)  $(SCINTILLA_LIB)
 
-CC = gcc
-LD = gcc
+CC ?= gcc
+LD = $(CC)
 AR = ar
 
 STATIC_LIB = lib$(LIB_NAME).a
@@ -26,10 +26,10 @@
 
 all: $(STATIC_LIB) $(SHARED_LIB)
 
-$(STATIC_LIB): $(SCINTILLA_LIB) gtkscintilla.o
+$(STATIC_LIB): gtkscintilla.o
 	$(AR) -rs $@ $^
 
-$(SHARED_LIB): $(SCINTILLA_LIB) gtkscintilla.o
+$(SHARED_LIB): gtkscintilla.o
 	$(LD)  $(LDFLAGS_PRE) gtkscintilla.o -shared $(LDFLAGS_POST) -o $@
 
 gtkscintilla.o: gtkscintilla.h gtkscintilla.c
@@ -37,8 +37,8 @@
 $(SCINTILLA_LIB):
 	cd $(SCINTILLA_DIR)/gtk ; $(MAKE)
 
-gtkscintilla.h gtkscintilla.c: scigen.py $(SCINTILLA_IFACE)
-	python scigen.py
+#gtkscintilla.h gtkscintilla.c: scigen.py $(SCINTILLA_IFACE)
+#	python scigen.py
 
 install: all
 	install -D --mode=755 $(SHARED_LIB) $(DESTDIR)/$(LIB_DIR)/$(SHARED_LIB)
