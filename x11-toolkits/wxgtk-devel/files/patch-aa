
$FreeBSD$

--- configure.in.orig	Tue May 22 17:27:55 2001
+++ configure.in	Mon May 28 17:26:14 2001
@@ -1968,16 +1968,12 @@
 WX_LIBRARY_NAME_STATIC_GL="lib${WX_LIBRARY}_gl.a"
 
 dnl the name of the shared library
-WX_LIBRARY_NAME_SHARED="lib${WX_LIBRARY}-${WX_RELEASE}.so.${WX_CURRENT}.${WX_REVISION}.${WX_AGE}"
-WX_LIBRARY_NAME_SHARED_GL="lib${WX_LIBRARY}_gl-${WX_RELEASE}.so.${WX_CURRENT}.${WX_REVISION}.${WX_AGE}"
+WX_LIBRARY_NAME_SHARED="lib${WX_LIBRARY}.so.2"
+WX_LIBRARY_NAME_SHARED_GL="lib${WX_LIBRARY}_gl.so.2"
 
 dnl the name of the links to the shared library
-WX_LIBRARY_LINK1="lib${WX_LIBRARY}-${WX_RELEASE}.so.${WX_CURRENT}"
-WX_LIBRARY_LINK2="lib${WX_LIBRARY}-${WX_RELEASE}.so"
-WX_LIBRARY_LINK3="lib${WX_LIBRARY}.so"
-WX_LIBRARY_LINK1_GL="lib${WX_LIBRARY}_gl-${WX_RELEASE}.so.${WX_CURRENT}"
-WX_LIBRARY_LINK2_GL="lib${WX_LIBRARY}_gl-${WX_RELEASE}.so"
-WX_LIBRARY_LINK3_GL="lib${WX_LIBRARY}_gl.so"
+WX_LIBRARY_LINK1="lib${WX_LIBRARY}.so"
+WX_LIBRARY_LINK1_GL="lib${WX_LIBRARY}_gl.so"
 
 dnl shared library settings
 SHARED_LD=
@@ -2074,8 +2070,13 @@
       *-*-freebsd* | *-*-openbsd* | *-*-netbsd*)
         SHARED_LD="${CC} -shared -o"
         PIC_FLAG="-fPIC"
-        WX_ALL_INSTALLED="CREATE_INSTALLED_LINKS"
-        WX_ALL="CREATE_LINKS"
+	if test "$wxUSE_OPENGL" = "yes"; then
+	    WX_ALL_INSTALLED="CREATE_INSTALLED_LINKS CREATE_INSTALLED_LINKS_GL"
+	    WX_ALL="CREATE_LINKS CREATE_LINKS_GL"
+	else
+	    WX_ALL_INSTALLED="CREATE_INSTALLED_LINKS"
+	    WX_ALL="CREATE_LINKS"
+	fi
       ;;
       *-*-osf* )
         SHARED_LD="${CXX} -shared -o"
@@ -2749,24 +2750,6 @@
     fi
 fi
 
-
-CXXFLAGS=`echo "${CXXFLAGS}" | sed "s/\-O.//g" `
-CFLAGS=`echo "${CFLAGS}" | sed "s/\-O.//g" `
-if test "$wxUSE_OPTIMISE" = "no" ; then
-    OPTIMISE=
-else
-    if test "$GCC" = yes ; then
-        OPTIMISE="-O2"
-        case "${host}" in
-            i586-*-*|i686-*-* )
-            OPTIMISE="${OPTIMISE} "
-        ;;
-        esac
-    else
-        OPTIMISE="-O"
-    fi
-fi
-
 dnl ---------------------------------------------------------------------------
 dnl Optional libraries
 dnl ---------------------------------------------------------------------------
@@ -3808,8 +3791,6 @@
 AC_SUBST(WX_LIBRARY)
 AC_SUBST(WX_TARGET_LIBRARY)
 AC_SUBST(WX_LIBRARY_LINK1)
-AC_SUBST(WX_LIBRARY_LINK2)
-AC_SUBST(WX_LIBRARY_LINK3)
 AC_SUBST(PROGRAM_EXT)
 
 dnl global gl options
@@ -3819,8 +3800,6 @@
 AC_SUBST(WX_LIBRARY_GL)
 AC_SUBST(WX_TARGET_LIBRARY_GL)
 AC_SUBST(WX_LIBRARY_LINK1_GL)
-AC_SUBST(WX_LIBRARY_LINK2_GL)
-AC_SUBST(WX_LIBRARY_LINK3_GL)
 
 dnl are we supposed to create the links?
 AC_SUBST(WX_ALL)
