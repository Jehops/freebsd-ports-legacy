
$FreeBSD$

--- configure.orig	Wed Aug 27 18:55:50 2003
+++ configure	Wed Aug 27 18:57:06 2003
@@ -13300,14 +13300,14 @@
         TOOLKIT=GTK
         GUIDIST=GTK_DIST
 
-                echo $ac_n "checking for gdk_im_open in -lgdk""... $ac_c" 1>&6
-echo "configure:13305: checking for gdk_im_open in -lgdk" >&5
+                echo $ac_n "checking for gdk_im_open in -lgdk12""... $ac_c" 1>&6
+echo "configure:13305: checking for gdk_im_open in -lgdk12" >&5
 ac_lib_var=`echo gdk'_'gdk_im_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lgdk  $LIBS"
+LIBS="-lgdk12  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 13313 "configure"
 #include "confdefs.h"
@@ -15897,8 +15897,8 @@
 
 WX_VERSION_TAG=`echo WX${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}_${WX_RELEASE} | tr "[a-z]" "[A-Z]"`
 
-TOOLCHAIN_NAME="${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}-${WX_RELEASE}"
-TOOLCHAIN_NAME_GL="${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}_gl-${WX_RELEASE}"
+TOOLCHAIN_NAME="${TOOLKIT_DIR}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}"
+TOOLCHAIN_NAME_GL="${TOOLKIT_DIR}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}_gl"
 
 if test "$cross_compiling" = "yes"; then
     TOOLCHAIN_NAME="${TOOLCHAIN_NAME}-${host_alias}"
@@ -15909,13 +15909,11 @@
 WX_LIBRARY_GL="wx_${TOOLCHAIN_NAME_GL}"
 WX_LIBRARY_BASENAME="wx_${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}"
 
-WX_LIBRARY_NAME_SHARED="lib${WX_LIBRARY}.${SO_SUFFIX}.${WX_CURRENT}.${WX_REVISION}.${WX_AGE}"
-WX_LIBRARY_NAME_SHARED_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}.${WX_CURRENT}.${WX_REVISION}.${WX_AGE}"
+WX_LIBRARY_NAME_SHARED="lib${WX_LIBRARY}.${SO_SUFFIX}.2"
+WX_LIBRARY_NAME_SHARED_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}.2"
 
-WX_LIBRARY_LINK1="lib${WX_LIBRARY}.${SO_SUFFIX}.${WX_CURRENT}"
-WX_LIBRARY_LINK2="lib${WX_LIBRARY}.${SO_SUFFIX}"
-WX_LIBRARY_LINK1_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}.${WX_CURRENT}"
-WX_LIBRARY_LINK2_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}"
+WX_LIBRARY_LINK1="lib${WX_LIBRARY}.${SO_SUFFIX}"
+WX_LIBRARY_LINK1_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}"
 
 case "${host}" in
     *-*-cygwin* | *-*-mingw32* )
@@ -18512,7 +18510,7 @@
                 fi
                 ;;
           *-*-freebsd*)
-                                                THREAD_OPTS="-kthread lthread $THREAD_OPTS c_r"
+                                                THREAD_OPTS="$THREAD_OPTS pthread c_r"
                 ;;
           *-*-darwin* | *-*-cygwin* )
                                                 THREAD_OPTS=""
@@ -19269,6 +19267,7 @@
   fi
 fi
 
+WXGTK20=
 if test "$WXGTK20" = 1 ; then
   cat >> confdefs.h <<EOF
 #define __WXGTK20__ $WXGTK20
@@ -19369,21 +19368,6 @@
     esac
 fi
 
-if test "$wxUSE_OPTIMISE" = "no" ; then
-    OPTIMISE=
-else
-    if test "$GCC" = yes ; then
-        OPTIMISE="-O2"
-        case "${host}" in
-            i586-*-*|i686-*-* )
-            OPTIMISE="${OPTIMISE} "
-        ;;
-        esac
-    else
-        OPTIMISE="-O"
-    fi
-fi
-
 if test "$WXWIN_COMPATIBILITY_2" = "yes"; then
     cat >> confdefs.h <<\EOF
 #define WXWIN_COMPATIBILITY_2 1
@@ -22600,13 +22584,11 @@
 s%@WX_LIBRARY_IMPORTLIB@%$WX_LIBRARY_IMPORTLIB%g
 s%@WX_TARGET_LIBRARY@%$WX_TARGET_LIBRARY%g
 s%@WX_LIBRARY_LINK1@%$WX_LIBRARY_LINK1%g
-s%@WX_LIBRARY_LINK2@%$WX_LIBRARY_LINK2%g
 s%@PROGRAM_EXT@%$PROGRAM_EXT%g
 s%@WX_LIBRARY_NAME_STATIC_GL@%$WX_LIBRARY_NAME_STATIC_GL%g
 s%@WX_LIBRARY_NAME_SHARED_GL@%$WX_LIBRARY_NAME_SHARED_GL%g
 s%@WX_TARGET_LIBRARY_GL@%$WX_TARGET_LIBRARY_GL%g
 s%@WX_LIBRARY_LINK1_GL@%$WX_LIBRARY_LINK1_GL%g
-s%@WX_LIBRARY_LINK2_GL@%$WX_LIBRARY_LINK2_GL%g
 s%@WX_ALL@%$WX_ALL%g
 s%@WX_ALL_INSTALLED@%$WX_ALL_INSTALLED%g
 s%@SHARED_LD@%$SHARED_LD%g
