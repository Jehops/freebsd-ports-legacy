--- configure.orig	Mon Oct  6 15:01:07 2003
+++ configure	Mon Oct  6 15:04:11 2003
@@ -11731,7 +11731,7 @@
 
 
     if test "$wxUSE_ZLIB" = "sys" -o "$wxUSE_ZLIB" = "yes" ; then
-                                                if test "$USE_DARWIN" = 1; then
+                                                if test "$USE_DARWIN" = 1 -o "$USE_FREEBSD" = 1; then
             system_zlib_h_ok="yes"
         else
                                                                                     echo $ac_n "checking for zlib.h >= 1.1.4""... $ac_c" 1>&6
@@ -16048,8 +16048,8 @@
 
 WX_VERSION_TAG=`echo WX${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}_${WX_RELEASE} | tr "[a-z]" "[A-Z]"`
 
-TOOLCHAIN_NAME="${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}-${WX_RELEASE}"
-TOOLCHAIN_NAME_GL="${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}_gl-${WX_RELEASE}"
+TOOLCHAIN_NAME="${TOOLKIT_DIR}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}"
+TOOLCHAIN_NAME_GL="${TOOLKIT_DIR}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}_gl"
 
 if test "$cross_compiling" = "yes"; then
     TOOLCHAIN_NAME="${TOOLCHAIN_NAME}-${host_alias}"
@@ -16060,13 +16060,11 @@
 WX_LIBRARY_GL="wx_${TOOLCHAIN_NAME_GL}"
 WX_LIBRARY_BASENAME="wx_${TOOLKIT_DIR}${TOOLKIT_VERSION}${WIDGET_SET}${lib_unicode_suffix}${lib_debug_suffix}"
 
-WX_LIBRARY_NAME_SHARED="lib${WX_LIBRARY}.${SO_SUFFIX}.${WX_CURRENT}.${WX_REVISION}.${WX_AGE}"
-WX_LIBRARY_NAME_SHARED_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}.${WX_CURRENT}.${WX_REVISION}.${WX_AGE}"
+WX_LIBRARY_NAME_SHARED="lib${WX_LIBRARY}.${SO_SUFFIX}.2"
+WX_LIBRARY_NAME_SHARED_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}.2"
 
-WX_LIBRARY_LINK1="lib${WX_LIBRARY}.${SO_SUFFIX}.${WX_CURRENT}"
-WX_LIBRARY_LINK2="lib${WX_LIBRARY}.${SO_SUFFIX}"
-WX_LIBRARY_LINK1_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}.${WX_CURRENT}"
-WX_LIBRARY_LINK2_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}"
+WX_LIBRARY_LINK1="lib${WX_LIBRARY}.${SO_SUFFIX}"
+WX_LIBRARY_LINK1_GL="lib${WX_LIBRARY_GL}.${SO_SUFFIX}"
 
 case "${host}" in
     *-*-cygwin* | *-*-mingw32* )
@@ -18679,7 +18677,7 @@
                 ;;
         esac
 
-                                THREAD_OPTS="$THREAD_OPTS pthread none"
+                                THREAD_OPTS=
 
                 THREADS_OK=no
         for flag in $THREAD_OPTS; do
@@ -18736,6 +18734,9 @@
               THREADS_CFLAGS=""
       done
 
+      THREADS_OK=yes
+      THREADS_LINK="$PTHREAD_LIBS"
+
       if test "x$THREADS_OK" != "xyes"; then
           wxUSE_THREADS=no
           echo "configure: warning: No thread support on this system... disabled" 1>&2
@@ -18752,7 +18753,7 @@
                 flag="-D_THREAD_SAFE"
                 ;;
             *-freebsd*)
-                flag="-D_THREAD_SAFE"
+                flag="${PTHREAD_CFLAGS}"
                 ;;
             *-hp-hpux* )
                 flag="-D_REENTRANT"
@@ -19531,21 +19532,6 @@
     esac
 fi
 
-if test "$wxUSE_OPTIMISE" = "no" ; then
-    OPTIMISE=
-else
-    if test "$GCC" = yes ; then
-        OPTIMISE="-O2"
-        case "${host}" in
-            i586-*-*|i686-*-* )
-            OPTIMISE="${OPTIMISE} "
-        ;;
-        esac
-    else
-        OPTIMISE="-O"
-    fi
-fi
-
 if test "$WXWIN_COMPATIBILITY_2" = "yes"; then
     cat >> confdefs.h <<\EOF
 #define WXWIN_COMPATIBILITY_2 1
@@ -22780,13 +22766,11 @@
 s%@WX_LIBRARY_IMPORTLIB@%$WX_LIBRARY_IMPORTLIB%g
 s%@WX_TARGET_LIBRARY@%$WX_TARGET_LIBRARY%g
 s%@WX_LIBRARY_LINK1@%$WX_LIBRARY_LINK1%g
-s%@WX_LIBRARY_LINK2@%$WX_LIBRARY_LINK2%g
 s%@PROGRAM_EXT@%$PROGRAM_EXT%g
 s%@WX_LIBRARY_NAME_STATIC_GL@%$WX_LIBRARY_NAME_STATIC_GL%g
 s%@WX_LIBRARY_NAME_SHARED_GL@%$WX_LIBRARY_NAME_SHARED_GL%g
 s%@WX_TARGET_LIBRARY_GL@%$WX_TARGET_LIBRARY_GL%g
 s%@WX_LIBRARY_LINK1_GL@%$WX_LIBRARY_LINK1_GL%g
-s%@WX_LIBRARY_LINK2_GL@%$WX_LIBRARY_LINK2_GL%g
 s%@WX_ALL@%$WX_ALL%g
 s%@WX_ALL_INSTALLED@%$WX_ALL_INSTALLED%g
 s%@SHARED_LD@%$SHARED_LD%g
