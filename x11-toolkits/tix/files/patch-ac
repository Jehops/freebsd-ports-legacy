--- Makefile.in.orig	Thu Feb 11 18:11:46 1999
+++ Makefile.in	Fri Nov 28 11:12:45 2003
@@ -1,7 +1,7 @@
 # Makefile --
 #
 # This file is a Makefile to compile Tix with Tk version
-# 8.0. If it has the name "Makefile.in" then it is a
+# 8.4. If it has the name "Makefile.in" then it is a
 # template for a Makefile; to generate the actual Makefile, run
 # "./configure", which is a configuration script generated by the
 # "autoconf" program (constructs like "@foo@" will get replaced in the
@@ -59,27 +59,27 @@
 # determine which shell to use for executing commands:
 SHELL =		/bin/sh
 
-# Location of the Tcl 8.0 source directory.
+# Location of the Tcl 8.4 source directory.
 #
 TCL_SRC_DIR     = @TCL_SRC_DIR@
 TCL_GENERIC_DIR = $(TCL_SRC_DIR)/generic
 
-# Location of the Tk 8.0 source directory.
+# Location of the Tk 8.4 source directory.
 #
 TK_SRC_DIR      = @TK_SRC_DIR@
 TK_GENERIC_DIR  = $(TK_SRC_DIR)/generic
 
 # Libraries to use when linking:
-LIBS = @ITK_BUILD_LIB_SPEC@ @ITCL_BUILD_LIB_SPEC@ \
-    @TK_BUILD_LIB_SPEC@ @TCL_BUILD_LIB_SPEC@ @TK_LIBS@
+LIBS = @ITK_LIB_SPEC@ @ITCL_LIB_SPEC@ \
+    @TK_LIB_SPEC@ @TCL_LIB_SPEC@ @TK_LIBS@
 
 # Libraries for building a stand-alone Tclsh.
 #
-LIBS_TCLONLY = @TCL_BUILD_LIB_SPEC@ @TCL_LIBS@
+LIBS_TCLONLY = @TCL_LIB_SPEC@ @TCL_LIBS@
 
-RUN_TCLSH	= TCL_LIBRARY=$(TCL_SRC_DIR)/library \
-		  TK_LIBRARY=$(TK_SRC_DIR)/library \
-	          $(TCL_SRC_DIR)/unix/tclsh
+RUN_TCLSH	= TCL_LIBRARY=$(TCL_SRC_DIR)/../../lib/tcl8.4 \
+		  TK_LIBRARY=$(TK_SRC_DIR)/../../lib/tk8.4 \
+	          $(TCL_SRC_DIR)/../../bin/tclsh8.4
 
 
 #----------------------------------------------------------------
@@ -117,10 +117,10 @@
 TK_SAMEXE_FILE	 = @TK_SAMEXE_FILE@
 TIX_SAMEXE_FILE	 = @TIX_SAMEXE_FILE@
 
-INST_EXE         = $(TIX_EXE_FILE)$(TIX_VERSION).8.0$(ITCL_EXT)
-INST_TIX_SAMEXE  = $(TIX_SAMEXE_FILE)$(TIX_VERSION).8.0$(ITCL_EXT)
-INST_TK_SAMEXE   = $(TK_SAMEXE_FILE)8.0
-INST_TCL_SAMEXE  = $(TCL_SAMEXE_FILE)8.0
+INST_EXE         = $(TIX_EXE_FILE)$(TIX_VERSION).8.4$(ITCL_EXT)
+INST_TIX_SAMEXE  = $(TIX_SAMEXE_FILE)$(TIX_VERSION).8.4$(ITCL_EXT)
+INST_TK_SAMEXE   = $(TK_SAMEXE_FILE)8.4
+INST_TCL_SAMEXE  = $(TCL_SAMEXE_FILE)8.4
 
 SAM_TARGETS     = $(TIX_SAM_FILE)
 
@@ -210,30 +210,30 @@
 # scripts of TK must be included in the fixed order.
 #----------------------------------------------------------------------
 
-TCL_SCRIPTS = $(TCL_SRC_DIR)/library/*.tcl
+TCL_SCRIPTS = $(TCL_SRC_DIR)/../../lib/tcl8.4/*.tcl
 
 TK_SCRIPTS = \
-    $(TK_SRC_DIR)/library/bgerror.tcl \
-    $(TK_SRC_DIR)/library/dialog.tcl \
-    $(TK_SRC_DIR)/library/focus.tcl \
-    $(TK_SRC_DIR)/library/obsolete.tcl \
-    $(TK_SRC_DIR)/library/optMenu.tcl \
-    $(TK_SRC_DIR)/library/palette.tcl \
-    $(TK_SRC_DIR)/library/tearoff.tcl \
-    $(TK_SRC_DIR)/library/clrpick.tcl \
-    $(TK_SRC_DIR)/library/comdlg.tcl \
-    $(TK_SRC_DIR)/library/msgbox.tcl \
-    $(TK_SRC_DIR)/library/tkfbox.tcl \
-    $(TK_SRC_DIR)/library/xmfbox.tcl \
-    $(SRC_DIR)/generic/tk4.2/tk.tcl \
-    $(TK_SRC_DIR)/library/button.tcl \
-    $(TK_SRC_DIR)/library/entry.tcl \
-    $(TK_SRC_DIR)/library/listbox.tcl \
-    $(TK_SRC_DIR)/library/menu.tcl \
-    $(TK_SRC_DIR)/library/scale.tcl \
-    $(TK_SRC_DIR)/library/scrlbar.tcl \
-    $(TK_SRC_DIR)/library/text.tcl \
-    $(SRC_DIR)/generic/tk8.0/console.tcl
+    $(TK_SRC_DIR)/../../lib/tk8.4/bgerror.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/dialog.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/focus.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/obsolete.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/optMenu.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/palette.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/tearoff.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/clrpick.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/comdlg.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/msgbox.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/tkfbox.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/xmfbox.tcl \
+    $(SRC_DIR)/generic/tk8.4/tk.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/button.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/entry.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/listbox.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/menu.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/scale.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/scrlbar.tcl \
+    $(TK_SRC_DIR)/../../lib/tk8.4/text.tcl \
+    $(SRC_DIR)/generic/tk8.4/console.tcl
 
 TIX_SCRIPTS = \
     $(SRC_DIR)/library/pref/*.fsc \
@@ -246,6 +246,7 @@
 	rm -f $(TIX_LIB_FILE)
 	@TIX_MAKE_LIB@
 	$(RANLIB) $(TIX_LIB_FILE)
+	ln -s $(TIX_LIB_FILE) ${TIX_LIB_FILE:C/\.[0-9]+$//}
 
 $(TCL_SAM_FILE): $(TCL_SAM_OBJS)
 	rm -f $(TCL_SAM_FILE)
@@ -372,7 +373,7 @@
 	$(CC) -c $(CC_SWITCHES) $(GENERIC_DIR)/tixImgXpm.c
 
 tixInit.o: $(GENERIC_DIR)/tixInit.c
-	$(CC) -c $(CC_SWITCHES) $(GENERIC_DIR)/tixInit.c
+	$(CC) -c $(CC_SWITCHES) $(GENERIC_DIR)/tixInit.c -DTIX_LIBRARY=\"$(TIX_LIBRARY)\"
 
 tixItcl.o: $(GENERIC_DIR)/tixItcl.c
 	$(CC) -c $(CC_SWITCHES) $(GENERIC_DIR)/tixItcl.c
