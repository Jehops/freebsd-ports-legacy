--- src/bin/ibuild/ibcmds.c.orig	Fri Dec 11 22:33:25 1992
+++ src/bin/ibuild/ibcmds.c	Tue Dec 28 23:53:30 1999
@@ -86,13 +86,18 @@
 #undef FileChooser
 #define FileChooser _lib_iv(FileChooser)
 
+#if __FreeBSD_cc_version < 400002
 #include <osfcn.h>
+#endif
 #include <stdio.h>
 #include <stdlib.h>
 #include <stream.h>
 #include <string.h>
 #include <sys/stat.h>
 #include <sys/wait.h>
+#ifdef __FreeBSD__
+#include <unistd.h>
+#endif
 
 #if defined(sgi) || defined(sco)
 /* not all vforks are alike */
@@ -2407,12 +2412,13 @@
 	EditorInfo* installed = (EditorInfo*) toolsdialog.Installed();
         EditorInfo* removed = (EditorInfo*) toolsdialog.Removed();
 
-	Iterator i;
-	for (unidraw->First(i); !unidraw->Done(i); unidraw->Next(i)) {
-	    IBEditor* iEd = (IBEditor*) unidraw->GetEditor(i);
+	Iterator ii;
+	for (unidraw->First(ii); !unidraw->Done(ii); unidraw->Next(ii)) {
+	    IBEditor* iEd = (IBEditor*) unidraw->GetEditor(ii);
 	    ToolPanel* itoolpanel = iEd->GetToolPanel();
+	    int i;
 
-            for (int i = 0; i < installed->Count(); i++) {
+            for (i = 0; i < installed->Count(); i++) {
                 itoolpanel->Install(installed->GetName(i));
             }
             for (i = 0; i < removed->Count(); i++) {
