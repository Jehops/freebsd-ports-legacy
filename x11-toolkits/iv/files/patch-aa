--- src/bin/ibuild/ibcmds.c.orig	Mon Jan  3 08:12:08 1994
+++ src/bin/ibuild/ibcmds.c	Sun Jan 23 20:09:14 2000
@@ -86,13 +86,16 @@
 #undef FileChooser
 #define FileChooser _lib_iv(FileChooser)
 
+#if __FreeBSD_cc_version < 400002
 #include <osfcn.h>
+#endif
 #include <stdio.h>
 #include <stdlib.h>
 #include <stream.h>
 #include <string.h>
 #include <sys/stat.h>
 #include <sys/wait.h>
+#include <unistd.h>
 
 #if defined(sgi) || defined(sco)
 /* not all vforks are alike */
@@ -175,7 +178,7 @@
 
 static boolean Abort (Editor* ed, pid_t pid, const char* warning) {
     boolean aborted;
-    AbortDialog dialog(int(pid), warning);
+    AbortDialog dialog((int)pid, warning);
     ed->InsertDialog(&dialog);
     aborted = dialog.Abort();
     ed->RemoveDialog(&dialog);
@@ -2407,12 +2410,13 @@
 	EditorInfo* installed = (EditorInfo*) toolsdialog.Installed();
         EditorInfo* removed = (EditorInfo*) toolsdialog.Removed();
 
-	Iterator i;
-	for (unidraw->First(i); !unidraw->Done(i); unidraw->Next(i)) {
-	    IBEditor* iEd = (IBEditor*) unidraw->GetEditor(i);
+	Iterator ii;
+	for (unidraw->First(ii); !unidraw->Done(ii); unidraw->Next(ii)) {
+	    int i;
+	    IBEditor* iEd = (IBEditor*) unidraw->GetEditor(ii);
 	    ToolPanel* itoolpanel = iEd->GetToolPanel();
 
-            for (int i = 0; i < installed->Count(); i++) {
+            for (i = 0; i < installed->Count(); i++) {
                 itoolpanel->Install(installed->GetName(i));
             }
             for (i = 0; i < removed->Count(); i++) {
