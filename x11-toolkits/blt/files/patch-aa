--- configure.orig	Thu Nov  4 04:57:32 1999
+++ configure	Thu Nov  4 18:03:55 1999
@@ -1093,7 +1093,7 @@
 #
 #  1. command line (--with-cflags)
 #  2. cached variable ($blt_cv_prog_cflags)
-#  3. set to "-O6" if using gcc ($BLT_HAVE_GCC)
+#  3. set to "-O2" if using gcc ($BLT_HAVE_GCC)
 #  4. otherwise, default to "-O"
 #
 echo $ac_n "checking default compiler flags""... $ac_c" 1>&6
@@ -1103,7 +1103,7 @@
 elif test "x${blt_cv_prog_cflags}" != "x" ; then
   CFLAGS=${blt_cv_prog_cflags}
 elif test "${BLT_HAVE_GCC}" = "yes" ; then
-  CFLAGS=-O6
+  CFLAGS=-O2
 else
   CFLAGS=-O
 fi
@@ -2443,6 +2443,9 @@
   if test "x$tclConfigFile" = "x" ; then
     for dir in \
      `ls -dr /usr/local/tcl/tcl[7-9].[0-9]* 2>/dev/null` \
+     /usr/local/lib/tcl8.2 \
+     /usr/local/lib/tcl8.1 \
+     /usr/local/lib/tcl8.0 \
      /usr/local/tcl \
      /usr/local \
      /usr
@@ -2543,6 +2546,9 @@
   if test "x$tkConfigFile" = "x" ; then
     for dir in \
      `ls -dr /usr/local/tcl/tcl[7-9].[0-9]* 2>/dev/null` \
+     /usr/local/lib/tk8.2 \
+     /usr/local/lib/tk8.1 \
+     /usr/local/lib/tk8.0 \
      /usr/local/tcl \
      /usr/local \
      ${x_libraries} \
@@ -2602,7 +2608,14 @@
 TK_LIB_DIR=${TK_PREFIX}/lib
 
 case $target in
-  *-sunos4*|NetBSD-*|FreeBSD-*|OpenBSD-*)
+  *-freebsd*)
+    TCL_INC_DIR=${TCL_PREFIX}/include/tcl${TCL_VERSION}
+    TK_INC_DIR=${TK_PREFIX}/include/tk${TK_VERSION}
+    ;;
+esac
+
+case $target in
+  *-freebsd*|*-sunos4*|NetBSD-*|FreeBSD-*|OpenBSD-*)
     TCL_LIB_SPEC="-ltcl${TCL_MAJOR_VERSION}${TCL_MINOR_VERSION}"
     TK_LIB_SPEC="-ltk${TK_MAJOR_VERSION}${TK_MINOR_VERSION}"
     ;;
@@ -3348,7 +3361,13 @@
     if test "$test_ok" = yes; then
       SHLIB_CFLAGS="-fpic"
       SHLIB_LD="ld"
-      SHLIB_LD_FLAGS="-Bshareable -x"
+      if test `objformat` = "elf"; then
+        SHLIB_LD_FLAGS="-Bshareable -x -soname \$@"
+        SHLIB_SUFFIX=".so.${BLT_MAJOR_VERSION}"
+      else
+        SHLIB_LD_FLAGS="-Bshareable -x"
+        SHLIB_SUFFIX=".so.${BLT_MAJOR_VERSION}.${BLT_MINOR_VERSION}"
+      fi
     fi
     ;;
 
