--- configure.orig	Mon May 31 18:11:50 2004
+++ configure	Sun Jun 27 20:13:50 2004
@@ -32707,7 +32707,7 @@
                 fi
                 ;;
           *-*-freebsd*)
-                                                THREAD_OPTS="-kthread lthread $THREAD_OPTS c_r"
+                                                THREAD_OPTS="$PTHREAD_LIBS"
                 ;;
           *-*-darwin* | *-*-cygwin* )
                                                 THREAD_OPTS=""
@@ -32744,6 +32744,12 @@
 echo $ECHO_N "checking whether pthreads work without any flags... $ECHO_C" >&6
                     ;;
 
+                -pthread|-l*)
+                    echo "$as_me:$LINENO: checking for the pthreads library $flag" >&5
+echo $ECHO_N "checking for the pthreads library $flag... $ECHO_C" >&6
+                    THREADS_LINK="$flag"
+                    ;;
+
                 -*)
                     echo "$as_me:$LINENO: checking whether pthreads work with $flag" >&5
 echo $ECHO_N "checking whether pthreads work with $flag... $ECHO_C" >&6
@@ -34014,6 +34020,7 @@
     fi
   fi
 fi
+TOOLCHAIN_DEFS="${TOOLCHAIN_DEFS} ${PTHREAD_CFLAGS}"
 
 if test "$WXGTK20" = 1 ; then
   cat >>confdefs.h <<_ACEOF
@@ -34134,7 +34141,7 @@
         OPTIMISE="-O"
     fi
 fi
-
+OPTIMISE=
 
 if test "x$WXWIN_COMPATIBILITY_2_2" = "xyes"; then
     cat >>confdefs.h <<\_ACEOF
@@ -40123,6 +40130,13 @@
 
     case "${BAKEFILE_HOST}" in
       *-*-linux* )
+        SONAME_FLAG="-Wl,-soname,"
+        USE_SOVERSION=1
+        USE_SOVERLINUX=1
+        USE_SOSYMLINKS=1
+      ;;
+
+      *-*-freebsd* )
         SONAME_FLAG="-Wl,-soname,"
         USE_SOVERSION=1
         USE_SOVERLINUX=1
