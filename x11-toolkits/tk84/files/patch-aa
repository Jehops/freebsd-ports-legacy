--- configure.orig	Thu Jul 29 14:57:48 2004
+++ configure	Thu Oct 28 11:16:40 2004
@@ -2590,3 +2590,4 @@
 	    SHLIB_CFLAGS="-fPIC"
-	    SHLIB_LD="ld -Bshareable -x"
+	    TCL_SHLIB_LD_EXTRAS="-soname \$@"
+	    SHLIB_LD="ld -shared -x"
 	    SHLIB_LD_LIBS='${LIBS}'
@@ -2595,3 +2596,3 @@
 	    DL_LIBS=""
-	    LDFLAGS="$LDFLAGS -export-dynamic"
+	    LDFLAGS=""
 	    CC_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
@@ -2605,6 +2606,6 @@
 	    case $system in
-	    FreeBSD-3.*)
+	    FreeBSD-*)
 	    	# FreeBSD-3 doesn't handle version numbers with dots.
 	    	UNSHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.a'
-	    	SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so'
+		SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}${DBGX}.so.1'
 	    	TCL_LIB_VERSIONS_OK=nodots
@@ -2841,2 +2842,3 @@
 
+TCL_SRC_DIR=${prefix}/include/tcl${TCLVERSION}
 
