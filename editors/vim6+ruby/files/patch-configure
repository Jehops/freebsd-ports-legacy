--- configure.in.orig	Fri May  4 19:00:29 2001
+++ configure.in	Thu May 31 02:01:12 2001
@@ -460,7 +460,7 @@
     AC_MSG_CHECKING(Ruby version)
     if $vi_cv_path_ruby -e 'VERSION >= "1.6.0" or exit 1' >/dev/null 2>/dev/null; then
       AC_MSG_RESULT(OK)
-      rubyhdrdir=`$vi_cv_path_ruby -r mkmf -e 'print $hdrdir'`
+      rubyhdrdir=`$vi_cv_path_ruby -r rbconfig -e 'print Config::CONFIG[["archdir"]]'`
       RUBY_CFLAGS="-I$rubyhdrdir"
       rubylibs=`$vi_cv_path_ruby -r rbconfig -e 'print Config::CONFIG[["LIBS"]]'`
       if test "X$rubylibs" != "X"; then
--- auto/configure.orig	Fri May  4 19:50:56 2001
+++ auto/configure	Thu May 31 03:55:33 2001
@@ -1789,7 +1789,7 @@
 echo "configure:1790: checking Ruby version" >&5
     if $vi_cv_path_ruby -e 'VERSION >= "1.6.0" or exit 1' >/dev/null 2>/dev/null; then
       echo "$ac_t""OK" 1>&6
-      rubyhdrdir=`$vi_cv_path_ruby -r mkmf -e 'print $hdrdir'`
+      rubyhdrdir=`$vi_cv_path_ruby -r rbconfig -e 'print Config::CONFIG["archdir"]'`
       RUBY_CFLAGS="-I$rubyhdrdir"
       rubylibs=`$vi_cv_path_ruby -r rbconfig -e 'print Config::CONFIG["LIBS"]'`
       if test "X$rubylibs" != "X"; then
