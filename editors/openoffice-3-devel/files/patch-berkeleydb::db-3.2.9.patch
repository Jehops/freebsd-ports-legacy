--- ../berkeleydb/db-3.2.9.patch.orig	Fri Oct 18 22:02:26 2002
+++ ../berkeleydb/db-3.2.9.patch	Fri Oct 18 22:05:40 2002
@@ -1,3 +1,13 @@
+--- ./unxsols3.pro/misc/db-3.2.9/dist/configure.orig	Fri Oct 18 21:46:44 2002
++++ build/unxsols3.pro/db-3.2.9/dist/configure	Fri Oct 18 21:48:47 2002
+@@ -1795,6 +1795,7 @@
+ 	case "$host_os" in
+ 	solaris*)	JINCSUBDIRS="solaris";;
+ 	linux*)		JINCSUBDIRS="linux genunix";;
++	freebsd*)	JINCSUBDIRS="freebsd genunix";;
+ 	*)		JINCSUBDIRS="genunix";;
+ 	esac
+ 
 *** ./unxsols3.pro/misc/db-3.2.9/cxx/cxx_app.cpp	Thu Jan 11 19:28:22 2001
 --- build/unxsols3.pro/db-3.2.9/cxx/cxx_app.cpp	Mon Jun 11 15:50:55 2001
 ***************
@@ -43,3 +53,51 @@
   
   CC=		@MAKEFILE_CC@
   CCLINK=		@MAKEFILE_CCLINK@
+--- misc/build/db-3.2.9/dist/ltconfig.orig	Sat Nov 24 14:56:10 2001
++++ misc/build/db-3.2.9/dist/ltconfig	Sat Nov 24 14:56:34 2001
+@@ -1194,11 +1194,23 @@
+ 
+   netbsd*)
+     if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
++      archive_cmds='$LD -Bshareable $libobjs $deplibs $linkopts -o $lib'
++      # can we support soname and/or expsyms with a.out? -oliva
++    else
+       archive_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname $wl$soname -o $lib'
+       archive_expsym_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
+-    else
++      need_version=no
++    fi
++    ;;
++
++  freebsd*)
++    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
+       archive_cmds='$LD -Bshareable $libobjs $deplibs $linkopts -o $lib'
+       # can we support soname and/or expsyms with a.out? -oliva
++    else
++      archive_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname $wl$soname -o $lib'
++      archive_expsym_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
++      need_version=no
+     fi
+     ;;
+ 
+@@ -2019,6 +2031,20 @@
+     library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major ${libname}${release}.so ${libname}.so'
+     soname_spec='${libname}${release}.so$major'
+     dynamic_linker='NetBSD ld.elf_so'
++  fi
++  shlibpath_var=LD_LIBRARY_PATH
++  ;;
++
++freebsd*)
++  version_type=sunos
++  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then
++    library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
++    finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
++    dynamic_linker='FreeBSD (a.out) ld.so'
++  else
++    library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major ${libname}${release}.so ${libname}.so'
++    soname_spec='${libname}${release}.so$major'
++    dynamic_linker='FreeBSD ld.elf_so'
+   fi
+   shlibpath_var=LD_LIBRARY_PATH
+   ;;
