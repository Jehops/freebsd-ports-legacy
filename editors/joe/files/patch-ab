--- main.c.orig	Sat Jan 21 19:21:08 1995
+++ main.c	Wed Feb 28 18:52:17 2001
@@ -18,6 +18,10 @@
 
 #include <stdio.h>
 #include <fcntl.h>
+#ifdef __FreeBSD__
+#include <locale.h>
+#include <ctype.h>
+#endif
 #include "config.h"
 #include "w.h"
 #include "tty.h"
@@ -187,6 +191,20 @@
  run=namprt(argv[0]);
 #endif 
 
+#ifdef __FreeBSD__
+ setlocale(LC_ALL, "");
+ for(c=0;c<256;c++)
+  { int a=0;
+    if(iscntrl(c))
+     a|=UNDERLINE;
+    if((c&0x80)&&!isprint(c))
+     a|=INVERSE;
+    xlata[c]=a;
+    if(isprint(c))
+     xlatc[c]=c;
+  }
+#endif
+
  if(s=getenv("LINES")) sscanf(s,"%d",&lines);
  if(s=getenv("COLUMNS")) sscanf(s,"%d",&columns);
  if(s=getenv("BAUD")) sscanf(s,"%u",&Baud);
@@ -234,20 +252,6 @@
 
 #else
 
- s=vsncpy(NULL,0,sc("."));
- s=vsncpy(sv(s),sv(run));
- s=vsncpy(sv(s),sc("rc"));
- c=procrc(cap,s);
- if(c==0) goto donerc;
- if(c==1)
-  {
-  char buf[8];
-  fprintf(stderr,"There were errors in '%s'.  Use it anyway?",s);
-  fflush(stderr);
-  fgets(buf,8,stdin);
-  if(buf[0]=='y' || buf[0]=='Y') goto donerc;
-  }
-
  vsrm(s);
  s=getenv("HOME");
  if(s)
@@ -365,7 +369,7 @@
  maint->curwin=maint->topwin;
  if(help) helpon(maint);
  if(!nonotice)
-  msgnw(lastw(maint)->object,"\\i** Joe's Own Editor v2.8 ** Copyright (C) 1995 Joseph H. Allen **\\i");
+  msgnw(lastw(maint)->object,"\\i** Joe's Own Editor v2.8l ** Copyright (C) 1995 Joseph H. Allen **\\i");
  edloop(0);
  vclose(vmem);
  nclose(n);
