--- Makefile.orig	Fri Mar 19 15:01:49 1999
+++ Makefile	Sat Jul  1 16:25:24 2000
@@ -3,12 +3,13 @@
 INSTALL_DIR = /usr/X11R6/bin/
 DOCS = /usr/doc
 SHARE = /usr/share
-CFLAGS = `gtk-config --cflags` -I/usr/local/include -I. -O -Wall -DVERSION=\"1.23\"
+CFLAGS ?= -O2
+CFLAGS += `$(GTK_CONFIG) --cflags` -I. -DVERSION=\"1.23\"
 GTKEDITOR_CFLAGS = -I../gtkeditor-0.0.6 -I../gtkeditor-0.0.6/gtkeditor
-LIBS = `gtk-config --libs`
+LIBS = `$(GTK_CONFIG) --libs`
 OBJS = gxedit.o net.o utils.o
 GTKEDITOR_OBJS = ../gtkeditor-0.0.6/gtkeditor/gtkeditor.o ../gtkeditor-0.0.6/regex/regex.o -L../gtkeditor-0.0.6 -lgtkeditor -lregex -lguile -ldl -ltermcap
-CC = gcc
+CC ?= gcc
 
 all:
 	@echo "Use ./setup"
@@ -23,8 +24,7 @@
 	$(CC) $(CFLAGS) -c utils.c
 	$(CC) $(CFLAGS) -o $(BIN_DIR)gxedit $(OBJS) $(LIBS)
 	@(rm -f ./.chk_config)
-	(cd xproc-src; make BIN_DIR=../; cd ..)
-	(cd gtk-shell-src; make BIN_DIR=../; cd ..)
+	(cd gtk-shell-src; $(MAKE) BIN_DIR=../; cd ..)
 
 gxe-with-gtkeditor:
 	$(CC) $(CFLAGS) $(GTKEDITOR_CFLAGS) -c gxedit.c
@@ -32,19 +32,18 @@
 	$(CC) $(CFLAGS) $(GTKEDITOR_CFLAGS) -c utils.c
 	$(CC) $(CFLAGS) $(GTKEDITOR_CFLAGS) -o $(BIN_DIR)gxedit $(OBJS) $(GTKEDITOR_OBJS) $(LIBS)
 	@(rm -f ./.chk_config)
-	(cd xproc-src; make BIN_DIR=../; cd ..)
-	(cd gtk-shell-src; make BIN_DIR=../; cd ..)
+	(cd gtk-shell-src; $(MAKE) BIN_DIR=../; cd ..)
 
 say:
-	(cd access; make BIN_DIR=../)
+	(cd access; $(MAKE) BIN_DIR=../)
 
 say-install:
 	$(INSTALL) -m 0755 say $(INSTALL_DIR)say
 
 clean:
 	rm -f *.o $(BIN_DIR)gxedit $(BIN_DIR)say $(BIN_DIR)xproc $(BIN_DIR)gtk-shell $(BIN_DIR)libbabel.a *.log core
-	(cd gtk-shell-src; make clean; cd ..)
-	(cd xproc-src; make clean; cd ..)
+	(cd gtk-shell-src; $(MAKE) clean; cd ..)
+	(cd xproc-src; $(MAKE) clean; cd ..)
 
 install:
 	$(INSTALL) -m 0755 $(BIN_DIR)gxedit $(INSTALL_DIR)gxedit
@@ -75,9 +74,9 @@
 	$(CC) $(CFLAGS) -c net.c
 	$(CC) $(CFLAGS) -c utils.c
 	$(CC) $(CFLAGS) -o gxedit $(OBJS) -L/usr/local/lib -L/usr/X11R6/lib /usr/lib/libgtk.a /usr/lib/libgdk.a /usr/lib/libglib.a /usr/lib/libgmodule.a -lXext -lX11 -lm -ldl
-	(cd xproc-src; make distro BIN_DIR=../; cd ..)
-	(cd gtk-shell-src; make distro BIN_DIR=../; cd ..)
-	(cd access; make BIN_DIR=../; cd ..)
+	(cd xproc-src; $(MAKE) distro BIN_DIR=../; cd ..)
+	(cd gtk-shell-src; $(MAKE) distro BIN_DIR=../; cd ..)
+	(cd access; $(MAKE) BIN_DIR=../; cd ..)
 	mv say dist/
 	mv gxedit dist/
 	mv xproc dist/
