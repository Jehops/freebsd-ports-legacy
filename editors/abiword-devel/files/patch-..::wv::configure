
$FreeBSD$

--- ../wv/configure.orig	Tue Sep 18 20:24:33 2001
+++ ../wv/configure	Tue Oct  2 09:43:27 2001
@@ -6008,7 +6008,7 @@
 #               LIBXML2_LIBS="-lxml" ]))
 
 # Extract the first word of "glib-config", so it can be a program name with args.
-set dummy glib-config; ac_word=$2
+set dummy glib12-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 echo "configure:6014: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG'+set}'`\" = set"; then
@@ -6586,16 +6586,16 @@
 if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-		ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:6592: checking for iconv.h" >&5
+		ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:6592: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 6597 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:6602: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -6620,7 +6620,7 @@
 		
 else
   echo "$ac_t""no" 1>&6
-	{ echo "configure: error: * * * I found system iconv but can't find iconv.h header! * * *" 1>&2; exit 1; }
+	{ echo "configure: error: * * * I found system iconv but can't find giconv.h header! * * *" 1>&2; exit 1; }
 		
 fi
 
@@ -6635,30 +6635,30 @@
 	if  test "x$LIBICONV_DIR" != "x" ; then
 		if  test "$use_peer_libiconv" != "no" ; then
 			ICONV_CFLAGS="-I$LIBICONV_DIR/include"
-			ICONV_LIBS="-L$LIBICONV_DIR/lib/.libs -liconv"
+			ICONV_LIBS="-L$LIBICONV_DIR/lib/.libs -lgiconv"
 		else
 			ICONV_CFLAGS="-I$LIBICONV_DIR/include"
-			ICONV_LIBS="-L$LIBICONV_DIR/lib -liconv"
+			ICONV_LIBS="-L$LIBICONV_DIR/lib -lgiconv"
 		fi
 	else
 		ICONV_CFLAGS=""
-		ICONV_LIBS="-liconv"
+		ICONV_LIBS="-lgiconv"
 	fi
 
 	CPPFLAGS="${CPPFLAGS} $ICONV_CFLAGS"
 	LDFLAGS="${LDFLAGS} $ICONV_LIBS"
 
 	if  test "$use_peer_libiconv" = "abi" ; then
-								ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:6655: checking for iconv.h" >&5
+								ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:6655: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 6660 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:6665: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -6683,16 +6683,16 @@
 fi
 
 	else
-		ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:6689: checking for iconv.h" >&5
+		ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:6689: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 6694 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:6699: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -6712,14 +6712,14 @@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-			echo $ac_n "checking for iconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:6717: checking for iconv_open in -liconv" >&5
+			echo $ac_n "checking for iconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:6717: checking for iconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'iconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 6725 "configure"
 #include "confdefs.h"
@@ -6752,14 +6752,14 @@
 			
 else
   echo "$ac_t""no" 1>&6
-	echo $ac_n "checking for libiconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:6757: checking for libiconv_open in -liconv" >&5
+	echo $ac_n "checking for libiconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:6757: checking for libiconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'libiconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 6765 "configure"
 #include "confdefs.h"
@@ -6792,7 +6792,7 @@
 				
 else
   echo "$ac_t""no" 1>&6
-	{ echo "configure: error: * * * I found iconv.h header but no working library! * * *" 1>&2; exit 1; }
+	{ echo "configure: error: * * * I found giconv.h header but no working library! * * *" 1>&2; exit 1; }
 				
 fi
 
@@ -6825,7 +6825,7 @@
 #line 6826 "configure"
 #include "confdefs.h"
 
-#include <iconv.h>
+#include <giconv.h>
 
 int main() {
 
