--- af/xap/xp/xap_EncodingManager.cpp.orig	Mon Nov 27 17:14:03 2000
+++ af/xap/xp/xap_EncodingManager.cpp	Tue Jan  2 19:02:31 2001
@@ -39,16 +39,16 @@
 
 XAP_EncodingManager::~XAP_EncodingManager()
 {
-  if(iconv_handle_N2U)
+  if(iconv_handle_N2U != (iconv_t)-1)
     iconv_close(iconv_handle_N2U);
 
-  if(iconv_handle_U2N)
+  if(iconv_handle_U2N != (iconv_t)-1)
     iconv_close(iconv_handle_U2N);
 
-  if(iconv_handle_U2Win)
+  if(iconv_handle_U2Win != (iconv_t)-1)
     iconv_close(iconv_handle_U2Win);
   
-  if(iconv_handle_Win2U)
+  if(iconv_handle_Win2U != (iconv_t)-1)
     iconv_close(iconv_handle_Win2U);
 }
 
