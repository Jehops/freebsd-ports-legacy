
$FreeBSD$

--- makefile.orig	Fri Aug 15 23:31:32 2003
+++ makefile	Sun Sep 28 13:23:50 2003
@@ -5,7 +5,7 @@
 # GNU make does not like \r\n line endings so should be saved to CVS in binary form.
 
 .SUFFIXES: .cxx .o .h .a
-CC = g++
+CC ?= g++
 AR = ar
 
 # If explicit setting of GTK1 or GTK2 then use that else look for
@@ -27,9 +27,9 @@
 CONFIGLIB=pkg-config --libs gtk+-2.0 gthread-2.0
 gnomeprefix:=$(shell pkg-config --variable=prefix gtk+-2.0 2>/dev/null)
 else
-CONFIGFLAGS=gtk-config --cflags
-CONFIGLIB=gtk-config --libs
-gnomeprefix:=$(shell gnome-config --prefix 2>/dev/null)
+CONFIGFLAGS=pkg-config --cflags gtk+ gthread
+CONFIGLIB=pkg-config --libs gtk+ gthread
+gnomeprefix:=$(PREFIX)
 endif
 ifdef gnomeprefix
   prefix=$(gnomeprefix)
@@ -43,17 +43,17 @@
 
 PROG	= ../bin/SciTE
 
-vpath %.h ../src ../../scintilla/include
+vpath %.h ../src $(X11BASE)/include/scintilla
 vpath %.cxx ../src
 
 #CXXFLAGS= -g -DGTK -DSCI_LEXER -DSYSCONF_PATH=\"$(SYSCONF_PATH)\" -Wwrite-strings
-INCLUDEDIRS=-I ../../scintilla/include -I ../src
+INCLUDEDIRS=-I $(X11BASE)/include/scintilla -I ../src
 CXXBASEFLAGS=-W -Wall -DGTK -DSCI_LEXER -DSYSCONF_PATH=\"$(SYSCONF_PATH)\" $(INCLUDEDIRS)
 
 ifdef DEBUG
-CXXFLAGS=-DDEBUG -g $(CXXBASEFLAGS)
+CXXFLAGS+=-DDEBUG $(CXXBASEFLAGS)
 else
-CXXFLAGS=-DNDEBUG -Os $(CXXBASEFLAGS)
+CXXFLAGS+=-DNDEBUG $(CXXBASEFLAGS)
 endif
 
 .cxx.o:
@@ -71,8 +71,8 @@
 LEXEROBJS=$(wildcard ../../scintilla/gtk/Lex*.o)
 
 $(PROG): SciTEGTK.o SciTEBase.o SciTEBuffers.o SciTEIO.o Exporters.o DirectorExtension.o \
-SciTEProps.o Utf8_16.o $(LEXEROBJS) ../../scintilla/bin/scintilla.a
-	$(CC) `$(CONFIGLIB)` `glib-config --libs gthread` -DGTK $^ -o $@
+SciTEProps.o Utf8_16.o
+	$(CC) `$(CONFIGLIB)` -lscintilla -lscintilla_lexers -DGTK $^ -o $@
 
 # SciTE-static no longer builds. Kept here in case of later need.
 SciTE-static: SciTEGTK.o SciTEBase.o SciTEBuffers.o SciTEIO.o Exporters.o SciTEProps.o \
