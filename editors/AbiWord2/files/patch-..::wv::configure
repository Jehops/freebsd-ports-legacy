
$FreeBSD$

--- ../wv/configure.orig	Thu Nov 22 12:24:09 2001
+++ ../wv/configure	Mon Dec 17 13:44:55 2001
@@ -2676,16 +2676,16 @@
 if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-		ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:2682: checking for iconv.h" >&5
+		ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:2682: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 2687 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:2692: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -2710,7 +2710,7 @@
 		
 else
   echo "$ac_t""no" 1>&6
-	{ echo "configure: error: * * * I found system iconv but can't find iconv.h header! * * *" 1>&2; exit 1; }
+	{ echo "configure: error: * * * I found system iconv but can't find giconv.h header! * * *" 1>&2; exit 1; }
 		
 fi
 
@@ -2725,30 +2725,30 @@
 	if  test "x$LIBICONV_DIR" != "x" ; then
 		if  test "$use_peer_libiconv" != "no" ; then
 			ICONV_CFLAGS="-I$LIBICONV_DIR/include"
-			ICONV_LIBS="-L$LIBICONV_DIR/lib/.libs -liconv"
+			ICONV_LIBS="-L$LIBICONV_DIR/lib/.libs -lgiconv"
 		else
 			ICONV_CFLAGS="-I$LIBICONV_DIR/include"
-			ICONV_LIBS="-L$LIBICONV_DIR/lib -liconv"
+			ICONV_LIBS="-L$LIBICONV_DIR/lib -lgiconv"
 		fi
 	else
 		ICONV_CFLAGS=""
-		ICONV_LIBS="-liconv"
+		ICONV_LIBS="-lgiconv"
 	fi
 
 	CPPFLAGS="${CPPFLAGS} $ICONV_CFLAGS"
 	LDFLAGS="${LDFLAGS} $ICONV_LIBS"
 
 	if  test "$use_peer_libiconv" = "abi" ; then
-								ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:2745: checking for iconv.h" >&5
+								ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:2745: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 2750 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:2755: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -2773,16 +2773,16 @@
 fi
 
 	else
-		ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:2779: checking for iconv.h" >&5
+		ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:2779: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 2784 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:2789: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -2802,14 +2802,14 @@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-			echo $ac_n "checking for iconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:2807: checking for iconv_open in -liconv" >&5
+			echo $ac_n "checking for iconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:2807: checking for iconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'iconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 2815 "configure"
 #include "confdefs.h"
@@ -2842,14 +2842,14 @@
 			
 else
   echo "$ac_t""no" 1>&6
-	echo $ac_n "checking for libiconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:2847: checking for libiconv_open in -liconv" >&5
+	echo $ac_n "checking for libiconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:2847: checking for libiconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'libiconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 2855 "configure"
 #include "confdefs.h"
@@ -2882,7 +2882,7 @@
 				
 else
   echo "$ac_t""no" 1>&6
-	{ echo "configure: error: * * * I found iconv.h header but no working library! * * *" 1>&2; exit 1; }
+	{ echo "configure: error: * * * I found giconv.h header but no working library! * * *" 1>&2; exit 1; }
 				
 fi
 
@@ -2916,7 +2916,7 @@
 #line 2917 "configure"
 #include "confdefs.h"
 
-#include <iconv.h>
+#include <giconv.h>
 
 int main() {
 
