
$FreeBSD$

--- ../wv/configure.orig	Wed Oct 31 19:07:37 2001
+++ ../wv/configure	Fri Nov 23 16:22:12 2001
@@ -2074,7 +2074,7 @@
 
 
 # Extract the first word of "glib-config", so it can be a program name with args.
-set dummy glib-config; ac_word=$2
+set dummy glib12-config; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
 echo "configure:2080: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_GLIB_CONFIG'+set}'`\" = set"; then
@@ -2531,16 +2531,16 @@
 if eval "test \"`echo '$ac_cv_func_'iconv`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-		ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:2537: checking for iconv.h" >&5
+		ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:2537: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 2542 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:2547: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -2565,7 +2565,7 @@
 		
 else
   echo "$ac_t""no" 1>&6
-	{ echo "configure: error: * * * I found system iconv but can't find iconv.h header! * * *" 1>&2; exit 1; }
+	{ echo "configure: error: * * * I found system iconv but can't find giconv.h header! * * *" 1>&2; exit 1; }
 		
 fi
 
@@ -2580,30 +2580,30 @@
 	if  test "x$LIBICONV_DIR" != "x" ; then
 		if  test "$use_peer_libiconv" != "no" ; then
 			ICONV_CFLAGS="-I$LIBICONV_DIR/include"
-			ICONV_LIBS="-L$LIBICONV_DIR/lib/.libs -liconv"
+			ICONV_LIBS="-L$LIBICONV_DIR/lib/.libs -lgiconv"
 		else
 			ICONV_CFLAGS="-I$LIBICONV_DIR/include"
-			ICONV_LIBS="-L$LIBICONV_DIR/lib -liconv"
+			ICONV_LIBS="-L$LIBICONV_DIR/lib -lgiconv"
 		fi
 	else
 		ICONV_CFLAGS=""
-		ICONV_LIBS="-liconv"
+		ICONV_LIBS="-lgiconv"
 	fi
 
 	CPPFLAGS="${CPPFLAGS} $ICONV_CFLAGS"
 	LDFLAGS="${LDFLAGS} $ICONV_LIBS"
 
 	if  test "$use_peer_libiconv" = "abi" ; then
-								ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:2600: checking for iconv.h" >&5
+								ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:2600: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 2605 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:2610: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -2628,16 +2628,16 @@
 fi
 
 	else
-		ac_safe=`echo "iconv.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for iconv.h""... $ac_c" 1>&6
-echo "configure:2634: checking for iconv.h" >&5
+		ac_safe=`echo "giconv.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for giconv.h""... $ac_c" 1>&6
+echo "configure:2634: checking for giconv.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
 #line 2639 "configure"
 #include "confdefs.h"
-#include <iconv.h>
+#include <giconv.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:2644: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -2657,14 +2657,14 @@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-			echo $ac_n "checking for iconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:2662: checking for iconv_open in -liconv" >&5
+			echo $ac_n "checking for iconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:2662: checking for iconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'iconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 2670 "configure"
 #include "confdefs.h"
@@ -2697,14 +2697,14 @@
 			
 else
   echo "$ac_t""no" 1>&6
-	echo $ac_n "checking for libiconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:2702: checking for libiconv_open in -liconv" >&5
+	echo $ac_n "checking for libiconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:2702: checking for libiconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'libiconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 2710 "configure"
 #include "confdefs.h"
@@ -2737,7 +2737,7 @@
 				
 else
   echo "$ac_t""no" 1>&6
-	{ echo "configure: error: * * * I found iconv.h header but no working library! * * *" 1>&2; exit 1; }
+	{ echo "configure: error: * * * I found giconv.h header but no working library! * * *" 1>&2; exit 1; }
 				
 fi
 
@@ -2771,7 +2771,7 @@
 #line 2772 "configure"
 #include "confdefs.h"
 
-#include <iconv.h>
+#include <giconv.h>
 
 int main() {
 
