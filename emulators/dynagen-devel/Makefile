# New ports collection makefile for:	dynagen
# Date created:				2007-09-14
# Whom:					Pavel Volkov <pol@opk.ru>
#
# $FreeBSD$
#

PORTNAME=	dynagen
PORTVERSION=	0.10.1
PORTREVISION=	2
CATEGORIES=	emulators
MASTER_SITES=	SF/dyna-gen/${PORTNAME}%20source%20_%20Linux/${PORTNAME}%20${PORTVERSION}
PKGNAMESUFFIX=	-devel

MAINTAINER=	pavelivolkov@googlemail.com
COMMENT=	Text-based front end for Dynamips development version

RUN_DEPENDS=	dynamips:${PORTSDIR}/emulators/dynamips-devel
# Note that it *should* be dynamips-devel but that port installs it as dynamips

CONFLICTS=	dynagen-[0-9]* dynamips-[0-9]*

# This port is replaced by a new version
DEPRECATED=	Please install emulators/dynagen instead
EXPIRATION_DATE=	2010-12-01

USE_PYTHON=	yes
USE_PYDISTUTILS=	yes
PYDISTUTILS_PKGVERSION=	0.4.4
ALL_TARGET=	# empty
USE_DOS2UNIX=	yes

post-install:
	${INSTALL_SCRIPT} ${WRKSRC}/dynagen ${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/dynagen.ini ${PREFIX}/etc/dynagen.ini.sample

	@if [ ! -f ${PREFIX}/etc/dynagen.ini ]; then \
		${CP} -p ${PREFIX}/etc/dynagen.ini.sample ${PREFIX}/etc/dynagen.ini ; \
	fi

	${MKDIR} ${DATADIR}
	${INSTALL_DATA} ${WRKSRC}/configspec ${DATADIR}/configspec

.if !defined(NOPORTDOCS)
	${MKDIR} ${DOCSDIR}
	${INSTALL_DATA} ${WRKSRC}/docs/tutorial.htm ${DOCSDIR}
	${MKDIR} ${DOCSDIR}/tutorial_files
	${INSTALL_DATA} ${WRKSRC}/docs/tutorial_files/* ${DOCSDIR}/tutorial_files
.endif
	${MKDIR} ${EXAMPLESDIR}
	${MKDIR} ${EXAMPLESDIR}/sample_labs
	${MKDIR} ${EXAMPLESDIR}/sample_labs/simple1
	${INSTALL_DATA} ${WRKSRC}/sample_labs/simple1/simple1.net ${EXAMPLESDIR}/sample_labs/simple1
	${MKDIR} ${EXAMPLESDIR}/sample_labs/multiserver
	${INSTALL_DATA} ${WRKSRC}/sample_labs/multiserver/multiserver.net ${EXAMPLESDIR}/sample_labs/multiserver
	${MKDIR} ${EXAMPLESDIR}/sample_labs/frame_relay
	${INSTALL_DATA} ${WRKSRC}/sample_labs/frame_relay/frame_relay1.net ${EXAMPLESDIR}/sample_labs/frame_relay
	${MKDIR} ${EXAMPLESDIR}/sample_labs/simple2
	${INSTALL_DATA} ${WRKSRC}/sample_labs/simple2/simple2.net ${EXAMPLESDIR}/sample_labs/simple2
	${MKDIR} ${EXAMPLESDIR}/sample_labs/ethernet_switch
	${INSTALL_DATA} ${WRKSRC}/sample_labs/ethernet_switch/ethsw1.net ${EXAMPLESDIR}/sample_labs/ethernet_switch
	${INSTALL_DATA} ${WRKSRC}/sample_labs/all_config_options.txt ${EXAMPLESDIR}/sample_labs

.include <bsd.port.mk>
