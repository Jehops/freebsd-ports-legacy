--- configure.orig	Sun Aug 27 22:15:37 2006
+++ configure	Thu Sep  7 21:18:29 2006
@@ -6486,7 +6486,7 @@
 fi
 
 if test x"$with_sdl" = "xyes"; then
-	for ac_prog in sdl-config
+	for ac_prog in ${SDL_CONFIG##*/}
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
@@ -14392,6 +14392,7 @@
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lesd $SOUND_LIBS $LIBS"
+CPPFLAGS="`esd-config --cflags` $CPPFLAGS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@ -14458,10 +14459,10 @@
   if test x"$with_sdl" = "xyes"; then
     old_cflags=$CFLAGS
     old_libs=$LIBS
-    CFLAGS="$CFLAGS `sdl-config --cflags`"
-    LIBS="$LIBS `sdl-config --libs`"
+    CFLAGS="$CFLAGS `${SDL_CONFIG} --cflags`"
+    LIBS="$LIBS `${SDL_CONFIG} --libs`"
 
-for ac_header in SDL/SDL_audio.h
+for ac_header in SDL_audio.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -14603,7 +14604,8 @@
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lSDL $SOUND_LIBS $LIBS"
+LIBS="`${SDL_CONFIG} --libs` $SOUND_LIBS $LIBS"
+CFLAGS="`${SDL_CONFIG} --cflags` $CFLAGS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
