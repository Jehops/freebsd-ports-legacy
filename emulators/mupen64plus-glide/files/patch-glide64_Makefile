--- glide64/Makefile	2008-03-29 14:41:03.000000000 -0500
+++ glide64/Makefile	2008-05-20 11:01:10.000000000 -0500
@@ -4,7 +4,7 @@
 include ../pre.mk
 
 # set BITS
-ifeq ("$(ARCH)","64BITS")
+ifeq ("$(ARCH_DETECTED)","64BITS")
   BITS=64
   MOPT=-m amd64
 else
@@ -13,15 +13,16 @@
 endif
 
 # local CFLAGS, LIBS, and LDFLAGS
-CFLAGS = -O2 -Wall -g -DGCC -DUSE_GTK $(SDL_CFLAGS) $(GTK_FLAGS) -Iwrapper/ -ffast-math -funroll-loops
-LDFLAGS	= -shared -Wl,-Bsymbolic -lGL -lGLU -L/usr/X11R6/lib $(SDL_LIBS)
+CFLAGS += -DGCC -DUSE_GTK $(SDL_CFLAGS) $(GTK_FLAGS) -Iwrapper/ -ffast-math -funroll-loops
+LDFLAGS	+= -shared -Wl,-Bsymbolic -lGL -lGLU -L${LOCALBASE}/lib $(SDL_LIBS)
+LD = $(CXX)
 
 # set special flags per-system
 ifeq ($(CPU), X86)
-  ifeq ($(ARCH), 64BITS)
-    CFLAGS += -march=athlon64 -fPIC
+  ifeq ($(ARCH_DETECTED), 64BITS)
+    CFLAGS += -fPIC
   else
-    CFLAGS += -march=i686 -mtune=pentium-m -mmmx -msse
+    CFLAGS += 
     ifneq ($(PROFILE), 1)
     ifneq ($(VPDEBUG), 1)
       CFLAGS += -fomit-frame-pointer
@@ -29,9 +30,9 @@
     endif
   endif
   # tweak flags for 32-bit build on 64-bit system
-  ifeq ($(ARCH), 64BITS_32)
-    CFLAGS += -m32
-    LDFLAGS += -m32 -m elf_i386
+  ifeq ($(ARCH_DETECTED), 64BITS_32)
+    CFLAGS += 
+    LDFLAGS += 
   endif
 endif
 ifeq ($(CPU), PPC)
@@ -129,9 +130,7 @@
 cursor.h: compiletex
 	./compiletex cursor.tex cursor.h cursor
 
-compiletex: compiletex.c
-	@rm -f compiletex compiletex.o
-	$(CC) -o compiletex.o -c $<
+compiletex: compiletex.o
 	$(LD) -o $@ compiletex.o
 
 Tmem_nasm.o: Tmem_nasm.asm
