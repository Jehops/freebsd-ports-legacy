--- Makefile	2008-03-29 14:41:03.000000000 -0500
+++ Makefile	2008-05-20 10:56:58.000000000 -0500
@@ -83,7 +83,7 @@
 	r4300/tlb.o
 
 ifeq ($(CPU), X86)
-  ifeq ($(ARCH), 64BITS)
+  ifeq ($(ARCH_DETECTED), 64BITS)
     DYNAREC = x86_64
   else
     DYNAREC = x86
@@ -205,11 +205,11 @@
 all: $(ALL)
 
 mupen64plus: $(OBJECTS)
-	$(CC) $^ $(LDFLAGS) $(LIBS) -Wl,-export-dynamic -lpthread -ldl -o $@
+	$(CC) $^ $(LDFLAGS) $(LIBS) -Wl,-export-dynamic ${PTHREAD_LIBS} -o $@
 	$(STRIP) $@
 
 mupen64plus_dbg: $(OBJECTS) main/main_gtk.o
-	$(CC) $^ $(LDFLAGS) $(LIBS) -Wl,-export-dynamic -lpthread -ldl -o $@
+	$(CC) $^ $(LDFLAGS) $(LIBS) -Wl,-export-dynamic ${PTHREAD_LIBS} -o $@
 
 install:
 	./install.sh $(PREFIX)
