#!/bin/sh

# $FreeBSD$

# PROVIDE: sensor_agent
# REQUIRE: DAEMON
# KEYWORD: shutdown

# Add the following lines to /etc/rc.conf to enable sensor_agent:
# sensor_agent_enable (bool):	Set to YES to enable sensor_agent
# 				Default: NO
# sensor_agent_flags (str):     Extra flags passed to sensor_agent
#                               Default: -D
# sensor_agent_conf (str):	Sensor_agent configuration file
#				Default: %%PREFIX%%/etc/sensor_agent.conf
#

. %%RC_SUBR%%

name="sensor_agent"
rcvar=`set_rcvar`
command="%%PREFIX%%/bin/%%SGUILDIR%%/sensor_agent.tcl"
procname="%%PREFIX%%/bin/tclsh8.4"
pidfile="/var/run/${name}.pid"
check_pidfile="${pidfile} ${procname} /bin/sh"

[ -z "$sensor_agent_enable" ]    && sensor_agent_enable="NO"
[ -z "$sensor_agent_conf" ]      && sensor_agent_conf="%%PREFIX%%/etc/sensor_agent.conf"
[ -z "$sensor_agent_flags" ]     && sensor_agent_flags="-D"

[ -n "$sensor_agent_conf" ]      && sensor_agent_flags="$sensor_agent_flags -c $sensor_agent_conf"

load_rc_config $name
run_rc_command "$1"
