#!/bin/sh

# $FreeBSD$

# PROVIDE: sguild
# REQUIRE: DAEMON
# KEYWORD: shutdown

# Add the following lines to /etc/rc.conf to enable sguild:
# sguild_enable (bool):		Set to YES to enable sguild
# 				Default: NO
# sguild_flags (str):		Extra flags passed to sguild
#				Default: -D
# sguild_conf (str):		Sguild configuration file
#				Default: %%PREFIX%%/etc/%%SGUILDIR%%/sguild.conf

. %%RC_SUBR%%

name="sguild"
rcvar=`set_rcvar`

command="%%PREFIX%%/bin/${name}"
procname="%%TCLSH%%"
check_process="${procname}"
sguild_user="sguil"
pid="/var/run/%%SGUILDIR%%/${name}.pid"

sguild_enable=${sguild_enable-NO}
sguild_conf=${sguild_conf-%%PREFIX%%/etc/%%SGUILDIR%%/sguild.conf}
sguild_flags=${sguild_flags--D -P ${pid}}
[ -n "$sguild_conf" ] && sguild_flags="$sguild_flags -c $sguild_conf"

load_rc_config ${name}
run_rc_command "$1"
