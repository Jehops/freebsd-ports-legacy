--- configure.orig	Tue Mar  1 03:22:02 2005
+++ configure	Fri Apr 22 19:13:43 2005
@@ -21084,8 +21084,12 @@
 
 if test "$doauthuserdb" = "no"
 then
+	HAVE_USERDB_TRUE='#'
+	HAVE_USERDB_FALSE=''
 	AUTHUSERDB=""
 else
+	HAVE_USERDB_TRUE=''
+	HAVE_USERDB_FALSE='#'
 	AUTHUSERDB="authuserdb"
 	LIBAUTHUSERDB="libauthuserdb.la"
 
@@ -22778,7 +22782,21 @@
 
 
 
+if test "${with_base+set}" = set; then
+  withval="$with_base"
+  dobase="$withval"
+else
+  dobase="yes"
+fi;
 
+if test "$dobase" = "no"; then
+  HAVE_BASE_TRUE='#'
+  HAVE_BASE_FALSE=''
+else
+  HAVE_BASE_TRUE=''
+  HAVE_BASE_FALSE='#'
+fi
+  
 
 
 # Check whether --with-authpwd or --without-authpwd was given.
@@ -24111,9 +24129,9 @@
 if test "$doauthmysql" = ""
 then
 	LIBS="$MYSQL_LIBS $LIBS"
-	echo "$as_me:$LINENO: checking for mysql_connect" >&5
-echo $ECHO_N "checking for mysql_connect... $ECHO_C" >&6
-if test "${ac_cv_func_mysql_connect+set}" = set; then
+	echo "$as_me:$LINENO: checking for mysql_real_connect" >&5
+echo $ECHO_N "checking for mysql_real_connect... $ECHO_C" >&6
+if test "${ac_cv_func_mysql_real_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
@@ -24122,12 +24140,12 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-/* Define mysql_connect to an innocuous variant, in case <limits.h> declares mysql_connect.
+/* Define mysql_real_connect to an innocuous variant, in case <limits.h> declares mysql_real_connect.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define mysql_connect innocuous_mysql_connect
+#define mysql_real_connect innocuous_mysql_real_connect
 
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char mysql_connect (); below.
+    which can conflict with char mysql_real_connect (); below.
     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
     <limits.h> exists even on freestanding compilers.  */
 
@@ -24137,7 +24155,7 @@
 # include <assert.h>
 #endif
 
-#undef mysql_connect
+#undef mysql_real_connect
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -24146,14 +24164,14 @@
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char mysql_connect ();
+char mysql_real_connect ();
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_mysql_connect) || defined (__stub___mysql_connect)
+#if defined (__stub_mysql_real_connect) || defined (__stub___mysql_real_connect)
 choke me
 #else
-char (*f) () = mysql_connect;
+char (*f) () = mysql_real_connect;
 #endif
 #ifdef __cplusplus
 }
@@ -24162,7 +24180,7 @@
 int
 main ()
 {
-return f != mysql_connect;
+return f != mysql_real_connect;
   ;
   return 0;
 }
@@ -24189,19 +24207,19 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_mysql_connect=yes
+  ac_cv_func_mysql_real_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_func_mysql_connect=no
+ac_cv_func_mysql_real_connect=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_func_mysql_connect" >&5
-echo "${ECHO_T}$ac_cv_func_mysql_connect" >&6
-if test $ac_cv_func_mysql_connect = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_func_mysql_real_connect" >&5
+echo "${ECHO_T}$ac_cv_func_mysql_real_connect" >&6
+if test $ac_cv_func_mysql_real_connect = yes; then
   doauthmysql="yes"
 
 fi
@@ -24311,9 +24329,9 @@
 else
 	saveLIBS="$LIBS"
 	LIBS="$MYSQL_LIBS $LIBS"
-	echo "$as_me:$LINENO: checking for mysql_connect" >&5
-echo $ECHO_N "checking for mysql_connect... $ECHO_C" >&6
-if test "${ac_cv_func_mysql_connect+set}" = set; then
+	echo "$as_me:$LINENO: checking for mysql_real_connect" >&5
+echo $ECHO_N "checking for mysql_real_connect... $ECHO_C" >&6
+if test "${ac_cv_func_mysql_real_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
@@ -24322,12 +24340,12 @@
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-/* Define mysql_connect to an innocuous variant, in case <limits.h> declares mysql_connect.
+/* Define mysql_real_connect to an innocuous variant, in case <limits.h> declares mysql_real_connect.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define mysql_connect innocuous_mysql_connect
+#define mysql_real_connect innocuous_mysql_real_connect
 
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char mysql_connect (); below.
+    which can conflict with char mysql_real_connect (); below.
     Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
     <limits.h> exists even on freestanding compilers.  */
 
@@ -24337,7 +24355,7 @@
 # include <assert.h>
 #endif
 
-#undef mysql_connect
+#undef mysql_real_connect
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -24346,14 +24364,14 @@
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char mysql_connect ();
+char mysql_real_connect ();
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_mysql_connect) || defined (__stub___mysql_connect)
+#if defined (__stub_mysql_real_connect) || defined (__stub___mysql_real_connect)
 choke me
 #else
-char (*f) () = mysql_connect;
+char (*f) () = mysql_real_connect;
 #endif
 #ifdef __cplusplus
 }
@@ -24362,7 +24380,7 @@
 int
 main ()
 {
-return f != mysql_connect;
+return f != mysql_real_connect;
   ;
   return 0;
 }
@@ -24389,19 +24407,19 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_mysql_connect=yes
+  ac_cv_func_mysql_real_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_func_mysql_connect=no
+ac_cv_func_mysql_real_connect=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_func_mysql_connect" >&5
-echo "${ECHO_T}$ac_cv_func_mysql_connect" >&6
-if test $ac_cv_func_mysql_connect = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_func_mysql_real_connect" >&5
+echo "${ECHO_T}$ac_cv_func_mysql_real_connect" >&6
+if test $ac_cv_func_mysql_real_connect = yes; then
   LIBAUTHMYSQL="libauthmysql.la"
 		HAVE_AUTHMYSQL=1
 else
@@ -26671,6 +26689,10 @@
 s,@subdirs@,$subdirs,;t t
 s,@LIBOBJS@,$LIBOBJS,;t t
 s,@LTLIBOBJS@,$LTLIBOBJS,;t t
+s,@HAVE_BASE_TRUE@,$HAVE_BASE_TRUE,;t t
+s,@HAVE_BASE_FALSE@,$HAVE_BASE_FALSE,;t t
+s,@HAVE_USERDB_TRUE@,$HAVE_USERDB_TRUE,;t t
+s,@HAVE_USERDB_FALSE@,$HAVE_USERDB_FALSE,;t t
 CEOF
 
 _ACEOF
