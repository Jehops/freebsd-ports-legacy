#!/bin/sh
ex=0
if ! id -u drweb > /dev/null 2>&1; then
  echo "You need an account \"drweb\" to install this package."
  echo "Please add it by hand (try \"man vipw\") and try again."
  echo ""
  echo "An example /etc/master.passwd entry is:"
  echo "drweb:*:426:426::0:0:Dr.Web Scanner:/nonexistent:/sbin/nologin"
  echo ""
  ex=1
fi
if ! grep -q "^drweb:" /etc/group; then
  echo "You need a group \"drweb\" to install this package."
  echo ""
  echo "An example /etc/group entry is:"
  echo "drweb:*:426:"
  echo ""
  ex=1
fi
if ! grep -q "^!drweb" /etc/syslog.conf; then
  echo "You may also add this lines to your /etc/syslog.conf:"
  echo "*.*             /var/log/drwebd.log"
  echo ""
fi
if crontab -u drweb -l 2>&1 | grep -q "no crontab"; then
  echo "You may also use this crontab entry for \"drweb\" user:"
  echo "SHELL=/bin/sh"
  echo "MAILTO=root"
  echo "0 12 * * * ${PREFIX}/drweb/update/update.pl ${PREFIX}/drweb"
  echo ""
fi
[ "$ex" = "1" ] && exit 1
usrdir=${PREFIX}/drweb
chown -R drweb:drweb $usrdir
exit 0
