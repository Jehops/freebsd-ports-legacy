--- configure.orig	Mon Feb 12 23:11:56 2007
+++ configure	Thu Mar  1 13:00:28 2007
@@ -22426,19 +22426,25 @@
     sendmailver_c=`echo $sendmailver | awk -F. '{printf $3}'`
 
 
+if echo "$sendmailver_a" | egrep -q '^[0-9]+$'; then
 cat >>confdefs.h <<_ACEOF
 #define SENDMAIL_VERSION_A $sendmailver_a
 _ACEOF
+fi
 
 
+if echo "$sendmailver_b" | egrep -q '^[0-9]+$'; then
 cat >>confdefs.h <<_ACEOF
 #define SENDMAIL_VERSION_B $sendmailver_b
 _ACEOF
+fi
 
 
+if echo "$sendmailver_c" | egrep -q '^[0-9]+$'; then
 cat >>confdefs.h <<_ACEOF
 #define SENDMAIL_VERSION_C $sendmailver_c
 _ACEOF
+fi
 
   fi
 fi
@@ -23082,7 +23088,7 @@
     ;;
 freebsd*)
     if test "$have_pthreads" = "yes"; then
-	THREAD_LIBS="-lpthread -lc_r"
+	THREAD_LIBS="%%PTHREAD_LIBS%%"
 	TH_SAFE="-thread-safe"
 
 cat >>confdefs.h <<\_ACEOF
