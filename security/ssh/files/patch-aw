--- login.c.orig	Wed May 12 20:19:26 1999
+++ login.c	Sun Jun  6 01:51:33 1999
@@ -301,12 +301,13 @@
   strncpy(u.ut_user, user, sizeof(u.ut_user));
 #endif /* HAVE_NAME_IN_UTMP */
 #ifdef HAVE_HOST_IN_UTMP
-  strncpy(u.ut_host, host, sizeof(u.ut_host));
 #ifdef __FreeBSD__
+  trimdomain(host, sizeof u.ut_host);
   if (strlen(host) > sizeof(u.ut_host)) {
     strncpy(u.ut_host, get_remote_ipaddr(), sizeof(u.ut_host));
-  }
+  } else
 #endif /* __FreeBSD__ */
+  strncpy(u.ut_host, host, sizeof(u.ut_host));
 #endif /* HAVE_HOST_IN_UTMP */
 #ifdef HAVE_ADDR_IN_UTMP
   if (addr)
