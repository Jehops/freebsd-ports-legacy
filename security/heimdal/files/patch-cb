--- configure.in.orig	Mon Feb  5 01:58:05 2001
+++ configure.in	Mon May 21 08:12:54 2001
@@ -83,6 +83,10 @@
 	LIB_openldap="-R $openldap_libdir $LIB_openldap"
 fi
 
+dnl Kerberos 4 libraries are quite likely to need to link against
+dnl libcom_err. 
+AC_CHECK_LIB(com_err, init_error_table)
+
 AC_TEST_PACKAGE_NEW(krb4,[#include <krb.h>],-lkrb,-ldes,/usr/athena, KRB4)
 
 LIB_kdb=
@@ -566,7 +570,10 @@
 "$ac_cv_func_SHA1_Init" = "yes" -a \
 "$ac_cv_func_RC4" = "yes"; then
   DIR_des=''
-  LIB_des="-R $krb4_libdir -L$krb4_libdir $ac_cv_funclib_MD4_Init"
+  LIB_des="$ac_cv_funclib_MD4_Init"
+  if test "$krb4_libdir"; then
+    LIB_des="-R $krb4_libdir -L$krb4_libdir $LIB_des"
+  fi
   LIB_des_appl="$LIB_des"
 else
   DIR_des='des'
