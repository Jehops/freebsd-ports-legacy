--- Makefile.orig	Fri Apr 13 12:41:22 2001
+++ Makefile	Mon Dec 24 17:17:48 2001
@@ -3,7 +3,7 @@
 #
 # $Id: Makefile,v 1.2 2001/04/13 17:41:21 ndwinton Exp $
 
-OS = 
+OS = freebsd
 
 ###
 ### Locations of tools, libraries and installation directories.
@@ -12,19 +12,16 @@
 
 # Chose your C compiler
 
-CC_$(OS) = gcc
-
 CC_win32 = c:/gcc-2.95.2/bin/gcc
 CC_linux = gcc -pthread
 CC_solaris = gcc
 CC_freebsd = gcc -pthread
 CC_tru64 = cc
-CC = $(CC_$(OS))
 
 # Optimise/debug compilation
 
 #OPTIM = -Wall -g
-OPTIM = -O3
+OPTIM = 
 
 # Location of gmp include and library
 #
@@ -36,19 +33,19 @@
 
 # Location of Blowfish include and library
 
-BFINC = -I../blowfish-0.9.5a
-BFLIB = ../blowfish-0.9.5a/libblowfish.a
+BFINC = -I${OPENSSLINC} -I${OPENSSLINC}/openssl
+BFLIB = ${OPENSSLLIB}/libcrypto.a
 
 # Location of zlib include and library
 
-ZINC = -I../zlib-1.1.3
-ZLIB = ../zlib-1.1.3/libz.a
+ZINC = 
+ZLIB = -lz
 
 # Location of bzlib include and library
 # Set these empty if you don't want bzib2 support
 
-BZINC = -I../bzip2-1.0.1
-BZLIB = ../bzip2-1.0.1/libbz2.a
+BZINC = -I${LOCALBASE}/include
+BZLIB = -L${LOCALBASE}/lib -lbz2
 
 #
 # Tools needed for Perl "POD"-format documentation conversion.
@@ -133,7 +130,8 @@
 #### You REALLY shouldn't have to modify anything beyond here ...
 ####
 
-CFLAGS = $(OPTIM) $(DEFINES) -I. $(GMPINC) $(BFINC) $(ZINC) $(BZINC)
+CFLAGS ?= -O3
+CFLAGS += ${PTHREAD_LIBS} ${PTHREAD_CFLAGS} $(OPTIM) $(DEFINES) -I. $(GMPINC) $(BFINC) $(ZINC) $(BZINC)
 
 LIBS = $(GMPLIB) $(BFLIB) $(ZLIB) $(BZLIB) $(OSLIBS)
 
