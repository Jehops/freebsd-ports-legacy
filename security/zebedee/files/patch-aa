--- Makefile.orig	Sun Aug 13 11:06:36 2000
+++ Makefile	Thu Jan 25 04:08:11 2001
@@ -3,7 +3,7 @@
 #
 # $Id: Makefile,v 1.13 2000/06/05 21:34:27 nwinton Exp nwinton $
 
-OS =
+OS = freebsd
 
 ###
 ### Locations of tools, libraries and installation directories.
@@ -17,12 +17,13 @@
 CC_win32 = gcc -mno-cygwin
 CC_linux = gcc
 CC_solaris = gcc
+CC_freebsd = cc
 CC = $(CC_$(OS))
 
 # Optimise/debug compilation
 
 #OPTIM = -Wall -g
-OPTIM = -Wall -O
+OPTIM = -Wall
 
 # Location of gmp include and library
 #
@@ -34,19 +35,19 @@
 
 # Location of Blowfish include and library
 
-BFINC = -I../blowfish
-BFLIB = ../blowfish/libblowfish.a
+BFINC = -I${OPENSSLINC} -I${OPENSSLINC}/openssl
+BFLIB = ${OPENSSLLIB}/libcrypto.a
 
 # Location of zlib include and library
 
-ZINC = -I../zlib-1.1.3
-ZLIB = ../zlib-1.1.3/libz.a
+ZINC =
+ZLIB = -lz
 
 # Location of bzlib include and library
 # Set these empty if you don't want bzib2 support
 
-BZINC = -I../bzip2-0.9.5d
-BZLIB = ../bzip2-0.9.5d/libbz2.a
+BZINC = -I${LOCALBASE}/include
+BZLIB = ${LOCALBASE}/lib/libbz2.a
 
 #
 # Tools needed for Perl "POD"-format documentation conversion.
@@ -94,6 +95,7 @@
 DEFINES_win32 = 				# Win32
 DEFINES_linux = -D_REENTRANT -DHAVE_PTHREADS	# Linux
 DEFINES_solaris = -D_REENTRANT -DHAVE_PTHREADS	# Solaris
+DEFINES_freebsd = -D_REENTRANT			# FreeBSD
 DEFINES = $(DEFINES_$(OS))
 
 # Suffix for executables
@@ -106,6 +108,7 @@
 OSLIBS_win32 = -lwsock32 -lwinmm		# Win32
 OSLIBS_linux = -lpthread			# Linux
 OSLIBS_solaris = -lsocket -lnsl -lthread	# Solaris
+OSLIBS_freebsd = 				# FreeBSD
 OSLIBS = $(OSLIBS_$(OS))
 
 # Supplementary object files (Win32 ONLY)
@@ -120,7 +123,8 @@
 #### You REALLY shouldn't have to modify anything beyond here ...
 ####
 
-CFLAGS = $(OPTIM) $(DEFINES) -I. $(GMPINC) $(BFINC) $(ZINC) $(BZINC)
+CFLAGS ?= -O
+CFLAGS += $(OPTIM) $(DEFINES) -I. $(GMPINC) $(BFINC) $(ZINC) $(BZINC)
 
 LIBS = $(GMPLIB) $(BFLIB) $(ZLIB) $(BZLIB) $(OSLIBS)
 
