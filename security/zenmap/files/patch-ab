--- tcpip.c.orig	Sun Nov 29 10:00:13 1998
+++ tcpip.c	Sun Nov 29 10:00:51 1998
@@ -563,7 +563,7 @@
 if (ifc.ifc_len == 0) 
   fatal("SIOCGIFCONF claims you have no network interfaces!\n");
 #if HAVE_SOCKADDR_SA_LEN
-  len = MAX(sizeof(struct sockaddr), ifr->ifr_addr.sa_len);
+  len = ifr->ifr_addr.sa_len;
 #else
   len = sizeof(SA);
 #endif
@@ -581,6 +581,7 @@
       dev[63] = '\0';
       return 1;
     }
+    len = ifr->ifr_addr.sa_len;
   }
   /* Shucks, we didn't find it ... */
   dev[0] = '\0';

