--- configure.in.orig	Thu Jan 27 00:35:13 2005
+++ configure.in	Tue Feb  1 17:51:25 2005
@@ -43,7 +43,7 @@
 	dnl support before 1.5.
 	boot_mech_target=install-rc-d
 	;;
-freebsd[5-9].*)
+freebsd*)
 	boot_mech_target=install-rc-d
 	;;
 *)
@@ -51,4 +51,5 @@
 	;;
 esac
 
-AC_OUTPUT([Makefile samples/Makefile])
+AC_OUTPUT([Makefile samples/Makefile samples/racoon2.conf])
+AC_OUTPUT([samples/init.d-kinkd samples/init.d-spmd samples/rc.d-kinkd samples/rc.d-spmd])
diff -ur samples-/init.d-kinkd.in samples/init.d-kinkd.in
--- samples-/init.d-kinkd.in	Tue Feb  1 17:18:58 2005
+++ samples/init.d-kinkd.in	Tue Feb  1 17:18:01 2005
@@ -3,8 +3,11 @@
 # kinkd start up script
 #
 
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+
 NAME=kinkd
-DAEMON=/usr/local/racoon2/sbin/$NAME
+DAEMON=@sbindir@/$NAME
 PIDFILE=/var/run/$NAME.pid
 
 test -x $DAEMON || exit 0
diff -ur samples-/init.d-spmd.in samples/init.d-spmd.in
--- samples-/init.d-spmd.in	Tue Feb  1 17:18:58 2005
+++ samples/init.d-spmd.in	Tue Feb  1 17:18:01 2005
@@ -1,7 +1,10 @@
 #! /bin/sh
 
-PATH=/usr/local/racoon2/sbin:/usr/local/racoon2/bin:$PATH
-DAEMON=/usr/local/racoon2/sbin/spmd
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+
+PATH=@sbindir@:@bindir@:$PATH
+DAEMON=@sbindir@/spmd
 DAEMON_OPT=""
 NAME="spmd"
 
diff -ur samples-/rc.d-kinkd.in samples/rc.d-kinkd.in
--- samples/Makefile.in.orig	Wed Jan 26 07:43:52 2005
+++ samples/Makefile.in	Tue Feb  1 17:54:30 2005
@@ -17,8 +17,8 @@
 
 install-rc-d:
 	$(INSTALL) -d $(sysconfdir)/rc.d
-	$(INSTALL) rc.d-kinkd $(sysconfdir)/rc.d/kinkd
-	$(INSTALL) rc.d-spmd $(sysconfdir)/rc.d/spmd
+	$(INSTALL) rc.d-kinkd $(sysconfdir)/rc.d/kinkd.sh
+	$(INSTALL) rc.d-spmd $(sysconfdir)/rc.d/spmd.sh
 
 install-init-d:
 	$(INSTALL) -d $(sysconfdir)/init.d
@@ -32,4 +32,4 @@
 	-rm -f *~
 
 distclean: clean
-	-rm -f Makefile
+	-rm -f Makefile racoon2.conf init.d-kinkd init.d-spmd rc.d-kinkd rc.d-spmd
--- samples/rc.d-spmd.in.orig	Wed Jan 26 07:43:52 2005
+++ samples/rc.d-spmd.in	Tue Feb  1 18:31:31 2005
@@ -3,6 +3,9 @@
 # spmd rc.d script for NetBSD
 #
 
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+
 # PROVIDE: spmd
 # REQUIRE: isdnd ppp
 # BEFORE:  SERVERS
@@ -10,10 +13,10 @@
 . /etc/rc.subr
 
 name="spmd"
-rcvar=$name
-command="/usr/local/racoon2/sbin/${name}"
+rcvar=`set_rcvar`
+command="@sbindir@/${name}"
 pidfile="/var/run/${name}.pid"
-required_files="/usr/local/racoon2/etc/racoon2.conf"
+required_files="@sysconfdir@/racoon2.conf"
 start_precmd="spmd_precmd"
 
 spmd_precmd()
--- samples/rc.d-kinkd.in.orig	Tue Jan 11 02:00:29 2005
+++ samples/rc.d-kinkd.in	Tue Feb  1 18:31:49 2005
@@ -3,6 +3,9 @@
 # kinkd rc.d script for NetBSD
 #
 
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+
 # PROVIDE: kink
 # REQUIRE: isdnd kdc ppp
 # BEFORE:  SERVERS
@@ -11,10 +14,10 @@
 . /etc/rc.subr
 
 name="kinkd"
-rcvar=$name
-command="/usr/local/racoon2/sbin/${name}"
+rcvar=`set_rcvar`
+command="@sbindir@/${name}"
 pidfile="/var/run/${name}.pid"
-required_files="/usr/local/racoon2/etc/racoon2.conf"
+required_files="@sysconfdir@/racoon2.conf"
 
 load_rc_config $name
 run_rc_command "$1"
