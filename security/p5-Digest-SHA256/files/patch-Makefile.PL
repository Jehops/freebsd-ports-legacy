--- Makefile.PL	Mon Mar 12 06:19:07 2001
+++ Makefile.PL	Fri Jan 20 14:23:20 2006
@@ -9,6 +9,10 @@ WriteMakefile(
 );
 
 if (exists($Config{'byteorder'}) and defined($Config{'byteorder'})) {
+  my $bo = $Config{'byteorder'};
+  if (length($bo) == 8 && $Config{use64bitint} && !$Config{use64bitall}) {
+	  $bo =~ s/[5678]//g;
+  }
   if (-e 'endian.h') {
     warn "Warning: overwriting endian.h\n";
   } else {
@@ -24,7 +28,7 @@ if (exists($Config{'byteorder'}) and def
 
 /* Warning! this file is automatically generated; changes WILL disappear */
 
-#define BYTEORDER $Config{'byteorder'}
+#define BYTEORDER $bo
 
 #endif /* ENDIAN_H */
 END_OF_STRING
