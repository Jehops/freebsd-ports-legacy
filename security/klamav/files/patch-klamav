--- src/klamav.cpp	Mon Nov 21 17:21:59 2005
+++ src/klamav.cpp	Thu Dec 15 09:30:42 2005
@@ -47,24 +47,33 @@
 	connect(_tray,SIGNAL(quitSelected()),SLOT(shuttingDown()));
 	
 	KPopupMenu *conf_menu = _tray->contextMenu();
+
+/* -- 
         EnableKlamd = new KAction(i18n("&Enable Auto-Scan"), "klamav", 0,this, SLOT(contextEnable()),actionCollection(),"klamd_enable");
         DisableKlamd = new KAction(i18n("&Disable Auto-Scan"),"klamavbw", 0,this, SLOT(contextDisable()),actionCollection(),"klamd_disable");
-        
+*/        
+
 	EnableFreshklam = new KAction(i18n("&Enable Auto-Updates"), "klamavbwdl", 0,this, SLOT(contextEnableFK()),actionCollection(),"fk_enable");
         DisableFreshklam = new KAction(i18n("&Disable Auto-Updates"),"klamavbw", 0,this, SLOT(contextDisableFK()),actionCollection(),"fk_disable");
 
 	EnableFreshklam->plug(conf_menu);
 	DisableFreshklam->plug(conf_menu);
+
+/* --
 	EnableKlamd->plug(conf_menu);
 	DisableKlamd->plug(conf_menu);
-	
+*/
+
 	QToolTip::add( _tray, "KlamAV - Virus Protection for KDE" );
 	_tray->show();
 	
 	DisableFreshklam->setEnabled(FALSE);
 	EnableFreshklam->setEnabled(TRUE);
+
+/* --
 	DisableKlamd->setEnabled(FALSE);
 	EnableKlamd->setEnabled(TRUE);
+*/
 
         KConfig* config = KGlobal::config();
         config->setGroup("Freshklam");
@@ -81,10 +90,15 @@
 	tab->addTab(klamscan, i18n("&Scan"));
 
 	klamd = new Klamd(this);
+	
+	klamd->hide();
+
+/* --
 	tab->addTab(klamd, i18n("&Auto-Scan"));
 
 	connect(klamd->search_button,SIGNAL(clicked()),SLOT(contextEnable()));
 	connect(klamd->cancel_button,SIGNAL(clicked()),SLOT(contextDisable()));
+*/
 		
 	freshklam = new Freshklam(this);
 	tab->addTab(freshklam, i18n("&Update"));
@@ -105,8 +119,6 @@
 	aboutklamav = new Aboutklamav(this);
 	tab->addTab(aboutklamav, i18n("Abou&t"));
 	
-  
-
 
 	top->addWidget(tab);
 	
@@ -149,6 +161,7 @@
 void  Klamav::shuttingDown(){
 
 	this->topLevelWidget()->hide();
+	this->contextDisableFK();
 
 }
 
