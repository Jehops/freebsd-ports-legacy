--- appl/gssftp/ftpd/ftpcmd.y.ORIG	Wed Feb 28 16:06:45 2001
+++ appl/gssftp/ftpd/ftpcmd.y	Fri Apr 27 10:18:01 2001
@@ -805,11 +805,13 @@
 		 * This is a valid reply in some cases but not in others.
 		 */
 		if (logged_in && $1 && strncmp((char *) $1, "~", 1) == 0) {
-			*(char **)&($$) = *ftpglob((char *) $1);
-			if (globerr != NULL) {
+			char **vv;
+			vv = ftpglob((char *) $1);
+			if (vv == NULL || globerr != NULL) {
 				reply(550, globerr);
 				$$ = NULL;
-			}
+			} else
+				$$ = *vv;
 			free((char *) $1);
 		} else
 			$$ = $1;
