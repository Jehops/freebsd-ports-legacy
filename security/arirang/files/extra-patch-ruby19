--- ariruby.c.orig	2011-07-24 21:50:51.119557755 -0400
+++ ariruby.c	2011-07-24 21:52:04.985558821 -0400
@@ -63,6 +63,7 @@
 
 static int sock;
 int nb = 0;
+void* rb_load_file_return;
 struct sockaddr_in http;
 struct hostent *he;
 char *sendbuf = NULL;
@@ -132,7 +133,7 @@
 ariruby_run(void)
 {
     int status;
-    status = ruby_exec();
+    status = ruby_run_node(rb_load_file_return);
 #ifdef DEBUG
     printf("status  = %d \n", status);
 #endif
