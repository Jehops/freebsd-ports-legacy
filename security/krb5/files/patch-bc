--- appl/bsd/krshd.c~	Thu Jun 29 22:27:05 2000
+++ appl/bsd/krshd.c	Sat Jan  6 12:57:23 2001
@@ -160,6 +160,16 @@
 Key_schedule v4_schedule;
 #endif
 
+#ifdef HAVE_PATHS_H
+#include <paths.h>
+#endif
+
+#if defined(_PATH_NOLOGIN)
+#define NOLOGIN		_PATH_NOLOGIN
+#else
+#define NOLOGIN		"/etc/nologin"
+#endif
+
 #include "defines.h"
 
 #if HAVE_ARPA_NAMESER_H
@@ -1119,7 +1129,7 @@
 	goto signout_please;
     }
     
-    if (pwd->pw_uid && !access("/etc/nologin", F_OK)) {
+    if (pwd->pw_uid && !access(NOLOGIN, F_OK)) {
 	error("Logins currently disabled.\n");
 	goto signout_please;
     }
