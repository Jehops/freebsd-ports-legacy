--- Makefile.orig	Wed Dec  2 16:29:50 1998
+++ Makefile	Sun Feb  6 18:00:15 2000
@@ -3,17 +3,18 @@
 # Copyright (c) 1996-98 by Solar Designer
 #
 
-CPP = gcc
-CC = gcc
-AS = gcc
-LD = gcc
+CC ?= gcc
+CPP = $(CC)
+AS = $(CC)
+LD = $(CC)
 CP = cp
 LN = ln -sf
 RM = rm -f
 SED = sed
 NULL = /dev/null
 CPPFLAGS = -E
-CFLAGS = -c -Wall -O2 -fomit-frame-pointer
+CFLAGS ?= -O2
+CFLAGS += -c -Wall -fomit-frame-pointer
 ASFLAGS = -c
 LDFLAGS = -s
 OPT_NORMAL = -funroll-loops
@@ -89,6 +90,7 @@
 	@echo "freebsd-x86-any-a.out    FreeBSD, x86, a.out binaries"
 	@echo "freebsd-x86-k6-a.out     FreeBSD, AMD K6, a.out binaries"
 	@echo "freebsd-x86-any-elf      FreeBSD, x86, ELF binaries"
+	@echo "freebsd-alpha-any-elf    FreeBSD, Alpha, ELF binaries"
 	@echo "freebsd-x86-mmx-elf      FreeBSD, x86 with MMX, ELF binaries"
 	@echo "freebsd-x86-k6-elf       FreeBSD, AMD K6, ELF binaries"
 	@echo "openbsd-x86-any          OpenBSD, x86"
@@ -173,14 +175,19 @@
 	$(LN) x86-any.h arch.h
 	$(MAKE) $(PROJ) \
 		JOHN_OBJS="$(JOHN_OBJS) x86.o" \
-		CFLAGS="$(CFLAGS) -m486" \
+		CFLAGS="$(CFLAGS)" \
 		ASFLAGS="$(ASFLAGS) -DBSD"
 
+freebsd-alpha-any-elf:
+	$(LN) alpha.h arch.h
+	$(MAKE) $(PROJ) \
+		JOHN_OBJS="$(BITSLICE_OBJS) $(JOHN_OBJS) alpha.o"
+
 freebsd-x86-mmx-elf:
 	$(LN) x86-mmx.h arch.h
 	$(MAKE) $(PROJ) \
 		JOHN_OBJS="$(JOHN_OBJS) x86.o" \
-		CFLAGS="$(CFLAGS) -m486" \
+		CFLAGS="$(CFLAGS)" \
 		ASFLAGS="$(ASFLAGS) -DBSD"
 
 freebsd-x86-k6-elf:
