--- nsock/src/configure.orig	Sat Sep 20 09:07:00 2003
+++ nsock/src/configure	Wed Sep 24 22:05:32 2003
@@ -3169,27 +3169,6 @@
 
 
 
-# Check whether --with-libnbase or --without-libnbase was given.
-if test "${with_libnbase+set}" = set; then
-  withval="$with_libnbase"
-    case "$with_libnbase" in
-  yes)
-    ;;
-  *)
-    NBASEDIR="$with_libnbase"
-    ;;
-  esac
-else
-  NBASEDIR="../../nbase"
-
-fi;
-
-LDFLAGS="$LDFLAGS -L$NBASEDIR"
-CFLAGS="$CFLAGS -I$NBASEDIR"
-LIBS="$LIBS -lnbase"
-
-
-
 # First we test whether they specified openssl desires explicitly
 use_openssl="yes"
 specialssldir=""
@@ -3206,7 +3185,7 @@
     ;;
   *)
     specialssldir="$with_openssl"
-    CXXFLAGS="-I$with_openssl/include $CXXFLAGS"
+    CPPFLAGS="-I$with_openssl/include $CPPFLAGS"
     ;;
   esac
 
@@ -3856,6 +3835,27 @@
 _ACEOF
 
 fi
+
+
+# Check whether --with-libnbase or --without-libnbase was given.
+if test "${with_libnbase+set}" = set; then
+  withval="$with_libnbase"
+    case "$with_libnbase" in
+  yes)
+    ;;
+  *)
+    NBASEDIR="$with_libnbase"
+    ;;
+  esac
+else
+  NBASEDIR="../../nbase"
+
+fi;
+
+LDFLAGS="$LDFLAGS -L$NBASEDIR"
+CFLAGS="$CFLAGS -I$NBASEDIR"
+LIBS="$LIBS -lnbase"
+
 
 
 echo "$as_me:$LINENO: checking struct ip" >&5
