--- configure.orig	Sun Jun 23 17:59:45 1996
+++ configure	Sat Nov  2 23:26:46 1996
@@ -1,7 +1,7 @@
 #! /bin/sh
 
 # Guess values for system-dependent variables and create Makefiles.
-# Generated automatically using autoconf version 2.10 
+# Generated automatically using autoconf version 2.9 
 # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
 #
 # This configure script is free software; the Free Software Foundation
@@ -342,7 +342,7 @@
     verbose=yes ;;
 
   -version | --version | --versio | --versi | --vers)
-    echo "configure generated by autoconf version 2.10"
+    echo "configure generated by autoconf version 2.9"
     exit 0 ;;
 
   -with-* | --with-*)
@@ -1067,7 +1067,7 @@
 V_SIGRET="void"
 
 echo $ac_n "checking for -lXbsd""... $ac_c" 1>&6
-ac_lib_var=`echo Xbsd'_'main | tr './+\055' '__p_'`
+ac_lib_var=`echo Xbsd_main | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1076,13 +1076,15 @@
 cat > conftest.$ac_ext <<EOF
 #line 1078 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+int main();
 
 int main() { return 0; }
 int t() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:1086: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1101,18 +1103,16 @@
 fi
 
 echo $ac_n "checking for -lsocket""... $ac_c" 1>&6
-ac_lib_var=`echo socket'_'poll | tr './+\055' '__p_'`
+ac_lib_var=`echo socket_poll | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1112 "configure"
+#line 1114 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
 char poll();
 
 int main() { return 0; }
@@ -1139,7 +1139,7 @@
 fi
 
 echo $ac_n "checking for -lnsl""... $ac_c" 1>&6
-ac_lib_var=`echo nsl'_'gethostbyname | tr './+\055' '__p_'`
+ac_lib_var=`echo nsl_gethostbyname | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1149,8 +1149,6 @@
 #line 1150 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
 char gethostbyname();
 
 int main() { return 0; }
@@ -1158,7 +1156,7 @@
 gethostbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:1162: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1160: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1177,18 +1175,16 @@
 fi
 
 echo $ac_n "checking for -ldnet_stub""... $ac_c" 1>&6
-ac_lib_var=`echo dnet_stub'_'getnodebyname | tr './+\055' '__p_'`
+ac_lib_var=`echo dnet_stub_getnodebyname | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet_stub  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1188 "configure"
+#line 1186 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
 char getnodebyname();
 
 int main() { return 0; }
@@ -1196,7 +1192,7 @@
 getnodebyname()
 ; return 0; }
 EOF
-if { (eval echo configure:1200: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1196: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1304,12 +1300,12 @@
 echo "checking for X11 header files"
 if test "$x_includes" = NONE ; then
 	cat > conftest.$ac_ext <<EOF
-#line 1308 "configure"
+#line 1304 "configure"
 #include "confdefs.h"
 #include <X11/Intrinsic.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1313: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1309: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1341,18 +1337,16 @@
 echo "checking for X11 library archive"
 if test "$x_libraries" = NONE ; then
 	echo $ac_n "checking for -lX11""... $ac_c" 1>&6
-ac_lib_var=`echo X11'_'XOpenDisplay | tr './+\055' '__p_'`
+ac_lib_var=`echo X11_XOpenDisplay | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lX11  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1352 "configure"
+#line 1348 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
 char XOpenDisplay();
 
 int main() { return 0; }
@@ -1360,7 +1354,7 @@
 XOpenDisplay()
 ; return 0; }
 EOF
-if { (eval echo configure:1364: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1358: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1398,18 +1392,16 @@
 if test -n "$V_SHM" ; then
 	if test -z "$x_libraries" ; then
 		echo $ac_n "checking for -lXext""... $ac_c" 1>&6
-ac_lib_var=`echo Xext'_'XShmAttach | tr './+\055' '__p_'`
+ac_lib_var=`echo Xext_XShmAttach | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lXext -lX11 $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1409 "configure"
+#line 1403 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
 char XShmAttach();
 
 int main() { return 0; }
@@ -1417,7 +1409,7 @@
 XShmAttach()
 ; return 0; }
 EOF
-if { (eval echo configure:1421: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1413: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1468,6 +1460,7 @@
   d=""
 fi
 
+tclposs="tcl7.5 tcl75 tcl"
 if test "$d" != "" ; then 
 	if test ! -d $d ; then 
 		echo "'$d' is not a directory"
@@ -1478,18 +1471,18 @@
 		echo "can't find tcl.h in $d/include"
 		exit 1
 	fi
-	places="$d/lib/libtcl7.5.so \
-		$d/lib/libtcl7.5.a \
-		$d/lib/libtcl.so \
-		$d/lib/libtcl.a"
 	V_LIB_TCL=FAIL
-	for dir in $places; do
-		if test -r $dir ; then
-			V_LIB_TCL=$dir
+	for p in $tclposs; do
+		if test "`echo $d/lib/lib$p.so*`" != "$d/lib/lib$p.so*" ; then
+			V_LIB_TCL="-L$d/lib -l$p"
+			break
+		fi
+		if test -r $d/lib/lib$p.a ; then
+			V_LIB_TCL="-L$d/lib -l$p"
 			break
 		fi
 	done
-	if test $V_LIB_TCL = FAIL ; then
+	if test "$V_LIB_TCL" = FAIL ; then
 		echo "can't find libtcl.a in $d/lib"
 		exit 1
 	fi
@@ -1508,12 +1501,12 @@
 	fi
 else
 	cat > conftest.$ac_ext <<EOF
-#line 1512 "configure"
+#line 1505 "configure"
 #include "confdefs.h"
 #include <tcl.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1517: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1510: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1547,22 +1540,24 @@
 		fi
 	fi
 	echo $ac_n "checking for -ltcl7.5""... $ac_c" 1>&6
-ac_lib_var=`echo tcl7.5'_'main | tr './+\055' '__p_'`
+ac_lib_var=`echo tcl7.5_main | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-ltcl7.5  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1558 "configure"
+#line 1551 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+int main();
 
 int main() { return 0; }
 int t() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:1566: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1594,12 +1589,17 @@
 			/import/tcl/lib/tcl7.5 \
 			"
 		for dir in $places; do
-			if test -r $dir/libtcl7.5.so -o -r $dir/libtcl7.5.a; then
-				V_LIB_TCL="-L$dir -ltcl7.5"
-				break
-			fi
-			if test -r $dir/libtcl.so -o -r $dir/libtcl.a; then
-				V_LIB_TCL="-L$dir -ltcl"
+			for p in $tclposs; do
+				if test "`echo $dir/lib$p.so*`" != "$dir/lib$p.so*" ; then
+					V_LIB_TCL="-L$dir -l$p"
+					break
+				fi
+				if test -r $dir/lib$p.a ; then
+					V_LIB_TCL="-L$dir -l$p"
+					break
+				fi
+			done
+			if test "$V_LIB_TCL" != FAIL; then
 				break
 			fi
 		done
@@ -1651,6 +1651,7 @@
   d=""
 fi
 
+tkposs="tk4.1 tk41 tk"
 if test "$d" != "" ; then 
 	if test ! -d $d ; then 
 		echo "'$d' is not a directory"
@@ -1661,18 +1662,18 @@
 		echo "can't find tk.h in $d/include"
 		exit 1
 	fi
-	places="$d/lib/libtk4.1.so \
-		$d/lib/libtk4.1.a \
-		$d/lib/libtk.so \
-		$d/lib/libtk.a"
 	V_LIB_TK=FAIL
-	for dir in $places; do
-		if test -r $dir ; then
-			V_LIB_TK=$dir
+	for p in $tkposs; do
+		if test "`echo $d/lib/lib$p.so*`" != "$d/lib/lib$p.so*" ; then
+			V_LIB_TK="-L$d/lib -l$p"
+			break
+		fi
+		if test -r $d/lib/lib$p.a ; then
+			V_LIB_TK="-L$d/lib -l$p"
 			break
 		fi
 	done
-	if test $V_LIB_TK = FAIL ; then
+	if test "$V_LIB_TK" = FAIL ; then
 		echo "can't find libtk.a in $d/lib"
 		exit 1
 	fi
@@ -1691,12 +1692,12 @@
 	fi
 else
 	cat > conftest.$ac_ext <<EOF
-#line 1695 "configure"
+#line 1696 "configure"
 #include "confdefs.h"
 #include <tk.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1700: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1701: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -1734,22 +1735,24 @@
 		fi
 	fi
 	echo $ac_n "checking for -ltk4.1""... $ac_c" 1>&6
-ac_lib_var=`echo tk4.1'_'main | tr './+\055' '__p_'`
+ac_lib_var=`echo tk4.1_main | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-ltk4.1  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 1745 "configure"
+#line 1746 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+int main();
 
 int main() { return 0; }
 int t() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:1753: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:1756: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -1780,12 +1783,17 @@
 			$prefix/lib \
 			$x_libraries"
 		for dir in $places; do
-			if test -r $dir/libtk4.1.so -o -r $dir/libtk4.1.a; then
-				V_LIB_TK="-L$dir -ltk4.1"
-				break
-			fi
-			if test -r $dir/libtk.so -o -r $dir/libtk.a; then
-				V_LIB_TK="-L$dir -ltk"
+			for p in $tkposs; do
+				if test "`echo $dir/lib$p.so*`" != "$dir/lib$p.so*" ; then
+					V_LIB_TK="-L$dir -l$p"
+					break
+				fi
+				if test -r $dir/lib$p.a ; then
+					V_LIB_TK="-L$dir -l$p"
+					break
+				fi
+			done
+			if test "$V_LIB_TK" != FAIL; then
 				break
 			fi
 		done
@@ -2074,6 +2082,10 @@
 	V_TARCMD="tar -h -c -f"
 	V_LIB="$V_LIB -L/usr/local/lib"
 	;;
+*-*-freebsd*)
+	# The static tk library isn't always installed
+	V_STATIC=""
+	;;
 *-*-hpux*)
 	V_CCOPT="-O"
 	;;
@@ -2132,18 +2144,16 @@
 		;;
 	*-*-linux*)
 		echo $ac_n "checking for -ldl""... $ac_c" 1>&6
-ac_lib_var=`echo dl'_'dlopen | tr './+\055' '__p_'`
+ac_lib_var=`echo dl_dlopen | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2143 "configure"
+#line 2155 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
 char dlopen();
 
 int main() { return 0; }
@@ -2151,7 +2161,7 @@
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:2155: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:2165: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2177,22 +2187,24 @@
 	esac
 	if test ! -z "$V_LIB_DL" ; then
 		echo $ac_n "checking for -l$V_LIB_DL""... $ac_c" 1>&6
-ac_lib_var=`echo $V_LIB_DL'_'main | tr './+\055' '__p_'`
+ac_lib_var=`echo $V_LIB_DL_main | tr '.-/+' '___p'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-l$V_LIB_DL $V_STATIC $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2188 "configure"
+#line 2198 "configure"
 #include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+int main();
 
 int main() { return 0; }
 int t() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:2196: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+if { (eval echo configure:2208: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -2350,7 +2362,7 @@
     echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
     exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
-    echo "$CONFIG_STATUS generated by autoconf version 2.10"
+    echo "$CONFIG_STATUS generated by autoconf version 2.9"
     exit 0 ;;
   -help | --help | --hel | --he | --h)
     echo "\$ac_cs_usage"; exit 0 ;;
