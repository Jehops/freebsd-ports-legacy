--- configure.orig	Tue Dec 19 16:40:13 2000
+++ configure	Tue Dec 19 16:49:08 2000
@@ -3803,7 +3803,7 @@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsmpeg  $LIBS"
+LIBS="-lsmpeg $SDL_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 3809 "configure"
 #include "confdefs.h"
@@ -3833,7 +3833,7 @@
 #define $ac_tr_lib 1
 EOF
 
-  LIBS="-lsmpeg $LIBS"
+  LIBS="-lsmpeg $SDL_LIBS $LIBS"
 
 else
   echo "$ac_t""no" 1>&6
@@ -3848,7 +3848,7 @@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lsmpeg  $LIBS"
+LIBS="-lsmpeg $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 3854 "configure"
 #include "confdefs.h"
@@ -3919,7 +3919,7 @@
 rm -f conftest*
 echo "$ac_t""$opengl" 1>&6
 
-if test x$opengl = xyes; then
+if test x$opengl = x"Manually disabled ;)"; then
 	OPENGL=OpenGL
 	CFLAGS="$CFLAGS -DHAVE_OPENGL"
 	GL_LIBS="$X_PRELIBS -lGL -lGLU -lICE -lSM $X_LIBS"
@@ -3974,8 +3974,8 @@
 { echo "configure: error: **** Cannot find stat.h ****" 1>&2; exit 1; }
 fi
 
-ac_safe=`echo "sys/dir.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for sys/dir.h""... $ac_c" 1>&6
+ac_safe=`echo "dirent.h" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for dirent.h""... $ac_c" 1>&6
 echo "configure:3980: checking for sys/dir.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3983,7 +3983,7 @@
   cat > conftest.$ac_ext <<EOF
 #line 3985 "configure"
 #include "confdefs.h"
-#include <sys/dir.h>
+#include <dirent.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
 { (eval echo configure:3990: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
@@ -4005,7 +4005,7 @@
   :
 else
   echo "$ac_t""no" 1>&6
-{ echo "configure: error: **** Cannot find dir.h ****" 1>&2; exit 1; }
+{ echo "configure: error: **** Cannot find dirent.h ****" 1>&2; exit 1; }
 fi
 
 
@@ -5915,7 +5915,7 @@
 	< $srcdir/po/POTFILES.in > po/POTFILES
   
 
-CFLAGS="$CFLAGS `gtk-config --cflags`"
+CFLAGS="$CFLAGS `$GTK_CONFIG --cflags`"
 
 
 CODEC_PLUGINS_DIR=Codecs
