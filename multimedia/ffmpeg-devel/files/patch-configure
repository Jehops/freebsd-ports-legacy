--- configure.orig	2011-03-21 19:36:45.000000000 +0100
+++ configure	2011-03-22 08:01:47.676984034 +0100
@@ -1629,7 +1629,7 @@
 nm_opts='-g'
 
 # machine
-arch_default=$(uname -m)
+arch_default=$(uname -p)
 cpu="generic"
 
 # OS
@@ -1675,7 +1675,7 @@
 
 CC_O='-o $@'
 
-host_cflags='-D_ISOC99_SOURCE -D_POSIX_C_SOURCE=200112 -O3 -g -Wall'
+host_cflags='-D_ISOC99_SOURCE -O3 -g -Wall'
 host_libs='-lm'
 
 target_path='$(CURDIR)'
@@ -2323,7 +2323,7 @@
     die "C compiler test failed."
 fi
 
-add_cppflags -D_ISOC99_SOURCE -D_POSIX_C_SOURCE=200112
+add_cppflags -D_ISOC99_SOURCE
 check_cflags -std=c99
 check_cc -D_FILE_OFFSET_BITS=64 <<EOF && add_cppflags -D_FILE_OFFSET_BITS=64
 #include <stdlib.h>
@@ -2917,9 +2917,9 @@
 
 texi2html -version > /dev/null 2>&1 && enable texi2html || disable texi2html
 
-check_header linux/fb.h
-check_header linux/videodev.h
-check_header linux/videodev2.h
+#check_header linux/fb.h
+#check_header linux/videodev.h
+#check_header linux/videodev2.h
 check_header sys/videoio.h
 
 check_func_headers "windows.h vfw.h" capCreateCaptureWindow "$vfwcap_indev_extralibs"
@@ -3242,7 +3242,7 @@
 SRC_PATH_BARE=$source_path
 BUILD_ROOT="$PWD"
 CC_IDENT=$cc_ident
-ARCH=$arch
+FFMPEG_ARCH=$arch
 CC=$cc
 AS=$as
 LD=$ld
