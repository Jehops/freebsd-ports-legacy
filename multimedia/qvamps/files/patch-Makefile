--- Makefile.orig	Sat Dec 17 17:15:24 2005
+++ Makefile	Thu Jan  5 17:55:35 2006
@@ -15,13 +15,10 @@
 INC     = -I $(shell \
 	    perl -e 'use Config; print "$$Config{archlibexp}/CORE\n";')
 ARCH    = $(shell perl -e 'use Config; print "$$Config{archname}\n";')
-CFLAGS  = -fpic -pipe -O2 -fomit-frame-pointer $(INC) -Wall                \
-            -Wno-strict-aliasing -Wno-unused-function -Wno-unused-variable \
+CFLAGS  += $(INC) \
             $(shell perl -e 'use Config; print "$$Config{ccflags}\n";')
-STRIP   = strip
 PUICFL  = -p 2
 INSTALL = install
-PREFIX  = /usr/local
 
 
 all:		LibDvdRead.so DesignerMimeSourceFactory_qvamps.pm xx.qm
@@ -29,14 +26,14 @@
 
 # LibDvdRead
 ifo_read.i:	ifo_read.c
-		$(CC) -E -P $< > $@
+		$(CC) $(CFLAGS) -E -P $< > $@
 
 libdvdread_wrap.c: \
 		  libdvdread.i ifo_read.i ignores.i
 		swig -perl -Wall -nodefault $<
 
 LibDvdRead.so:	libdvdread_wrap.o
-		$(CC) -shared -o $@ $< -ldvdread
+		$(CC) $(LDFLAGS) -shared -o $@ $< -ldvdread
 		$(STRIP) $@
 
 # .pm from .ui.pm
