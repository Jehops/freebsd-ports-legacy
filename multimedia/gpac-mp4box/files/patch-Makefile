--- Makefile.orig	Wed May 24 11:52:53 2006
+++ Makefile	Sun Feb  4 17:09:48 2007
@@ -1,73 +1,16 @@
-include ../../config.mak
-
-vpath %.c $(SRC_PATH)/applications/mp4box
-
-CFLAGS= $(OPTFLAGS) -Wall -I$(SRC_PATH)/include
-
-ifeq ($(DEBUGBUILD), yes)
-CFLAGS+=-g
-LDFLAGS+=-g
-endif
-
-ifeq ($(GPROFBUILD), yes)
-CFLAGS+=-pg
-LDFLAGS+=-pg
-endif
-
-#file format is read-only
-ifeq ($(GPACREADONLY), yes)
-CFLAGS+= -DGPAC_READ_ONLY
-endif
-
-ifeq ($(DISABLE_SVG), yes)
-CFLAGS+=-DGPAC_DISABLE_SVG
-endif
-
-#common obj
-OBJS= main.o filedump.o fileimport.o
-
-LINKFLAGS=-L../../bin/gcc
-ifeq ($(CONFIG_WIN32),yes)
-EXE=.exe
-PROG=MP4Box$(EXE)
-#LINKFLAGS+=-lgpac_static -lz $(EXTRALIBS)
-LINKFLAGS+=-lgpac
-else
-EXT=
-PROG=MP4Box
-#LINKFLAGS+=-lgpac_static $(EXTRALIBS) $(GPAC_SH_FLAGS) -lz
-LINKFLAGS+=-lgpac -lz
-endif
-
-
-SRCS := $(OBJS:.o=.c) 
-
-all: $(PROG)
-
-$(PROG): $(OBJS)
-	$(CC) $(LDFLAGS) -o ../../bin/gcc/$@ $(OBJS) $(LINKFLAGS)
-
-
-%.o: %.c
-	$(CC) $(CFLAGS) -c -o $@ $< 
-
-
-clean: 
-	rm -f $(OBJS) ../../bin/gcc/$(PROG)
-
-dep: depend
-
-depend:
-	rm -f .depend	
-	$(CC) -MM $(CFLAGS) $(SRCS) 1>.depend
-
-distclean: clean
-	rm -f Makefile.bak .depend
-
-
-
-# include dependency files if they exist
-#
-ifneq ($(wildcard .depend),)
-include .depend
-endif
+# FreeBSD Version
+CC?=		gcc
+CFLAGS?=	-Wall -O3 -pipe
+CFLAGS+=	-I/usr/local/include -L/usr/local/lib
+LDFLAGS=	-lpthread -lgpac
+NAME=	mp4box
+OBJ=	filedump.o fileimport.o main.o
+prog:	$(OBJ)
+				$(CC) $(CFLAGS) -o $(NAME) $(OBJ) $(LDFLAGS)
+all:	prog
+%.o:	%.c
+				$(CC) $(CFLAGS) -c $<
+install: prog
+				$(BSD_INSTALL_PROGRAM) -c $(NAME) $(PREFIX)/bin
+clean:
+				rm -f *.o $(NAME) 
