#This perl script will determine the supported CPU features
#of this machine, so the build of the correct decode plugins
#will do automatically

@list=`cat /var/run/dmesg.boot|grep Feat`;
@features=("MMX","SSE","3DNow!","DSP");
open (INC,">$ENV{TEMPDIR}/Makefile.inc");
foreach $feature(@features)
{
  foreach $line(@list)
  {
    if ( $line =~ m/$feature/)
    {
      print INC "WITH_$feature = yes\n";
    }
  }
}
close (INC);
