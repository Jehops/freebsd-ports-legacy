--- configure.orig	2009-02-11 03:35:05.000000000 +0900
+++ configure	2009-02-22 18:37:34.000000000 +0900
@@ -10363,6 +10363,12 @@
       fi
       ;;
 
+     freebsd* | kfreebsd*-gnu | dragonfly*)
+	archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'
+	hardcode_direct=no
+	hardcode_minus_L=yes
+	;;
+
     netbsd* | netbsdelf*-gnu)
       if echo __ELF__ | $CC -E - | $GREP __ELF__ >/dev/null; then
 	archive_cmds='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
@@ -13853,7 +13859,7 @@
                     if test -z "$haveit"; then
                       LIBICONV="${LIBICONV}${LIBICONV:+ }-L$found_dir"
                     fi
-                    if test "$hardcode_minus_L" != no; then
+                    if test "$hardcode_minus_L" = no; then
                                                                                         LIBICONV="${LIBICONV}${LIBICONV:+ }$found_so"
                     else
                                                                                                                                                                                 LIBICONV="${LIBICONV}${LIBICONV:+ }-l$name"
@@ -26519,12 +26525,12 @@
         pkg_cv_CACA_CFLAGS="$CACA_CFLAGS"
     else
         if test -n "$PKG_CONFIG" && \
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"caca >= 0.99beta14 cucul >= 0.99beta14 \"") >&5
-  ($PKG_CONFIG --exists --print-errors "caca >= 0.99beta14 cucul >= 0.99beta14 ") 2>&5
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"caca >= 0.99beta13 cucul >= 0.99beta13 \"") >&5
+  ($PKG_CONFIG --exists --print-errors "caca >= 0.99beta13 cucul >= 0.99beta13 ") 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
-  pkg_cv_CACA_CFLAGS=`$PKG_CONFIG --cflags "caca >= 0.99beta14 cucul >= 0.99beta14 " 2>/dev/null`
+  pkg_cv_CACA_CFLAGS=`$PKG_CONFIG --cflags "caca >= 0.99beta13 cucul >= 0.99beta13 " 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@ -26537,12 +26543,12 @@
         pkg_cv_CACA_LIBS="$CACA_LIBS"
     else
         if test -n "$PKG_CONFIG" && \
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"caca >= 0.99beta14 cucul >= 0.99beta14 \"") >&5
-  ($PKG_CONFIG --exists --print-errors "caca >= 0.99beta14 cucul >= 0.99beta14 ") 2>&5
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"caca >= 0.99beta13 cucul >= 0.99beta13 \"") >&5
+  ($PKG_CONFIG --exists --print-errors "caca >= 0.99beta13 cucul >= 0.99beta13 ") 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
-  pkg_cv_CACA_LIBS=`$PKG_CONFIG --libs "caca >= 0.99beta14 cucul >= 0.99beta14 " 2>/dev/null`
+  pkg_cv_CACA_LIBS=`$PKG_CONFIG --libs "caca >= 0.99beta13 cucul >= 0.99beta13 " 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@ -26561,9 +26567,9 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        CACA_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "caca >= 0.99beta14 cucul >= 0.99beta14 "`
+	        CACA_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "caca >= 0.99beta13 cucul >= 0.99beta13 "`
         else
-	        CACA_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "caca >= 0.99beta14 cucul >= 0.99beta14 "`
+	        CACA_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "caca >= 0.99beta13 cucul >= 0.99beta13 "`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$CACA_PKG_ERRORS" >&5
@@ -29191,6 +29197,8 @@
       fi
        CFLAGS="$ac_save_CFLAGS"
        LIBS="$ac_save_LIBS"
+else
+no_theora=yes
   fi
 
   if test "x$no_libFLAC" = "x" ; then
@@ -42228,7 +42236,7 @@
 
 xinelibdir='${libdir}/xine'
 xinedatadir='${datadir}/xine'
-pkgconfigdir='${libdir}/pkgconfig'
+pkgconfigdir='${prefix}/libdata/pkgconfig'
 
 
 
