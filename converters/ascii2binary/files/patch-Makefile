--- Makefile.orig	Mon Sep 12 19:35:10 2005
+++ Makefile	Mon Jan 30 00:09:11 2006
@@ -1,28 +1,27 @@
-CC=gcc 
-BINDIR=/usr/local/bin
-MANDIR=/usr/local/man/man1
+BINDIR=${PREFIX}/bin
+MANDIR=${PREFIX}/man/man1
 BINS=   ascii2binary binary2ascii
 MANS=   ascii2binary.1 binary2ascii.1
-LOCALEDIR=/usr/local/share/locale
-CFLAGS= -DPACKAGE=\"ascii2binary\" -DLOCALEDIR=\"${LOCALEDIR}\"
+LOCALEDIR=${PREFIX}/share/locale
+CFLAGS= ${CPPFLAGS} -DPACKAGE=\"ascii2binary\" -DLOCALEDIR=\"${LOCALEDIR}\"
 all:	${BINS} mo
 #CFLAGS= -DPACKAGE=\"ascii2binary\" -DLOCALEDIR=\"${LOCALEDIR}\"
 #all:	${BINS}
 
 ascii2binary:	ascii2binary.o GetWord.o MachineInfo.o endian.o exitcodes.o
-		${CC} -o ascii2binary ascii2binary.o GetWord.o MachineInfo.o endian.o exitcodes.o
+		${CC} ${LDFLAGS} -o ascii2binary ascii2binary.o GetWord.o MachineInfo.o endian.o exitcodes.o ${LIBS}
 
 binary2ascii:	binary2ascii.o binfmt.o MachineInfo.o endian.o exitcodes.o
-		${CC} -o binary2ascii binary2ascii.o binfmt.o MachineInfo.o endian.o exitcodes.o
+		${CC} ${LDFLAGS} -o binary2ascii binary2ascii.o binfmt.o MachineInfo.o endian.o exitcodes.o ${LIBS}
 
 MachineInfo.o:	MachineInfo.c
-		${CC} -c MachineInfo.c
+		${CC} -c ${CFLAGS} MachineInfo.c
 
 GetWord.o:	GetWord.c
-		${CC} -c GetWord.c
+		${CC} -c ${CFLAGS} GetWord.c
 
 binfmt.o:	binfmt.c
-		${CC} -c binfmt.c
+		${CC} -c ${CFLAGS} binfmt.c
 
 exitcodes.o:	exitcodes.c
 		${CC} -c ${CFLAGS} exitcodes.c
@@ -33,7 +32,7 @@
 binary2ascii.o:	binary2ascii.c
 		${CC} ${CFLAGS} -c binary2ascii.c
 
-mo:		
+mo:
 		(cd locale/fr/LC_MESSAGES; make ascii2binary.mo)
 
 install:	${BINS} ${MANS}
