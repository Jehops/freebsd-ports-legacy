# $FreeBSD$

PREFIX?=	/usr/local
LOCALBASE?=	${PREFIX}
TEXMFLOCAL?=	${PREFIX}/share/texmf
TEXMFVAR?=	${PREFIX}/share/texmf-var
LATEXINPUTS?=	${TEXMFLOCAL}/tex/latex/base
LATEXBIN?=	${PREFIX}/bin
INDEXSTYLE?=	${TEXMFLOCAL}/makeindex

TEX?=		${LOCALBASE}/bin/tex
MKTEXLSR?=	${LOCALBASE}/bin/mktexlsr
FMTUTIL?=	${LOCALBASE}/bin/fmtutil --byfmt latex
INSTALL_DATA?=	/usr/bin/install -c -m 444

LATEXDIST=	latexbug.tex testpage.tex lablst.tex idx.tex nfssfont.tex \
		small2e.tex sample2e.tex docstrip.tex ltxcheck.tex \
		*.cls *.clo *.sty *.ltx *.fd *.def *.cfg 

all:
	${TEX} -ini unpack.ins
	${TEX} -ini latex.ltx

install:
	${INSTALL_DATA} ${LATEXDIST} ${LATEXINPUTS}
	${INSTALL_DATA} *.ist ${INDEXSTYLE}
	${MKTEXLSR}
	${FMTUTIL}

# for port maintainer
diff:
	/bin/ls ${LATEXDIST} > list.dst
	(cd ${LATEXINPUTS} && /bin/ls ) > list.org
	-diff -u list.org list.dst
	rm list.org list.dst
	-for f in ${LATEXDIST}; do diff -uN ${LATEXINPUTS}/$${f} $${f}; done
