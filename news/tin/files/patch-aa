*** art.c.bak	Fri May 16 21:34:02 1997
--- src/art.c	Wed May 21 10:57:00 1997
***************
*** 599,605 ****
  		*ptr++ = '\0';
  		lineno++;
  
! 		switch (toupper(*ptrline)) {
  			case 'F':	/* From:  mandatory */
  			case 'T':	/* To:    mandatory (mailbox) */
  				if (!got_from) {
--- 599,605 ----
  		*ptr++ = '\0';
  		lineno++;
  
! 		switch (toupper((unsigned char)*ptrline)) {
  			case 'F':	/* From:  mandatory */
  			case 'T':	/* To:    mandatory (mailbox) */
  				if (!got_from) {
*** attrib.c.bak	Sun Apr  6 03:31:06 1997
--- src/attrib.c	Wed May 21 10:54:35 1997
***************
*** 216,222 ****
  			if (line[0] == '#' || line[0] == '\n') {
  				continue;
  			}
! 			switch(tolower(line[0])) {
  			case 'a':
  				MATCH_BOOLEAN (
  					"auto_save=",
--- 216,222 ----
  			if (line[0] == '#' || line[0] == '\n') {
  				continue;
  			}
! 			switch(tolower((unsigned char)line[0])) {
  			case 'a':
  				MATCH_BOOLEAN (
  					"auto_save=",
*** config.c.bak	Sun Mar 23 02:31:24 1997
--- src/config.c	Wed May 21 10:54:35 1997
***************
*** 81,87 ****
  			continue;
  		}
  
! 		switch(tolower(buf[0])) {
  		case 'a':
  			if (match_boolean (buf, "auto_save=", &default_auto_save)) {
  				break;
--- 81,87 ----
  			continue;
  		}
  
! 		switch(tolower((unsigned char)buf[0])) {
  		case 'a':
  			if (match_boolean (buf, "auto_save=", &default_auto_save)) {
  				break;
*** filter.c.bak	Fri Mar 14 21:53:37 1997
--- src/filter.c	Wed May 21 10:54:35 1997
***************
*** 216,222 ****
  		if (*buf == '#' || *buf == '\n') {
  			continue;
  		}
! 		switch(tolower(buf[0])) {
  		case 'c':
  			if (match_integer (buf, "case=", &icase, 1)) {
  				if (arr_ptr && !expired_time) {
--- 216,222 ----
  		if (*buf == '#' || *buf == '\n') {
  			continue;
  		}
! 		switch(tolower((unsigned char)buf[0])) {
  		case 'c':
  			if (match_integer (buf, "case=", &icase, 1)) {
  				if (arr_ptr && !expired_time) {
*** makecfg.c.bak	Fri Mar 14 21:53:41 1997
--- src/makecfg.c	Wed May 21 10:57:00 1997
***************
*** 212,219 ****
  			fprintf (ofp, "\tOPT_");
  			while (*s != '\0') {
  				fprintf (ofp, "%c",
! 					 isalpha (*s) && islower (*s)
! 					 ? toupper (*s)
  					 : *s);
  				s++;
  			}
--- 212,219 ----
  			fprintf (ofp, "\tOPT_");
  			while (*s != '\0') {
  				fprintf (ofp, "%c",
! 					 isalpha ((unsigned char)*s) && islower ((unsigned char)*s)
! 					 ? toupper ((unsigned char)*s)
  					 : *s);
  				s++;
  			}
*** misc.c.bak	Sun May 11 21:52:20 1997
--- src/misc.c	Wed May 21 10:57:00 1997
***************
*** 537,543 ****
  
  #ifdef M_OS2
  	if (*path && path[1] == ':') {
! 		_chdrive (toupper(path[0]) - 'A' + 1);
  	}
  #endif
  
--- 537,543 ----
  
  #ifdef M_OS2
  	if (*path && path[1] == ':') {
! 		_chdrive (toupper((unsigned char)path[0]) - 'A' + 1);
  	}
  #endif
  
*** os_2.c.bak	Fri Mar 14 21:53:45 1997
--- src/os_2.c	Wed May 21 10:54:35 1997
***************
*** 415,422 ****
  	*line = 0;
  	_pw.pw_dir = ++line;
  	if ((_pw.pw_dir[1] == ':') &&
! 	    (tolower (_pw.pw_dir[0]) >= 'c') &&
! 	    (tolower (_pw.pw_dir[0]) <= 'z')) {
  		line += 2;
  	}
  	while ((*line) && (*line != ':')) {
--- 415,422 ----
  	*line = 0;
  	_pw.pw_dir = ++line;
  	if ((_pw.pw_dir[1] == ':') &&
! 	    (tolower ((unsigned char)_pw.pw_dir[0]) >= 'c') &&
! 	    (tolower ((unsigned char)_pw.pw_dir[0]) <= 'z')) {
  		line += 2;
  	}
  	while ((*line) && (*line != ':')) {
*** prompt.c.bak	Sun May 11 21:52:21 1997
--- src/prompt.c	Wed May 21 10:54:35 1997
***************
*** 197,203 ****
  
  	set_alarm_clock_on ();
  
! 	return (tolower (ch) == tolower (iKeyPromptYes)) ? 1 : (ch == ESC) ? -1 : 0;
  }
  
  /*
--- 197,203 ----
  
  	set_alarm_clock_on ();
  
! 	return (tolower ((unsigned char)ch) == tolower ((unsigned char)iKeyPromptYes)) ? 1 : (ch == ESC) ? -1 : 0;
  }
  
  /*
***************
*** 218,224 ****
  	set_alarm_clock_off ();
  	prompt_ch = (default_answer ? iKeyPromptYes : iKeyPromptNo);
  
! 	sprintf(cvalid, "%c%c%c", tolower(iKeyPromptYes), tolower(iKeyPromptNo), ESC);
  
  	MoveCursor (line, 0);
  	CleartoEOLN ();
--- 218,224 ----
  	set_alarm_clock_off ();
  	prompt_ch = (default_answer ? iKeyPromptYes : iKeyPromptNo);
  
! 	sprintf(cvalid, "%c%c%c", tolower((unsigned char)iKeyPromptYes), tolower((unsigned char)iKeyPromptNo), ESC);
  
  	MoveCursor (line, 0);
  	CleartoEOLN ();
***************
*** 231,237 ****
  		if (((ch = (char) ReadCh()) == '\n') || (ch == '\r')) {
  			ch = prompt_ch;
  		}	
! 		ch = tolower(ch);
  	} while (!strchr(cvalid, ch));
  
  	if (line == cLINES) {
--- 231,237 ----
  		if (((ch = (char) ReadCh()) == '\n') || (ch == '\r')) {
  			ch = prompt_ch;
  		}	
! 		ch = tolower((unsigned char)ch);
  	} while (!strchr(cvalid, ch));
  
  	if (line == cLINES) {
***************
*** 249,255 ****
  
  	set_alarm_clock_on ();
  
! 	return (ch == tolower (iKeyPromptYes)) ? 1 : (ch == ESC) ? -1 : 0;
  }
  
  /*
--- 249,255 ----
  
  	set_alarm_clock_on ();
  
! 	return (ch == (char)tolower ((unsigned char)iKeyPromptYes)) ? 1 : (ch == ESC) ? -1 : 0;
  }
  
  /*
*** rfc1522.c.bak	Sun Apr 27 04:06:29 1997
--- src/rfc1522.c	Wed May 21 10:54:36 1997
***************
*** 90,96 ****
  	decode_gt128 = TRUE;
  #endif
  	t = where;
! 	encoding = tolower(encoding);
  	if (encoding == 'q') {		  /* quoted-printable */
  		int x;
  		unsigned hi, lo;
--- 90,96 ----
  	decode_gt128 = TRUE;
  #endif
  	t = where;
! 	encoding = tolower((unsigned char)encoding);
  	if (encoding == 'q') {		  /* quoted-printable */
  		int x;
  		unsigned hi, lo;
***************
*** 214,220 ****
  			*e = 0;
  			if (*c == '?') {
  				c++;
! 				encoding = tolower(*c);
  				if (encoding == 'b')
  					mmdecode((char *) 0, 'b', 0, (char *) 0, (char *) 0);		/* flush */
  				c++;
--- 214,220 ----
  			*e = 0;
  			if (*c == '?') {
  				c++;
! 				encoding = tolower((unsigned char)*c);
  				if (encoding == 'b')
  					mmdecode((char *) 0, 'b', 0, (char *) 0, (char *) 0);		/* flush */
  				c++;
*** string.c.bak	Sat Apr 19 14:12:33 1997
--- src/string.c	Wed May 21 10:54:36 1997
***************
*** 125,131 ****
  	h = haystack;
  	n = needle;
  	while (*haystack) {
! 		if (tolower (*h) == tolower (*n)) {
  			h++;
  			n++;
  			if (!*n)
--- 125,131 ----
  	h = haystack;
  	n = needle;
  	while (*haystack) {
! 		if (tolower ((unsigned char)*h) == tolower ((unsigned char)*n)) {
  			h++;
  			n++;
  			if (!*n)
***************
*** 191,203 ****
  	char *dst)
  {
  	while (*src) {
! #if 0
! 		if (*src && *src & 0x80) {
! 			*dst++ = *src++;
! 			*dst++ = *src;
! 		} else
! #endif
! 		*dst++ = (char)tolower((int)*src);
  		src++;
  	}
  	*dst = '\0';
--- 191,197 ----
  	char *dst)
  {
  	while (*src) {
! 		*dst++ = (char)tolower((unsigned char)*src);
  		src++;
  	}
  	*dst = '\0';
***************
*** 312,318 ****
  
  #ifndef HAVE_STRTOL
  /* fix me - put me in tin.h */
! #define DIGIT(x) (isdigit((unsigned char)x)? ((x)-'0'): (10+tolower(x)-'a'))
  #define MBASE 36
  long
  strtol (
--- 306,312 ----
  
  #ifndef HAVE_STRTOL
  /* fix me - put me in tin.h */
! #define DIGIT(x) (isdigit((unsigned char)x)? ((x)-'0'): (10+tolower((unsigned char)x)-'a'))
  #define MBASE 36
  long
  strtol (
***************
*** 374,380 ****
   */
  
  /*fix me - put me in tin.h */
! #define FOLD_TO_UPPER(a)	(toupper ((int) (a)))
  
  #ifndef HAVE_STRCASECMP
  int
--- 368,374 ----
   */
  
  /*fix me - put me in tin.h */
! #define FOLD_TO_UPPER(a)        (toupper ((unsigned char)(a)))
  
  #ifndef HAVE_STRCASECMP
  int
*** vms.c.bak	Fri Mar 14 21:53:52 1997
--- src/vms.c	Wed May 21 10:54:36 1997
***************
*** 99,112 ****
      if (cc > 0) {
        if (cc > 1 && *(q-1) == 'c' && *(q-2) == 'M') {
  	if (islower((unsigned char)*q))
! 	  *q = toupper(*q);
        } else
  	if (isupper((unsigned char)*q))
! 	  *q = tolower(*q);
      } else
        if (cc == 0)
  	if (islower((unsigned char)*q))
! 	  *q = toupper(*q);
      if (*q == '_' || *q == ' ') {
        *q = ' ';
        cc = 0;
--- 99,112 ----
      if (cc > 0) {
        if (cc > 1 && *(q-1) == 'c' && *(q-2) == 'M') {
  	if (islower((unsigned char)*q))
! 	  *q = toupper((unsigned char)*q);
        } else
  	if (isupper((unsigned char)*q))
! 	  *q = tolower((unsigned char)*q);
      } else
        if (cc == 0)
  	if (islower((unsigned char)*q))
! 	  *q = toupper((unsigned char)*q);
      if (*q == '_' || *q == ' ') {
        *q = ' ';
        cc = 0;
