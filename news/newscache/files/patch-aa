Index: ChangeLog
diff -u ChangeLog:1.18 ChangeLog:1.18.2.1
--- ChangeLog:1.18	Tue Mar 12 12:02:18 2002
+++ ChangeLog	Tue Mar 18 15:00:37 2003
@@ -1,3 +1,8 @@
+2003-03-12  Herbert Straub <h.straub@aon.at>
+	* Bugfix: DATE command returns localtime instead of gmtime. Thanks to
+	Matthias Andree <matthias.andree@gmx.de> (Leafnode maintainer) for
+	reporting this error.
+
 2002-03-12  Herbert Straub <herbert.straub@emb.magwien.gv.at>
 	* Bugfix: stat_articles was useless - see news.info exit
 	message. Now it counts the complete retrieved articles by
Index: Makefile.in
diff -u Makefile.in:1.3 Makefile.in:1.3.2.1
--- Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -95,7 +95,7 @@
 $(ACLOCAL_M4):  configure.in 
 	cd $(srcdir) && $(ACLOCAL)
 
-config.status: $(srcdir)/configure.in $(CONFIG_STATUS_DEPENDENCIES)
+config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
 	$(SHELL) ./config.status --recheck
 $(srcdir)/configure: $(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)
 	cd $(srcdir) && $(AUTOCONF)
@@ -164,7 +164,7 @@
 	dot_seen=no; \
 	rev=''; list='$(SUBDIRS)'; for subdir in $$list; do \
 	  rev="$$subdir $$rev"; \
-	  test "$$subdir" = "." && dot_seen=yes; \
+	  test "$$subdir" != "." || dot_seen=yes; \
 	done; \
 	test "$$dot_seen" = "no" && rev=". $$rev"; \
 	target=`echo $@ | sed s/-recursive//`; \
@@ -206,7 +206,7 @@
 	  awk '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
 	test -z "$(ETAGS_ARGS)config.h.in$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP) -o $$here/TAGS)
+	  || (cd $(srcdir) && etags -o $$here/TAGS $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP))
 
 mostlyclean-tags:
 
Index: aclocal.m4
diff -u aclocal.m4:1.2 aclocal.m4:1.2.2.1
--- aclocal.m4:1.2	Tue Feb 19 22:12:15 2002
+++ aclocal.m4	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-dnl aclocal.m4 generated automatically by aclocal 1.4-p4
+dnl aclocal.m4 generated automatically by aclocal 1.4-p5
 
-dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+dnl Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 dnl This file is free software; the Free Software Foundation
 dnl gives unlimited permission to copy and/or distribute it,
 dnl with or without modifications, as long as this notice is preserved.
@@ -12,7 +12,7 @@
 
 # Like AC_CONFIG_HEADER, but automatically create stamp file.
 
-AC_DEFUN(AM_CONFIG_HEADER,
+AC_DEFUN([AM_CONFIG_HEADER],
 [AC_PREREQ([2.12])
 AC_CONFIG_HEADER([$1])
 dnl When config.status generates a header, we must update the stamp-h file.
@@ -42,7 +42,7 @@
 dnl Usage:
 dnl AM_INIT_AUTOMAKE(package,version, [no-define])
 
-AC_DEFUN(AM_INIT_AUTOMAKE,
+AC_DEFUN([AM_INIT_AUTOMAKE],
 [AC_REQUIRE([AC_PROG_INSTALL])
 PACKAGE=[$1]
 AC_SUBST(PACKAGE)
@@ -70,7 +70,7 @@
 # Check to make sure that the build environment is sane.
 #
 
-AC_DEFUN(AM_SANITY_CHECK,
+AC_DEFUN([AM_SANITY_CHECK],
 [AC_MSG_CHECKING([whether build environment is sane])
 # Just in case
 sleep 1
@@ -111,7 +111,7 @@
 
 dnl AM_MISSING_PROG(NAME, PROGRAM, DIRECTORY)
 dnl The program must properly implement --version.
-AC_DEFUN(AM_MISSING_PROG,
+AC_DEFUN([AM_MISSING_PROG],
 [AC_MSG_CHECKING(for working $2)
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
Index: configure
diff -u configure:1.9 configure:1.9.2.1
--- configure:1.9	Tue Mar 12 12:02:18 2002
+++ configure	Tue Mar 18 15:01:22 2003
@@ -714,7 +714,7 @@
 
 PACKAGE=NewsCache
 
-VERSION=0.99.22
+VERSION=0.99.22p1
 
 if test "`cd $srcdir && pwd`" != "`pwd`" && test -f $srcdir/config.status; then
   { echo "configure: error: source directory already configured; run "make distclean" there first" 1>&2; exit 1; }
Index: configure.in
diff -u configure.in:1.8 configure.in:1.8.2.1
--- configure.in:1.8	Tue Mar 12 12:02:18 2002
+++ configure.in	Tue Mar 18 15:00:37 2003
@@ -5,7 +5,7 @@
 AM_CONFIG_HEADER(config.h)
 
 dnl Initialize automake stuff
-AM_INIT_AUTOMAKE(NewsCache, 0.99.22)
+AM_INIT_AUTOMAKE(NewsCache, 0.99.22p1)
 
 AC_DEFUN(AC_PROG_CXX_EXCEPTIONS,
 [])
Index: NServer-0.9.1/Makefile.in
diff -u NServer-0.9.1/Makefile.in:1.4 NServer-0.9.1/Makefile.in:1.4.2.1
--- NServer-0.9.1/Makefile.in:1.4	Tue Mar 12 09:35:48 2002
+++ NServer-0.9.1/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -193,7 +193,7 @@
 	dot_seen=no; \
 	rev=''; list='$(SUBDIRS)'; for subdir in $$list; do \
 	  rev="$$subdir $$rev"; \
-	  test "$$subdir" = "." && dot_seen=yes; \
+	  test "$$subdir" != "." || dot_seen=yes; \
 	done; \
 	test "$$dot_seen" = "no" && rev=". $$rev"; \
 	target=`echo $@ | sed s/-recursive//`; \
@@ -235,7 +235,7 @@
 	  awk '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
 	test -z "$(ETAGS_ARGS)$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags  $$unique $(LISP) -o $$here/TAGS)
+	  || (cd $(srcdir) && etags -o $$here/TAGS $(ETAGS_ARGS) $$tags  $$unique $(LISP))
 
 mostlyclean-tags:
 
Index: NServer-0.9.1/checks/Makefile.in
diff -u NServer-0.9.1/checks/Makefile.in:1.3 NServer-0.9.1/checks/Makefile.in:1.3.2.1
--- NServer-0.9.1/checks/Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ NServer-0.9.1/checks/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -190,7 +190,7 @@
 	  awk '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
 	test -z "$(ETAGS_ARGS)$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags  $$unique $(LISP) -o $$here/TAGS)
+	  || (cd $(srcdir) && etags -o $$here/TAGS $(ETAGS_ARGS) $$tags  $$unique $(LISP))
 
 mostlyclean-tags:
 
Index: NVClasses-0.9.1/Makefile.in
diff -u NVClasses-0.9.1/Makefile.in:1.3 NVClasses-0.9.1/Makefile.in:1.3.2.1
--- NVClasses-0.9.1/Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ NVClasses-0.9.1/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -168,7 +168,7 @@
 	  awk '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
 	test -z "$(ETAGS_ARGS)$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags  $$unique $(LISP) -o $$here/TAGS)
+	  || (cd $(srcdir) && etags -o $$here/TAGS $(ETAGS_ARGS) $$tags  $$unique $(LISP))
 
 mostlyclean-tags:
 
Index: doc/Makefile.in
diff -u doc/Makefile.in:1.3 doc/Makefile.in:1.3.2.1
--- doc/Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ doc/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
Index: etc/Makefile.in
diff -u etc/Makefile.in:1.3 etc/Makefile.in:1.3.2.1
--- etc/Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ etc/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
Index: man/Makefile.in
diff -u man/Makefile.in:1.3 man/Makefile.in:1.3.2.1
--- man/Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ man/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
Index: md5lib/Makefile.in
diff -u md5lib/Makefile.in:1.3 md5lib/Makefile.in:1.3.2.1
--- md5lib/Makefile.in:1.3	Tue Mar 12 09:35:48 2002
+++ md5lib/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -164,7 +164,7 @@
 	  awk '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
 	test -z "$(ETAGS_ARGS)$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags  $$unique $(LISP) -o $$here/TAGS)
+	  || (cd $(srcdir) && etags -o $$here/TAGS $(ETAGS_ARGS) $$tags  $$unique $(LISP))
 
 mostlyclean-tags:
 
Index: src/Makefile.in
diff -u src/Makefile.in:1.4 src/Makefile.in:1.4.2.1
--- src/Makefile.in:1.4	Tue Mar 12 09:35:48 2002
+++ src/Makefile.in	Tue Mar 18 15:01:22 2003
@@ -1,6 +1,6 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated automatically by automake 1.4-p5 from Makefile.am
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright (C) 1994, 1995-8, 1999, 2001 Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -296,7 +296,7 @@
 	  awk '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
 	test -z "$(ETAGS_ARGS)$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags  $$unique $(LISP) -o $$here/TAGS)
+	  || (cd $(srcdir) && etags -o $$here/TAGS $(ETAGS_ARGS) $$tags  $$unique $(LISP))
 
 mostlyclean-tags:
 
Index: src/NewsCache.cc
diff -u src/NewsCache.cc:1.12 src/NewsCache.cc:1.12.2.1
--- src/NewsCache.cc:1.12	Tue Mar 12 12:02:18 2002
+++ src/NewsCache.cc	Tue Mar 18 15:00:37 2003
@@ -661,8 +661,8 @@
 //     return -1;
 //   }
   time(&conv);
-  if((ltm=localtime(&conv))==NULL) {
-    (*clt->co) << "500 localtime failed\r\n";
+  if((ltm=gmtime(&conv))==NULL) {
+    (*clt->co) << "500 gmtime failed\r\n";
     return -1;
   }
   sprintf(buf,"111 %04d%02d%02d%02d%02d%02d\r\n",
