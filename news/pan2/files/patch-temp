--- pan/articlelist.c	29 Sep 2002 12:46:18 -0000	1.577
+++ pan/articlelist.c	20 Oct 2002 22:19:18 -0000
@@ -3412,9 +3412,6 @@
 	if (fetch_new_on_group_load && !group_is_folder(group))
 		queue_insert_tasks (g_slist_append(NULL,task_headers_new(group,HEADERS_NEW)), 0);
 
-	/* switching done. safe to do another switch */
-	g_static_mutex_unlock (&switch_mutex);
-
 	debug_exit ("set_group_mainthread_end");
 	return 0;
 }
@@ -3475,6 +3472,9 @@
 
 	/* hard work over, pass back to main thread */
 	gui_queue_add (set_group_mainthread_end, argset);
+
+	/* safe to do another switch */
+	g_static_mutex_unlock (&switch_mutex);
 
 	debug_exit ("set_group_worker");
 	return NULL;

