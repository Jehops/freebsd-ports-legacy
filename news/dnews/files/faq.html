<HTML>

<HEAD>

<TITLE>DNEWS FAQ</TITLE>

</HEAD>

<BODY>

<P>
<CENTER><B><FONT SIZE=7 FACE="Algerian">DNEWS FAQ</FONT></B></CENTER>
<P>
<CENTER><I>
<FONT SIZE=7 FACE="Algerian">(F</FONT><FONT SIZE=5 FACE="Arial">requently</FONT>
<FONT SIZE=7 FACE="Algerian">A</FONT><FONT SIZE=5 FACE="Arial">sked</FONT>
<FONT SIZE=7 FACE="Algerian">Q</FONT><FONT SIZE=5 FACE="Arial">uestions</FONT><FONT SIZE=7 FACE="Algerian">)</FONT>
</I></CENTER>
<P>
<h3><a name="Section_1">1.0 General Information</a></h3><ul>
<li><a href="#Sec_1.1">1.1 The FTP site</a>
<li><a href="#Sec_1.2">1.2 Why is a sucking feed so great?</a>
<li><a href="#Sec_1.3">1.3 Where are the log files?</a>
<li><a href="#Sec_1.4">1.4 Where is dnews.conf?</a>
<li><a href="feeds.htm#suck">1.5 Where can I suck news from?</a>
<li><a href="feeds.htm#feed">1.6 Where can I get an IHAVE feed from?</a>
</ul>
<h3><a name="Section_2">2.0 General &quot;How do I&quot; questions.</a></h3><ul>
<li><a href="#Sec_2.1">2.1 How do I limit user access to the server</a>
<li><a href="#Sec_2.2">2.2 How do set my local groups so they won't expire</a>
<li><a href="#Sec_2.3">2.3 Creating local news groups</a>
<li><a href="#Sec_2.4">2.4 Can I restore some news files (*.itm, *.idx) from tape?</a>
<li><a href="#Sec_2.5">2.5 How do I move the spool area to a bigger disk</a>
<li><a href="#Sec_2.6">2.6 How do I make the updates run only at night</a>
<li><a href="#Sec_2.7">2.7 How do I test the server using TELNET</a>
<li><a href="#Sec_2.8">2.8 How do I suck from a two sites at once</a>
<li><a href="#Sec_2.9">2.9 How can I cut out spamming (cross posts)</a>
<li><a href="#Sec_2.10">2.10 How can I make XOVER faster?</a>
<li><a href="#Sec_2.11">2.11 How do I rename a volume on UNIX</a></ul>
<h3><a name="Section_3">3.0 Common Configuration Questions</a></h3><ul>
<li><a href="#Sec_3.1">3.1 How do I setup DNEWS to take in a 'normal' NNTP - IHAVE feed</a>
<li><a href="#Sec_3.2">3.2 How do I setup DNEWS to take an ihave feed from 5 machines but only send back to one.</a>
<li><a href="#Sec_3.3">3.3 How do I setup XMIT to send to other sites</a>
<li><a href="#Sec_3.4">3.4 What files can I copy from an INN or CNEWS system</a>
<li><a href="#Sec_3.5">3.5 How do I setup a news gateway for my LAN</a>
<li><a href="#Sec_3.6">3.6 How do I set my EXCLUDE parameter correctly?</a>
<li><a href="#Sec_3.7">3.7 How do I setup DNEWS for local (intranet) use?</a></ul>
<h3><a name="Section_4">4.0 I did something stupid, can I fix it?</a></h3><ul>
<li><a href="#Sec_4.1">4.1 I deleted some item files by hand, is that ok?</a>
<li><a href="#Sec_4.2">4.2 I deleted the history.dat file, is that ok?</a></ul>
<h3><a name="Section_5">5.0 Errors &amp; Problems</a></h3><ul>
<li><a href="#Sec_5.1">5.1 Large messages &amp; Memory Use.</a>
<li><a href="#Sec_5.2">5.2 I'm not getting any binary groups, why not?</a>
<li><a href="#Sec_5.3">5.3 My news reader says the newsgroups don't exist?</a>
<li><a href="#Sec_5.4">5.4 I don't know if posts are working?</a>
<li><a href="#Sec_5.5">5.5 I'm still not convinced my posts are getting to the other side of the planet?</a>
<li><a href="#Sec_5.6">5.6 I have an old fashioned feed coming in but I'm not getting any items?</a>
<li><a href="#Sec_5.7">5.7 What should I do now that I've deleted history.dat</a>
<li><a href="#Sec_5.8">5.8 Netscape shows items but I can't read them, why?</a>
<li><a href="#Sec_5.9">5.9 Why doesn't the status report match actual diskspace used?</a>
<li><a href="#Sec_1.10">5.10 DNEWS goes very slow when users connect</a>
<li><a href="#Sec_5.11">5.11 My system runs out of memory?</a>
<li><a href="#Sec_5.12">5.12 DNEWS goes very slow</a>
<li><a href="#Sec_5.13">5.13 DNEWS locks up for brief periods (or permanently)</a>
<li><a href="#Sec_5.14">5.14 DNEWS Crashes</a>
<li><a href="#Sec_5.15">5.15 TELLNEWS says Can't BIND?</a>
<li><a href="#Sec_5.16">5.16 TELLNEWS fails or locks ups</a>
<li><a href="#Sec_5.17">5.17 TELLNEWS says remote node is unknown</a>
<li><a href="#Sec_5.18">5.18 TELLNEWS says &quot;Cannot access tellnews.pass&quot;</a>
<li><a href="#Sec_5.19">5.19 I see errors &quot;NNTP, Sorry I can't talk to you&quot; in the log file?</a>
<li><a href="#Sec_5.20">5.20 What does &quot;Transfer permission denied&quot; mean?</a>
<li><a href="#Sec_5.21">5.21 Posts not going upstream, 437 Duplicate article?</a></ul>
<h3><a name="Section_6">6.0 I still can't figure it out, how can I get help?</a></h3><ul>
<li><a href="#Sec_6.1">6.1 DNEWS Mailing List</a>
<li><a href="#Sec_6.2">6.2 To subscribe to the discussion list send to:</a>
<li><a href="#Sec_6.3">6.3 To subscribe to the announcement list</a></ul>
<hr>
<H1>1.0 General Information</H1>

<H2><A NAME="Sec_1.1">1.1 The FTP site</a></H2>

<P>
You can FTP the latest copy of the files from our
main ftp site, their are binaries for common platforms (Windows
NT (intel &amp; Alpha), Linux, Solaris, VAXVMS, ALPHAVMS.
<PRE>
<FONT SIZE=2>ftp ftp.netwinsite.com
cd pub/netwinsite/dnews
binary
get dnews26o.exe  (Windows NT version 2.6o)
</FONT>
</PRE>

<P>
This is a self extracting archive, that means you
just run dnews_nt.exe and it will extract itself , e.g.
<PRE>
<FONT SIZE=2>dnews26o.exe   (extracts the new files to \tmp)
cd \tmp
</FONT><FONT SIZE=2>install.cmd  (or newver.cmd if you already have dnews      installed)
<BR>
</FONT>
</PRE>

<P>
Use the following references to see our web pages
and ftp area.
<PRE>
<FONT SIZE=2>http://netwinsite.com/
ftp://ftp.netwinsite.com/pub/netwinsite/dnews
</FONT>
</PRE>
<p>
<a href="#Section_1">Return to the Index</a>
<p>
<H2><A NAME="Sec_1.2">1.2 Why is a sucking feed so great?</A>
</H2>

<P>
A sucking feed has several advantages, not all obvious.
 
<H3><A NAME="_Toc347985036">Disk space and line usage</A></H3>

<P>
This is the most obvious advantage, you may only
end up getting a couple of hundred groups, possibly saving 80%
of your disk space and 80% of your network bandwidth.  A 64Kbps
line isn't enough to take a full news feed, but with a sucking
feed it is easily enough to give the 'impression' of a full news
feed.

<H3><A NAME="_Toc347985037">More items in 'low use' groups</A>
</H3>

<P>
More items in 'read' groups: As disk space is saved,
it becomes very easy to keep 1 or 2 weeks of news (or more) in
the groups people actually want, most full feed systems can only
store a few days of news in each group.

<H3><A NAME="_Toc347985038">Efficient file IO</A> </H3>

<P>
As items are fetched for one group at a time, most
file IO is to a single open file, this is a lot more efficient
that the standard news system of getting items in a 'random' order.
 This efficiency is more significant on operating systems with
slower file systems, e.g. Windows NT and VMS.

<H3><A NAME="_Toc347985039">Low impact on upstream site</A></H3>

<P>
DNEWS does not use the 'newnews' command which all
news managers hate, it uses low impact commands to find the new
messages and retrieve them without accessing the history database
on the upstream server.  As so much fewer articles are fetched
the overall load is greatly reduced.  The exact load depends on
how many groups are being sucked.

<H3><A NAME="_Toc347985040">Easy configuration on upstream site</A>
</H3>

<P>
On the upstream site, instead of setting up and managing
a feed, something which is difficult to do and tends to require
almost constant maintenance, all that is required is to give your
system simple 'news reader' access.
<p>
<a href="#Section_1">Return to the Index</a>
<p>
<H2><A NAME="Sec_1.3">1.3 Where are the log files?</A></H2>

<P>
Look in dnews.conf for the symbol LOG_DIR, this will
tell you which directory to find them in, there are three files:
<PRE>
<FONT SIZE=2>dnews.log	The main log file
dnews.in	A one line log of each message that came in
dnews.out	A one line log of each item dnews sent out.<BR>
</FONT>
</PRE>

<P>
The file dnews.log contains .in and .out messages
as well.  By default the logging level is set to INFO, you can
set it in dnews.conf to one of,  error,warn,info,debug.  E.g.:
<PRE>
<FONT SIZE=2>loglvl warn</FONT>
</PRE>

<P>
In debug mode all error messages are sent to the
log file, in info mode only error,warn and info messages are printed.
 In warn mode only error and warn messages are sent, and in error
mode only serious errors are printed to the log file.
<p>
Every night, or if the log files get more than DEBUG_ROTATE
lines in them the files are rotated like this:
<PRE>
<FONT SIZE=2>dnews.log -&gt; dnews.log2 -&gt;dnews.log3 -&gt;dnews.log4 -&gt;(deleted)</FONT>
</PRE><p>
<a href="#Section_1">Return to the Index</a>
<p>
<H2><A NAME="Sec_1.4">1.4 Where is dnews.conf?</A></H2>

<P>
This is the main configuration file, and you can't
move it from it's built in directory which is:
<PRE>
<FONT SIZE=2>Windows NT	/winnt35/system32/dnews.conf (system dir)
Unix		/etc/dnews.conf<BR>
</FONT>
</PRE>

<P>
All other configuration files will be in the config
directory defined in dnews.conf
<p>
<a href="#Section_1">Return to the Index</a>
<p>
<hr>
<H1>2.0 General &quot;How do I&quot; questions.</H1>

<H2><A NAME="Sec_2.1">2.1 How do I limit user access to
the server</A></H2>

<P>
You can limit user access to the server by username
and password and by group, to do this you need to edit access.conf.
 This file is both tricky in it's syntax and order sensitive,
but quite powerful.
<P>
Note that the netscape news reader does not currently
implement usernames and passwords so you will need to make your
users use a proper news reader :-)  
<P>
Here is a simple access.conf where you only allow
users in your domain with ip names and you only let them connect
using usernames and passwords:
<PRE>
<FONT SIZE=2># By default don't let anyone even connect
*:::!*
# Let people in my domain connect long enough to send a username/password
pc*.here.edu:read:::!*
# Here are the individual users and their passwords
pc*.here.edu:read,post:joe:joespassword:*
pc*.here.edu:read,post:alice:alicespassword:*
pc*.here.edu:read,post:jack:jackspassword:*
</FONT>
</PRE>

<P>
Here is a second example, where we want to stop joe
from posting to the group local.rules, but he can read it ok still.
<PRE>
<FONT SIZE=2># By default don't let anyone even connect
*:logoff::!*
# Let people in my domain connect long enough to send a username/password
pc*.here.edu:read:::!*
# Here are the individual users and their passwords
pc*.here.edu:read:joe:joespassword:*
pc*.here.edu:read,post:joe:joespassword:*,!local.rules
# And don't let anyone from the finance section even connect
*finance.here.edu:logoff:::*</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.2">2.2 How do set my local groups so
they won't expire</A></H2>

<P>
At the <I><B>end </B></I>of your expire.conf file
add a line like this:
<PRE>
<FONT SIZE=1>upto 1000% groups local.* keep 999 minitems 10000 maxitems 100000
<BR>
</FONT>
</PRE>

<P>
This will keep all items in the local group for 999
days, and even then will keep at least 10000 items but will expire
items if more than 100000 items are in the group.
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.3">2.3 Creating local news groups</A>
</H2>

<P>
If you wish to have local groups on your server,
that are not on the server you 'suck' from, then you should remove
the 'POSTING' flag from the feed to your feeder site (in newsfeeds.conf).
 But only if you can get ihave (or transfer permission) to send
 articles up stream rather than simple 'posting' access.
<P>
You can still have local groups if you can't get
ihave access, it's just not the 'recommended' setup.
<P>
You can add groups with the TELLNEWS NEWGROUP command,
e.g.
<PRE>
<FONT SIZE=2>tellnews newgroup here.chat y myname Local group

here.chat = name of group
y = Normal group (m = moderated)
myname = A record of who created the group (one word)
Local group = description for active.names file. <BR>
</FONT>
</PRE>

<P>
To stop your local group from being sent up stream,
you would change the line in your newsfeeds.conf file:
<PRE>
<FONT SIZE=2>groups *,!here.chat,!here.secret.*</FONT>
</PRE>

<P>
NOTE: KNOWN BUG, with version 2.0 items will still
be sent upstream if  you have left the 'POSTING' keyword in your
feed.  This will probably be fixed in a future version.  (ofcourse
this isn't a major problem unless the items are very secret as
your upstream site will probably just reject them anyway)
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.4">2.4 Can I restore some news files
(*.itm, *.idx) from tape?</A></H2>

<PRE>
<FONT SIZE=2>You have restored part of a database, to merge this new stuff into the indexes use:
</FONT><FONT SIZE=2>tellnews addlost</FONT>
</PRE>

<P>
Which will scan the entire database and rebuild the
history file.  This could take 12 hours or more to run on 4 Gig
of news.
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.5">2.5 How do I move the spool area to
a bigger disk</A></H2>

<P>
First shutdown DNEWS:
<PRE>
<FONT SIZE=2>tellnews exit</FONT>
</PRE>

<P>
Then move the entire SPOOL tree structure from it's
current place to it's new place, for example on NT you might use
file manager to move
<PRE>
<FONT SIZE=2>c:\dnews\spool...		to 	e:\dnews\spool...
</FONT>
</PRE>

<P>
Change the definition of SPOOL in DNEWS.CONF
<PRE>
<FONT SIZE=2>NOTEPAD \winnt35\system32\dnews.conf
spool	e:\dnews\spool
</FONT>
</PRE>

<P>
Restart DNEWS:
<PRE>
<FONT SIZE=2>(NT)	Control Panel, Services, Start
(UNIX)	su root; dnews_start.sh</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.6">2.6 How do I make the updates run
only at night</A></H2>

<P>
Updates for a sucking feed normal run once every
ten minutes, this is controlled in DNEWS.CONF with the command
<PRE>
<FONT SIZE=2>update_at *5 *</FONT>
</PRE>

<P>
This &quot;*5&quot; tells dnews to do an update whenever
the minutes end in a digit '5' and the second &quot;*&quot; tells
it to do updates during any hour.
<P>
To do one update a night at 5 past 2 in the morning
you would use:
<PRE>
<FONT SIZE=2>update_at 5 2</FONT>
</PRE>

<P>
To do updates every 10 minutes from 6p.m. to 8a.m.
you would use:
<PRE>
<FONT SIZE=2>update_at *5 18-8</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.7">2.7 How do I test the server using
TELNET</A></H2>

<P>
NNTP is a text based protocol, this means you can
test it, and even read news without any software, just by using
telnet and typing in commands by hand, this is not a seriously
good way to read news, but it is a very good way to test your
own server or your feeding server:
<PRE>
<FONT SIZE=2>NT	Accessories, Telnet, Connect, Remote Service
	Enter the feeder.site and under PORT type in NNTP
	Under Terminal Preferences turn ECHO on
	Press Control J to end lines instead of ENTER
VMS	$ telnet feeder.site /port=119
UNIX	&gt; telnet feeder.site 119

Type in this sequence of commands to read an article by hand:
	group comp.os.vms	(select a group)
	head			(display the header)
	body			(display the body)
	next			(next item please)
	help			(show valid commands)
	quit			(exit the connection)</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.8">2.8 How do I suck from a two sites
at once</A></H2>

<P>
Use the alternate suck names, NNTP_SUCK2, NNTP_SUCK3,
NNTP_SUCK4 
<P>
Put these in dnews.conf, followed by the list of
news groups that should be sucked from these alternate sites.
 You should use the NNTP_FEEDER variable (suck1) for the largest
number of groups.
<PRE>
<FONT SIZE=2>nntp_feeder news.upstream.site
nntp_suck2 other.news.site chat.local.* 
</FONT>
</PRE>

<P>
Alternatively you can take a feed and suck from another
host at the same time.
<P>
Your list of groups will be based on the NNTP_FEEDER
host, other groups must be added using the tellnews newgroup command.
<P>
To do this just setup the system to suck as usual,
but then add a line to access.conf to allow your secondary feed
to come in, e.g.:
<PRE>
<FONT SIZE=2>other.feed.machine:ihave:::*
</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.9">2.9 How can I cut out spamming (cross
posts)</A></H2>

<P>
Spamming, is where people cross post to hundreds
of news groups with information which is not relevant to the content
of the news group.  e.g. advertising pyramid schemes etc...
<P>
Cross posting is a neat idea but enormously abused
mechanism,  you can limit the abuse by rejecting items that are
crossposted to more than 'n' groups,  a value of 5-10 would seem
reasonable to me.  The default is 100 for DNEWS.
<P>
You can chage the limit in newsfeeds.conf under the
ME settings, e.g.
<PRE>
<FONT SIZE=2>site me
groups *,!*binary*
maxcross 4
</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.10">2.10 How can I make XOVER faster?</A>
</H2>

<P>
By default DNEWS caches the last 200 item headers
that it has read, if you have spare memory then it is well worth
increasing this value:   The upper limit is 9000, at approx 3K
per header this would use about 27MB, but a value of  2000 would
use 6MB which most systems could easily deal with.  In DNEWS.CONF
<PRE>
<FONT SIZE=2>HEAD_CACHE 2000
</FONT>
</PRE>
<p>
<a href="#Section_2">Return to the Index</a>
<p>
<H2><A NAME="Sec_2.11">2.11 How do I rename a volume on UNIX</A>
</H2>

<P>
You may wish to rename a current volume /var/spool/news
to be /var/spool/dnews, to do this:
<PRE>
<FONT SIZE=2>	cd /var/spool/news
	mkdir OLD
	mv * OLD
	umount /var/spool/news
	emacs /etc/vfstab (or /etc/fstab)
		(change /news into /dnews)
	mount /var/spool/dnews<BR>
</FONT>
</PRE>

<P>
When you are happy with the new system, or you need
the space:
<PRE>
<FONT SIZE=2>	rm -r /var/spool/dnews/OLD</FONT>
</PRE>
<a href="#Section_2">Return to the Index</a>
<p>
<hr>
<H1>3.0 Common Configuration Questions</H1>

<H2><A NAME="Sec_3.1">3.1 How do I setup DNEWS to take in
a 'normal' NNTP - IHAVE feed</A></H2>
<P>
<FONT SIZE=3>In access.conf, give your feed site access to send
you ihave messages:
</FONT>
<PRE>
<FONT SIZE=2>
	my.feeder.site.com:ihave:::*
</FONT>
</PRE>
<P>
<FONT SIZE=3>In dnews.conf, comment out the nntp_feeder definition.</FONT>
<P>
<FONT SIZE=3>In newsfeeds.conf, replace:</FONT>
<PRE>
<FONT SIZE=2>
	site $NNTP_FEEDER
		groups *
		builtin
		posting</FONT>
</PRE>
<P>
<FONT SIZE=3>With:</FONT>
<PRE>
<FONT SIZE=2>
	site my.feeder.site
		groups *
		builtin</FONT>
</PRE>

<P>
<FONT SIZE=3>And in dnews.conf add a line:</FONT>
<PRE><FONT SIZE=2>
        cachedall true
</FONT>
</PRE>

<P>
<FONT SIZE=3>You need to FTP an active file from your provider,
if he won't supply you one then you can get one of the NetWin
FTP site, but it is better to get a local one.  Copy this file
to your spool directory:</FONT>
<PRE>
<FONT SIZE=2>(Stop DNEWS first)
copy active_from_provider.txt /dnews/spool/active.dat<BR>
</FONT>
</PRE>

<P>
<FONT SIZE=3>Now, read the FAQ section entitled &quot;<B>3.6 How
do I set my EXCLUDE parameter correctly?&quot;</B></FONT>
<P>
<FONT SIZE=3>Here is an example of a full feed from UUNET.
 Note the exclude parameter is essential.</FONT>
<PRE>
<FONT SIZE=2>-------dnews.conf---------
In  dnews.conf  comment out nntp_feeder by putting a HASH in 
front of the line, and add cachedall true, e.g.
	# nntp_feeder	your.feeder.ohio.edu
	cachedall true

------newsfeeds.conf cut here ----------
	site me
		groups *
	site news.uu.net
		groups *,!local.*
                builtin
		exclude uunet
	site YOUR.MAIL.GATEWAY
		smtp
------access.conf cut here and change your domain and ipnumbers ------
# Don't let the world connect :-)
*:logoff:::*

# Do let your domain and ip range connect    **** CHANGE THIS BIT ***
*.your.domain:Read,Post:::*
161.232.32.*:read,post:::*

# Do let your news feed from UUNET send you items
news*.uu.net:ihave:::*</FONT>
</PRE>
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<H2><A NAME="Sec_3.2">3.2 How do I setup DNEWS to take an
ihave feed from 5 machines but only send back to one.</A></H2>

<P>
Lets assume you have been told you will get a feed
from any or all of:
<PRE>
<FONT SIZE=2>news1.xxx.net
news2.xxx.net
news3.xxx.net
news4.xxx.net</FONT>
</PRE>

<P>
And you have also been told to send your feed back to
<PRE>
<FONT SIZE=2>newsup.xxx.net</FONT>
</PRE>

<P>
And after examining the PATH header in a news item
from your upstream feed you have seen that they stamp all incoming
messages with the name 'news_stamp.xxx.net'
<P>
Then you would setup access.conf and newsfeeds.conf
like this:
<PRE>
<FONT SIZE=2>news1.xxx.net:ihave:::*
news2.xxx.net:ihave:::*
news3.xxx.net:ihave:::*
news4.xxx.net:ihave:::*<BR>
</FONT>
</PRE>

<P>
And you would setup newsfeeds.conf like this:
<PRE>
<FONT SIZE=2>site me
	groups *

site newsup.xxx.net
	groups *
	builtin
	exclude news_stamp.xxx.net

site your.mail.gateway
	smtp</FONT>
</PRE>
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<H2><A NAME="Sec_3.3">3.3 How do I setup XMIT to send to
other sites</A></H2>

<P>
If you have more than one large feed coming into
your site, then you should use XMIT to send to all sites and NOT
use the builtin feeding system at all,  (see the keyword builtin
above, remove it!!)  The builtin feeder will not run fast enough
to 'pass through' large feeds so you must use the XMIT feeder
in all directions.  (Leaf sites can still use a sucking feed quite
safely as this is also very efficient)
<P>
The XMIT feeder is a high speed, auto configuring
streaming feeder with built in scheduling, so you don't need to
use CRON or anything else tricky like that.
<P>
First add entries to your NEWSFEEDS.CONF file, this
creates the .feed file that XMIT will use:
<PRE>
<FONT SIZE=2>NOTEPAD newsfeeds.conf
	site other.site.here.com
		groups *</FONT>
</PRE>

<P>
Now modify your startup procedure to run the xmit
job for each feed you have defined in newsfeeds.conf
<H3><A NAME="_Toc347985059">Adding XMIT to Windows NT Services
(startup)</A></H3>

<P>
On windows NT you need to setup each xmit job as
a service, to do this use the program ADDSVC.EXE which came with
the dnews distribution to add a service for each outgoing feed,
e.g. (notepad setupsvc.cmd and then run it to create the feeds)

<PRE>
<FONT SIZE=2>addsvc -add dxmit1 xmit.exe &quot;dxmit1 site.name.edu -at *5 *&quot;
addsvc -add dxmit2 xmit.exe &quot;dxmit2 site2.name.edu -at *5 *&quot;
<BR>
</FONT>
</PRE>

<P>
Then from CONTROL PANEL, SERVICES, and start the
feed(s).
<H3><A NAME="_Toc347985060">Adding XMIT to UNIX startup</A></H3>

<P>
Add lines to your dnews_start.sh procedure, e.g.
<PRE>
<FONT SIZE=2>cd /usr/local/dnews
./xmit send.to.site.name -at &quot;*2&quot; &quot;*&quot;
./xmit send.other.site.name -at &quot;*7&quot; &quot;*&quot;</FONT>
</PRE>

<H3><A NAME="_Toc347985061">Adding XMIT to VMS startup</A></H3>

<P>
Modify RUNXMIT.COM and add it to dnews_start.com
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<H2><A NAME="Sec_3.4">3.4 What files can I copy from an
INN or CNEWS system</A></H2>

<P>
This is not necessary, but if you are replacing a
system then there are some files that you may want to preserve
so that news.rc files are not 'too' confused by the new system.
<P>
You can safely copy these files:
<PRE>
<FONT SIZE=2>
	active		-&gt; active.dat
	active.times	-&gt; active.times
	newsgroups 	-&gt; active.names  (may be changed in future)<BR>
</FONT>
</PRE>

<P>
If you copy the active file, you must reset DNEWS
with this special manager command:
<PRE>
<FONT SIZE=2>	tellnews resetall</FONT>
</PRE>
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<H2><a name="Sec_3.5">3.5 How do I setup a news gateway for my LAN</a></H2>

With DNEWS, a modem, and Windows NT (or 95) you can give all the users on a LAN internet news access (to read and post) with only a single dial in modem to any local internet provider.   You may have to trigger the updates by hand to avoid leaving the modem connected 24 hours a day.
<p>
To do this, install a modem and ethernet card in a pc, then configure the pc for tcpip access to your local lan using a local ip number (you can make this up) and then configure it again for modem internet access to your local provider (probably using an ip address provided via ppp).  
<p>
Here are some example settings if your LAN is not on the internet.
<pre>
<FONT SIZE=2>Ethernet Adapter:
IP Address		1.1.1.1	(anything just give each pc a different number)
Subnet Mask		255.255.255.0
Gateway			(leave blank)
DNS			(Leave blank)

Modem TCPIP Adapter:
IP Address		(leave blank, provider will supply)
Subnet Mask		(blank)
Gateway			(blank)
DNS			1.2.3.4 (You MUST get this from your provider)

</FONT></PRE>
Then for myname in dnews.conf you would use 1.1.1.1 and from other PC's on your lan set their news server to be 1.1.1.1
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<H2><a name="Sec_3.6">3.6 How do I set my EXCLUDE parameter correctly?</a></H2>

<P>
In newsfeeds.conf you must set your exclude parameter
to stop DNEWS from sending incoming messages back to your feed
site.  Lets assume your feed site is called fastfeed.world.net.
You need to find out what it stamps onto news articles, to do
this read a news article (and show all headers so you can see
the PATH header) e.g.
<PRE>
<FONT SIZE=2>	Newsgroups: alt.winsock.trumpet
	Subject: Sportster Si does not seem to work with TRUMPET
	Date: Thu, 26 Oct 1995 22:44:08
	Organization: Personal
	Lines: 8
	Message-ID: &lt;moleski.2.0016BD02@sasknet.sk.ca&gt;
	NNTP-Posting-Host: eagle28.sasknet.sk.ca
	X-Newsreader: Trumpet for Windows [Version 1.0 Rev A]
	Path: fast1.world.net!world.net!news.icix.net!esol.intermedia.com
</FONT>
</PRE>

<P>
Look thru the path, left to right, and find the first
or most generic name for your feed site, in this case 'world.net'
looks like the best name to choose.  So here is the entry you
should put in newsfeeds.conf, you may need the builtin and posting
settings as well but that is up to you.
<PRE>
<FONT SIZE=2>	site fastfeed.world.net
    		groups *
		exclude world.net
		builtin	
</FONT>
</PRE>

<P>
You may need to delete your .feed and .sending files
from the spool directory to clear out the backlog of articles
queued.
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<H2><a name="Sec_3.7">3.7 How do I setup DNEWS for local (intranet) use?</a></H2>

<P>
This is fairly simple to achieve, install DNEWS normally,
then in dnews.conf set 
<PRE><FONT SIZE=2>
cachedall true
</FONT></PRE>
<P>
Don't define the 'nntp_feeder' variable at all, remove
the word 'posting' from newsfeeds.conf then start the server.
<P>
Now create your local groups, try to pick names that
will never conflict with internet names if you decide to join
up at a later date, to achieve this add your companys name to
the start of each group name (or an abbreviation of it)
<PRE>
<FONT SIZE=2>
tellnews newgroup netwin.chatting y Group for chatting about things
tellnews newgroup netwin.schedule y For scheduling meetings
tellnews newgroup netwin.products y Product sheets and info for sales staff
</FONT>
</PRE>

<P>
Done!
<p>
<a href="#Section_3">Return to the Index</a>
<p>
<hr>
<H1>4.0 I did something stupid, can I fix it?</H1>

<H2><A NAME="Sec_4.1">4.1 I deleted some item files by hand,
is that ok?</A></H2>

<P>
This is like editing a database with a binary editor
and removing a few records by hand, it is not a good idea :-(
<P>
However, DNEWS is written for people just like you,
the database will correct itself with a little luck. :-)
<P>
Please do not edit an item file and remove individual
items or change them, this will corrupt the database and the items
will simply disappear.
<p>
<a href="#Section_4">Return to the Index</a>
<p>
<H2><A NAME="Sec_4.2">4.2 I deleted the history.dat file,
is that ok?</A></H2>

<P>
No, it's not.  You need to do this, type in:
<PRE>
<FONT SIZE=2>tellnews addlost
</FONT>
</PRE>

<P>
And cross your fingers and wait until the addlost
finishes (it could take a few hours on a full feed system)
<p>
<a href="#Section_4">Return to the Index</a>
<p>
<hr>
<H1>5.0 Errors &amp; Problems</H1>

<H2><A NAME="Sec_5.1">5.1 Large messages &amp; Memory Use.</A>
</H2>

<P>
Unless you have infinite memory on your system then
it is necessary to limit the size of messages that can be processed.
 This also saves a lot of wasted bandwidth and disk space for
you and every other news system.  DNEWS limits messages to 1MB
by default, (a fairly generous limit considering many news readers
still die horribly with messages greater than 64K and anything
bigger than this should not be sent via news but should be put
on an FTP/WEB site and a pointer to it should be sent) 
<P>
To deal with messages of size 1MB dnews needs about
6MB of memory, so if you are short of memory you may want to reduce
this.  To limit messages to 100k you would add a line in DNEWS.CONF
<PRE>
<FONT SIZE=2>ITEM_MAX 100000</FONT>
</PRE>

<P>
(this setting is not dynamic, you must restart DNEWS)
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.2">5.2 I'm not getting any binary groups,
why not?</A></H2>

<P>
The default configuration file (newsfeeds.conf) that
comes with DNEWS excludes all binary groups.  In my opinion these
groups should not exist, they are a left over from the days before
FTP and WEB and even EMAIL, so that news was the only option,
now it is much more appropriate to post pointers to large files,
rather than the file itself.
<P>
Anyway, you or your users demand it, to fix the problem
edit your newsfeeds.conf file and remove the !*binary* from the
'ME' feed.
<P>
Then use the commands:
<PRE>
<FONT SIZE=2>tellnews undelete *binary*
tellnews matchfeed
</FONT>
</PRE>
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.3">5.3 My news reader says the newsgroups
don't exist?</A></H2>

<P>
Check access.conf, you might have access to get in,
but no access to read the news groups so they will appear empty
or give 'no such newsgroup' errors.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.4">5.4 I don't know if posts are working?</A>
</H2>

<P>
There are two main reasons for posts to fail:
<OL>
<LI>You've messed up your newsfeeds.conf file.
<LI>Your provider is not allowing you to send messages
via 'ihave'
</OL>

<P>
Follow these instructions to figure out where the
error is:<BR>

<P>
Post an item to some local TEST news group, e.g.
nz.test, then check the file DNEWS.OUT, this should give one line
per message sent 'out' of your system, if this file is empty,
or gives an error, first consider if the error is from DNEWS or
if it is from the site you are sending items to.    Second, look
in dnews.log, search for &quot;out:&quot; once you've found the
failure message you will probably find more clues just above or
below it as to what went wrong.  
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.5">5.5 I'm still not convinced my posts
are getting to the other side of the planet?</A></H2>

<P>
Post an item to alt.test, you should receive 10-15
messages from news robots all over the world.
<p>
<a href="#Section_5">Return to the Index</a>
<p> 
<H2><A NAME="Sec_5.6">5.6 I have an old fashioned feed coming
in but I'm not getting any items?</A></H2>

<P>
There are two main reasons for incoming feeds to
fail:
<OL>
<LI>You've messed up your access.conf file (or your
DNS does not work)
<LI>Your provider has not successfully setup the
feed.
</OL>

<P>
In case 1), first try letting everyone in by putting
a wildcard access line at the bottom of access.conf
<PRE>
<FONT SIZE=2>*:read,post,ihave:::*
tellnews reload</FONT>
</PRE>

<P>
Then check the log files, or use tellnews status,
and you will see the name and number of any machine sending you
IHAVE messages,  (in the list of connected channels)  put this
name in access.conf.
<P>
If tellnews status shows the number twice, but no
name, then your DNS is not working, use numbers in the access.conf
file instead or fix your DNS.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.7">5.7 What should I do now that I've
deleted history.dat</A></H2>

<P>
First I advise you not to play with guns because
you are in danger of shooting yourself in the foot.
<P>
Before restarting dnews, delete history.idx and history.dat,
and then start dnews and type:
<PRE>
<FONT SIZE=2>tellnews addlost</FONT>
</PRE>

<P>
Which will scan the entire database and rebuild the
history file.  This could take 12 hours or more to run on 4 Gig
of news.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.8">5.8 Netscape shows items but I can't
read them, why?</A></H2>

<P>
This means the item is missing from the history database,
this should never happen, but since it has, try this command:
<PRE>
<FONT SIZE=2>tellnews addlost</FONT>
</PRE>

<P>
Which will scan the entire database and rebuild the
history file.  This could take 12 hours or more to run on 4 Gig
of news.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.9">5.9 Why doesn't the status report
match actual diskspace used?</A></H2>

<P>
DNEWS maintains an internal count of free disk space,
this can be wrong, or possibly your setting for 'diskspace' in
dnews.conf could be wrong.  Decide which is wrong, either fix
the number in dnews.conf or use the 'setused' command to change
the internal count, e.g. to set the used value to 950MB, type
in:
<PRE>
<FONT SIZE=2>tellnews setused 950</FONT>
</PRE>

<P>
Then wait 2 minutes and do another:
<PRE>
<FONT SIZE=2>tellnews status</FONT>
</PRE>
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.10">5.10 DNEWS goes very slow when users
connect</A></H2>

<P>
Check your DNS is working, try putting 
<PRE>
<FONT SIZE=2>nodns true</FONT>
</PRE>

<P>
In dnews.conf, and fix access.conf to use numbers
then type:
<PRE>
<FONT SIZE=2>tellnews reload</FONT>
</PRE>

<P>
Then see if that speeds things up,  if it does then
your DNS is faulty.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.11">5.11 My system runs out of memory?</A>
</H2>

<P>
First check your pagefile settings, for a full feed
you will need about 120MB of pagefile on Windows NT.
<P>
See the section on large news messages.
<P>
Send the output of tellnews status to the mailing
list or NetWin and ask for comments.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.12">5.12 DNEWS goes very slow</A></H2>

<P>
Check your DNS is working.
<P>
Type in:
<P><pre>
<FONT SIZE=2>tellnews stats </FONT>
<P>
<FONT SIZE=2>(not status)</FONT></pre>
<P>
This gives a listing of NNTP commands and how long
dnews is spending on each one, this will show if one command is
slow, and also if one command is being used more than is reasonable.
 Also consider adding memory.
<P>
Send the output of tellnews stats and status to the
mailing list or NetWin for further suggestions.
<P>
Consider installing more memory or a faster disk
drive.
<P>
If the xover command is using most of the time then
consider increasing the buffering of headers.  (see dnews.conf
options)
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.13">5.13 DNEWS locks up for brief periods
(or permanently)</A></H2>

<P>
Panic!
<P>
Check the log file dnews.log, work out from the time
stamps what dnews was doing when it locked up.
<P>
This can happen if you run an expire while lots of
people are trying to use the system or while an ihave feed is
sending stuff in.
<P>
Use the tellnews stats command, this will also point
to commands which are taking too long to process for some reason.
<P>
Check your DNS and also that site you are sucking
from is working and it's news server is working, either of these
can cause a problem.  If the site you suck from is down for a
few hours, you may have to remove the feeder line from dnews.conf
until it is up again.  (normally you won't have to do this, it's
just a thing to watch for)
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.14">5.14 DNEWS Crashes</A></H2>

<P>
Check the end of the file dnews.log, the only partly
acceptable reason for a crash is if DNEWS runs out of memory,
if the errors indicate this then see the section on memory problems
above.
<P>
If it gives an error 'signal xxx causing exit' then
set the debugging level to 'debug', if the log files just ends
suddenly, then set the debug level to 'flush'
<PRE>
<FONT SIZE=2>loglvl debug           (or flush)
debug_rotate 3000         </FONT>
</PRE>

<P>
Now next time it crashes email the last few hundred
lines of dnews.log to NetWin.  We really don't accept crashes
as acceptable behaviour and will go to some extreme lengths to
fix this sort of problem.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.15">5.15 TELLNEWS says Can't BIND</A>?
</H2>

<P>
Can't BIND, and tellnews says &quot;I can't talk
to you&quot; when you telnet to the port. 
<P>
On LINUX the slackware distribution comes with a
dummy nntp daemon installed, you must remove this so dnews can
bind to the socket.
<PRE>
<FONT SIZE=2>	edit /etc/inetd.conf
	(comment out the NNTP line)
	kill -HUP &lt;pid of inetd process&gt;</FONT>
</PRE>
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.16">5.16 TELLNEWS fails or locks ups</A>
</H2>

<P>
The DNEWS process may take 1-2 minutes to initialize,
so wait a bit before panicking.
<P>
Check if the process is running
<PRE>
<FONT SIZE=2>	ps -axl | grep dnews	(linux)
	ps -ef | grep dnews	(SunOS)</FONT>
</PRE>

<P>
Check the log files
<PRE>
<FONT SIZE=2>	more /usr/local/dnews/dnews.log</FONT>
</PRE>

<P>
On UNIX if it gets started up with the wrong PID
you will get all sorts of protection problems,  all the files
in:
<P><pre>
<FONT SIZE=2>  /var/spool/dnews/... </font></pre> (including<tt><font size=2>  var/spool/dnews</FONT></tt>)
<P>
must be owned by the same user, normally 'news'.
Also all the files in:
<P><pre>
<FONT SIZE=2>  /var/local/dnews/*</FONT></pre>
<P>
Also on UNIX it is possible to start dnews twice,
this can cause real disasters, always check with ps and by looking
at the log before restarting DNEWS.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.17">5.17 TELLNEWS says remote node is
unknown</A></H2>

<P>
Check the myname variable in DNEWS.CONF, also check
your DNS is working, if its isn't then use the number in dnews.conf
<P>
On VMS, if the symbol tellnews is not defined, it
will try and run telnet instead, this can be confusing.  You may
have to log in again to get the symbol, or if you forgot to put
it in your sylogin: script then you will have to do so, e.g.:
<P><pre>
<FONT SIZE=2> $ tellnews :== $dnews_top:tellnews</FONT></pre>
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.18">5.18 TELLNEWS says &quot;Cannot access
tellnews.pass&quot;</A></H2>

<P>
For some reason tellnews cannot find it's configuration
files, on NT this could be caused by a file protection problem
or more likely if the disk drive letter was not specified in the
configuration file DNEWS.CONF.
<P>
On VMS and UNIX you must be running the tellnews
command from the usercode ROOT or NEWS or NEWS$SERVER.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.19">5.19 I see errors &quot;NNTP, Sorry
I can't talk to you</A>&quot; in the log file?</H2>

<P>
Your news-host does not want to talk to you, this
is because there is a security file which gives a list of hosts
which are allowed to connect, the name of your machine must be
in this list, and your machine's name must be in the Domain Name
Server tables as well as the Reverse Translation Domain Name server
tables.
<P>
The access file may be called something like:
<P>
<TT><FONT SIZE=2 FACE="Courier New"> CNEWS  /usr/local/lib/news/nntp_access</FONT></TT>
<P>
<TT><FONT SIZE=2 FACE="Courier New"> INND  /usr/local/news/nnrp.access</FONT></TT>
<P>
<A NAME="_Toc339472717"><TT><FONT SIZE=2 FACE="Courier New"> DNEWS
 /usr/local/dnews/access.conf</FONT></TT></A>
<P>
<TT><FONT SIZE=2 FACE="Courier New"> DNEWS-NT /dnews/access.conf</FONT></TT>
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.20">5.20 What does &quot;Transfer permission
denied&quot; mean?</A></H2>

<P>
This can come from one of two directions,  DNEWS
can give this error when a site tries to feed it new items.
<P>
If you are using a sucking feed then you should stop
the site that is trying to send to you from sending as DNEWS will
ask for any items it wants.
<P>
If you do want to allow incoming IHAVE messages,
 then add an IHAVE record for this ip address in the ACCESS.CONF
file, and also remove the 'POSTING' flag from the NEWSFEEDS.CONF
file for the ME site. 
<P>
The last possibility is that this error is coming
 from your feeding site, in which case you need to contact the
system manager of that site and ask him to give you 'ihave' access.
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<H2><A NAME="Sec_5.21">5.21 Posts not going upstream, 437 Duplicate article?</a></H2>

<P>
The problem is DNEWS is echo'ing all your incoming
news back to your news feed site, this is clogging the outgoing
feed.  To fix this see the section above entitled <B>&quot;3.6
How do I set my EXCLUDE parameter correctly?&quot;</B>
<p>
<a href="#Section_5">Return to the Index</a>
<p>
<hr>
<H1>6.0 I still can't figure it out, how can I get help?</H1>

<P>
You have two options, the DNEWS discussion list has
lots of expertise on it.  So try that first.
<P>
If that fails, or if you are a registered (not free)
customer then as part of normal support  NetWin provide email
advice and help on setting up your system.  In general try and
give as much information as possible about your setup and what
you want to do, and ALWAYS include a FAX or phone number just
incase your mail system is broken as well :-)  e.g.
<P>
Hardware &amp; OS:    Windows NT - Intel   (or NT-Alpha
or Solaris 4.3 etc...)
<P>
Version of DNEWS:  2.0b
<P>
Type of feed:  Sucking feed  (or full ihave feed...)
<P>
FAX:   (include country code)
<P>
And any relevant setup files, usually one or more
of:   dnews.conf, newsfeeds.conf, access.conf
<P>
And maybe a few lines from dnews.log showing the
problem
<P>
(Please don't email 3MB of log files to us :-)<BR>

<P>
And state your problem clearly:
<P>
(a bad example)  My feed doesn't work, why not?
<P>
(a good example) The IHAVE feed coming INTO my system
from my provider is being refused, he says it gives an error,
'transfer permission denied',  I have searched the log files but
can't find an equivalent error at my end,  what should I do?
<p>
<a href="#Section_6">Return to the Index</a>
<p>
<H2><A NAME="Sec_6.1">6.1 DNEWS Mailing List</A></H2>

<P>
There are two mailing lists for DNEWS, one is only
used to make major announcements of new version or urgent patches.
 The other is for general discussion, you may want to join both.
<p>
<a href="#Section_6">Return to the Index</a>
<p>
<H2><A NAME="Sec_6.2">6.2 To subscribe to the discussion
list send to:</A></H2>

<PRE>
<FONT SIZE=2>dnews-request@adam.com.au</FONT>
</PRE>

<P>
A message containing one word:
<PRE>
<FONT SIZE=2>subscribe<BR>
</FONT>
</PRE>

<P>
Then to post to the list send to:
<PRE>
<FONT SIZE=2>dnews@adam.com.au</FONT>
</PRE>
<p>
<a href="#Section_6">Return to the Index</a>
<p>
<H2><A NAME="Sec_6.3">6.3 To subscribe to the announcement
list</A></H2>

<P>
Send a message to:
<P><tt>
<FONT SIZE=2> maiser@emagic.co.nz</FONT></tt>
<P>
Containing the line:
<P><tt>
<FONT SIZE=2> subscribe dnews</FONT></tt>
<P>
This is a moderated list, it's only function is to
provide timely information on new features, releases, bugs, installation
gotcha's etc to interested people.  You will not get 20 messages
a day from this list, it will probably average 1-2 messages per
month.
<p>
<a href="#Section_6">Return to the Index</a>
<p>
<hr>
</BODY>

</HTML>
