@comment I can't add the below files to the package because pkg_delete
@comment will complain when removing this package:
@comment     lib/modules/extensions/XXX-libglx.a.%%XLIBVERSION%%
@comment     lib/modules/extensions/XXX-libGLcore.a.%%XLIBVERSION%%
@comment     lib/XXX-libGL.a.%%XLIBVERSION%%
@comment     lib/XXX-libGL.so.1.%%XLIBVERSION%%
@comment They are however restored when this package is removed:
@unexec mv -f %D/lib/modules/extensions/XXX-libglx.a.%%%%.%%XSERVVERSION%% %D/lib/modules/extensions/libglx.a
@unexec mv -f %D/lib/modules/extensions/XXX-libGLcore.a.%%%%.%%XSERVVERSION%% %D/lib/modules/extensions/libGLcore.a
@unexec mv -f %D/lib/XXX-libGL.a.%%%%.%%XLIBVERSION%% %D/lib/libGL.a
lib/libGL.so.1
@unexec mv -f %D/lib/XXX-libGL.so.1.%%%%.%%XLIBVERSION%% %D/lib/libGL.so.1
@exec ln -sf %D/lib/libGL.so.1 %D/lib/libGL.so
@comment no rm -f %D/lib/libGL.so because default XFree needs this also
lib/libGLcore.so.1
@exec ln -sf %D/lib/libGLcore.so.1 %D/lib/libGLcore.so
@unexec rm -f %D/lib/libGLcore.so
lib/libXvMCNVIDIA.so.1
@exec ln -sf %D/lib/libXvMCNVIDIA.so.1 %D/lib/libXvMCNVIDIA.so
@unexec rm -f %D/lib/libXvMCNVIDIA.so
@exec ln -sf %D/lib/libXvMCNVIDIA.so.1 %D/lib/libXvMCNVIDIA_dynamic.so.1
@unexec rm -f %D/lib/libXvMCNVIDIA_dynamic.so.1
lib/libnvidia-tls.so.1
@exec ln -sf %D/lib/libnvidia-tls.so.1 %D/lib/libnvidia-tls.so
@unexec rm -f %D/lib/libnvidia-tls.so
lib/libXvMCNVIDIA.a
lib/modules/drivers/nvidia_drv.o
lib/modules/extensions/libglx.so.1
@exec ln -sf %D/lib/modules/extensions/libglx.so.1 %D/lib/modules/extensions/libglx.so
@unexec rm -f %D/lib/modules/extensions/libglx.so
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/README
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/README.Linux
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/XF86Config.sample
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/license.txt
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/gl.h
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/glx.h
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/glext.h
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/glxtokens.h
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/agp.ko-hints.diff
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/machdep.c.diff
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/vm_map.c_4.10.diff
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/device_pager.c_4.10.diff
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/vm_object.c_5.2.diff
%%PORTDOCS%%share/doc/NVIDIA_GLX-1.0/device_pager.c_5.2.diff
%%PORTDOCS%%@dirrm share/doc/NVIDIA_GLX-1.0
%%FREEBSD4%%@cwd /modules
%%FREEBSD5%%@cwd /boot/modules
nvidia.ko
%%FREEBSD5%%@unexec kldxref %D
%%FREEBSD4%%@cwd /dev
%%FREEBSD4%%MAKEDEV.nvidia
%%FREEBSD4%%@exec mknod /dev/nvidia0 c 180 0
%%FREEBSD4%%@exec chmod 0666 /dev/nvidia0
%%FREEBSD4%%@exec mknod /dev/nvidia1 c 180 1
%%FREEBSD4%%@exec chmod 0666 /dev/nvidia1
%%FREEBSD4%%@exec mknod /dev/nvidia2 c 180 2
%%FREEBSD4%%@exec chmod 0666 /dev/nvidia2
%%FREEBSD4%%@exec mknod /dev/nvidia3 c 180 3
%%FREEBSD4%%@exec chmod 0666 /dev/nvidia3
%%FREEBSD4%%@exec mknod /dev/nvidiactl c 180 255
%%FREEBSD4%%@exec chmod 0666 /dev/nvidiactl
%%FREEBSD4%%@unexec rm -f /dev/nvidia0
%%FREEBSD4%%@unexec rm -f /dev/nvidia1
%%FREEBSD4%%@unexec rm -f /dev/nvidia2
%%FREEBSD4%%@unexec rm -f /dev/nvidia3
%%FREEBSD4%%@unexec rm -f /dev/nvidiactl
%%LINUX%%@cwd %%LINUXBASE%%
%%LINUX%%usr/lib/libGL.so.1.0.%%NVVERSION%%
%%LINUX%%usr/lib/libGLcore.so.1.0.%%NVVERSION%%
%%LINUX%%usr/lib/libnvidia-tls.so.1.0.%%NVVERSION%%
%%LINUX%%@exec ln -sf %D/usr/lib/libGL.so.1.0.%%NVVERSION%% %D/usr/lib/libGL.so.1
%%LINUX%%@exec ln -sf %D/usr/lib/libGLcore.so.1.0.%%NVVERSION%% %D/usr/lib/libGLcore.so.1
%%LINUX%%@exec ln -sf %D/usr/lib/libnvidia-tls.so.1.0.%%NVVERSION%% %D/usr/lib/liblibnvidia-tls.so.1
%%LINUX%%@unexec rm -f %D/usr/lib/libGL.so.1
%%LINUX%%@unexec rm -f %D/usr/lib/libGLcore.so.1
%%LINUX%%@unexec rm -f %D/usr/lib/liblibnvidia-tls.so.1
