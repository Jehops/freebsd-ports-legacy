--- programs/Xserver/hw/xfree86/os-support/bsd/bsd_jstk.c.orig	Sun Jul 26 01:56:34 1998
+++ programs/Xserver/hw/xfree86/os-support/bsd/bsd_jstk.c	Mon Apr  8 14:32:01 2002
@@ -29,7 +29,7 @@
 #include <unistd.h>
 #include <string.h>
 #include <errno.h>
-#include <machine/joystick.h>
+#include <sys/joystick.h>
 #include <fcntl.h>
 
 #ifdef XFree86LOADER
@@ -56,6 +56,7 @@
   int   changed = 0;
   int   timeinmicros;
   struct joystick	js;
+  extern int errno;
   
 #ifdef DEBUG
   ErrorF("xf86JoystickOn: %s\n", name);
@@ -96,7 +97,6 @@
   if (*centerY < 0) {
     *centerY = js.y;
     xf86Msg(X_PROBED, "Joystick: CenterY set to %d\n", *centerY);
-    }
   }
 
   return status;
@@ -173,6 +173,7 @@
 }
 
 #ifdef XFree86LOADER
+#define MAGIC_DONE 1
 /*
  * Entry point for XFree86 Loader
  */
