#!/bin/sh

PATH=/bin:/usr/bin:/sbin:/usr/sbin:${PATH}
export PATH

tmp_pkg_info=`mktemp -t gnome_install_pkg_info`
trap "rm -f ${tmp_pkg_info}" 0

pkg_info > ${tmp_pkg_info}

if [ "$2" = "PRE-INSTALL" ]; then
     GNOME_ONE_DESKTOP="gnomecore gnomeapplets gnomemedia gnomeutils gtop libgtop sawfish nautilus gedit xalf gnomegames gdm eog ggv gnomeaudio"
     for package in ${GNOME_ONE_DESKTOP}; do
	 if grep "^${package}-[0-9]" ${tmp_pkg_info} >/dev/null 2>&1; then
	     echo "${package} was detected on the system.  This package is part of the GNOME 1.x"
	     echo "desktop, and cannot coexist with the GNOME 2.2 desktop."
	     echo ""
	     echo "Please deinstall the GNOME 1.x desktop before installing this package."
	     false
	 fi
    done
fi
