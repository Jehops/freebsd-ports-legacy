--- GNUmakefile.orig	Thu Oct 18 14:26:03 2001
+++ GNUmakefile	Thu Jan 10 13:52:21 2002
@@ -1,10 +1,10 @@
-PREFIX = /usr/local/GNUstep/Apps
+prefix = $(PREFIX)/GNUstep/Apps
 # Comment out the line below if you don't use shadow passwords
-SHADOW = yes
-CFLAGS = `get-wings-flags --cflags` -DPREFIX="\"$(PREFIX)\""
-LDFLAGS = `get-wings-flags --ldflags`
-LIBS = `get-wings-flags --libs` -lWMaker -lcrypt
-CC = gcc -O2 -ggdb
+#SHADOW = yes
+CFLAGS += `get-wings-flags --cflags` -DPREFIX="\"$(prefix)\""
+LDFLAGS = `get-wraster-flags --ldflags`
+LIBS = `get-wings-flags --libs` -L$(X11BASE)/lib -L$(X11BASE)/GNUstep/lib -lWMaker -lcrypt
+CC ?= gcc
 OBJS = launch.o history.o execute.o user_auth.o exec_panel.o \
 completion.o test_file.o common_panel.o preferences.o info.o legal.o utils.o
 
@@ -51,21 +51,21 @@
 	$(CC) $(CFLAGS) -c legal.c -o legal.o 
 
 install: Launch
-	strip Launch
-	mkdir -p $(PREFIX)/Launch.app
-	install -c Launch $(PREFIX)/Launch.app/Launch
-	install -m 644 Launch.tiff $(PREFIX)/Launch.app/Launch.tiff
-	install -m 644 LaunchInfo.tiff $(PREFIX)/Launch.app/LaunchInfo.tiff
-	install -m 755 openurl $(PREFIX)/Launch.app/openurl
+	#strip Launch
+	$(MKDIR) $(prefix)/Launch.app
+	$(BSD_INSTALL_PROGRAM) Launch $(prefix)/Launch.app/Launch
+	$(BSD_INSTALL_DATA) Launch.tiff $(prefix)/Launch.app/Launch.tiff
+	$(BSD_INSTALL_DATA) LaunchInfo.tiff $(prefix)/Launch.app/LaunchInfo.tiff
+	$(BSD_INSTALL_SCRIPT) openurl $(prefix)/Launch.app/openurl
 ifeq ($(SHADOW), yes)
-	chown root.shadow $(PREFIX)/Launch.app/Launch
+	chown root:wheel $(prefix)/Launch.app/Launch
 else
-	chown root.root $(PREFIX)/Launch.app/Launch
+	chown root:wheel $(prefix)/Launch.app/Launch
 endif
-	chmod 4775 $(PREFIX)/Launch.app/Launch
+	chmod 4775 $(prefix)/Launch.app/Launch
 
 uninstall:
-	rm -r $(PREFIX)/Launch.app
+	rm -r $(prefix)/Launch.app
 
 clean:
 	rm -rf *.o Launch *~
