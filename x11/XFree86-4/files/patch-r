--- programs/Xserver/hw/xfree86/os-support/xf86_OSlib.h.ORIG    Mon Nov 27 13:29 :06 2000
+++ programs/Xserver/hw/xfree86/os-support/xf86_OSlib.h Mon Nov 27 14:26:21 2000
@@ -461,11 +461,21 @@
 #   endif
 #   ifdef SYSCONS_SUPPORT
 #    define COMPAT_SYSCONS
-#    if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__)
+#    if defined(__NetBSD__) || defined(__OpenBSD__)
 #     include <machine/console.h>
 #    else
-#     include <sys/console.h>
-#    endif /* __FreeBSD__ || __NetBSD__ || defined(__OpenBSD__) */
+#     if defined(__FreeBSD__)
+#        include <osreldate.h>
+#        if __FreeBSD_version >= 410000
+#          include <sys/consio.h>
+#          include <sys/kbio.h>
+#        else
+#          include <machine/console.h>
+#        endif /* FreeBSD 4.1 RELEASE or lator */
+#     else
+#      include <sys/console.h>
+#     endif
+#    endif
 #   endif /* SYSCONS_SUPPORT */
 #   if defined(PCVT_SUPPORT)
 #    if !defined(SYSCONS_SUPPORT)
@@ -496,8 +506,13 @@
 #    include <dev/wscons/wsconsio.h>
 #   endif /* WSCONS_SUPPORT */
 #   if defined(__FreeBSD__)
-#    undef MOUSE_GETINFO
-#    include <machine/mouse.h>
+#    include <osreldate.h>
+#    if __FreeBSD_version >= 500013
+#     include <sys/mouse.h>
+#    else
+#     undef MOUSE_GETINFO
+#     include <machine/mouse.h>
+#    endif
 #   endif
     /* Include these definitions in case ioctl_pc.h didn't get included */
 #   ifndef CONSOLE_X_MODE_ON
