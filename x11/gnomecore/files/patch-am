--- gnome-terminal/gnome-terminal.c.orig	Thu Nov 11 18:05:12 1999
+++ gnome-terminal/gnome-terminal.c	Thu Jan 13 16:01:31 2000
@@ -507,7 +507,8 @@
 	cfg->termname = NULL;
 	cfg->terminal_id = 0;
 
-	cfg->update_records = ZVT_TERM_DO_UTMP_LOG|ZVT_TERM_DO_WTMP_LOG;
+	cfg->update_records = ZVT_TERM_DO_UTMP_LOG | ZVT_TERM_DO_WTMP_LOG
+	   | ZVT_TERM_DO_LASTLOG;
 
 	if (strcasecmp (fore_color, back_color) == 0)
 		/* don't let them set identical foreground and background colors */
@@ -2260,6 +2261,8 @@
 			cfg->update_records |= ZVT_TERM_DO_UTMP_LOG;
 		if (gnome_config_get_bool ("do_wtmp=true"))
 			cfg->update_records |= ZVT_TERM_DO_WTMP_LOG;
+		if (gnome_config_get_bool ("do_lastlog=true"))
+			cfg->update_records |= ZVT_TERM_DO_LASTLOG;
 
 		termid = gnome_config_get_int("terminal_id=-1");
 		if (termid!=-1)
@@ -2367,6 +2370,7 @@
 		gnome_config_set_string("window_title", cfg->window_title?cfg->window_title:"Terminal");
 		gnome_config_set_bool("do_utmp", (cfg->update_records & ZVT_TERM_DO_UTMP_LOG) != 0);
 		gnome_config_set_bool("do_wtmp", (cfg->update_records & ZVT_TERM_DO_WTMP_LOG) != 0);
+		gnome_config_set_bool("do_lastlog", (cfg->update_records & ZVT_TERM_DO_LASTLOG) != 0);
 
 		gnome_config_pop_prefix ();
 		g_free (prefix);
@@ -2417,8 +2421,10 @@
 	DONOUTMP_KEY = -10,
 	DOWTMP_KEY   = -11,
 	DONOWTMP_KEY = -12,
-        TITLE_KEY    = -13,
-	TERM_KEY     = -14
+	DOLASTLOG_KEY   = -13,
+	DONOLASTLOG_KEY = -14,
+        TITLE_KEY    = -15,
+	TERM_KEY     = -16
 };
 
 static struct poptOption cb_options [] = {
@@ -2462,6 +2468,12 @@
 
 	{ "nowtmp", '\0', POPT_ARG_NONE, NULL, DONOWTMP_KEY,
 	  N_("Do not update wtmp entry"), N_("NOWTMP") },
+
+	{ "lastlog", '\0', POPT_ARG_NONE, NULL, DOLASTLOG_KEY,
+	  N_("Update lastlog entry"), N_("LASTLOG") },
+
+	{ "nolastlog", '\0', POPT_ARG_NONE, NULL, DONOLASTLOG_KEY,
+	  N_("Do not update lastlog entry"), N_("NOLASTLOG") },
 	
 	{ "title", 't', POPT_ARG_STRING, NULL, TITLE_KEY,
           N_("Set the window title"), N_("TITLE") },
@@ -2538,6 +2550,14 @@
 	case DONOWTMP_KEY:
 		cfg->update_records_and &= ~ZVT_TERM_DO_WTMP_LOG;
 		cfg->update_records_xor &= ~ZVT_TERM_DO_WTMP_LOG;
+		break;
+	case DOLASTLOG_KEY:
+		cfg->update_records_and &= ~ZVT_TERM_DO_LASTLOG;
+		cfg->update_records_xor |= ZVT_TERM_DO_LASTLOG;
+		break;
+	case DONOLASTLOG_KEY:
+		cfg->update_records_and &= ~ZVT_TERM_DO_LASTLOG;
+		cfg->update_records_xor &= ~ZVT_TERM_DO_LASTLOG;
 		break;
 	case TITLE_KEY:
 	        cfg->window_title = g_strdup(arg);
