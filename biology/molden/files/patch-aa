--- makefile.orig	Thu Sep  7 19:55:00 2006
+++ makefile	Tue Apr 24 16:40:19 2007
@@ -12,9 +12,27 @@
 #
 #	Disregard compiler warnings on rdmolf.f
 #
-CC = cc
+#CC = cc
 LIBS =  -lX11 -lm
-LIBSG = -L/usr/X11R6/lib -lGLU -lGL -lXmu -lX11 -lm
+LIBSG = -L${X11BASE}/lib -lGLU -lGL -lXmu -lX11 -lm
+
+###
+# FreeBSD
+#CC = gcc
+CFLAGS += -c -DDOBACK -DHASTIMER -I${X11BASE}/include
+#FC = f77
+.if ${MACHINE_ARCH} == i386
+FFLAGS += -malign-double
+CFLAGS += -malign-double
+.endif
+.if ${OSVERSION} < 400005
+FFLAGS += -Nn802 -Nx400
+.else
+FFLAGS += #-Wno-globals -fno-globals
+.endif
+LIBS =  -L${X11BASE}/lib -lX11 -lm
+LDR = ${FC}
+###
 
 # Silicon Graphics
 #CFLAGS = -c -DDOBACK -DHASTIMER -DCOLOR_OFFSET=0.0
@@ -46,11 +64,11 @@
 # when using gfortran, replace g77 with gfortran and comment out the line
 # 'external iargc' in molden.f
 #
-CFLAGS = -c -I/usr/X11R6/include -DDOBACK -DHASTIMER -DCOLOR_OFFSET=0.0
-FC = g77
-FFLAGS =
-LIBS =  -L/usr/X11R6/lib -lX11 -lm
-LDR = g77   
+#CFLAGS = -c -I/usr/X11R6/include -DDOBACK -DHASTIMER -DCOLOR_OFFSET=0.0
+#FC = g77
+#FFLAGS =
+#LIBS =  -L/usr/X11R6/lib -lX11 -lm
+#LDR = g77   
 # 64 bit machines:
 #LIBS =  -L/usr/X11R6/lib64 -lX11 -lm
 #
@@ -178,7 +196,7 @@
 # and the full opengl version of molden 'gmolden'
 # (make gmolden)
 #
-LIBSOGL = -lglut -lGLU -lGL -lXmu -lX11 -lm
+LIBSOGL = -L${X11BASE}/lib -lglut -lGLU -lGL -lXmu -lX11 -lm
 #
 # on linux :
 #
@@ -201,7 +219,7 @@
 #
 #LIBSG = -L/usr/X11R6/lib -Wl,-framework -Wl,GLUT -Wl,-framework -Wl,OpenGL -Wl,-framework -Wl,Cocoa -lGLU -lGL -lXmu -lX11 -lm
 
-
+all: molden moldenogl
 
 molden:	$(OBJS) mpdum.o xwin.o 
 	$(LDR) -o molden $(OBJS) $(SOBJ) mpdum.o xwin.o $(LIBS)
