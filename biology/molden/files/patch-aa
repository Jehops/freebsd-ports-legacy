--- makefile.orig	Wed Nov  2 16:35:57 2005
+++ makefile	Thu Dec  1 15:11:18 2005
@@ -12,14 +12,32 @@
 #
 #	Disregard compiler warnings on rdmolf.f
 #
-CC = cc
+#CC = cc
 LIBS =  -lX11 -lm
-LIBSG = -L/usr/X11R6/lib -lGLU -lGL -lXmu -lX11 -lm
+LIBSG = -L${X11BASE}/lib -lGLU -lGL -lXmu -lX11 -lm
+
+###
+# FreeBSD
+#CC = gcc
+CFLAGS += -c -DDOBACK -DHASTIMER -I${X11BASE}/include
+#FC = f77
+.if ${MACHINE_ARCH} == i386
+FFLAGS += -malign-double
+CFLAGS += -malign-double
+.endif
+.if ${OSVERSION} < 400005
+FFLAGS += -Nn802 -Nx400
+.else
+FFLAGS += -Wno-globals -fno-globals
+.endif
+LIBS =  -L${X11BASE}/lib -lX11 -lm
+LDR = f77
+###
 
 # Silicon Graphics
-CFLAGS = -c -DDOBACK -DHASTIMER -DCOLOR_OFFSET=0.0
-FFLAGS =   
-LDR = f77 
+#CFLAGS = -c -DDOBACK -DHASTIMER -DCOLOR_OFFSET=0.0
+#FFLAGS =   
+#LDR = f77 
 
 # Ultrix, Dec Alpha, Linux ( and best start for Unix other than below )
 #
@@ -168,7 +186,7 @@
 # For The OpenGL Graphics library molden helper 'moldenogl'
 # (make moldenogl)
 #
-LIBSOGL = -lglut -lGLU -lGL -lXmu -lX11 -lm
+LIBSOGL = -L${X11BASE}/lib -lglut -lGLU -lGL -lXmu -lX11 -lm
 #
 # on linux :
 #
@@ -187,6 +205,8 @@
 #
 #LIBSG = -L/usr/X11R6/lib -framework GLUT -framework OpenGL -framework Cocoa
 #
+
+all: molden moldenogl
 
 molden:	$(OBJS) mpdum.o xwin.o 
 	$(LDR) -o molden $(OBJS) $(SOBJ) mpdum.o xwin.o $(LIBS)
