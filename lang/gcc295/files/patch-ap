--- gcc/ginclude/stddef.h.orig	Wed Dec 16 22:19:25 1998
+++ gcc/ginclude/stddef.h	Sun Dec 22 18:18:47 2002
@@ -25,8 +25,16 @@
 /* On 4.3bsd-net2, make sure ansi.h is included, so we have
    one less case to deal with in the following.  */
 #if defined (__BSD_NET2__) || defined (____386BSD____) || defined (__FreeBSD__) || defined(__NetBSD__)
+/* <machine/ansi.h> and <machine/_types.h> define __gnuc_va_list */
+#define __NO_GNUC_VA_LIST
+#include <osreldate.h>
+#if __FreeBSD_version >= 500039
+#include <sys/cdefs.h>
+#include <machine/_types.h>
+#else
 #include <machine/ansi.h>
 #endif
+#endif
 
 /* In 4.3bsd-net2, machine/ansi.h defines these symbols, which are
    defined if the corresponding type is *not* defined.
@@ -109,7 +116,6 @@
 #define _T_PTRDIFF
 #define __PTRDIFF_T
 #define _PTRDIFF_T_
-#define _BSD_PTRDIFF_T_
 #define ___int_ptrdiff_t_h
 #define _GCC_PTRDIFF_T
 #ifndef __PTRDIFF_TYPE__
@@ -145,6 +151,7 @@
 #ifndef _BSD_SIZE_T_
 #ifndef _SIZE_T_DEFINED_
 #ifndef _SIZE_T_DEFINED
+#ifndef _SIZE_T_DECLARED
 #ifndef ___int_size_t_h
 #ifndef _GCC_SIZE_T
 #ifndef _SIZET_
@@ -156,13 +163,12 @@
 #define _T_SIZE
 #define __SIZE_T
 #define _SIZE_T_
-#define _BSD_SIZE_T_
 #define _SIZE_T_DEFINED_
 #define _SIZE_T_DEFINED
+#define _SIZE_T_DECLARED
 #define ___int_size_t_h
 #define _GCC_SIZE_T
 #define _SIZET_
-#define __size_t
 #ifndef __SIZE_TYPE__
 #define __SIZE_TYPE__ long unsigned int
 #endif
@@ -176,6 +182,7 @@
 #endif /* _SIZET_ */
 #endif /* _GCC_SIZE_T */
 #endif /* ___int_size_t_h */
+#endif /* _SIZE_T_DECLARED */
 #endif /* _SIZE_T_DEFINED */
 #endif /* _SIZE_T_DEFINED_ */
 #endif /* _BSD_SIZE_T_ */
@@ -207,6 +214,7 @@
 #ifndef _BSD_WCHAR_T_
 #ifndef _WCHAR_T_DEFINED_
 #ifndef _WCHAR_T_DEFINED
+#ifndef _WCHAR_T_DECLARED
 #ifndef _WCHAR_T_H
 #ifndef ___int_wchar_t_h
 #ifndef __INT_WCHAR_T_H
@@ -217,9 +225,9 @@
 #define _T_WCHAR
 #define __WCHAR_T
 #define _WCHAR_T_
-#define _BSD_WCHAR_T_
 #define _WCHAR_T_DEFINED_
 #define _WCHAR_T_DEFINED
+#define _WCHAR_T_DECLARED
 #define _WCHAR_T_H
 #define ___int_wchar_t_h
 #define __INT_WCHAR_T_H
@@ -253,6 +261,7 @@
 #endif
 #ifndef __cplusplus
 typedef __WCHAR_TYPE__ wchar_t;
+#endif
 #endif
 #endif
 #endif
