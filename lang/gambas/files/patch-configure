--- configure.orig	Sun Sep  5 23:53:05 2004
+++ configure	Tue Sep  7 21:20:07 2004
@@ -6891,6 +6891,7 @@
 
 # This can be used to rebuild libtool when needed
 LIBTOOL_DEPS="$ac_aux_dir/ltmain.sh"
+$ac_aux_dir/ltconfig $LIBTOOL_DEPS
 
 # Always use our own libtool.
 LIBTOOL='$(SHELL) $(top_builddir)/libtool'
@@ -7126,10 +7127,10 @@
 
   case "${host}" in
     *-*-freebsd* )
-      THREAD_LIB=""
-      THREAD_INC="-pthread -D_REENTRANT"
-      GBX_THREAD_LIB=""
-      GBX_THREAD_INC="-pthread -D_REENTRANT"
+      THREAD_LIB="${PTHREAD_LIBS}"
+      THREAD_INC="${PTHREAD_CFLAGS}"
+      GBX_THREAD_LIB="${PTHREAD_LIBS}"
+      GBX_THREAD_INC="${PTHREAD_CFLAGS}"
       ;;
     *)
       THREAD_LIB="-lpthread"
@@ -10324,7 +10325,7 @@
       fi
     done
 
-    SQLITE_LIB="$SQLITE_LIB $C_LIB -lsqlite -lc -lstdc++"
+    SQLITE_LIB="$SQLITE_LIB $C_LIB -lsqlite -lc -lstdc++ -lpub"
 
   fi
 
@@ -10447,26 +10448,13 @@
       fi
 
       gb_cv_header_sdl=$gb_inc_sdl
-    
+
 fi
 
 
     echo "$ac_t""$gb_cv_header_sdl" 1>&6
 
-    SDL_INC=""
-
-    for gb_dir in $gb_cv_header_sdl; do
-      if test "$gb_dir" != "/usr/include"; then
-        if test "$gb_dir" != "/usr/include/"; then
-          SDL_INC="$SDL_INC -I$gb_dir"
-        fi
-      fi
-    done
-
-    if test "x$THREAD_INC" != "x"; then
-      SDL_INC="$SDL_INC $THREAD_INC"
-    fi
-
+    SDL_INC="`$SDL_CONFIG --cflags`"
     if test "$gb_cv_header_sdl" = no; then
       have_inc_sdl="no"
       SDL_INC=""
@@ -10569,16 +10557,7 @@
     SDL_LIB=""
     SDL_PATH=""
 
-    for gb_dir in $gb_cv_lib_sdl; do
-      if test "x$SDL_PATH" = "x"; then
-        SDL_PATH="$gb_dir/.."
-      fi
-      if test "$gb_dir" != "/lib"  && test "$gb_dir" != "/lib/"&& test "$gb_dir" != "/usr/lib" && test "$gb_dir" != "/usr/lib/"; then
-        SDL_LIB="$SDL_LIB -L$gb_dir"
-      fi
-    done
-
-    SDL_LIB="$SDL_LIB $C_LIB $THREAD_LIB -lSDL -lSDL_mixer -lm"
+    SDL_LIB="`$SDL_CONFIG --libs` -lSDL_mixer"
 
   fi
 
@@ -11332,8 +11311,8 @@
 fi
 
 
-CFLAGS="$CFLAGS -pipe -Wall -fno-strict-aliasing"
-CXXFLAGS="$CXXFLAGS -pipe -Wall -fno-exceptions"
+CFLAGS="$CFLAGS -Wall -fno-strict-aliasing"
+CXXFLAGS="$CXXFLAGS -Wall -fno-exceptions"
 
 if test "$gambas_prof" = "yes"; then
   CFLAGS="$CFLAGS -pg"
@@ -11363,8 +11342,8 @@
   CFLAGS="$CFLAGS -Os"
   CXXFLAGS="$CXXFLAGS -Os -fno-omit-frame-pointer"
 else
-  CFLAGS="$CFLAGS -O0"
-  CXXFLAGS="$CXXFLAGS -O0"
+  CFLAGS="$CFLAGS"
+  CXXFLAGS="$CXXFLAGS"
 fi
 
 
