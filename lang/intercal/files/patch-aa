--- Makefile.old	Mon Nov  1 00:56:19 1999
+++ Makefile	Mon Nov  1 00:56:58 1999
@@ -8,14 +8,14 @@
 # all over creation behind your back.
 # (/dev/null may be another good choice :-))
 
-BINDIR = /usr/bin
-INCDIR = /usr/include/intercal
-LIBDIR = /usr/share/intercal
+BINDIR = $(PREFIX)/bin
+INCDIR = $(PREFIX)/share/intercal
+LIBDIR = $(PREFIX)/lib/intercal
 #INCDIR = $(PWD)
 #LIBDIR = $(PWD)
 
 YDEBUG = -vlt
-DEBUG	= -g -DDEBUG
+# DEBUG	= -g -DDEBUG
 # DEBUG = -O
 
 # This version (0.18) is POSIX-compliant.  You should only set the POSIX
@@ -25,18 +25,19 @@
 # POSIX = 
 POSIX = -D_POSIX_SOURCE
 
-CFLAGS = -I. $(DEBUG) -DICKINCLUDEDIR=\"$(INCDIR)\" \
+CFLAGS += -I. $(DEBUG) -DICKINCLUDEDIR=\"$(INCDIR)\" \
 	-DICKLIBDIR=\"$(LIBDIR)\" -DYYDEBUG $(POSIX)
 LDFLAGS =
 
-CC = gcc -Wall -W
+#CC = gcc -Wall -W
 
 # You can use lex or flex
-#LEX = lex
-LEX = flex
+LEX = lex
+#LEX = flex
 
 # You should use bison, because some yaccs won't work correctly
-YACC = bison -y
+#YACC = bison -y
+YACC = yacc
 
 CSOURCES = ick.y lexer.l feh.c lose.c fiddle.c perpetrate.c
 ISOURCES = cesspool.c arrgghh.c ick-wrap.c
@@ -74,14 +75,10 @@
 	-ranlib libick.a
 
 install: all
-	cp ick $(BINDIR)
-	-mkdir $(INCDIR)
-	cp lose.h abcess.h fiddle.h ick-wrap.c $(INCDIR)
-	-mkdir $(LIBDIR)
-	cp libick.a $(LIBDIR)
-	(cd ../pit; cp *.i *.3i  t_tet *.fft glider gun blinkers $(LIBDIR))
-	-mkdir $(LIBDIR)/lib
-	(cd ../pit/lib; cp *.*i $(LIBDIR)/lib) 
+	$(BSD_INSTALL_PROGRAM) ick $(BINDIR)
+	$(BSD_INSTALL_DATA) lose.h abcess.h fiddle.h ick-wrap.c $(INCDIR)
+	$(BSD_INSTALL_DATA) libick.a ../pit/lib/syslib.i ../pit/lib/syslib.?i $(LIBDIR)
+
 
 clean:
 	rm -f yacc.* y.tab.* y.output *~ *.[oa] lexer.c ick.c lextest ick
