--- makefile.orig	2008-07-07 22:39:27.000000000 +0200
+++ makefile	2008-07-17 00:20:55.000000000 +0200
@@ -7,11 +7,11 @@
 # CFLAGS =
 # CFLAGS = -Wall -Wstrict-prototypes -Winline -Wconversion -Wshadow -Wpointer-arith
 # CFLAGS = -O2 -fomit-frame-pointer -Wall -Wstrict-prototypes -Winline -Wconversion -Wshadow -Wpointer-arith
-CFLAGS = -O2 -g -Wall -Wstrict-prototypes -Winline -Wconversion -Wshadow -Wpointer-arith
+CFLAGS = -O2 -g -Wall -Wstrict-prototypes -Winline -Wconversion -Wshadow -Wpointer-arith -I%%LOCALBASE%%/include
 # CFLAGS = -O2 -g -pg -Wall -Wstrict-prototypes -Winline -Wconversion -Wshadow -Wpointer-arith
 # CFLAGS = -O2 -fomit-frame-pointer -funroll-loops -Wall
 # CFLAGS = -O2 -funroll-loops -Wall -pg
-LFLAGS =
+LFLAGS = -L%%LOCALBASE%%/lib
 # LFLAGS = -pg
 # LFLAGS = -pg -lc_p
 # LIBS = /usr/Xlib/libX11.so -lncurses -lm
@@ -80,7 +80,6 @@
 
 hi: $(OBJ) $(COMPILER_LIB) $(COMP_DATA_LIB) $(SEED7_LIB)
 	$(CC) $(LFLAGS) $(OBJ) $(COMPILER_LIB) $(COMP_DATA_LIB) $(SEED7_LIB) $(LIBS) -o hi
-	$(MAKE) ../prg/hi
 	./hi level
 #	cp hi /usr/local/bin/hi
 
@@ -177,16 +176,16 @@
 	$(CC) $(CFLAGS) -c hi.c
 
 depend: a_depend b_depend c_depend version.h
-	$(CC) -M $(SRC) > depend
+	$(CC) -M ${CFLAGS} $(SRC) > depend
 
 a_depend: version.h
-	$(CC) -M $(SEED7_LIB_SRC) > a_depend
+	$(CC) -M ${CFLAGS} $(SEED7_LIB_SRC) > a_depend
 
 b_depend: version.h
-	$(CC) -M $(COMP_DATA_LIB_SRC) > b_depend
+	$(CC) -M ${CFLAGS} $(COMP_DATA_LIB_SRC) > b_depend
 
 c_depend: version.h
-	$(CC) -M $(COMPILER_LIB_SRC) > c_depend
+	$(CC) -M ${CFLAGS} $(COMPILER_LIB_SRC) > c_depend
 
 level.h:
 	hi level
