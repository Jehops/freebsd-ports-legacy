--- Makefile	Fri Sep  1 10:15:37 2000
+++ Makefile.new	Thu Jul 19 16:20:54 2001
@@ -82,7 +82,7 @@
 VERSION = 1.1p
 # The current version number of JGNAT
 
-HOST = ${shell gcc -dumpmachine}
+HOST = ${shell adagcc -dumpmachine}
 # Name of the host computer on which the JGNAT executables were built. When the
 # HOST is Windows NT this variable is set to "nt" and it is overriden below.
 
@@ -238,6 +238,7 @@
 CD    = cd
 CP    = cp -p -f
 ECHO  = echo
+FIND  = find
 MKDIR = mkdir -p
 MV    = mv -f
 PWD   = pwd
@@ -279,13 +280,13 @@
    TOOL_FLAGS = -O2 -gnatgp -gnata
    LIB_FLAGS  = -O  -gnatgp -gnata
    STRIP      = -s
-   JAR        = jar c0f
+   JAR        = $(JAVA_HOME)/bin/jar c0f
 else
    C_FLAGS    = -O
    TOOL_FLAGS = -g -O -gnatgpa
    LIB_FLAGS  = -g -O -gnatgpa
    STRIP      =
-   JAR        = jar c0f
+   JAR        = $(JAVA_HOME)/bin/jar c0f
 endif
 
 #################################
@@ -327,13 +328,13 @@
                           $(EXTRA_LINK_FLAGS)
 # Linker flags used to build the $(GNATMAKE_CUR_LIB) executables
 
-GCC = gcc -c $(C_FLAGS)
+GCC = adagcc -c $(C_FLAGS)
 # C compiler to build the C objects
 
 JGNAT = $(BIN)/jgnat $(LIB_FLAGS)
 # JGNAT compiler to build the Ada part of the JGNAT library
 
-JAVAC = javac -deprecation -classpath $(LIB)$(JDK11_LIB)
+JAVAC = $(JAVA_HOME)/bin/javac -deprecation -classpath $(LIB)$(JDK11_LIB)
 # The Java compiler to build the Java part of the JGNAT library
 
 ###########################################
@@ -412,12 +413,12 @@
 
 clean_bin : check_vars
 	$(CD) $(BIN); $(RM) $(HOST_TOOLS_EXE)
-	$(RM) $(OBJ)/*
-	$(RM) $(OBJS)/*
+	$(RM) -r $(OBJ) && $(MKDIR) $(OBJ)
+	$(RM) -r $(OBJS) && $(MKDIR) $(OBJS)
 
 clean_lib : check_vars
-	$(RM) $(ADALIB)/*
-	$(RM) $(ADAINCLUDE)/*
+	$(RM) -r $(ADALIB) && $(MKDIR) $(ADALIB)
+	$(RM) -r $(ADAINCLUDE) && $(MKDIR) $(ADAINCLUDE)
 	$(RM) $(LIB)/*.jar
 
 ########
@@ -1425,7 +1426,7 @@
 else
 	$(CD) $(LIB); $(JAR) $(JGNAT_JAR) jgnat/adalib/*.class
 endif
-	$(RM) $(ADALIB)/*.class
+	$(FIND) $(ADALIB) -name '*.class' -exec rm {} \;
 
 ###########################################
 # JGNAT Installation: create_install_dirs #
