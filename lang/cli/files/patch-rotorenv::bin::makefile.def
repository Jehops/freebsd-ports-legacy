
$FreeBSD$

--- rotorenv/bin/makefile.def.orig	Tue Jul 30 15:43:31 2002
+++ rotorenv/bin/makefile.def	Tue Jul 30 15:44:42 2002
@@ -340,6 +340,8 @@
 ! else
 !  if "$(TARGETTYPE)" == "DYNLINK"
 TARGETPRE=lib
+DEFAULT_MSC_OPT=$(DEFAULT_MSC_OPT) -fpic -DPIC
+LINKER_FLAGS=$(LINKER_FLAGS) -soname $(TARGETPRE)$(TARGETLIBNAME).$(TARGETEXT)
 !  endif
 ! endif
 !endif
@@ -1421,14 +1423,14 @@
 
 !IFNDEF MSC_WARNING_LEVEL
 !IFDEF PLATFORM_UNIX
-MSC_WARNING_LEVEL=-Wall -Wno-non-virtual-dtor -Wno-non-template-friend
+MSC_WARNING_LEVEL=-Wno-non-virtual-dtor -Wno-non-template-friend -w
 !ELSE
 MSC_WARNING_LEVEL=/W3
 !ENDIF
 !ENDIF
 
 !ifdef PLATFORM_UNIX
-DEFAULT_MSC_OPT=-O2
+DEFAULT_MSC_OPT=$(DEFAULT_MSC_OPT) $(CXXFLAGS)
 !else
 DEFAULT_MSC_OPT = /Oxs
 !endif
@@ -1466,14 +1468,14 @@
 DBGFLAGS=
 !ELSEIF "$(NTDEBUG)" == "ntsdnodbg"
 !if "$(PLATFORM_UNIX)" == "1"
-DBGFLAGS=-g
+DBGFLAGS=
 !else
 DBGFLAGS=/Zi
 !endif
 TARGET_DBG_DEFINES= -DDEVL=1
 !ELSEIF "$(NTDEBUG)" == "ntsd"
 !if "$(PLATFORM_UNIX)" == "1"
-DBGFLAGS=-g
+DBGFLAGS=
 !else
 DBGFLAGS= /Zi
 !endif
