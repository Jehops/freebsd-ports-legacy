--- Makefile.orig	Sun Apr 15 17:56:31 2001
+++ Makefile	Thu May  3 22:43:42 2001
@@ -28,14 +28,14 @@
 #
 # Pick your C++ compiler. 
 #
-CC=g++
+CC?=g++
 #CC=gcc
 
 #
 # Pick your YACC processor
 #
-YACC = bison -y
-# YACC = yacc
+#YACC = bison -y
+YACC = yacc
 
 #
 # Define the FLEX processor
@@ -45,30 +45,30 @@
 
 # Link in any necessary C++ libraries
 #
-# LIBS = -lstdc++
+LIBS = -lstdc++
 
 #
 # Use this to define the default device driver name
 # for serial port connections.
 #
-DEFAULT_SERIAL_NAME = "/dev/ttyS0"
+DEFAULT_SERIAL_NAME = "/dev/cuaa0"
 
 # installation information
-BINDIR=/usr/local/bin
-MANDIR=/usr/local/man/man1
+PREFIX?=/usr/local
+BINDIR=$(PREFIX)/bin
+MANDIR=$(PREFIX)/man/man1
 MANEXT=1
 
 
 # other commands
-LD=$(CC)
-CP=cp -f
-MKDIR=mkdir
-MV=mv -f
-RM=rm -f
+CP?=cp -f
+MKDIR?=mkdir
+MV?=mv -f
+RM?=rm -f
 
 IFLAGS=-Iplatform -Ircxlib -Inqc -Icompiler
 WFLAGS=-Wall -Wstrict-prototypes -Wmissing-prototypes
-CFLAGS = -O6 -pipe $(IFLAGS) $(WFLAGS) -DDEFAULT_SERIAL_NAME='$(DEFAULT_SERIAL_NAME)'
+CFLAGS += $(IFLAGS) $(WFLAGS) -DDEFAULT_SERIAL_NAME='$(DEFAULT_SERIAL_NAME)'
 
 OBJ = $(NQCOBJ) $(COBJ) $(RCXOBJ) $(POBJ)
 
@@ -111,10 +111,10 @@
 	$(MKDIR) bin
 
 bin/nqc : compiler/parse.cpp $(OBJ)
-	$(LD) -o $@ $(OBJ) $(LIBS)
+	$(CC) -o $@ $(OBJ) $(LIBS)
 
 bin/mkdata : mkdata/mkdata.cpp nqc/SRecord.cpp
-	$(LD) -o bin/mkdata -Inqc/ -Iplatform/ mkdata/mkdata.cpp nqc/SRecord.cpp
+	$(CC) -o bin/mkdata -Inqc/ -Iplatform/ mkdata/mkdata.cpp nqc/SRecord.cpp
 
 #
 # clean up stuff
