--- Makefile.orig	Sun Oct 22 11:26:06 2000
+++ Makefile	Thu Nov  9 01:29:29 2000
@@ -28,14 +28,14 @@
 #
 # Pick your C++ compiler. 
 #
-CC=g++
+CC?=g++
 #CC=gcc
 
 #
 # Pick your YACC processor
 #
-YACC = bison -y
-# YACC = yacc
+#YACC = bison -y
+YACC = yacc
 
 #
 # Define the FLEX processor
@@ -47,24 +47,25 @@
 # Use this to define the default device driver name
 # for serial port connections.
 #
-DEFAULT_SERIAL_NAME = "/dev/ttyS0"
+DEFAULT_SERIAL_NAME = "/dev/cuaa0"
 
 # installation information
-BINDIR=/usr/local/bin
-MANDIR=/usr/local/man/man1
+PREFIX?=/usr/local
+BINDIR=$(PREFIX)/bin
+MANDIR=$(PREFIX)/man/man1
 MANEXT=1
 
 
 # other commands
-LD=$(CC)
-CP=cp -f
-MKDIR=mkdir
-MV=mv -f
-RM=rm -f
+LD?=$(LD)
+CP?=cp -f
+MKDIR?=mkdir
+MV?=mv -f
+RM?=rm -f
 
 IFLAGS=-Iplatform -Ircxlib -Inqc -Icompiler
 WFLAGS=-Wall -Wstrict-prototypes -Wmissing-prototypes
-CFLAGS = -O6 -pipe $(IFLAGS) $(WFLAGS) -DDEFAULT_SERIAL_NAME='$(DEFAULT_SERIAL_NAME)'
+CFLAGS += $(IFLAGS) $(WFLAGS) -DDEFAULT_SERIAL_NAME='$(DEFAULT_SERIAL_NAME)'
 
 OBJ = $(NQCOBJ) $(COBJ) $(RCXOBJ) $(POBJ)
 
@@ -106,10 +107,10 @@
 	$(MKDIR) bin
 
 bin/nqc : compiler/parse.cpp $(OBJ)
-	$(LD) -o $@ $(OBJ)
+	$(CC) -o $@ $(OBJ) -lstdc++
 
-bin/mkdata : mkdata/mkdata.cpp nqc/SRecord.cpp
-	$(LD) -o bin/mkdata -Inqc/ -Iplatform/ mkdata/mkdata.cpp nqc/SRecord.cpp
+bin/mkdata : mkdata/mkdata.o nqc/SRecord.o
+	$(CC) -o bin/mkdata mkdata/mkdata.o nqc/SRecord.o -lstdc++
 
 #
 # clean up stuff
