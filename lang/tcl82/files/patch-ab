--- configure.orig	Fri Dec 11 18:36:14 1998
+++ configure	Sat Jan  2 15:04:24 1999
@@ -4330,14 +4330,19 @@
   echo "$ac_t""yes" 1>&6
   
 	    SHLIB_CFLAGS="-fpic"
-	    SHLIB_LD="ld -Bshareable -x"
 	    SHLIB_LD_LIBS=""
 	    SHLIB_SUFFIX=".so"
 	    DL_OBJS="tclLoadDl.o"
 	    DL_LIBS=""
 	    LD_FLAGS=""
 	    LD_SEARCH_FLAGS=""
-	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+        if eval "test \"`echo ${PORTOBJFORMAT}`\" = elf"; then
+            TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1'
+            SHLIB_LD="ld -shared -x -soname \$@"
+        else
+            TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
+            SHLIB_LD="ld -Bshareable -x"
+        fi
 	
 else
   echo "$ac_t""no" 1>&6
