--- configure.orig	Tue Nov 25 10:31:42 1997
+++ configure	Tue Sep 22 13:29:15 1998
@@ -3782,14 +3782,22 @@
   echo "$ac_t""yes" 1>&6
   
 	    SHLIB_CFLAGS="-fpic"
-	    SHLIB_LD="ld -Bshareable -x"
+	    if [ "$PORTOBJFORMAT" = "elf" ]; then
+		SHLIB_LD="ld -shared -x -soname \$@"
+	    else
+		SHLIB_LD="ld -Bshareable -x"
+	    fi
 	    SHLIB_LD_LIBS=""
 	    SHLIB_SUFFIX=".so"
 	    DL_OBJS="tclLoadDl.o"
 	    DL_LIBS=""
 	    LD_FLAGS=""
 	    LD_SEARCH_FLAGS=""
-	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
+	    if [ "$PORTOBJFORMAT" = "elf" ]; then
+		TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1'
+	    else
+		TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.2'
+	    fi
 	
 else
   echo "$ac_t""no" 1>&6
