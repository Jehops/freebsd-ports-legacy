--- src/Makefile.orig	Wed Jan 29 12:37:54 1997
+++ src/Makefile	Wed Jun  4 11:02:44 2003
@@ -10,13 +10,13 @@
 COMPILER  = wamcc
 INCPATH   = `pwd`
 LIBPATH   = `pwd`
-CC        = gcc
+CC        ?= gcc
 WCC       = w_$(CC)
 
 
 # other local variables
 
-CFLAGS    = -O2
+#CFLAGS    = -O2
 CFLAGINLIN= -finline-functions
 LFLAGS    =
 BMF       = bmf_$(COMPILER)
@@ -49,22 +49,22 @@
 
 
 machine.o: machine.h archi.h wam_engine.h machine.c
-	$(WCC) $(CFLAGS) -c machine.c
+	./$(WCC) $(CFLAGS) -c machine.c
 
 wam_engine.o: machine.h archi.h wam_engine.h atom_pred.h wam_engine.c 
-	$(WCC) $(CFLAGS) -c wam_engine.c
+	./$(WCC) $(CFLAGS) -c wam_engine.c
 
 wam_engine_pp.o: machine.h archi.h wam_engine.h atom_pred.h wam_engine.c
-	$(WCC) $(CFLAGS) -DWAM_PROFILE -c -o wam_engine_pp.o wam_engine.c
+	./$(WCC) $(CFLAGS) -DWAM_PROFILE -c -o wam_engine_pp.o wam_engine.c
 
 atom_pred.o: machine.h archi.h wam_engine.h atom_pred.h atom_pred.c
-	$(WCC) $(CFLAGS) -c atom_pred.c
+	./$(WCC) $(CFLAGS) -c atom_pred.c
 
 debugger.o: machine.h archi.h wam_engine.h atom_pred.h debugger.c
-	$(WCC) $(CFLAGS) -c debugger.c
+	./$(WCC) $(CFLAGS) -c debugger.c
 
 hash.o: machine.h hash.c
-	$(WCC) $(CFLAGS) -c hash.c
+	./$(WCC) $(CFLAGS) -c hash.c
 
 
 
@@ -79,7 +79,7 @@
 
 
 $(WCC): configure archi.def
-	configure
+	./configure
 	chmod a+x $(WCC)
 
 $(BMF): bmf.c
@@ -95,8 +95,8 @@
 	$(CC) $(CFLAGS) $(LFLAGS) -o pl2hex pl2hex.c
 
 $(COMPILER):
-	$(WCC) $(CFLAGS) -c wamcc*.c
-	$(WCC) $(CFLAGS) $(LFLAGS) -s -o $(COMPILER) wamcc*.o -l$(COMPILER)
+	./$(WCC) $(CFLAGS) -c wamcc*.c
+	./$(WCC) $(CFLAGS) $(LFLAGS) -s -o $(COMPILER) wamcc*.o -l$(COMPILER)
 
 
 
