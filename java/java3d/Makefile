# New ports collection makefile for:	java3d
# Date created:				2003/12/19
# Whom:					nork@FreeBSD.org
#
# $FreeBSD$
#

PORTNAME=	java3d
PORTVERSION=	1.5.2
PORTREVISION=	1
CATEGORIES=	java graphics games devel
MASTER_SITES=	https://sites.google.com/site/daemonwizard/
DISTNAME=	java3d-${PORTVERSION}

MAINTAINER=	ports@FreeBSD.org
COMMENT=	Provides API for creating and manipulation of 3D geometry

USE_BZIP2=	yes
FETCH_ARGS=	-Fpr

USE_JAVA=	yes
USE_GL=		gl
USE_XORG=	xt
JAVA_VERSION=	1.5+
JAVA_VENDOR=	freebsd bsdjava openjdk
USE_ANT=	yes

PLIST_SUB+=	JAVA_HOME=${JAVA_HOME:S/^${PREFIX}\///} ARCH=${ARCH}

DOCSSRC=	${WRKSRC}/j3d-core/build/freebsd/javadocs/docs-public
PORTDOCS=	*

.include <bsd.port.options.mk>

do-build:
	cd ${WRKSRC}/vecmath && ${ANT} dist
	cd ${WRKSRC}/j3d-core && ${ANT} -Dbuild.type=fcs -Dis${OPSYS}=yes -Dports.localbase=${LOCALBASE} jar-opt
.if ${PORT_OPTIONS:MDOCS}
	cd ${WRKSRC}/j3d-core && ${ANT} -Dbuild.type=fcs -Dis${OPSYS}=yes docs-public
.endif

do-install:
	${INSTALL_DATA} \
		${WRKSRC}/vecmath/dist/lib/ext/vecmath.jar \
		${WRKSRC}/j3d-core/build/default/opt/lib/ext/j3dcore.jar \
		${WRKSRC}/j3d-core/build/default/opt/lib/ext/j3dutils.jar \
		${JAVA_HOME}/jre/lib/ext
	${INSTALL} \
		${WRKSRC}/j3d-core/build/default/opt/native/libj3dcore-ogl.so \
		${JAVA_HOME}/jre/lib/${ARCH}

post-install:
.if ${PORT_OPTIONS:MDOCS}
	${MKDIR} ${DOCSDIR}
	cd ${DOCSSRC} && ${COPYTREE_SHARE} \* ${DOCSDIR}
.endif

.include <bsd.port.mk>
