--- assemble.org.eclipse.sdk.freebsd.gtk.x86.xml.orig	2008-03-08 12:58:43.000000000 +0900
+++ assemble.org.eclipse.sdk.freebsd.gtk.x86.xml	2008-03-08 13:35:32.000000000 +0900
@@ -11,6 +11,9 @@
 	<property name="eclipse.features" value="${eclipse.base}/features"/>
 	<property name="archiveFullPath" value="${basedir}/${buildLabel}/${archiveName}"/>
 	<property name="tarargs" value=""/>
+	<condition property="jdk16">
+		<isset property="JavaSE-1.6"/>
+	</condition>
 	<!-- Beginning of the jarUp task -->
 	<target name="jarUp" description="Create a jar from the given location.">
 		<available property="${source}/${elementName}_exists" file="${source}/${elementName}"/>
@@ -50,9 +53,6 @@
 		<ant antfile="build.xml" dir="plugins/org.eclipse.pde.ui.templates" target="gather.bin.parts">
 			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
 		</ant>
-		<ant antfile="build.xml" dir="plugins/org.eclipse.jdt.compiler.tool" target="gather.bin.parts">
-			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
-		</ant>
 		<ant antfile="build.xml" dir="plugins/org.junit4" target="gather.bin.parts">
 			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
 		</ant>
@@ -134,9 +134,6 @@
 		<ant antfile="build.xml" dir="plugins/org.eclipse.core.runtime" target="gather.bin.parts">
 			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
 		</ant>
-		<ant antfile="build.xml" dir="plugins/org.eclipse.jdt.compiler.apt" target="gather.bin.parts">
-			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
-		</ant>
 		<ant antfile="build.xml" dir="plugins/org.eclipse.equinox.app" target="gather.bin.parts">
 			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
 		</ant>
@@ -146,9 +143,6 @@
 		<ant antfile="build.xml" dir="plugins/org.eclipse.team.cvs.ui" target="gather.bin.parts">
 			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
 		</ant>
-		<ant antfile="build.xml" dir="plugins/org.eclipse.jdt.apt.pluggable.core" target="gather.bin.parts">
-			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
-		</ant>
 		<ant antfile="build.xml" dir="plugins/org.eclipse.ui.intro.universal" target="gather.bin.parts">
 			<property name="destination.temp.folder" value="${eclipse.plugins}"/>
 		</ant>
@@ -474,10 +468,6 @@
 		</antcall>
 		<antcall target="jarUp">
 			<param name="source" value="${eclipse.plugins}"/>
-			<param name="elementName" value="org.eclipse.jdt.compiler.tool_1.0.1.v_793_R33x"/>
-		</antcall>
-		<antcall target="jarUp">
-			<param name="source" value="${eclipse.plugins}"/>
 			<param name="elementName" value="org.eclipse.swt.gtk.freebsd.x86_3.3.2.v3349"/>
 		</antcall>
 		<antcall target="jarUp">
@@ -574,10 +564,6 @@
 		</antcall>
 		<antcall target="jarUp">
 			<param name="source" value="${eclipse.plugins}"/>
-			<param name="elementName" value="org.eclipse.jdt.compiler.apt_1.0.1.R33x_v20071002-2100"/>
-		</antcall>
-		<antcall target="jarUp">
-			<param name="source" value="${eclipse.plugins}"/>
 			<param name="elementName" value="org.eclipse.equinox.app_1.0.1.R33x_v20070828"/>
 		</antcall>
 		<antcall target="jarUp">
@@ -590,10 +576,6 @@
 		</antcall>
 		<antcall target="jarUp">
 			<param name="source" value="${eclipse.plugins}"/>
-			<param name="elementName" value="org.eclipse.jdt.apt.pluggable.core_1.0.1.R33x_v20071002-2100"/>
-		</antcall>
-		<antcall target="jarUp">
-			<param name="source" value="${eclipse.plugins}"/>
 			<param name="elementName" value="org.eclipse.jdt.junit.runtime_3.3.0.v20070606-0010"/>
 		</antcall>
 		<antcall target="jarUp">
@@ -892,6 +874,9 @@
 			<param name="source" value="${eclipse.plugins}"/>
 			<param name="elementName" value="org.eclipse.team.core_3.3.1.r33x_20080128"/>
 		</antcall>
+
+		<antcall target="main.jdk16" inheritAll="true"/>
+
 		<eclipse.brand root="${eclipse.base}/freebsd.gtk.x86/${collectingFolder}" icons="${launcherIcons}" name="${launcherName}" os="${os}"		/>
 		<exec executable="cp" dir="${basedir}">
 			<arg line="-r &apos;${assemblyTempDir}/${collectingFolder}/freebsd.gtk.x86/${collectingFolder}&apos; &apos;${assemblyTempDir}&apos;"/>
@@ -909,6 +894,31 @@
 		</exec>
 		<delete dir="${assemblyTempDir}"/>
 	</target>
+
+	<target name="main.jdk16" if="jdk16">
+		<ant antfile="build.xml" dir="plugins/org.eclipse.jdt.apt.pluggable.core" target="gather.bin.parts">
+			<property name="destination.temp.folder" value="${eclipse.plugins}" />
+		</ant>
+		<ant antfile="build.xml" dir="plugins/org.eclipse.jdt.compiler.tool" target="gather.bin.parts">
+			<property name="destination.temp.folder" value="${eclipse.plugins}" />
+		</ant>
+		<ant antfile="build.xml" dir="plugins/org.eclipse.jdt.compiler.apt" target="gather.bin.parts">
+			<property name="destination.temp.folder" value="${eclipse.plugins}" />
+		</ant>
+		<antcall target="jarUp">
+			<param name="source" value="${eclipse.plugins}" />
+			<param name="elementName" value="org.eclipse.jdt.apt.pluggable.core_1.0.1.R33x_v20071002-2100" />
+		</antcall>
+		<antcall target="jarUp">
+			<param name="source" value="${eclipse.plugins}" />
+			<param name="elementName" value="org.eclipse.jdt.compiler.apt_1.0.1.R33x_v20071002-2100" />
+		</antcall>
+		<antcall target="jarUp">
+			<param name="source" value="${eclipse.plugins}" />
+			<param name="elementName" value="org.eclipse.jdt.compiler.tool_1.0.1.v_793_R33x" />
+		</antcall>
+	</target>
+
 	<target name="gzipResults" unless="runPackager">
 		<move file="${archiveFullPath}" tofile="${assemblyTempDir}/${collectingFolder}/tmp.tar"/>
 		<gzip src="${assemblyTempDir}/${collectingFolder}/tmp.tar" zipfile="${archiveFullPath}"/>
