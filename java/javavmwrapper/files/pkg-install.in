#!/bin/sh
#
# $FreeBSD: /tmp/pcvs/ports/java/javavmwrapper/files/pkg-install.in,v 1.2 2005-04-11 21:21:16 glewis Exp $

LOCALBASE=%%LOCALBASE%%

# This script runs during post-install
if [ "x${2}" != "xPOST-INSTALL" ]; then
    exit 0
fi

# Ensure all JDKs and JREs are installed
for jvm in "${LOCALBASE}"/*jdk* "${LOCALBASE}"/*jre*; do
    if [ -x "${jvm}/bin/java" ]; then
        "${PKG_PREFIX}"/bin/registervm "${jvm}/bin/java" > /dev/null 2>&1
    fi
done

# Ensure all VMs are configured correctly
"${PKG_PREFIX}"/bin/checkvms
