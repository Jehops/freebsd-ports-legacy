--- plugins/org.eclipse.swt.gtk.freebsd.amd64/build.xml.orig	2007-11-19 13:18:37.000000000 +0900
+++ plugins/org.eclipse.swt.gtk.freebsd.amd64/build.xml	2007-11-19 15:06:14.000000000 +0900
@@ -44,14 +44,14 @@
 	</target>
 
 	<target name="build.update.jar" depends="init">
-		<delete dir="${temp.folder}"/>
+		<!-- <delete dir="${temp.folder}"/>  
 		<mkdir dir="${temp.folder}"/>
 		<antcall target="build.jars"/>
 		<antcall target="gather.bin.parts">
 			<param name="destination.temp.folder" value="${temp.folder}/"/>
 		</antcall>
 		<zip zipfile="${plugin.destination}/${full.name}.jar" basedir="${temp.folder}/${full.name}" filesonly="false"/>
-		<delete dir="${temp.folder}"/>
+		<delete dir="${temp.folder}"/> -->
 	</target>
 
 	<target name="@dot" depends="init" unless="@dot" description="Create jar: @dot.">
@@ -232,6 +232,8 @@
 	<target name="build.cfiles" depends="build.jars">
 		<!-- generate the C code from the (64 bit) SWT PI java classes -->
 		<!-- assumes the swt.jar has already been built  -->
+		<ant antfile="build.xml" dir="${toolsplugindir}" inheritAll="false" target="build.jars" />
+ 		<!-- assumes the swttools.jar has already been built  -->
 		<java classname="org.eclipse.swt.tools.internal.JNIGeneratorApp" classpath="${toolsplugindir}/bin:${toolsplugindir}/swttools.jar:${basedir}/swt.jar"><arg value="org.eclipse.swt.internal.C"/><arg value="${basedir}/src/Eclipse SWT PI/common/library/"/><arg value="${build.result.folder}/swt.jar"/></java>
 		<java classname="org.eclipse.swt.tools.internal.JNIGeneratorApp" classpath="${toolsplugindir}/bin:${toolsplugindir}/swttools.jar:${basedir}/swt.jar"><arg value="org.eclipse.swt.internal.gtk.OS"/><arg value="${basedir}/src/Eclipse SWT PI/gtk/library/"/><arg value="${build.result.folder}/swt.jar"/></java>
 		<java classname="org.eclipse.swt.tools.internal.JNIGeneratorApp" classpath="${toolsplugindir}/bin:${toolsplugindir}/swttools.jar:${basedir}/swt.jar"><arg value="org.eclipse.swt.internal.accessibility.gtk.ATK"/><arg value="${basedir}/src/Eclipse SWT PI/gtk/library/"/><arg value="${build.result.folder}/swt.jar"/></java>
@@ -345,6 +347,8 @@
 		<delete file="${plugin.destination}/${full.name}.jar"/>
 		<delete file="${plugin.destination}/${full.name}.zip"/>
 		<delete dir="${temp.folder}"/>
+		<!-- delete swttools.jar so that it will be compiled in the build.jars target -->
+		<ant antfile="build.xml" dir="${toolsplugindir}" inheritAll="false" target="clean" />
 	</target>
 
 	<target name="refresh" depends="init" if="eclipse.running">
