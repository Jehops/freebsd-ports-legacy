--- Makefile.orig	2011-04-12 11:25:25.000000000 +0200
+++ Makefile	2011-04-12 11:34:56.000000000 +0200
@@ -3,12 +3,11 @@
 SRC=mcwm.c list.c config.h events.h list.h
 DISTFILES=LICENSE Makefile NEWS README TODO WISHLIST mcwm.man $(SRC)
 
-CC=gcc
-CFLAGS=-g -std=c99 -Wall -Wextra -O2 -I/usr/local/include #-DDEBUG #-DDMALLOC
-LDFLAGS=-L/usr/local/lib -lxcb -lxcb-keysyms -lxcb-icccm -lxcb-atom #-ldmalloc
+CFLAGS+=-g -std=c99 -Wall -Wextra -O2 -I/usr/local/include 
+LDFLAGS+=-L/usr/local/lib -lxcb -lxcb-keysyms -lxcb-icccm -lxcb-atom 
 
 RM=/bin/rm
-PREFIX=/usr/local
+PREFIX?=/usr/local
 
 TARGETS=mcwm
 OBJS=mcwm.o list.o
@@ -27,12 +26,13 @@
 list.o: list.c list.h Makefile
 
 install: $(TARGETS)
-	install -m 755 mcwm $(PREFIX)/bin
-	install -m 644 mcwm.man $(PREFIX)/man/man1/mcwm.1
+	install -m 755 mcwm ${DESTDIR}$(PREFIX)/bin
+	@echo installing manual page to ${DESTDIR}${MANPREFIX}/man/man1
+	@mkdir -p ${DESTDIR}${MANPREFIX}/man/man1
+	install -m 644 mcwm.man ${DESTDIR}$(MANPREFIX)/man/man1/mcwm.1
 
 deinstall:
-	$(RM) $(PREFIX)/bin/mcwm
-	$(RM) $(PREFIX)/man/man1/mcwm.1
+	$(RM) ${DESTDIR}$(PREFIX)/bin/mcwm
 
 $(DIST).tar.bz2:
 	mkdir $(DIST)
