
$FreeBSD$

--- Makefile.orig	Thu Jun  7 00:44:43 2001
+++ Makefile	Fri Jun  8 11:19:26 2001
@@ -1,13 +1,13 @@
-CC        = gcc
-CFLAGS    = -g -O2 -Wall
-XROOT     = /usr/X11R6
+CC        ?= gcc
+CFLAGS    ?= -g -O2 -Wall
+XROOT     = $(X11BASE)
 INCLUDES  = -I$(XROOT)/include
 LIBS      = -lX11 -lXext -lXpm #-lXinerama
 LDPATH    = -L$(XROOT)/lib
 
 PROG      = oroborus
 VERSION   = 1.13.0
-PREFIX    = /usr
+PREFIX    ?= /usr
 FONT      = *-helvetica-bold-r-normal-*-*-120-*
 THEME     = default
 INTERVAL  = 1
@@ -38,12 +38,17 @@
 	rm -f $(PROG) $(OBJS) core
 
 install:all
-	install $(PROG) $(PREFIX)/bin
-	install -d $(PREFIX)/share/$(PROG)
-	install -d $(PREFIX)/doc/$(PROG)-$(VERSION)
-	./install_rc $(PREFIX) $(PROG) $(THEME) $(FONT) $(INTERVAL) > $(PREFIX)/share/$(PROG)/oroborusrc
-	cp -R themes $(PREFIX)/share/$(PROG)
-	cp -R doc $(PREFIX)/doc/$(PROG)-$(VERSION)
+	$(BSD_INSTALL_PROGRAM) $(PROG) $(PREFIX)/bin
+	$(MKDIR) $(PREFIX)/share/$(PROG)
+	$(MKDIR) $(PREFIX)/share/doc/$(PROG)
+	./install_rc $(PREFIX) $(PROG) $(THEME) $(FONT) $(INTERVAL) > oroborusrc
+	$(BSD_INSTALL_DATA) oroborusrc $(PREFIX)/share/$(PROG)
+	for dir in agua default defold mac next win95; do \
+		$(MKDIR) $(PREFIX)/share/$(PROG)/themes/$$dir; \
+		$(BSD_INSTALL_DATA) themes/$$dir/[^.]* \
+			$(PREFIX)/share/$(PROG)/themes/$$dir; \
+	done
+	$(BSD_INSTALL_MAN) doc/* $(PREFIX)/share/doc/$(PROG)
 
 uninstall:
 	rm -f $(PREFIX)/bin/$(PROG)
