--- src/Makefile.orig	Mon Dec 18 14:44:48 2000
+++ src/Makefile	Sat Dec 30 02:44:49 2000
@@ -8,7 +8,7 @@
 ####
 # Location of config file (for example /etc/upclient.conf)
 #
-CONFIGFILE = upclient.conf
+CONFIGFILE = $(PREFIX)/etc/upclient.conf
 
 
 ####
@@ -41,7 +41,7 @@
 
 bsd:
 	$(MAKE) CC=gcc \
-		LDFLAGS= \
+		LDFLAGS="-lkvm" \
 		OBJECTS='stats-bsd.c $(STDOPTS)' \
 		CFLAGS='-DPLATFORM_BSD -DCONFIGFILE=\"$(CONFIGFILE)\"' \
 		upclient
@@ -88,7 +88,7 @@
 		CFLAGS='-DPLATFORM_WINNT -DCONFIGFILE=\"$(CONFIGFILE)\"' \
 		upclient
 
-upclient: upclient.h
+upclient: upclient.h $(OBJECTS)
 	$(CC) $(CFLAGS) $(LDFLAGS) $(OBJECTS) upclient.c -o $(BINNAME)
 
 clean:
