--- server.c.orig	Sat Oct  6 11:37:14 2001
+++ server.c	Fri Nov  2 15:51:10 2001
@@ -110,11 +110,13 @@
 UChar		*storefile = NULL;
 UChar		*vardir = NULL;
 UChar		*bindir = NULL;
+UChar		*libexecdir = NULL;
 UChar		*libdir = NULL;
 UChar		*confdir = NULL;
 
 ReplSpec	replacements[] = {
 	{ "%B",	NULL, &bindir },
+	{ "%E",	NULL, &libexecdir },
 	{ "%L",	NULL, &libdir },
 	{ "%V",	NULL, &vardir },
 	{ "%C", NULL, &confdir },
@@ -851,6 +853,8 @@
     confdir = strdup(DEFSERVCONFDIR);
   if(!bindir)
     bindir = strdup(DEFSERVBINDIR);
+  if(!libexecdir)
+    libexecdir = strdup(DEFSERVLIBEXECDIR);
 #else
   if(!vardir)
     vardir = strapp(backuphome, FN_DIRSEPSTR "var");
@@ -860,6 +864,8 @@
     libdir = strdup(confdir);
   if(!bindir)
     bindir = strapp(backuphome, FN_DIRSEPSTR "bin");
+  if(!libexecdir)
+    libexecdir = strapp(backuphome, FN_DIRSEPSTR "libexec/afbackup");
 #endif
 
   if(!g_lock.lockfile){
