--- server.c.orig	Thu Aug 23 12:54:50 2001
+++ server.c	Thu Sep 13 18:52:58 2001
@@ -103,11 +103,13 @@
 UChar		*storefile = NULL;
 UChar		*vardir = NULL;
 UChar		*bindir = NULL;
+UChar		*libexecdir = NULL;
 UChar		*libdir = NULL;
 UChar		*confdir = NULL;
 
 ReplSpec	replacements[] = {
 	{ "%B",	NULL, &bindir },
+	{ "%E",	NULL, &libexecdir },
 	{ "%L",	NULL, &libdir },
 	{ "%V",	NULL, &vardir },
 	{ "%C", NULL, &confdir },
@@ -835,6 +837,8 @@
     confdir = strdup(DEFSERVCONFDIR);
   if(!bindir)
     bindir = strdup(DEFSERVBINDIR);
+  if(!libexecdir)
+    libexecdir = strdup(DEFSERVLIBEXECDIR);
 #else
   if(!vardir)
     vardir = strapp(backuphome, FN_DIRSEPSTR "var");
@@ -844,6 +848,8 @@
     libdir = strdup(confdir);
   if(!bindir)
     bindir = strapp(backuphome, FN_DIRSEPSTR "bin");
+  if(!libexecdir)
+    libexecdir = strapp(backuphome, FN_DIRSEPSTR "libexec/afbackup");
 #endif
 
   if(!g_lock.lockfile){
