--- mserver.c.orig	Fri Oct  5 16:12:58 2001
+++ mserver.c	Fri Nov  2 15:51:10 2001
@@ -122,11 +122,13 @@
 
 UChar		*vardir = NULL;
 UChar		*bindir = NULL;
+UChar		*libexecdir = NULL;
 UChar		*libdir = NULL;
 UChar		*confdir = NULL;
 
 ReplSpec	replacements[] = {
 	{ "%B",	NULL, &bindir },
+	{ "%E", NULL, &libexecdir },
 	{ "%L",	NULL, &libdir },
 	{ "%V",	NULL, &vardir },
 	{ "%C", NULL, &confdir },
@@ -2068,6 +2070,8 @@
     confdir = strdup(DEFSERVCONFDIR);
   if(!bindir)
     bindir = strdup(DEFSERVBINDIR);
+  if(!libexecdir)
+    libexecdir = strdup(DEFSERVLIBEXECDIR);
 #else
   if(!vardir)
     vardir = strapp(backuphome, FN_DIRSEPSTR "var");
@@ -2077,6 +2081,8 @@
     libdir = strdup(confdir);
   if(!bindir)
     bindir = strapp(backuphome, FN_DIRSEPSTR "bin");
+  if(!libexecdir)
+    libexecdir = strapp(backuphome, FN_DIRSEPSTR "libexec/afbackup");
 #endif
 
   if(cryptfile)
