#! /bin/sh
#
# Called in place of mkmodules to take care of files mkmodules doesn't know.
#
# $Id: updateCVSROOT,v 1.6 1995/11/27 07:48:19 peter Exp $

PATH=$PATH:/bin:/usr/bin:/usr/sbin:/sbin:/usr/local/bin
export PATH

FILELIST="avail mkavail commitcheck cvs_acls.pl commit_prep.pl log_accum.pl"
FILELIST="${FILELIST} cvsedit edithook updateCVSROOT"

cd $1

for i in $FILELIST
do 
  find $i,v -newer $i -exec echo Updating CVSROOT/$i \; -exec co -q -u $i \;
done

find avail,v -newer cvs-committers -exec ./mkavail \;
cmp -s cvs-committers /home/mail/cvs-committers || {
  echo "====== checking cvs-committers mailing list members ======"
  echo "/home/mail/cvs-committers is different to \$CVSROOT/cvs-committers"
  echo "please check to see what needs to be updated..."
}

exec mkmodules $1
