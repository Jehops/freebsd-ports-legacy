--- Makefile.orig	Wed Jun 27 16:48:03 2001
+++ Makefile	Sun Aug  5 23:39:13 2001
@@ -12,11 +12,20 @@
 ifdef DEBUG
 CFLAGS = -DDEBUG -g
 else
-CFLAGS = -O3
+endif
+
+ifndef GETOPTLONG
+CFLAGS += -DNOGETOPTLONG
 endif
 
 .SUFFIXES: .po .mo
 
+# determine host OS type
+HOSTTYPE=$(shell uname)
+ifeq ($(HOSTTYPE),Darwin)
+CFLAGS += -DDARWIN
+endif
+
 ### Add your translation here..
 MOFILES = nl.mo de.mo
 
@@ -32,8 +41,12 @@
 endif
 
 ifdef THREADS
+ifeq ($(HOSTTYPE),FreeBSD)
+LFLAGS += -pthread
+else
 LFLAGS += -lpthread
 endif
+endif
 
 clean:
 	rm -f *.o axel *.mo config.h
@@ -68,7 +81,7 @@
 	rm -f $(BINDIR)/axel
 
 config.h: Makefile.settings
-	make clean
+	$(MAKE) clean
 	@echo '/* Generated by Makefile, do not edit! */' > config.h
 	@echo '/* Edit Makefile.settings instead */' >> config.h
 	@echo >> config.h
