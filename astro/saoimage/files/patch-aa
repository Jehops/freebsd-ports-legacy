*** makefile.FreeBSD.orig	Sun Jan  3 17:42:56 1999
--- makefile.FreeBSD	Sun Jan  3 18:15:02 1999
***************
*** 1,5 ****
  #
! # makefile.sun for SAOimage	# Sun workstations using SunOS 4.* and MIT Xlib
  #
  # To build:
  #	% make (or `make all')	# build libs/program as necessary
--- 1,5 ----
  #
! # makefile.FreeBSD for SAOimage	# x86 workstations using FreeBSD and MIT Xlib
  #
  # To build:
  #	% make (or `make all')	# build libs/program as necessary
***************
*** 36,44 ****
  # FBCONFIG_2, which is set to the value of IMTOOLRC in the definition of
  # the CFLAGS macro below.)
  
! SAOBINDIR = $(ROOT)/usr/local/bin/
! SAOMANDIR = $(ROOT)/usr/man/manl/
! IMTRCDIR  = $(ROOT)/usr/local/lib/
  
  IMTOOLRC  = $(IMTRCDIR)imtoolrc
  FIFO_I    = $(ROOT)/dev/imt1i
--- 36,44 ----
  # FBCONFIG_2, which is set to the value of IMTOOLRC in the definition of
  # the CFLAGS macro below.)
  
! SAOBINDIR = $(ROOT)$(PREFIX)/bin/
! SAOMANDIR = $(ROOT)$(PREFIX)/man/manl/
! IMTRCDIR  = $(ROOT)$(PREFIX)/lib/
  
  IMTOOLRC  = $(IMTRCDIR)imtoolrc
  FIFO_I    = $(ROOT)/dev/imt1i
***************
*** 46,52 ****
  FIFO_LN   = $(ROOT)/dev/imt1
  
  # Compiler specification.
! CC = cc
  # Uncomment these two lines to compile with gcc (add any optimizers you wish).
  #CC = gcc -finline-functions -fdelayed-branch -fstrength-reduce
  #  Delayed branches could win big on RISC: many inner loops have branches
--- 46,52 ----
  FIFO_LN   = $(ROOT)/dev/imt1
  
  # Compiler specification.
! #CC = cc
  # Uncomment these two lines to compile with gcc (add any optimizers you wish).
  #CC = gcc -finline-functions -fdelayed-branch -fstrength-reduce
  #  Delayed branches could win big on RISC: many inner loops have branches
***************
*** 62,86 ****
  # fired up on a system where the fifos are absent.  Other than this, the
  # standalone operation is unhindered.
  
! IFLAGS = -DFITS -DOIF -DIMTOOL
  
  # MFLAGS: machine or library specific code.
  #   -DSUN - SunOS temp file name, IEEE floating point debug, and Sun keyboard
  #   -DLSB - byte swap for FITS (VAX and DECstations)
  #   -DSYSV - substitutes for getdtablesize() and setrlimit() not widely known
  #   -DPSCRIPT - hard copy output to a PostScript printer (else no hardcopy)
  
! MFLAGS = -DSUN -DPSCRIPT -DQUIT
  
  # OFLAGS: compiler optimization/debug options.
  
! OFLAGS = -g -DDEBUG
! #OFLAGS = -O
  
  # ADFLAGS: architecture-dependent floating point flags, etc.
  
  #ADFLAGS = -I/usr/openwin/share/include	# ATTENTION: OpenWindows users...
! ADFLAGS =
  
  # Libraries that move about or may require special specification.
  #
--- 62,90 ----
  # fired up on a system where the fifos are absent.  Other than this, the
  # standalone operation is unhindered.
  
! IFLAGS = -DFITS -DOIF #-DIMTOOL
  
  # MFLAGS: machine or library specific code.
  #   -DSUN - SunOS temp file name, IEEE floating point debug, and Sun keyboard
  #   -DLSB - byte swap for FITS (VAX and DECstations)
  #   -DSYSV - substitutes for getdtablesize() and setrlimit() not widely known
  #   -DPSCRIPT - hard copy output to a PostScript printer (else no hardcopy)
+ #   -DMIRIAD - extras
  
! MFLAGS = -DLSB -DSUN -DPSCRIPT -DQUIT
! .if ${MACHINE_ARCH} == "alpha"
! MFLAGS += -DLONG64
! .endif
  
  # OFLAGS: compiler optimization/debug options.
  
! #OFLAGS = -g -DDEBUG
! #OFLAGS = -O2 -m486 -pipe
  
  # ADFLAGS: architecture-dependent floating point flags, etc.
  
  #ADFLAGS = -I/usr/openwin/share/include	# ATTENTION: OpenWindows users...
! ADFLAGS = -I$(X11BASE)/include
  
  # Libraries that move about or may require special specification.
  #
***************
*** 88,110 ****
  # usual link search path, i.e., it is not in /usr/lib, it may be necessary
  # to specify its path fully in XLIB.
  
! XLIB = -lX11
! #XLIB = -L/usr/openwin/lib -lX11	# ATTENTION: OpenWindows users...
  #F77LIB = -lF77 -lI77 -lU77
  #LDFLAGS = -Bstatic
  
  # END OF INSTALLATION DEPENDENT SETUP. ========================================
  # It should not be necessary to edit anything below this line.
  
! ARCH   = sun
  LINT   = lint -b
! MKNOD  = /etc/mknod
  MV     = mv -f
  RANLIB = ranlib
  RM     = rm -f
  SHELL  = /bin/sh
  
! CFLAGS = $(OFLAGS) $(ADFLAGS) $(MFLAGS) $(IFLAGS) -DFBCONFIG_2=\"$(IMTOOLRC)\"
  
  # SAOimage libraries that live in subdirectories with their own makefiles.
  # This definition must be kept in correspondence with the DEPLIBS target.
--- 92,115 ----
  # usual link search path, i.e., it is not in /usr/lib, it may be necessary
  # to specify its path fully in XLIB.
  
! XLIB = -L$(X11BASE)/lib -lX11
! #XLIB = -L/usr/X11R6/lib -lX11	# ATTENTION: OpenWindows users...
  #F77LIB = -lF77 -lI77 -lU77
+ F77LIB = -lf2c
  #LDFLAGS = -Bstatic
  
  # END OF INSTALLATION DEPENDENT SETUP. ========================================
  # It should not be necessary to edit anything below this line.
  
! ARCH   = FreeBSD
  LINT   = lint -b
! MKNOD  = /sbin/mknod
  MV     = mv -f
  RANLIB = ranlib
  RM     = rm -f
  SHELL  = /bin/sh
  
! CFLAGS += $(ADFLAGS) $(MFLAGS) $(IFLAGS) -DFBCONFIG_2=\"$(IMTOOLRC)\"
  
  # SAOimage libraries that live in subdirectories with their own makefiles.
  # This definition must be kept in correspondence with the DEPLIBS target.
***************
*** 306,312 ****
  	$(MAKE) ARCFILE=$(TAPEDEV) tar
  
  
! XLIBH = /usr/include/X11/Xlib.h /usr/include/X11/Xutil.h
  STRUCT = hfiles/struct.h hfiles/buffer.h hfiles/color.h hfiles/control.h \
  	 hfiles/coord.h hfiles/cursor.h hfiles/image.h hfiles/window.h
  WORKS = $(XLIBH) $(STRUCT) hfiles/constant.h hfiles/extern.h hfiles/wcs.h
--- 311,317 ----
  	$(MAKE) ARCFILE=$(TAPEDEV) tar
  
  
! XLIBH = /usr/X11R6/include/X11/Xlib.h /usr/X11R6/include/X11/Xutil.h
  STRUCT = hfiles/struct.h hfiles/buffer.h hfiles/color.h hfiles/control.h \
  	 hfiles/coord.h hfiles/cursor.h hfiles/image.h hfiles/window.h
  WORKS = $(XLIBH) $(STRUCT) hfiles/constant.h hfiles/extern.h hfiles/wcs.h
***************
*** 415,422 ****
  		defs/dispbox.def defs/magnibox.def defs/panbox.def \
  		defs/btnbox.def defs/colorbox.def defs/graphbox.def \
  		defs/desktop.def defs/cursor.def
! mainkey.o	: $(WORKS) /usr/include/X11/keysym.h \
! 		/usr/include/X11/keysymdef.h
  mainslct.o	: $(WORKS)
  mainutil.o	: $(XLIBH) $(STRUCT) hfiles/extern.h
  menuctrl.o	: $(WORKS) btnlib/buttons.h
--- 420,427 ----
  		defs/dispbox.def defs/magnibox.def defs/panbox.def \
  		defs/btnbox.def defs/colorbox.def defs/graphbox.def \
  		defs/desktop.def defs/cursor.def
! mainkey.o	: $(WORKS) /usr/X11R6/include/X11/keysym.h \
! 		/usr/X11R6/include/X11/keysymdef.h
  mainslct.o	: $(WORKS)
  mainutil.o	: $(XLIBH) $(STRUCT) hfiles/extern.h
  menuctrl.o	: $(WORKS) btnlib/buttons.h
