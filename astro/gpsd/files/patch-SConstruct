--- SConstruct.orig	2011-08-28 15:14:24.000000000 +0400
+++ SConstruct	2011-09-03 02:00:14.000000000 +0400
@@ -346,12 +346,7 @@
 # are like FreeBSD.
 ncurseslibs= []
 if env['ncurses']:
-    if config.CheckPKG('ncurses'):
-        ncurseslibs = pkg_config('ncurses')
-    elif config.CheckExecutable('ncurses5-config --version', 'ncurses5-config'):
-        ncurseslibs = ['!ncurses5-config --libs --cflags']
-    elif sys.platform.startswith('freebsd'):
-        ncurseslibs= [ '-lncurses' ]
+    ncurseslibs= [ '-lncurses' ]
 
 if env['usb']:
     # In FreeBSD except version 7, USB libraries are in the base system
@@ -771,7 +766,7 @@
 env.Depends(gpspipe, compiled_gpslib)
 
 gpxlogger = env.Program('gpxlogger', ['gpxlogger.c'], parse_flags=gpslibs+dbus_recv_libs)
-env.Depends(gpspipe, compiled_gpslib)
+env.Depends(gpxlogger, compiled_gpslib)
 
 lcdgps = env.Program('lcdgps', ['lcdgps.c'], parse_flags=gpslibs)
 env.Depends(lcdgps, compiled_gpslib)
