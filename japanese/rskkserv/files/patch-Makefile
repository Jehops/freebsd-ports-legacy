--- Makefile.orig	Tue Jan  9 01:27:21 2001
+++ Makefile	Fri Jan 19 06:20:30 2001
@@ -8,6 +8,11 @@
 datadir = $(prefix)/share
 etcdir = $(prefix)/etc
 libexecdir = $(prefix)/libexec
+skkdicbase = $(datadir)/share/skk
+epwdicbase = /opt/epwing
+skkdicsize = L
+
+all: $(SKKSERV) $(CONFILE)
 
 $(SKKSERV): skkserv.rb.in
 	$(RUBY) -p -e 'sub %r%@exec_prefix@%, %q%$(exec_prefix)%' \
@@ -15,7 +20,13 @@
 		skkserv.rb.in > $@
 	chmod 755 $@
 
-all: $(SKKSERV)
+$(CONFILE): $(CONFILE).in
+	$(RUBY) -p -e 'sub %r%@skkdicbase@%, %q%$(skkdicbase)%' \
+		   -e 'sub %r%@epwdicbase@%, %q%$(epwdicbase)%' \
+		   -e 'sub %r%@skkdicsize@%, %q%$(skkdicsize)%' \
+		   -e 'sub %r%(CACHEDIR\s*=\s*")[^"]*(")%, \
+					     %q%\\1${PREFIX}/share/skk\\2%' \
+		$(CONFILE).in > $@
 
 clean:
 	rm -f $(SKKSERV) *~
