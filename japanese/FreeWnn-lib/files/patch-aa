--- configure.in.orig	Fri Mar 17 01:15:32 2000
+++ configure.in	Fri Sep  1 01:13:50 2000
@@ -48,7 +48,185 @@
 esac
 AC_SUBST(abs_top_srcdir)
 
+dnl ====================================================================
+dnl Check optional features
+dnl ====================================================================
 
+AM_PROG_LIBTOOL
+
+AC_ARG_ENABLE(sharedlib,
+[  --enable-sharedlib      build shared library using GNU libtool],
+ [if test "$enableval" = yes
+  then
+    use_sharedlib=yes
+  else
+    use_sharedlib=no
+  fi], [use_sharedlib=default])
+
+
+dnl build and install libraries or server
+
+AC_ARG_ENABLE(libraries,
+[  --enable-libraries         build and install libraries [default=yes]],
+[case "${enableval}" in
+   yes) libraries=true ;;
+   no)  libraries=false ;;
+   *)   AC_MSG_ERROR(bad value for --enable-libraries) ;;
+esac], libraries=true)
+
+AC_ARG_ENABLE(server,
+[  --enable-server         build and install server [default=yes]],
+[case "${enableval}" in
+   yes) server=true ;;
+   no)  server=false ;;
+   *)   AC_MSG_ERROR(bad value for --enable-server) ;;
+esac], server=true)
+
+
+if test $libraries = true; then
+	SUBDIRS="\$(LIB_SUBDIRS)"
+	WNNMANDIR="\$(LIB_WNNMANDIR)"
+fi
+if test $server = true; then
+	SUBDIRS="$SUBDIRS \$(SERVER_SUBDIRS)"
+	WNNMANDIR="$WNNMANDIR \$(SERVER_WNNMANDIR)"
+fi
+
+AC_SUBST(SUBDIRS)
+AC_SUBST(WNNMANDIR)
+
+dnl For Severs
+
+AC_ARG_ENABLE(Wnn,
+[  --enable-Wnn         build and install Wnn [default=true]],
+[case "${enableval}" in
+   yes) Wnn="Wnn";;
+   no)  Wnn="" ;;
+   *)   AC_MSG_ERROR(bad value for --enable-Wnn) ;;
+esac], Wnn="Wnn")
+AC_SUBST(Wnn)
+
+if test "$server" = true -a "$Wnn" = Wnn; then
+	JSERVER_SUBDIRS1="\$(JSERVER_SUBDIRS1)"
+	JSERVER_SUBDIRS2="\$(JSERVER_SUBDIRS2)"
+else
+	JSERVER_SUBDIRS1=""
+	JSERVER_SUBDIRS2=""
+fi
+AC_SUBST(JSERVER_SUBDIRS1)
+AC_SUBST(JSERVER_SUBDIRS2)
+
+AC_ARG_ENABLE(cWnn,
+[  --enable-cWnn         build and install cWnn [default=true]],
+[case "${enableval}" in
+   yes) cWnn="cWnn" ;;
+   no)  cWnn="" ;;
+   *)   AC_MSG_ERROR(bad value for --enable-cWnn) ;;
+esac], cWnn="cWnn")
+AC_SUBST(cWnn)
+
+AC_ARG_ENABLE(kWnn,
+[  --enable-kWnn         build and install kWnn [default=true]],
+[case "${enableval}" in
+   yes) kWnn="kWnn" ;;
+   no)  kWnn="" ;;
+   *)   AC_MSG_ERROR(bad value for --enable-kWnn) ;;
+esac], kWnn="kWnn")
+AC_SUBST(kWnn)
+
+dnl For a library libwnn
+
+dnl AC_ARG_WITH(libwnn,
+dnl [  --with-libwnn               use installed Wnn library [default=no]],
+dnl [case "${withval}" in
+dnl    yes|no) with_libwnn=${withval};;
+dnl    *)   AC_MSG_ERROR(invalid argument to --with-libwnn) ;;
+dnl esac], with_libwnn=no)
+dnl 
+
+AC_ARG_WITH(libwnn,
+[  --with-libwnn               use installed Wnn library [default=no]],
+[  with_libwnn="${withval}"
+AC_ARG_WITH(wnn-includes,
+[  --with-wnn-includes=DIR  WNN include files are in DIR],
+[wnnincludedir="-I${withval}"], [wnnincludedir=''])
+AC_ARG_WITH(wnn-libraries,
+[  --with-wnn-libraries=DIR Search for WNN libraries in DIR[default=/usr/local/lib]],
+[wnnlibdir="${withval}"], [wnnlibdir='/usr/local/lib'])
+	if test "X${with_libwnn}" = X-lwnn; then
+		WNNJLIB="-L${wnnlibdir} -lwnn"
+	elif test X"`echo ${with_libwnn} | grep '^/.*'`" != X ; then
+		WNNJLIB="${with_libwnn}"
+	else
+		WNNJLIB="${wnnlibdir}/libwnn.a"
+	fi
+	DEPWNNJLIB=""
+	HINSI_DATA="\$(JWNNWNNDIR)/hinsi.data"
+],
+[	WNNJLIB="\$(WNNJLIBSRC)/libwnn.la"
+	DEPWNNJLIB="\$(WNNJLIB)"
+	HINSI_DATA="\$(WNNJDSRC)/hinsi.data"
+])
+AC_SUBST(WNNJLIB)
+AC_SUBST(DEPWNNJLIB)
+AC_SUBST(HINSI_DATA)
+
+AC_ARG_WITH(libcwnn,
+[  --with-libcwnn               use installed cWnn library [default=no]],
+[
+AC_ARG_WITH(cwnn-includes,
+[  --with-cwnn-includes=DIR  CWNN include files are in DIR],
+[cwnnincludedir="-I${withval}"], [cwnnincludedir=''])
+AC_ARG_WITH(cwnn-libraries,
+[  --with-cwnn-libraries=DIR Search for CWNN libraries in DIR[default=/usr/local/lib]],
+[cwnnlibdir="${withval}"], [cwnnlibdir='/usr/local/lib'])
+	if test "X${with_libcwnn}" = X-lcwnn; then
+		CWNNJLIB="-L${cwnnlibdir} -lcwnn"
+	elif test X"`echo ${with_libcwnn} | grep '^/.*'`" != X ; then
+		CWNNJLIB="${with_libcwnn}"
+	else
+		CWNNJLIB="${cwnnlibdir}/libcwnn.a"
+	fi
+	DEPCWNNJLIB=""
+	CHINSI_DATA="\$(CWNNWNNDIR)/cixing.data"
+	THINSI_DATA="\$(TWNNTDSRC)/cixing.data"
+],
+[	CWNNJLIB="\$(CWNNJLIBSRC)/libcwnn.la"
+	DEPCWNNJLIB="\$(CWNNJLIB)"
+	CHINSI_DATA="\$(CWNNCDSRC)/cixing.data"
+	THINSI_DATA="\$(TWNNTDSRC)/cixing.data"
+])
+AC_SUBST(CWNNJLIB)
+AC_SUBST(DEPCWNNJLIB)
+AC_SUBST(CHINSI_DATA)
+AC_SUBST(THINSI_DATA)
+
+AC_ARG_WITH(libkwnn,
+[  --with-libkwnn               use installed kWnn library [default=no]],
+[
+AC_ARG_WITH(kwnn-includes,
+[  --with-kwnn-includes=DIR  KWNN include files are in DIR],
+[kwnnincludedir="-I${withval}"], [kwnnincludedir=''])
+AC_ARG_WITH(kwnn-libraries,
+[  --with-kwnn-libraries=DIR Search for KWNN libraries in DIR[default=/usr/local/lib]],
+[kwnnlibdir="${withval}"], [kwnnlibdir='/usr/local/lib'])
+	if test "X${with_libkwnn}" = X-lkwnn; then
+		KWNNJLIB="-L${kwnnlibdir} -lkwnn"
+	elif test X"`echo ${with_libkwnn} | grep '^/.*'`" != X ; then
+		KWNNJLIB="${with_libkwnn}"
+	else
+		KWNNJLIB="${kwnnlibdir}/libkwnn.a"
+	fi
+	DEPKWNNJLIB=""
+	KHINSI_DATA="\$(KWNNWNNDIR)/hinsi.data"
+],
+[	KWNNJLIB="\$(KWNNJLIBSRC)/libkwnn.la"
+	DEPKWNNJLIB="\$(KWNNJLIB)"
+	KHINSI_DATA="\$(KWNNKDSRC)/hinsi.data"
+])
+AC_SUBST(KWNNJLIB)
+AC_SUBST(DEPKWNNJLIB)
+AC_SUBST(KHINSI_DATA)
 
 dnl
 dnl Checks for cc and cpp.
