--- Wnn/jlib/Makefile.in.orig	Tue Mar 21 01:21:11 2000
+++ Wnn/jlib/Makefile.in	Fri Sep  1 01:25:52 2000
@@ -81,11 +81,13 @@
 
 .c.o:
 	$(RM) $@
-	$(CC) -c $(CFLAGS) $(_NOOP_) $*.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS) $(_NOOP_) $*.c
 
 clean::
+	$(RM) -r .libs
+	$(RM) *.lo *.la
 
-all:: $(OBJS) libwnn.a
+all:: $(OBJS) libwnn.la
 
 all:: libgetopt.a
 
@@ -109,17 +111,15 @@
 
 kankana: kankana.o
 	$(RM) $@
-	$(CCLINK) -o $@ $(LDOPTIONS) kankana.o $(WNNJLIB)
+	$(LIBTOOL) $(CCLINK) -o $@ $(LDOPTIONS) kankana.o $(WNNJLIB)
 
 clean::
 	$(RM) kankana
 
-all:: libwnn.a
+all:: libwnn.la
 
-libwnn.a: $(OBJS) $(EXTRALIBRARYDEPS)
-	$(RM) $@
-	$(AR) $@ $(OBJS)
-	$(RANLIB) $@
+libwnn.la: $(OBJS) $(EXTRALIBRARYDEPS)
+	$(LIBTOOL) $(CC) -o $@ $(OBJS:.o=.lo) -rpath $(DESTDIR)$(WNNLIBDIR) -version-info $(WNNJLIBVERSION)
 
 lintlib:: llib-lwnn.ln
 
@@ -129,32 +129,31 @@
 
 instlib:: install
 
-install:: libwnn.a
+install:: libwnn.la
 	@if [ -d $(DESTDIR)$(WNNLIBDIR) ]; then set +x; \
 	else (set -x; $(MKDIRHIER) $(DESTDIR)$(WNNLIBDIR)); fi
-	$(INSTALL) $(INSTALLFLAGS) $(INSTLIBFLAGS) libwnn.a $(DESTDIR)$(WNNLIBDIR)
-	$(RANLIB) $(RANLIBINSTFLAGS) $(DESTDIR)$(WNNLIBDIR)/libwnn.a
+	$(LIBTOOL) $(INSTALL) $(INSTALLFLAGS) $(INSTLIBFLAGS) libwnn.la $(DESTDIR)$(WNNLIBDIR)
 
 $(OBJ3) : $(SRC3)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(OBJ4) : $(SRC4)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(OBJ5) : $(SRC5)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(OBJ6) : $(SRC6)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(OBJ7) : $(SRC7)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(OBJ8) : $(SRC8)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(OBJ9) : $(SRC9)
-	$(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
+	$(LIBTOOL) $(CC) -c $(CFLAGS)  $(WNNETCSRC)/`basename $@ .o`.c
 
 $(LOCAL_RKOBJS) : $(LOCAL_RKSRCS)
 	@case '${MFLAGS}' in *[ik]*) set +e;; esac; 	cd $(WNNROMKANSRC); echo "making all in $(WNNROMKANSRC)"; 	$(MAKE) 'CDEBUGFLAGS=$(CDEBUGFLAGS)' $(MFLAGS)
