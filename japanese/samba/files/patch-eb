--- smbd/reply.c.orig	Fri May  4 04:11:44 2001
+++ smbd/reply.c	Mon Jul  2 13:11:28 2001
@@ -101,6 +101,7 @@
 		trim_string( remote_machine, strlen( remote_machine )+1,
 			     " ", sizeof( " " ), " ", sizeof( " " ));
  		strlower(remote_machine);
+		alpha_strcpy(remote_machine,remote_machine,sizeof(remote_machine)-1);
 
 		fstrcpy(local_machine,name1);
 		len = strlen(local_machine);
@@ -111,6 +112,7 @@
 		trim_string( local_machine, strlen( local_machine )+1,
                              " ", sizeof( " " ), " ", sizeof( " " ));
 		strlower(local_machine);
+		alpha_strcpy(local_machine,local_machine,sizeof(local_machine)-1);
 
 		if (name_type == 'R') {
 			/* We are being asked for a pathworks session --- 

