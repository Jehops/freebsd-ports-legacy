diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/bin/idraw/idcmds.c ./src/bin/idraw/idcmds.c
*** work-orig/iv/src/bin/idraw/idcmds.c	Sat May 23 03:37:32 1992
--- ./src/bin/idraw/idcmds.c	Mon May 29 20:18:43 1995
***************
*** 26,32 ****
  
  #include "ided.h"
  #include "idclasses.h"
- #include "idcmds.h"
  #include "idcomp.h"
  #include "iddialogs.h"
  #include "idvars.h"
--- 26,31 ----
***************
*** 46,56 ****
  #include <Unidraw/Commands/edit.h>
  #include <Unidraw/Commands/transforms.h>
  
- #undef FileChooser
- #define FileChooser _lib_iv(FileChooser)
- 
  #include <stream.h>
  
  /*****************************************************************************/
  
  ClassId OpenCmd::GetClassId () { return OPEN_CMD; }
--- 45,53 ----
  #include <Unidraw/Commands/edit.h>
  #include <Unidraw/Commands/transforms.h>
  
  #include <stream.h>
  
+ #include "idcmds.h"
  /*****************************************************************************/
  
  ClassId OpenCmd::GetClassId () { return OPEN_CMD; }
***************
*** 59,66 ****
      return OPEN_CMD == id || ViewCompCmd::IsA(id);
  }
  
! OpenCmd::OpenCmd (ControlInfo* c, FileChooser* fc) : ViewCompCmd(c, fc) { }
! OpenCmd::OpenCmd (Editor* ed, FileChooser* fc) : ViewCompCmd(ed, fc) { }
  
  Command* OpenCmd::Copy () {
      Command* copy = new OpenCmd(CopyControlInfo());
--- 56,63 ----
      return OPEN_CMD == id || ViewCompCmd::IsA(id);
  }
  
! OpenCmd::OpenCmd (ControlInfo* c, FileChooser* fc) : ViewCompCmd(c, fc) { };
! OpenCmd::OpenCmd (Editor* ed, FileChooser* fc) : ViewCompCmd(ed, fc) { };
  
  Command* OpenCmd::Copy () {
      Command* copy = new OpenCmd(CopyControlInfo());
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/config/InterViews/iv-freebsd.cf ./src/config/InterViews/iv-freebsd.cf
*** work-orig/iv/src/config/InterViews/iv-freebsd.cf	Wed May 31 08:52:13 1995
--- ./src/config/InterViews/iv-freebsd.cf	Mon May 29 21:55:00 1995
***************
*** 2,8 ****
  #undef CppCmd
  #define CppCmd cpp
  #undef CCDriver
! #define CCDriver c++
  #undef DependCCFlags
  #define DependCCFlags $(CCDEFINES) $(CCINCLUDES) -I/usr/include/g++
  #undef ExtraCCLdLibs
--- 2,8 ----
  #undef CppCmd
  #define CppCmd cpp
  #undef CCDriver
! #define CCDriver /usr/bin/c++
  #undef DependCCFlags
  #define DependCCFlags $(CCDEFINES) $(CCINCLUDES) -I/usr/include/g++
  #undef ExtraCCLdLibs
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/config/InterViews/local.def ./src/config/InterViews/local.def
*** work-orig/iv/src/config/InterViews/local.def	Wed May 31 08:52:10 1995
--- ./src/config/InterViews/local.def	Mon May 29 23:56:31 1995
***************
*** 10,18 ****
   */
  #include <InterViews/gcc.def>
  
! #if defined(FreeBSDArchitecture)
  #undef HasSunOSSharedLibs
  #define HasSunOSSharedLibs YES
  #endif
  
  /*
--- 10,20 ----
   */
  #include <InterViews/gcc.def>
  
! #if defined (FreeBSDArchitecture)
  #undef HasSunOSSharedLibs
  #define HasSunOSSharedLibs YES
+ #undef HasSunOSSharedLibraries
+ #define HasSunOSSharedLibraries YES
  #endif
  
  /*
***************
*** 47,53 ****
   * Delete this definition if your /tmp space is less than five megabytes.
   */
  #undef HasLargeTmp
- #define HasLargeTmp YES
  
  /*
   * If you do not want to create a symbolic link called "/interviews"
--- 49,54 ----
***************
*** 77,80 ****
--- 78,84 ----
  #define XIncDir /usr/X11R6/include
  #undef XLibDir
  #define XLibDir /usr/X11R6/lib
+ 
+ #undef SharedCCFlags
+ #define SharedCCFlags -fpic
  
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/include/IV-X11/xwindow.h ./src/include/IV-X11/xwindow.h
*** work-orig/iv/src/include/IV-X11/xwindow.h	Fri Sep 25 07:46:22 1992
--- ./src/include/IV-X11/xwindow.h	Sun May 28 12:49:16 1995
***************
*** 46,53 ****
  class Style;
  class WindowCursorStack;
  class WindowTable;
  class XDisplay;
! 
  struct WindowOverlayInfo {
      VisualID id_;
      long type_;
--- 46,58 ----
  class Style;
  class WindowCursorStack;
  class WindowTable;
+ /*
+  * modified by jj@ldjpc.apana.org.au
+  *
+  * this seems to break the compile...
  class XDisplay;
!  *
!  */
  struct WindowOverlayInfo {
      VisualID id_;
      long type_;
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/include/InterViews/_defines.h ./src/include/InterViews/_defines.h
*** work-orig/iv/src/include/InterViews/_defines.h	Wed May 13 06:29:09 1992
--- ./src/include/InterViews/_defines.h	Mon May 29 18:24:27 1995
***************
*** 1,14 ****
! #define Alignment _lib_iv(Alignment)
! #define ColorIntensity _lib_iv(ColorIntensity)
! #define ColorOp _lib_iv(ColorOp)
! #define Coord _lib_iv(Coord)
! #define EventType _lib_iv(EventType)
! #define EventButton _lib_iv(EventButton)
! #define GlyphBreakType _lib_iv(GlyphBreakType)
! #define GlyphIndex _lib_iv(GlyphIndex)
! #define IntCoord _lib_iv(IntCoord)
! #define PixelCoord _lib_iv(PixelCoord)
! #define Selection _lib_iv(Selection)
  #define Action _lib_iv(Action)
  #define ActiveHandler _lib_iv(ActiveHandler)
  #define Adjustable _lib_iv(Adjustable)
--- 1,4 ----
! #define AcknowledgeDialog _lib_iv(AcknowledgeDialog)
  #define Action _lib_iv(Action)
  #define ActiveHandler _lib_iv(ActiveHandler)
  #define Adjustable _lib_iv(Adjustable)
***************
*** 16,21 ****
--- 6,14 ----
  #define Aggregate _lib_iv(Aggregate)
  #define AggregateInfo_List _lib_iv(AggregateInfo_List)
  #define Align _lib_iv(Align)
+ #define AlignCmd _lib_iv(AlignCmd)
+ #define AlignToGridCmd _lib_iv(AlignToGridCmd)
+ #define Alignment _lib_iv(Alignment)
  #define Allocation _lib_iv(Allocation)
  #define AllocationInfo _lib_iv(AllocationInfo)
  #define AllocationTable _lib_iv(AllocationTable)
***************
*** 24,31 ****
--- 17,26 ----
  #define ApplicationWindow _lib_iv(ApplicationWindow)
  #define ArrayCompositor _lib_iv(ArrayCompositor)
  #define ArrowSubclassName _lib_iv(ArrowSubclassName)
+ #define BackCmd _lib_iv(BackCmd)
  #define Background _lib_iv(Background)
  #define Banner _lib_iv(Banner)
+ #define BasicDialog _lib_iv(BasicDialog)
  #define Bevel _lib_iv(Bevel)
  #define BevelFrame _lib_iv(BevelFrame)
  #define Bitmap _lib_iv(Bitmap)
***************
*** 36,89 ****
--- 31,158 ----
  #define BoxCanonical _lib_iv(BoxCanonical)
  #define BoxElement _lib_iv(BoxElement)
  #define BoxImpl _lib_iv(BoxImpl)
+ #define BoxObj _lib_iv(BoxObj)
  #define Break _lib_iv(Break)
  #define Break_List _lib_iv(Break_List)
  #define Browser _lib_iv(Browser)
  #define BrowserList _lib_iv(BrowserList)
  #define Brush _lib_iv(Brush)
+ #define BrushCmd _lib_iv(BrushCmd)
  #define BrushImpl _lib_iv(BrushImpl)
  #define BrushRep _lib_iv(BrushRep)
+ #define BrushVar _lib_iv(BrushVar)
+ #define BrushVarView _lib_iv(BrushVarView)
  #define Button _lib_iv(Button)
  #define ButtonList _lib_iv(ButtonList)
  #define ButtonState _lib_iv(ButtonState)
+ #define CCnxn _lib_iv(CCnxn)
+ #define CCnxn_HashTable _lib_iv(CCnxn_HashTable)
+ #define CGlue _lib_iv(CGlue)
+ #define CNet _lib_iv(CNet)
+ #define CSolver _lib_iv(CSolver)
+ #define CSolverInfo _lib_iv(CSolverInfo)
+ #define CSolverState _lib_iv(CSolverState)
  #define Canvas _lib_iv(Canvas)
  #define CanvasDamage _lib_iv(CanvasDamage)
  #define CanvasRep _lib_iv(CanvasRep)
  #define Card _lib_iv(Card)
+ #define Catalog _lib_iv(Catalog)
+ #define CatalogChooser _lib_iv(CatalogChooser)
+ #define CenterCmd _lib_iv(CenterCmd)
  #define CenterLayout _lib_iv(CenterLayout)
  #define Character _lib_iv(Character)
  #define CheckBox _lib_iv(CheckBox)
  #define ChoiceItem _lib_iv(ChoiceItem)
+ #define ClassId _lib_iv(ClassId)
+ #define Clipboard _lib_iv(Clipboard)
  #define ClippingStack _lib_iv(ClippingStack)
+ #define CloseEditorCmd _lib_iv(CloseEditorCmd)
+ #define ClosedBSpline _lib_iv(ClosedBSpline)
+ #define ClosedSplineComp _lib_iv(ClosedSplineComp)
+ #define ClosedSplineView _lib_iv(ClosedSplineView)
  #define Color _lib_iv(Color)
+ #define ColorCmd _lib_iv(ColorCmd)
+ #define ColorData _lib_iv(ColorData)
  #define ColorImpl _lib_iv(ColorImpl)
+ #define ColorIntensity _lib_iv(ColorIntensity)
+ #define ColorOp _lib_iv(ColorOp)
  #define ColorRep _lib_iv(ColorRep)
  #define ColorTable _lib_iv(ColorTable)
+ #define ColorVar _lib_iv(ColorVar)
+ #define Command _lib_iv(Command)
+ #define CommandControl _lib_iv(CommandControl)
+ #define CommandInteractor _lib_iv(CommandInteractor)
+ #define CompNameVar _lib_iv(CompNameVar)
+ #define CompNameVarView _lib_iv(CompNameVarView)
  #define CompletionEditor _lib_iv(CompletionEditor)
+ #define Component _lib_iv(Component)
+ #define ComponentView _lib_iv(ComponentView)
  #define Composition _lib_iv(Composition)
  #define CompositionComponent_List _lib_iv(CompositionComponent_List)
  #define Compositor _lib_iv(Compositor)
+ #define ConfirmDialog _lib_iv(ConfirmDialog)
+ #define ConnInfo _lib_iv(ConnInfo)
+ #define ConnectCmd _lib_iv(ConnectCmd)
+ #define ConnectManip _lib_iv(ConnectManip)
+ #define ConnectTool _lib_iv(ConnectTool)
+ #define Connector _lib_iv(Connector)
+ #define ConnectorView _lib_iv(ConnectorView)
  #define Control _lib_iv(Control)
+ #define ControlInfo _lib_iv(ControlInfo)
  #define ControlState _lib_iv(ControlState)
+ #define Coord _lib_iv(Coord)
+ #define CoordinateSpace _lib_iv(CoordinateSpace)
+ #define CopyCmd _lib_iv(CopyCmd)
+ #define Creator _lib_iv(Creator)
  #define Cursor _lib_iv(Cursor)
  #define CursorRep _lib_iv(CursorRep)
  #define CursorRepBitmap _lib_iv(CursorRepBitmap)
  #define CursorRepData _lib_iv(CursorRepData)
  #define CursorRepFont _lib_iv(CursorRepFont)
  #define CursorRepXFont _lib_iv(CursorRepXFont)
+ #define CutCmd _lib_iv(CutCmd)
+ #define Damage _lib_iv(Damage)
  #define DamageList _lib_iv(DamageList)
+ #define Data _lib_iv(Data)
+ #define DataCache _lib_iv(DataCache)
  #define DebugGlyph _lib_iv(DebugGlyph)
  #define Deck _lib_iv(Deck)
+ #define DeleteCmd _lib_iv(DeleteCmd)
  #define Dialog _lib_iv(Dialog)
  #define DialogKit _lib_iv(DialogKit)
+ #define DialogKitImpl _lib_iv(DialogKitImpl)
  #define Display _lib_iv(Display)
  #define DisplayRep _lib_iv(DisplayRep)
  #define DownMover _lib_iv(DownMover)
+ #define Drag _lib_iv(Drag)
+ #define DragManip _lib_iv(DragManip)
+ #define DragRep _lib_iv(DragRep)
+ #define DragZone _lib_iv(DragZone)
+ #define DragZoneRep _lib_iv(DragZoneRep)
+ #define DragZoneSink _lib_iv(DragZoneSink)
+ #define DragZoneSinkHandler _lib_iv(DragZoneSinkHandler)
+ #define DupCmd _lib_iv(DupCmd)
+ #define Editor _lib_iv(Editor)
+ #define EditorImpl _lib_iv(EditorImpl)
+ #define EditorInfo _lib_iv(EditorInfo)
+ #define Ellipse _lib_iv(Ellipse)
+ #define EllipseComp _lib_iv(EllipseComp)
+ #define EllipseView _lib_iv(EllipseView)
  #define Enlarger _lib_iv(Enlarger)
  #define Event _lib_iv(Event)
+ #define EventButton _lib_iv(EventButton)
  #define EventRep _lib_iv(EventRep)
+ #define EventType _lib_iv(EventType)
  #define Extension _lib_iv(Extension)
+ #define Extent _lib_iv(Extent)
+ #define ExternView _lib_iv(ExternView)
  #define FBDirectory _lib_iv(FBDirectory)
+ #define F_Circle _lib_iv(F_Circle)
+ #define F_ClosedBSpline _lib_iv(F_ClosedBSpline)
+ #define F_Ellipse _lib_iv(F_Ellipse)
+ #define F_OpenBSpline _lib_iv(F_OpenBSpline)
+ #define F_Polygon _lib_iv(F_Polygon)
+ #define F_Rect _lib_iv(F_Rect)
  #define FieldEditor _lib_iv(FieldEditor)
  #define FieldEditorAction _lib_iv(FieldEditorAction)
  #define FieldEditorImpl _lib_iv(FieldEditorImpl)
***************
*** 92,113 ****
--- 161,210 ----
  #define FileChooser _lib_iv(FileChooser)
  #define FileChooserAction _lib_iv(FileChooserAction)
  #define FileChooserImpl _lib_iv(FileChooserImpl)
+ #define FileNameVarView _lib_iv(FileNameVarView)
+ #define FillPolygonObj _lib_iv(FillPolygonObj)
  #define FixedLayout _lib_iv(FixedLayout)
+ #define FixedPin _lib_iv(FixedPin)
  #define Font _lib_iv(Font)
  #define FontBoundingBox _lib_iv(FontBoundingBox)
+ #define FontCmd _lib_iv(FontCmd)
  #define FontFamily _lib_iv(FontFamily)
  #define FontFamilyImpl _lib_iv(FontFamilyImpl)
  #define FontFamilyRep _lib_iv(FontFamilyRep)
  #define FontImpl _lib_iv(FontImpl)
  #define FontRep _lib_iv(FontRep)
+ #define FontVar _lib_iv(FontVar)
+ #define FontVarView _lib_iv(FontVarView)
  #define Frame _lib_iv(Frame)
+ #define FrontCmd _lib_iv(FrontCmd)
+ #define FullGraphic _lib_iv(FullGraphic)
  #define GLContext _lib_iv(GLContext)
  #define GLContextImpl _lib_iv(GLContextImpl)
  #define GLWindow _lib_iv(GLWindow)
+ #define GSData _lib_iv(GSData)
+ #define GVU_HashTable _lib_iv(GVU_HashTable)
+ #define GVUpdater _lib_iv(GVUpdater)
  #define Glue _lib_iv(Glue)
  #define Glyph _lib_iv(Glyph)
+ #define GlyphBreakType _lib_iv(GlyphBreakType)
+ #define GlyphIndex _lib_iv(GlyphIndex)
  #define GrabList _lib_iv(GrabList)
+ #define Graphic _lib_iv(Graphic)
+ #define GraphicBlock _lib_iv(GraphicBlock)
+ #define GraphicComp _lib_iv(GraphicComp)
+ #define GraphicCompTool _lib_iv(GraphicCompTool)
+ #define GraphicComps _lib_iv(GraphicComps)
+ #define GraphicView _lib_iv(GraphicView)
+ #define GraphicViews _lib_iv(GraphicViews)
+ #define GravityCmd _lib_iv(GravityCmd)
+ #define GravityVar _lib_iv(GravityVar)
+ #define GravityVarView _lib_iv(GravityVarView)
+ #define Grid _lib_iv(Grid)
+ #define GridCmd _lib_iv(GridCmd)
+ #define GridDialog _lib_iv(GridDialog)
+ #define GridSpacingCmd _lib_iv(GridSpacingCmd)
  #define Group _lib_iv(Group)
+ #define GroupCmd _lib_iv(GroupCmd)
  #define GrowingBSpline _lib_iv(GrowingBSpline)
  #define GrowingClosedBSpline _lib_iv(GrowingClosedBSpline)
  #define GrowingMultiLine _lib_iv(GrowingMultiLine)
***************
*** 116,134 ****
--- 213,240 ----
  #define HBorder _lib_iv(HBorder)
  #define HBox _lib_iv(HBox)
  #define HGlue _lib_iv(HGlue)
+ #define HPanelControl _lib_iv(HPanelControl)
  #define HRule _lib_iv(HRule)
  #define HScrollBar _lib_iv(HScrollBar)
  #define HScroller _lib_iv(HScroller)
+ #define HSlotComp _lib_iv(HSlotComp)
+ #define HSlotView _lib_iv(HSlotView)
  #define Handler _lib_iv(Handler)
+ #define HistoryMap _lib_iv(HistoryMap)
  #define Hit _lib_iv(Hit)
  #define HitImpl _lib_iv(HitImpl)
  #define IconWindow _lib_iv(IconWindow)
  #define Image _lib_iv(Image)
+ #define ImportCmd _lib_iv(ImportCmd)
+ #define InorderView _lib_iv(InorderView)
  #define InputHandler _lib_iv(InputHandler)
  #define InputHandlerImpl _lib_iv(InputHandlerImpl)
+ #define IntCoord _lib_iv(IntCoord)
  #define Interactor _lib_iv(Interactor)
  #define InteractorHandler _lib_iv(InteractorHandler)
  #define InteractorWindow _lib_iv(InteractorWindow)
+ #define Iterator _lib_iv(Iterator)
+ #define KeyMap _lib_iv(KeyMap)
  #define KnownFonts _lib_iv(KnownFonts)
  #define LRComposition _lib_iv(LRComposition)
  #define LRMarker _lib_iv(LRMarker)
***************
*** 136,198 ****
--- 242,404 ----
  #define Layout _lib_iv(Layout)
  #define LayoutKit _lib_iv(LayoutKit)
  #define LeftMover _lib_iv(LeftMover)
+ #define Line _lib_iv(Line)
+ #define LineComp _lib_iv(LineComp)
+ #define LineObj _lib_iv(LineObj)
+ #define LineView _lib_iv(LineView)
+ #define LinkComp _lib_iv(LinkComp)
+ #define LinkView _lib_iv(LinkView)
  #define MFDialogKit _lib_iv(MFDialogKit)
  #define MFKit _lib_iv(MFKit)
  #define MFKitImpl _lib_iv(MFKitImpl)
  #define Macro _lib_iv(Macro)
+ #define MacroActionList _lib_iv(MacroActionList)
+ #define MacroCmd _lib_iv(MacroCmd)
+ #define MagnifVar _lib_iv(MagnifVar)
+ #define MagnifVarView _lib_iv(MagnifVarView)
+ #define MagnifyTool _lib_iv(MagnifyTool)
+ #define ManagedWindow _lib_iv(ManagedWindow)
  #define ManagedWindow _lib_iv(ManagedWindow)
  #define ManagedWindowHintInfo _lib_iv(ManagedWindowHintInfo)
  #define ManagedWindowRep _lib_iv(ManagedWindowRep)
+ #define ManipGroup _lib_iv(ManipGroup)
+ #define Manipulator _lib_iv(Manipulator)
  #define MarginFrame _lib_iv(MarginFrame)
  #define MarginLayout _lib_iv(MarginLayout)
  #define MatchEditor _lib_iv(MatchEditor)
+ #define MatchEditor _lib_iv(MatchEditor)
  #define Menu _lib_iv(Menu)
  #define MenuBar _lib_iv(MenuBar)
  #define MenuImpl _lib_iv(MenuImpl)
  #define MenuItem _lib_iv(MenuItem)
  #define Message _lib_iv(Message)
+ #define MobilityCmd _lib_iv(MobilityCmd)
+ #define MobilityData _lib_iv(MobilityData)
+ #define ModifStatusVar _lib_iv(ModifStatusVar)
+ #define ModifStatusVarView _lib_iv(ModifStatusVarView)
  #define MonoGlyph _lib_iv(MonoGlyph)
+ #define MonoKit _lib_iv(MonoKit)
+ #define MonoKitImpl _lib_iv(MonoKitImpl)
  #define MonoScene _lib_iv(MonoScene)
+ #define MoveCmd _lib_iv(MoveCmd)
+ #define MoveData _lib_iv(MoveData)
+ #define MoveTool _lib_iv(MoveTool)
  #define Mover _lib_iv(Mover)
+ #define MultiLine _lib_iv(MultiLine)
+ #define MultiLineComp _lib_iv(MultiLineComp)
+ #define MultiLineObj _lib_iv(MultiLineObj)
+ #define MultiLineView _lib_iv(MultiLineView)
+ #define NOPCmd _lib_iv(NOPCmd)
+ #define NameMap _lib_iv(NameMap)
+ #define NameVar _lib_iv(NameVar)
+ #define NameVarView _lib_iv(NameVarView)
  #define NaturalLayout _lib_iv(NaturalLayout)
+ #define NewCompCmd _lib_iv(NewCompCmd)
+ #define NormSizeCmd _lib_iv(NormSizeCmd)
+ #define OLDialogKit _lib_iv(OLDialogKit)
+ #define OLKit _lib_iv(OLKit)
+ #define OLKitImpl _lib_iv(OLKitImpl)
+ #define ObjectMap _lib_iv(ObjectMap)
+ #define ObjectMapElem _lib_iv(ObjectMapElem)
  #define Observable _lib_iv(Observable)
  #define Observer _lib_iv(Observer)
  #define ObserverList _lib_iv(ObserverList)
+ #define OpenBSpline _lib_iv(OpenBSpline)
  #define OptionDesc _lib_iv(OptionDesc)
+ #define Orientation _lib_iv(Orientation)
+ #define OrientationCmd _lib_iv(OrientationCmd)
+ #define PSBrush _lib_iv(PSBrush)
+ #define PSClosedSpline _lib_iv(PSClosedSpline)
+ #define PSColor _lib_iv(PSColor)
+ #define PSEllipse _lib_iv(PSEllipse)
  #define PSFont _lib_iv(PSFont)
  #define PSFontImpl _lib_iv(PSFontImpl)
+ #define PSLine _lib_iv(PSLine)
+ #define PSLink _lib_iv(PSLink)
+ #define PSMultiLine _lib_iv(PSMultiLine)
+ #define PSPad _lib_iv(PSPad)
+ #define PSPattern _lib_iv(PSPattern)
+ #define PSPin _lib_iv(PSPin)
+ #define PSPolygon _lib_iv(PSPolygon)
+ #define PSRaster _lib_iv(PSRaster)
+ #define PSRect _lib_iv(PSRect)
+ #define PSSlot _lib_iv(PSSlot)
+ #define PSSpline _lib_iv(PSSpline)
+ #define PSStencil _lib_iv(PSStencil)
+ #define PSText _lib_iv(PSText)
+ #define PSVertices _lib_iv(PSVertices)
+ #define PadComp _lib_iv(PadComp)
+ #define PadGraphic _lib_iv(PadGraphic)
+ #define PadView _lib_iv(PadView)
  #define Page _lib_iv(Page)
  #define PageInfo_List _lib_iv(PageInfo_List)
  #define Painter _lib_iv(Painter)
  #define PainterRep _lib_iv(PainterRep)
+ #define PanelControl _lib_iv(PanelControl)
+ #define PanelInteractor _lib_iv(PanelInteractor)
  #define Panner _lib_iv(Panner)
+ #define PasteCmd _lib_iv(PasteCmd)
  #define Patch _lib_iv(Patch)
+ #define Path _lib_iv(Path)
  #define PathRenderInfo _lib_iv(PathRenderInfo)
  #define Pattern _lib_iv(Pattern)
+ #define PatternCmd _lib_iv(PatternCmd)
  #define PatternRep _lib_iv(PatternRep)
+ #define PatternVar _lib_iv(PatternVar)
+ #define PatternVarView _lib_iv(PatternVarView)
  #define Perspective _lib_iv(Perspective)
+ #define Picture _lib_iv(Picture)
+ #define PinComp _lib_iv(PinComp)
+ #define PinGraphic _lib_iv(PinGraphic)
+ #define PinView _lib_iv(PinView)
+ #define PixelCoord _lib_iv(PixelCoord)
  #define Placement _lib_iv(Placement)
+ #define Point _lib_iv(Point)
+ #define PointObj _lib_iv(PointObj)
  #define PolyGlyph _lib_iv(PolyGlyph)
  #define PolyGlyphImpl _lib_iv(PolyGlyphImpl)
+ #define Polygon _lib_iv(Polygon)
+ #define PolygonComp _lib_iv(PolygonComp)
+ #define PolygonView _lib_iv(PolygonView)
  #define PopupMenu _lib_iv(PopupMenu)
  #define PopupWindow _lib_iv(PopupWindow)
+ #define PostScriptView _lib_iv(PostScriptView)
+ #define PostScriptViews _lib_iv(PostScriptViews)
+ #define PostorderView _lib_iv(PostorderView)
+ #define PreorderView _lib_iv(PreorderView)
+ #define PrintBS _lib_iv(PrintBS)
+ #define PrintCmd _lib_iv(PrintCmd)
+ #define PrintDialog _lib_iv(PrintDialog)
  #define Printer _lib_iv(Printer)
  #define PrinterRep _lib_iv(PrinterRep)
  #define PropertyData _lib_iv(PropertyData)
  #define PulldownMenu _lib_iv(PulldownMenu)
  #define PullrightMenu _lib_iv(PullrightMenu)
  #define PushButton _lib_iv(PushButton)
+ #define QuitCmd _lib_iv(QuitCmd)
  #define RGBTable _lib_iv(RGBTable)
  #define RadioButton _lib_iv(RadioButton)
  #define Raster _lib_iv(Raster)
+ #define RasterComp _lib_iv(RasterComp)
+ #define RasterRect _lib_iv(RasterRect)
  #define RasterRep _lib_iv(RasterRep)
+ #define RasterView _lib_iv(RasterView)
+ #define RectComp _lib_iv(RectComp)
+ #define RectView _lib_iv(RectView)
+ #define RedToFitCmd _lib_iv(RedToFitCmd)
+ #define RedoCmd _lib_iv(RedoCmd)
  #define Reducer _lib_iv(Reducer)
  #define Regexp _lib_iv(Regexp)
+ #define ReplaceCmd _lib_iv(ReplaceCmd)
  #define ReqErr _lib_iv(ReqErr)
  #define Requirement _lib_iv(Requirement)
  #define Requisition _lib_iv(Requisition)
+ #define ReshapeTool _lib_iv(ReshapeTool)
  #define Resource _lib_iv(Resource)
+ #define RevertCmd _lib_iv(RevertCmd)
  #define RightMover _lib_iv(RightMover)
+ #define RotateCmd _lib_iv(RotateCmd)
+ #define RotateTool _lib_iv(RotateTool)
  #define RotatingLine _lib_iv(RotatingLine)
  #define RotatingLineList _lib_iv(RotatingLineList)
  #define RotatingRect _lib_iv(RotatingRect)
***************
*** 211,218 ****
--- 417,444 ----
  #define RubberVertex _lib_iv(RubberVertex)
  #define Rubberband _lib_iv(Rubberband)
  #define Rule _lib_iv(Rule)
+ #define SFH_ClosedBSpline _lib_iv(SFH_ClosedBSpline)
+ #define SFH_OpenBSpline _lib_iv(SFH_OpenBSpline)
+ #define SF_Circle _lib_iv(SF_Circle)
+ #define SF_ClosedBSpline _lib_iv(SF_ClosedBSpline)
+ #define SF_Ellipse _lib_iv(SF_Ellipse)
+ #define SF_MultiLine _lib_iv(SF_MultiLine)
+ #define SF_OpenBSpline _lib_iv(SF_OpenBSpline)
+ #define SF_Polygon _lib_iv(SF_Polygon)
+ #define SF_Rect _lib_iv(SF_Rect)
  #define SMFKit _lib_iv(SMFKit)
  #define SMFKitImpl _lib_iv(SMFKitImpl)
+ #define S_Circle _lib_iv(S_Circle)
+ #define S_ClosedBSpline _lib_iv(S_ClosedBSpline)
+ #define S_Ellipse _lib_iv(S_Ellipse)
+ #define S_MultiLine _lib_iv(S_MultiLine)
+ #define S_OpenBSpline _lib_iv(S_OpenBSpline)
+ #define S_Polygon _lib_iv(S_Polygon)
+ #define S_Rect _lib_iv(S_Rect)
+ #define SaveCompAsCmd _lib_iv(SaveCompAsCmd)
+ #define SaveCompCmd _lib_iv(SaveCompCmd)
+ #define ScaleCmd _lib_iv(ScaleCmd)
+ #define ScaleTool _lib_iv(ScaleTool)
  #define ScalingLine _lib_iv(ScalingLine)
  #define ScalingLineList _lib_iv(ScalingLineList)
  #define ScalingRect _lib_iv(ScalingRect)
***************
*** 220,225 ****
--- 446,453 ----
  #define ScrollBar _lib_iv(ScrollBar)
  #define ScrollBox _lib_iv(ScrollBox)
  #define Scroller _lib_iv(Scroller)
+ #define SelectTool _lib_iv(SelectTool)
+ #define Selection _lib_iv(Selection)
  #define SelectionHandler _lib_iv(SelectionHandler)
  #define SelectionList _lib_iv(SelectionList)
  #define SelectionManager _lib_iv(SelectionManager)
***************
*** 232,247 ****
--- 460,488 ----
  #define Shape _lib_iv(Shape)
  #define ShowFrame _lib_iv(ShowFrame)
  #define SimpleCompositor _lib_iv(SimpleCompositor)
+ #define SlctAllCmd _lib_iv(SlctAllCmd)
  #define Slider _lib_iv(Slider)
  #define SliderImpl _lib_iv(SliderImpl)
  #define SlidingEllipse _lib_iv(SlidingEllipse)
  #define SlidingLine _lib_iv(SlidingLine)
  #define SlidingLineList _lib_iv(SlidingLineList)
+ #define SlidingPin _lib_iv(SlidingPin)
  #define SlidingPointList _lib_iv(SlidingPointList)
  #define SlidingRect _lib_iv(SlidingRect)
+ #define SlotComp _lib_iv(SlotComp)
+ #define SlotGraphic _lib_iv(SlotGraphic)
+ #define SlotView _lib_iv(SlotView)
+ #define SplineComp _lib_iv(SplineComp)
+ #define SplineView _lib_iv(SplineView)
+ #define State _lib_iv(State)
+ #define StateVar _lib_iv(StateVar)
+ #define StateVarView _lib_iv(StateVarView)
  #define Stencil _lib_iv(Stencil)
+ #define StencilComp _lib_iv(StencilComp)
+ #define StencilView _lib_iv(StencilView)
  #define Stepper _lib_iv(Stepper)
  #define StepperSubclassName _lib_iv(StepperSubclassName)
+ #define StretchTool _lib_iv(StretchTool)
  #define StretchingRect _lib_iv(StretchingRect)
  #define StringBrowser _lib_iv(StringBrowser)
  #define StringChooser _lib_iv(StringChooser)
***************
*** 254,259 ****
--- 495,502 ----
  #define TBComposition _lib_iv(TBComposition)
  #define TBScrollBox _lib_iv(TBScrollBox)
  #define TBScrollBoxImpl _lib_iv(TBScrollBoxImpl)
+ #define TF_2Port _lib_iv(TF_2Port)
+ #define TF_Direct _lib_iv(TF_Direct)
  #define TGlue _lib_iv(TGlue)
  #define TIFFRaster _lib_iv(TIFFRaster)
  #define TSolver _lib_iv(TSolver)
***************
*** 263,278 ****
--- 506,529 ----
  #define TelltaleGroup _lib_iv(TelltaleGroup)
  #define TelltaleState _lib_iv(TelltaleState)
  #define TextBuffer _lib_iv(TextBuffer)
+ #define TextBuffer _lib_iv(TextBuffer)
  #define TextButton _lib_iv(TextButton)
+ #define TextComp _lib_iv(TextComp)
  #define TextDisplay _lib_iv(TextDisplay)
  #define TextEditor _lib_iv(TextEditor)
+ #define TextGraphic _lib_iv(TextGraphic)
+ #define TextInteractor _lib_iv(TextInteractor)
+ #define TextManip _lib_iv(TextManip)
  #define TextRenderInfo _lib_iv(TextRenderInfo)
+ #define TextView _lib_iv(TextView)
  #define Tile _lib_iv(Tile)
  #define TileFirstAligned _lib_iv(TileFirstAligned)
  #define TileReversed _lib_iv(TileReversed)
  #define TileReversedFirstAligned _lib_iv(TileReversedFirstAligned)
  #define TitleFrame _lib_iv(TitleFrame)
+ #define Tool _lib_iv(Tool)
  #define TopLevelWindow _lib_iv(TopLevelWindow)
+ #define TransferFunct _lib_iv(TransferFunct)
  #define TransformFitter _lib_iv(TransformFitter)
  #define TransformSetter _lib_iv(TransformSetter)
  #define Transformer _lib_iv(Transformer)
***************
*** 280,304 ****
--- 531,585 ----
  #define TransientWindow _lib_iv(TransientWindow)
  #define Tray _lib_iv(Tray)
  #define TrayElement _lib_iv(TrayElement)
+ #define UArray _lib_iv(UArray)
+ #define UChooser _lib_iv(UChooser)
+ #define UControl _lib_iv(UControl)
+ #define UControlInteractor _lib_iv(UControlInteractor)
+ #define UHashElem _lib_iv(UHashElem)
+ #define UHashTable _lib_iv(UHashTable)
+ #define ULabel _lib_iv(ULabel)
+ #define UList _lib_iv(UList)
+ #define UMap _lib_iv(UMap)
+ #define UMapElem _lib_iv(UMapElem)
+ #define UPage _lib_iv(UPage)
+ #define UStencil _lib_iv(UStencil)
+ #define UndoCmd _lib_iv(UndoCmd)
+ #define UngroupCmd _lib_iv(UngroupCmd)
+ #define Unidraw _lib_iv(Unidraw)
  #define UpMover _lib_iv(UpMover)
  #define VBorder _lib_iv(VBorder)
  #define VBox _lib_iv(VBox)
  #define VGlue _lib_iv(VGlue)
+ #define VPanelControl _lib_iv(VPanelControl)
  #define VRule _lib_iv(VRule)
  #define VScrollBar _lib_iv(VScrollBar)
  #define VScroller _lib_iv(VScroller)
+ #define VSlotComp _lib_iv(VSlotComp)
+ #define VSlotView _lib_iv(VSlotView)
  #define VariableLayout _lib_iv(VariableLayout)
+ #define VertexManip _lib_iv(VertexManip)
+ #define Vertices _lib_iv(Vertices)
+ #define VerticesComp _lib_iv(VerticesComp)
+ #define VerticesView _lib_iv(VerticesView)
+ #define ViewCompCmd _lib_iv(ViewCompCmd)
  #define ViewList _lib_iv(ViewList)
+ #define Viewer _lib_iv(Viewer)
+ #define ViewerView _lib_iv(ViewerView)
  #define Viewport _lib_iv(Viewport)
+ #define VoidData _lib_iv(VoidData)
  #define WidgetKit _lib_iv(WidgetKit)
  #define WidgetKitImpl _lib_iv(WidgetKitImpl)
  #define Window _lib_iv(Window)
+ #define WindowCursorStack _lib_iv(WindowCursorStack)
  #define WindowRep _lib_iv(WindowRep)
  #define WindowTable _lib_iv(WindowTable)
  #define WindowVisual _lib_iv(WindowVisual)
  #define World _lib_iv(World)
+ #define XDisplay _lib_iv(XDisplay)
+ #define XDrag _lib_iv(XDrag)
  #define XSlider _lib_iv(XSlider)
  #define XYMarker _lib_iv(XYMarker)
  #define XYSlider _lib_iv(XYSlider)
  #define YSlider _lib_iv(YSlider)
  #define Zoomer _lib_iv(Zoomer)
+ #define Zooming _lib_iv(Zooming)
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/include/InterViews/_names.h ./src/include/InterViews/_names.h
*** work-orig/iv/src/include/InterViews/_names.h	Fri Mar 20 07:46:49 1992
--- ./src/include/InterViews/_names.h	Mon May 29 19:23:56 1995
***************
*** 36,41 ****
--- 36,48 ----
  #undef Coord
  #undef Deck
  #undef Dialog
+ #undef RasterRect
+ #undef Point
+ #undef Line
+ #undef Ellipse
+ #undef MultiLine
+ #undef Polygon
+ #undef ClosedBSpline
  #undef FileBrowser
  #undef FileChooser
  #undef Glue
***************
*** 68,73 ****
--- 75,87 ----
  #define Coord _lib_iv(Coord)
  #define Deck _lib_iv(Deck)
  #define Dialog _lib_iv(Dialog)
+ #define RasterRect _lib_iv(RasterRect)
+ #define Point _lib_iv(Point)
+ #define Line _lib_iv(Line)
+ #define Ellipse _lib_iv(Ellipse)
+ #define MultiLine _lib_iv(MultiLine)
+ #define Polygon _lib_iv(Polygon)
+ #define ClosedBSpline _lib_iv(ClosedBSpline)
  #define FileBrowser _lib_iv(FileBrowser)
  #define FileChooser _lib_iv(FileChooser)
  #define Glue _lib_iv(Glue)
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/include/InterViews/_undefs.h ./src/include/InterViews/_undefs.h
*** work-orig/iv/src/include/InterViews/_undefs.h	Wed May 13 06:29:09 1992
--- ./src/include/InterViews/_undefs.h	Mon May 29 18:15:36 1995
***************
*** 65,70 ****
--- 65,71 ----
  #undef Compositor
  #undef Control
  #undef ControlState
+ #undef CoordinateSpace
  #undef Cursor
  #undef CursorRep
  #undef CursorRepBitmap
***************
*** 76,84 ****
--- 77,92 ----
  #undef Deck
  #undef Dialog
  #undef DialogKit
+ #undef DialogKitImpl
  #undef Display
  #undef DisplayRep
  #undef DownMover
+ #undef Drag
+ #undef DragRep
+ #undef DragZone
+ #undef DragZoneRep
+ #undef DragZoneSink
+ #undef DragZoneSinkHandler
  #undef Enlarger
  #undef Event
  #undef EventRep
***************
*** 140,145 ****
--- 148,154 ----
  #undef MFKit
  #undef MFKitImpl
  #undef Macro
+ #undef MacroActionList
  #undef ManagedWindow
  #undef ManagedWindowHintInfo
  #undef ManagedWindowRep
***************
*** 152,160 ****
--- 161,174 ----
  #undef MenuItem
  #undef Message
  #undef MonoGlyph
+ #undef MonoKit
+ #undef MonoKitImpl
  #undef MonoScene
  #undef Mover
  #undef NaturalLayout
+ #undef OLDialogKit
+ #undef OLKit
+ #undef OLKitImpl
  #undef Observable
  #undef Observer
  #undef ObserverList
***************
*** 293,302 ****
--- 307,319 ----
  #undef WidgetKit
  #undef WidgetKitImpl
  #undef Window
+ #undef WindowCursorStack
  #undef WindowRep
  #undef WindowTable
  #undef WindowVisual
  #undef World
+ #undef XDisplay
+ #undef XDrag
  #undef XSlider
  #undef XYMarker
  #undef XYSlider
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/include/Unidraw/_defines.h ./src/include/Unidraw/_defines.h
*** work-orig/iv/src/include/Unidraw/_defines.h	Sat Oct 31 09:52:35 1992
--- ./src/include/Unidraw/_defines.h	Mon May 29 18:34:17 1995
***************
*** 156,162 ****
  #define PadComp _lib_iv(PadComp)
  #define PadGraphic _lib_iv(PadGraphic)
  #define PadView _lib_iv(PadView)
- #define Page _lib_iv(Page)
  #define PanelControl _lib_iv(PanelControl)
  #define PanelInteractor _lib_iv(PanelInteractor)
  #define PasteCmd _lib_iv(PasteCmd)
--- 156,161 ----
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/include/Unidraw/_undefs.h ./src/include/Unidraw/_undefs.h
*** work-orig/iv/src/include/Unidraw/_undefs.h	Sat Oct 31 09:52:35 1992
--- ./src/include/Unidraw/_undefs.h	Mon May 29 18:34:17 1995
***************
*** 156,162 ****
  #undef PadComp
  #undef PadGraphic
  #undef PadView
- #undef Page
  #undef PanelControl
  #undef PanelInteractor
  #undef PasteCmd
--- 156,161 ----
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/IV-2_6/painter.c ./src/lib/IV-2_6/painter.c
*** work-orig/iv/src/lib/IV-2_6/painter.c	Wed Feb 12 07:19:44 1992
--- ./src/lib/IV-2_6/painter.c	Mon May 29 15:01:27 1995
***************
*** 39,44 ****
--- 39,47 ----
  #include <stdlib.h>
  #include <string.h>
  
+ #include <InterViews/_names.h>
+ #include <InterViews/_enter.h>
+ 
  /*
   * For reasons of caching, it is important that the attributes
   * are set to nil (or 0) before being set to their default values.
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/IV-2_6/xpainter.c ./src/lib/IV-2_6/xpainter.c
*** work-orig/iv/src/lib/IV-2_6/xpainter.c	Tue Oct 20 06:02:42 1992
--- ./src/lib/IV-2_6/xpainter.c	Mon May 29 19:19:13 1995
***************
*** 56,61 ****
--- 56,62 ----
  #include <OS/math.h>
  #include <OS/string.h>
  #include <OS/table2.h>
+ #include <InterViews/_names.h>
  
  PainterRep::PainterRep() {
      display = Session::instance()->default_display();
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/TIFF/prototypes.h ./src/lib/TIFF/prototypes.h
*** work-orig/iv/src/lib/TIFF/prototypes.h	Wed May 31 08:52:12 1995
--- ./src/lib/TIFF/prototypes.h	Sun May 28 14:21:04 1995
***************
*** 25,31 ****
   */
  
  #if USE_PROTOTYPES
- va_dcl
  #define	DECLARE1(f,t1,a1)		f(t1 a1)
  #define	DECLARE2(f,t1,a1,t2,a2)		f(t1 a1, t2 a2)
  #define	DECLARE3(f,t1,a1,t2,a2,t3,a3)	f(t1 a1, t2 a2, t3 a3)
--- 25,30 ----
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/TIFF/tif_aux.c ./src/lib/TIFF/tif_aux.c
*** work-orig/iv/src/lib/TIFF/tif_aux.c	Sat Mar 28 08:23:06 1992
--- ./src/lib/TIFF/tif_aux.c	Sun May 28 14:15:50 1995
***************
*** 42,47 ****
--- 42,49 ----
   *	explcit values so that defaults exist only one
   *	place in the library -- in TIFFDefaultDirectory.
   */
+  ;
+  /* for some reason it needs a ; before this line */
  TIFFVGetFieldDefaulted(tif, tag, ap)
  	TIFF *tif;
  	int tag;
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/TIFF/tif_dir.c ./src/lib/TIFF/tif_dir.c
*** work-orig/iv/src/lib/TIFF/tif_dir.c	Sat Mar  7 06:29:51 1992
--- ./src/lib/TIFF/tif_dir.c	Sun May 28 13:00:03 1995
***************
*** 950,956 ****
  		}
  		if (tif->tif_flags & TIFF_SWAB)
  			TIFFSwabShort(&dircount);
! 		lseek(tif->tif_fd, dircount*sizeof (TIFFDirEntry), L_INCR);
  		if (!ReadOK(tif->tif_fd, &nextdir, sizeof (nextdir))) {
  			TIFFError(module, "%s: Error fetching directory link",
  			    tif->tif_name);
--- 950,957 ----
  		}
  		if (tif->tif_flags & TIFF_SWAB)
  			TIFFSwabShort(&dircount);
! 		/*added (off_t) .. jj@ldjpc.apana.org.au*/
! 		lseek(tif->tif_fd, (off_t)(dircount*sizeof (TIFFDirEntry)), L_INCR);
  		if (!ReadOK(tif->tif_fd, &nextdir, sizeof (nextdir))) {
  			TIFFError(module, "%s: Error fetching directory link",
  			    tif->tif_name);
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/TIFF/tif_dirwrite.c ./src/lib/TIFF/tif_dirwrite.c
*** work-orig/iv/src/lib/TIFF/tif_dirwrite.c	Wed Mar 18 05:39:29 1992
--- ./src/lib/TIFF/tif_dirwrite.c	Sun May 28 12:57:11 1995
***************
*** 177,183 ****
  	dataoff = tif->tif_diroff + sizeof (short) + dirsize + sizeof (long);
  	if (dataoff & 1)
  		dataoff++;
! 	(void) lseek(tif->tif_fd, dataoff, L_SET);
  	tif->tif_curdir++;
  	dir = (TIFFDirEntry *)data;
  	/*
--- 177,184 ----
  	dataoff = tif->tif_diroff + sizeof (short) + dirsize + sizeof (long);
  	if (dataoff & 1)
  		dataoff++;
! 	/* added (off_t) below.....jj@ldjpc.apana.org.au*/
! 	(void) lseek(tif->tif_fd, (off_t)(dataoff), L_SET);
  	tif->tif_curdir++;
  	dir = (TIFFDirEntry *)data;
  	/*
***************
*** 314,320 ****
  	/*
  	 * Write directory.
  	 */
! 	(void) lseek(tif->tif_fd, tif->tif_diroff, L_SET);
  	dircount = nfields;
  	if (!WriteOK(tif->tif_fd, &dircount, sizeof (short))) {
  		TIFFError(tif->tif_name, "Error writing directory count");
--- 315,322 ----
  	/*
  	 * Write directory.
  	 */
! 	/*added (off_t) below.....jj@ldjpc.apana.org.au*/
! 	(void) lseek(tif->tif_fd, (off_t)(tif->tif_diroff), L_SET);
  	dircount = nfields;
  	if (!WriteOK(tif->tif_fd, &dircount, sizeof (short))) {
  		TIFFError(tif->tif_name, "Error writing directory count");
***************
*** 762,774 ****
  	u_short dircount;
  	long nextdir;
  
! 	tif->tif_diroff = (lseek(tif->tif_fd, 0L, L_XTND)+1) &~ 1L;
  	if (tif->tif_header.tiff_diroff == 0) {
  		/*
  		 * First directory, overwrite header.
  		 */
  		tif->tif_header.tiff_diroff = tif->tif_diroff;
! 		(void) lseek(tif->tif_fd, 0L, L_SET);
  		if (!WriteOK(tif->tif_fd, &tif->tif_header,
  		    sizeof (tif->tif_header))) {
  			TIFFError(tif->tif_name, "Error writing TIFF header");
--- 764,778 ----
  	u_short dircount;
  	long nextdir;
  
! 	/* changed 0L to (off_t)0 below...jj@ldjpc.apana.org.au*/
! 	tif->tif_diroff = (lseek(tif->tif_fd, (off_t)0, L_XTND)+1) &~ 1L;
  	if (tif->tif_header.tiff_diroff == 0) {
  		/*
  		 * First directory, overwrite header.
  		 */
  		tif->tif_header.tiff_diroff = tif->tif_diroff;
! 		/* changed 0L to (off_t)0 .. jj@ldjpc.apana.org.au*/
! 		(void) lseek(tif->tif_fd, (off_t)0, L_SET);
  		if (!WriteOK(tif->tif_fd, &tif->tif_header,
  		    sizeof (tif->tif_header))) {
  			TIFFError(tif->tif_name, "Error writing TIFF header");
***************
*** 788,794 ****
  		}
  		if (tif->tif_flags & TIFF_SWAB)
  			TIFFSwabShort(&dircount);
! 		lseek(tif->tif_fd, dircount * sizeof (TIFFDirEntry), L_INCR);
  		if (!ReadOK(tif->tif_fd, &nextdir, sizeof (nextdir))) {
  			TIFFError(module, "Error fetching directory link");
  			return (0);
--- 792,799 ----
  		}
  		if (tif->tif_flags & TIFF_SWAB)
  			TIFFSwabShort(&dircount);
! 		/*added (off_t) below....jj@ldjpc.apana.org.au*/
! 		lseek(tif->tif_fd, (off_t)(dircount * sizeof (TIFFDirEntry)), L_INCR);
  		if (!ReadOK(tif->tif_fd, &nextdir, sizeof (nextdir))) {
  			TIFFError(module, "Error fetching directory link");
  			return (0);
***************
*** 796,802 ****
  		if (tif->tif_flags & TIFF_SWAB)
  			TIFFSwabLong((u_long *)&nextdir);
  	} while (nextdir != 0);
! 	(void) lseek(tif->tif_fd, -sizeof (nextdir), L_INCR);
  	if (!WriteOK(tif->tif_fd, &tif->tif_diroff, sizeof (tif->tif_diroff))) {
  		TIFFError(module, "Error writing directory link");
  		return (0);
--- 801,808 ----
  		if (tif->tif_flags & TIFF_SWAB)
  			TIFFSwabLong((u_long *)&nextdir);
  	} while (nextdir != 0);
! 	/*added (off_t) below ... jj@ldjpc.apana.org.au*/
! 	(void) lseek(tif->tif_fd, (off_t)(-sizeof (nextdir)), L_INCR);
  	if (!WriteOK(tif->tif_fd, &tif->tif_diroff, sizeof (tif->tif_diroff))) {
  		TIFFError(module, "Error writing directory link");
  		return (0);
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/TIFF/tif_write.c ./src/lib/TIFF/tif_write.c
*** work-orig/iv/src/lib/TIFF/tif_write.c	Tue Feb 11 13:36:47 1992
--- ./src/lib/TIFF/tif_write.c	Sun May 28 12:57:57 1995
***************
*** 550,556 ****
  			}
  		} else
  			td->td_stripoffset[strip] =
! 			    lseek(tif->tif_fd, 0L, L_XTND);
  		tif->tif_curoff = td->td_stripoffset[strip];
  	}
  	if (!WriteOK(tif->tif_fd, data, cc)) {
--- 550,557 ----
  			}
  		} else
  			td->td_stripoffset[strip] =
! 			    /*changed 0L to (off_t)0 .. jj@ldjpc.apana.org.au*/
! 			    lseek(tif->tif_fd, (off_t)0, L_XTND);
  		tif->tif_curoff = td->td_stripoffset[strip];
  	}
  	if (!WriteOK(tif->tif_fd, data, cc)) {
diff -rc --exclude=Makefile --exclude=FREEBSD work-orig/iv/src/lib/TIFF/tiffcompat.h ./src/lib/TIFF/tiffcompat.h
*** work-orig/iv/src/lib/TIFF/tiffcompat.h	Tue Mar 31 12:01:04 1992
--- ./src/lib/TIFF/tiffcompat.h	Sun May 28 14:13:59 1995
***************
*** 154,160 ****
  #define	lseek	mpw_lseek
  extern long mpw_lseek(int, long, int);
  #else
! extern	long lseek();
  #endif
  
  /*
--- 154,161 ----
  #define	lseek	mpw_lseek
  extern long mpw_lseek(int, long, int);
  #else
! /*changed to the correct one...jj@ldjpc.apana.org.au*/
! extern	off_t lseek();
  #endif
  
  /*
***************
*** 163,170 ****
  #ifndef ReadOK
  #define	ReadOK(fd, buf, size)	(read(fd, (char *)buf, size) == size)
  #endif
  #ifndef SeekOK
! #define	SeekOK(fd, off)	(lseek(fd, (long)off, L_SET) == (long)off)
  #endif
  #ifndef WriteOK
  #define	WriteOK(fd, buf, size)	(write(fd, (char *)buf, size) == size)
--- 164,172 ----
  #ifndef ReadOK
  #define	ReadOK(fd, buf, size)	(read(fd, (char *)buf, size) == size)
  #endif
+ /*changed (long) to (off_t) to compile....jj@ldjpc.apana.org.au*/
  #ifndef SeekOK
! #define	SeekOK(fd, off)	(lseek(fd, (off_t)off, L_SET) == (off_t)off)
  #endif
  #ifndef WriteOK
  #define	WriteOK(fd, buf, size)	(write(fd, (char *)buf, size) == size)
***************
*** 202,211 ****
   */
  #if defined(__STDC__) && !defined(USE_VARARGS)
  #define	USE_VARARGS	0
  #endif
  
  #if defined(USE_VARARGS)
! #if USE_VARARGS
  #include <varargs.h>
  #define	VA_START(ap, parmN)	va_start(ap)
  #else
--- 204,218 ----
   */
  #if defined(__STDC__) && !defined(USE_VARARGS)
  #define	USE_VARARGS	0
+ #else 
+ #if defined(__FreeBSD__)
+ #undef USE_VARARGS
+ #define USE_VARARGS     0
+ #endif
  #endif
  
  #if defined(USE_VARARGS)
! #if USE_VARARGS && !defined(__FreeBSD__)
  #include <varargs.h>
  #define	VA_START(ap, parmN)	va_start(ap)
  #else
