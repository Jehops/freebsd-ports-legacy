--- Canna.conf.orig	Thu Nov 28 19:27:01 1996
+++ Canna.conf	Tue Apr  2 05:36:35 2002
@@ -128,14 +128,15 @@
  * $Id: Canna.conf,v 3.13 1996/11/28 10:27:01 kon Exp $
  */
 
-cannaBinDir = /usr/local/canna/bin
-cannaSrvDir = /usr/local/canna/bin
-cannaLibDir = /usr/local/canna/lib
-cannaManDir = /usr/local/canna/man
-cannaIncDir = /usr/local/canna/include/canna
-libCannaDir = /usr/lib
+PREFIX?= /usr/local
+cannaBinDir = ${PREFIX}/bin
+cannaSrvDir = ${PREFIX}/sbin
+cannaLibDir = ${PREFIX}/lib/canna
+cannaManDir = ${PREFIX}/man
+cannaIncDir = ${PREFIX}/include/canna
+libCannaDir = ${PREFIX}/lib
 
-ErrDir  = /usr/spool/canna
+ErrDir  = /var/log
 
 wcharDefinition = -DCANNA_WCHAR
 Wlib =
@@ -143,12 +144,12 @@
 
 cannaOwner = bin
 cannaGroup = bin
-
 cannaOwnerGroup = -o $(cannaOwner) -g $(cannaGroup)
+cannaOwnerDefinition = -DcannaOwner="\"$(cannaOwner)\""
 
 pointerIntegerDef =
 
-cannaDsoRev = 1
+cannaDsoRev = 1.0
     /* SunOS 4.x をお使いの方で shared object を利用する場合には
             cannaDsoRev = 1.1
     と指定してください。また、FreeBSD を利用する場合は、
@@ -167,7 +168,7 @@
 CHMOD = chmod
 
 /* 日本語マニュアルを使わないのであればコメントアウト */
-#define JAPANESEMAN
+/* #define JAPANESEMAN */
 
 /* locale ディレクトリを持っている場合は以下を記述する */
 /* #define LOCALE_DIR /usr/lib/locale */
@@ -273,7 +274,7 @@
  * ここから下は変更しないようにしてください。
  */
 
- CANNASERVER_DEFINES = $(wcharDefinition)
+ CANNASERVER_DEFINES = $(wcharDefinition) $(cannaOwnerDefinition)
           RK_DEFINES = $(pointerIntegerDef)
          RKC_DEFINES = $(wcharDefinition)
        UILIB_DEFINES = $(wcharDefinition) $(pointerIntegerDef) \
@@ -378,6 +379,15 @@
 		set +x; else (set -x; $(MKDIRHIER) $(DESTDIR)$$i;$(CHOWN) owner $(DESTDIR)$$i;$(CHGRP) group $(DESTDIR)$$i); fi \	@@\
 	done
 #endif /* MakeDirectories */
+
+#ifdef LinkFileList
+#undef LinkFileList
+#endif
+#define LinkFileList(step,list,dir,sub)					@@\
+step:: list								@@\
+	@MakeFlagsToShellFlags(i,set +e); \				@@\
+	echo "	cd" dir; cd dir && \					@@\
+	for i in list; do (set -x; $(LN) -f sub/$$i .); done
 
 /* 以下は IBM 基礎研の古畑さん(furuhata@trl.ibm.co.jp)により書かれました */
 #if defined(RsArchitecture) && DoSharedLib
