--- configure.orig	Sun Feb 10 16:39:19 2002
+++ configure	Mon Feb 25 01:10:52 2002
@@ -2032,6 +2032,26 @@
      ELFLIB_MAJOR="lib$(THIS_LIB).$(ELF_MAJOR_VERSION).dylib"
      ELFLIB_MAJOR_MINOR="lib$(THIS_LIB).$(ELF_MAJOR_VERSION).$(ELF_MINOR_VERSION).dylib"
      ;;
+  *freebsd* )
+     if [ "$PORTOBJFORMAT" = elf ]; then
+       DYNAMIC_LINK_FLAGS="-Wl,-export-dynamic"
+       ELF_CC="\$(CC)"
+       ELF_CFLAGS="\$(CFLAGS) -fPIC"
+       ELF_LINK="\$(CC) -shared -Wl,-soname#"
+       ELF_LINK_CMD="\$(ELF_LINK),\$(ELFLIB_MAJOR)"
+       ELF_DEP_LIBS="\$(DL_LIB) -lm -lc"
+       CC_SHARED="\$(CC) \$(CFLAGS) -shared -fPIC"
+     else
+       # aout format is not tested
+       DYNAMIC_LINK_FLAGS=""
+       ELF_CC="\$(CC)"
+       ELF_CFLAGS="\$(CFLAGS) -fpic -DPIC"
+       ELF_LINK="ld -Bshareable -x"
+       ELF_LINK_CMD="\$(ELF_LINK)"
+       ELF_DEP_LIBS="\$(DL_LIB) -lm -lc"
+       CC_SHARED="\$(CC) \$(CFLAGS) -fpic -DPIC"
+     fi
+     ;;
   * )
     echo "Note: ELF compiler for host_os=$host_os may be wrong"
     ELF_CC="$CC"
@@ -2432,16 +2452,16 @@
 
 echo $ac_n "checking SLANG_VERSION""... $ac_c" 1>&6
 echo "configure:2435: checking SLANG_VERSION" >&5
-slang_version=`grep "^#define  *SLANG_VERSION " $srcdir/src/slang.h |
-               awk '{ print $3 }'`
-slang_major_version=`echo $slang_version |
- awk '{ print int($1/10000) }'`
-slang_minor_version=`echo $slang_version $slang_major_version |
- awk '{ print int(($1 - $2*10000)/100) }'`
-slang_mminor_version=`echo $slang_version $slang_major_version $slang_minor_version |
- awk '{ print ($1 - $2*10000 - $3*100) }'`
-
-slang_minor_version="$slang_minor_version.$slang_mminor_version"
+#slang_version=`grep "^#define  *SLANG_VERSION " $srcdir/src/slang.h |
+#               awk '{ print $3 }'`
+#slang_major_version=`echo $slang_version |
+# awk '{ print int($1/10000) }'`
+#slang_minor_version=`echo $slang_version $slang_major_version |
+# awk '{ print int(($1 - $2*10000)/100) }'`
+#slang_mminor_version=`echo $slang_version $slang_major_version $slang_minor_version |
+# awk '{ print ($1 - $2*10000 - $3*100) }'`
+slang_major_version=2
+slang_minor_version=5
 slang_version="$slang_major_version.$slang_minor_version"
 echo "$ac_t""$slang_version" 1>&6
 
@@ -2970,21 +2990,3 @@
 
 
 echo ""
-echo "Configuration complete.  You may need to edit src/Makefile."
-echo "You are compiling SLANG with the following compiler configuration:"
-echo "       CC =" "$CC"
-echo "   CFLAGS =" "$CFLAGS"
-echo "  LDFLAGS =" "$LDFLAGS $DYNAMIC_LINK_FLAGS"
-echo ""
-echo "   ELF_CC =" "$ELF_CC"
-echo " ELF_LINK =" "$ELF_LINK"
-echo "ELF_CFLAGS=" "$ELF_CFLAGS"
-echo ""
-echo "                  prefix:" "$prefix"
-echo "             exec_prefix:" "$exec_prefix"
-echo "    Installation Lib Dir:" "$libdir"
-echo "Installation Include Dir:" "$includedir"
-echo ""
-echo "See also src/sl-feat.h for various features."
-echo "Type 'make' to build normal library."
-echo "On ELF systems, type 'make elf' to create ELF shared library."
