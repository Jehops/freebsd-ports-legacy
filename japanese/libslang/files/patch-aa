*** configure.orig	Wed Jul 14 05:30:30 1999
--- configure	Fri Sep  3 04:10:29 1999
***************
*** 2025,2038 ****
  echo "configure:2026: checking SLANG_VERSION" >&5
  slang_version=`grep "^#define  *SLANG_VERSION " $srcdir/src/slang.h |
                 awk '{ print $3 }'`
! slang_major_version=`echo $slang_version |
!  awk '{ print int($1/10000) }'`
! slang_minor_version=`echo $slang_version $slang_major_version |
!  awk '{ print int(($1 - $2*10000)/100) }'`
! slang_mminor_version=`echo $slang_version $slang_major_version $slang_minor_version |
!  awk '{ print ($1 - $2*10000 - $3*100) }'`
! 
! slang_minor_version="$slang_minor_version.$slang_mminor_version"
  slang_version="$slang_major_version.$slang_minor_version"
  echo "$ac_t""$slang_version" 1>&6
  
--- 2025,2032 ----
  echo "configure:2026: checking SLANG_VERSION" >&5
  slang_version=`grep "^#define  *SLANG_VERSION " $srcdir/src/slang.h |
                 awk '{ print $3 }'`
! slang_major_version=2
! slang_minor_version=1
  slang_version="$slang_major_version.$slang_minor_version"
  echo "$ac_t""$slang_version" 1>&6
  
***************
*** 2040,2054 ****
  
  
  
! if test "$GCC" = yes; then
!   ELF_CC="gcc"
!   ELF_CFLAGS="-O2 -fno-strength-reduce -fPIC"
!   ELF_LINK="gcc -shared -Wl,-soname#"
!   ELF_LINK_CMD="\$(ELF_LINK),\$(ELFLIB_MAJOR)"
  else
!   ELF_CC="cc"
!   ELF_CFLAGS="-K pic"
!   ELF_LINK="ld -G -z text"
    ELF_LINK_CMD="\$(ELF_LINK)"
  fi
  
--- 2034,2048 ----
  
  
  
! if [ "$PORTOBJFORMAT" = elf ]; then
!   ELF_CC="\$(CC)"
!   ELF_CFLAGS="\$(CFLAGS) -fPIC"
!   ELF_LINK="\$(CC) -shared -Wl,-soname,\$(ELFLIB_MAJOR)"
!   ELF_LINK_CMD="\$(ELF_LINK)"
  else
!   ELF_CC="\$(CC)"
!   ELF_CFLAGS="\$(CFLAGS) -fPIC"
!   ELF_LINK="ld -Bshareable -x"
    ELF_LINK_CMD="\$(ELF_LINK)"
  fi
  
***************
*** 2569,2586 ****
  
  
  echo ""
! echo "Configuration complete.  You may need to edit src/Makefile."
! echo "You are compiling SLANG with the following compiler configuration:"
! echo "       CC =" "$CC"
! echo "   CFLAGS =" "$CFLAGS"
! echo "  LDFLAGS =" "$LDFLAGS $DYNAMIC_LINK_FLAGS"
! echo ""
! echo "   ELF_CC =" "$ELF_CC"
! echo " ELF_LINK =" "$ELF_LINK"
! echo "ELF_CFLAGS=" "$ELF_CFLAGS"
! echo ""
  echo "Installation Prefix:" "$prefix"
  echo ""
! echo "See also src/sl-feat.h for various features."
! echo "Type 'make' to build normal library."
! echo "On ELF systems, type 'make elf' to create ELF shared library."
--- 2563,2580 ----
  
  
  echo ""
! #echo "Configuration complete.  You may need to edit src/Makefile."
! #echo "You are compiling SLANG with the following compiler configuration:"
! #echo "       CC =" "$CC"
! #echo "   CFLAGS =" "$CFLAGS"
! #echo "  LDFLAGS =" "$LDFLAGS $DYNAMIC_LINK_FLAGS"
! #echo ""
! #echo "   ELF_CC =" "$ELF_CC"
! #echo " ELF_LINK =" "$ELF_LINK"
! #echo "ELF_CFLAGS=" "$ELF_CFLAGS"
! #echo ""
  echo "Installation Prefix:" "$prefix"
  echo ""
! #echo "See also src/sl-feat.h for various features."
! #echo "Type 'make' to build normal library."
! #echo "On ELF systems, type 'make elf' to create ELF shared library."
