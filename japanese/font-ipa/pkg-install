#!/bin/sh
# $FreeBSD$

FONTDIR=${PKG_PREFIX}/lib/X11/fonts/TrueType
if [ "$2" = "PRE-INSTALL" ]; then
  echo "Please add ${FONTDIR} to your /etc/XF86Config file"
  exit 0
fi
cd ${FONTDIR}
touch fonts.dir
sed -e '/-ipa-/d' fonts.dir > fonts.dir.tmp
numfonts=$(echo $(cat fonts.dir.tmp fonts.dir.ipa | wc -l) - 2 | bc)
echo ${numfonts} > fonts.dir
sed -e 1d fonts.dir.tmp >> fonts.dir
sed -e 1d fonts.dir.ipa >> fonts.dir
touch fonts.alias
sed -e '/^-ipa-/d' fonts.alias > fonts.alias.tmp
mv -f fonts.alias.tmp fonts.alias
cat fonts.alias.ipa >> fonts.alias
rm -f fonts.dir.tmp fonts.alias.tmp
