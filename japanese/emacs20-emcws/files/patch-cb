--- src/s/freebsd.h.orig	Tue May  2 21:29:10 2000
+++ src/s/freebsd.h	Mon Nov  4 11:29:52 2002
@@ -47,6 +47,13 @@
 #define LIBS_TERMCAP -ltermcap
 #endif
 
+/* Use XPG4 Library for FreeBSD */
+#if __FreeBSD_version >= 220000
+#ifdef USE_XPG
+#define LIBS_XPG -lxpg4
+#endif
+#endif
+
 #define SYSV_SYSTEM_DIR
 
 /* freebsd has POSIX-style pgrp behavior. */
@@ -56,9 +63,16 @@
 #ifdef __ELF__
 
 #define LD_SWITCH_SYSTEM
+
+#ifdef __alpha__
+#define START_FILES pre-crt0.o /usr/lib/crt1.o /usr/lib/crtbegin.o
+#define LIB_STANDARD -lgcc -lc -lgcc /usr/lib/crtend.o
+#else
 #define START_FILES pre-crt0.o /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/crtbegin.o
-#define UNEXEC unexelf.o
 #define LIB_STANDARD -lgcc -lc -lgcc /usr/lib/crtend.o /usr/lib/crtn.o
+#endif
+
+#define UNEXEC unexelf.o
 #undef LIB_GCC
 #define LIB_GCC
 
@@ -150,3 +164,7 @@
    be seen again in a later read(2), without the CRs.  */
 
 #define BROKEN_PTY_READ_AFTER_EAGAIN 1
+
+#if __FreeBSD_version >= 500000
+#define LD_SWITCH_SYSTEM_TEMACS -znocombreloc
+#endif
