# New ports collection makefile for:	img
# Version required:	1.2b2
# Date created:		25 March 1999
# Whom:			KIRIYAMA Kazuhiko <kiri@pis.toba-cmt.ac.jp>
#
# $Id: Makefile,v 1.1.1.1 1999/05/03 04:08:14 steve Exp $
#

DISTNAME=	img1.2b2
PKGNAME=	ja-libimg-1.2b2
CATEGORIES=	graphics tk80 japanese
MASTER_SITES=	ftp://ftp.neosoft.com/pub/tcl/sorted/packages-8.0/graphics/Img/1.2/ \
		http://www.aaa-int.or.jp/~jfactory/TkStep/dist/

MAINTAINER=	kiri@pis.toba-cmt.ac.jp

BUILD_DEPENDS=	${PREFIX}/lib/tcl8.0jp/tclIndex:${PORTSDIR}/japanese/tcl80 \
		${PREFIX}/lib/tk8.0jp/tk.tcl:${PORTSDIR}/japanese/tk80

USE_AUTOCONF=	yes
HAS_CONFIGURE=	yes
CONFIGURE_ARGS=	--with-tcl=${PREFIX}/lib/tcl${TCLVERSION}jp \
		--with-tk=${PREFIX}/lib/tk${TKVERSION}jp \
		--disable-stubs

TCLVERSION=	8.0
TKVERSION=	8.0
PORTDOCDIR=	${PREFIX}/share/doc/img

pre-configure:
	chmod 755 ${WRKSRC}/configure

.include <bsd.port.pre.mk>

post-install:
.if !defined(NOPORTDOCS)
	${MKDIR} ${PORTDOCDIR}
	(cd ${WRKSRC}; ${INSTALL_DATA} ANNOUNCE README changes ${PORTDOCDIR})
.endif
.if ${PORTOBJFORMAT} == "aout"
	${LN} -sf libimg12.so.1.0 ${PREFIX}/lib/Img1.2/libimg12.so
.else
	${LN} -sf libimg12.so.1 ${PREFIX}/lib/Img1.2/libimg12.so
.endif
	${SETENV} OBJFORMAT=${PORTOBJFORMAT} ${LDCONFIG} -m ${PREFIX}/lib/Img1.2

.include <bsd.port.post.mk>
