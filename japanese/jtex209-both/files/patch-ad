*** jtex1.7/ptex/ptex/Makefile.orig	Sat Sep  9 17:53:07 1995
--- jtex1.7/ptex/ptex/Makefile	Sat Sep  9 17:56:03 1995
***************
*** 6,15 ****
  
  # Installation directories
  BINDIR=/usr/local/bin
! TEXPOOLDIR=/usr/lib/tex
! MFPOOLDIR=/usr/lib/mf
  CDIR=ctex
! CONV=convert
  
  # Libraries needed for X10 support
  XLIBS=-lX
--- 6,15 ----
  
  # Installation directories
  BINDIR=/usr/local/bin
! TEXPOOLDIR=/usr/local/share/tex/apool
! MFPOOLDIR=/usr/local/share/mf
  CDIR=ctex
! CONV=./convert
  
  # Libraries needed for X10 support
  XLIBS=-lX
***************
*** 41,54 ****
  		cp ${CDIR}/initex ${BINDIR}/initex
  		cp ${CDIR}/tex.pool ${TEXPOOLDIR}/tex.pool
  
! web2c:
  		(cd web2cdir; make)
  
  triptex:	web2c jtangle ${CDIR}/tex0.c ${CDIR}/triptex
  ${CDIR}/triptex:
  		(cd ${CDIR}; make triptex)
  
! initex:		web2c jtangle ${CDIR}/initex
  ${CDIR}/initex:	${CDIR}/tex0.c
  		(cd ${CDIR}; make initex)
  
--- 41,54 ----
  		cp ${CDIR}/initex ${BINDIR}/initex
  		cp ${CDIR}/tex.pool ${TEXPOOLDIR}/tex.pool
  
! web2c:		
  		(cd web2cdir; make)
  
  triptex:	web2c jtangle ${CDIR}/tex0.c ${CDIR}/triptex
  ${CDIR}/triptex:
  		(cd ${CDIR}; make triptex)
  
! initex:		web2c jtangle/jtangle ${CDIR}/initex
  ${CDIR}/initex:	${CDIR}/tex0.c
  		(cd ${CDIR}; make initex)
  
***************
*** 84,90 ****
  ${CDIR}/latex:	initex virtex
  		(cd ${CDIR}; make latex)
  
! jtangle:
  		(cd jtangle; make jtangle)
  
  
--- 84,90 ----
  ${CDIR}/latex:	initex virtex
  		(cd ${CDIR}; make latex)
  
! jtangle/jtangle:
  		(cd jtangle; make jtangle)
  
  
*** jtex1.7/ptex/ptex/ctex/Makefile.orig	Sat Sep  9 17:52:55 1995
--- jtex1.7/ptex/ptex/ctex/Makefile	Sat Sep  9 17:56:07 1995
***************
*** 7,13 ****
  SITEDIR=..
  #CC=gcc
  OPT=-O
! CFLAGS=$(OPT) -I$(SITEDIR)
  LDFLAGS=
  RM=/bin/rm
  
--- 7,13 ----
  SITEDIR=..
  #CC=gcc
  OPT=-O
! CFLAGS=$(OPT) -m486 -I$(SITEDIR) -D_HAVE_PRAM_H
  LDFLAGS=
  RM=/bin/rm
  
*** jtex1.7/ptex/ptex/ctex/extra.c.orig	Sat Sep  9 17:52:55 1995
--- jtex1.7/ptex/ptex/ctex/extra.c	Sat Sep  9 17:56:09 1995
***************
*** 38,49 ****
  
  static char *texeditvalue = EDITOR;
  
! #ifdef	SYSV		/* Sys V compatibility */
! #define	index	strchr
! #define	rindex	strrchr
! extern int sprintf();
  #else
  extern char *sprintf();
  #endif
  
  /* C library stuff that we're going to use */
--- 38,50 ----
  
  static char *texeditvalue = EDITOR;
  
! #ifdef	SYSV
! extern sprintf();
! #else
! #if (defined(BSD) && (BSD > 199103))
  #else
  extern char *sprintf();
+ #endif
  #endif
  
  /* C library stuff that we're going to use */

*** jtex1.7/ptex/ptex/ctex/tex.h.orig	Sat Sep  9 17:52:55 1995
--- jtex1.7/ptex/ptex/ctex/tex.h	Sat Sep  9 17:56:13 1995
***************
*** 9,14 ****
--- 9,21 ----
  #include <stdio.h>
  #include "site.h"
  
+ #ifdef _HAVE_PRAM_H
+ #ifdef BSD
+ #undef BSD
+ #endif
+ #include <sys/param.h>
+ #endif
+ 
  /* These are used in the change files and in macros defined in tex.h */
  #define	inputpathspec	1
  #define	readpathspec	2

*** jtex1.7/ptex/ptex/jtangle/Makefile.orig	Sat Sep  9 17:53:03 1995
--- jtex1.7/ptex/ptex/jtangle/Makefile	Sat Sep  9 17:56:15 1995
***************
*** 6,12 ****
  
  BINDIR=/usr/local/bin
  
! CFLAGS=-O -Dlink=link_array -I..
  LDFLAGS=-s
  
  .SUFFIXES:
--- 6,12 ----
  
  BINDIR=/usr/local/bin
  
! CFLAGS=-O -Dlink=link_array -I.. -D_HAVE_PRAM_H
  LDFLAGS=-s
  
  .SUFFIXES:
*** jtex1.7/ptex/ptex/jtangle/tanext.c.orig	Sat Sep  9 17:53:04 1995
--- jtex1.7/ptex/ptex/jtangle/tanext.c	Sat Sep  9 17:56:17 1995
***************
*** 16,21 ****
--- 16,29 ----
  #include <stdio.h>
  #include "site.h"
  
+ #ifdef _HAVE_PRAM_H
+ #ifdef BSD
+ #undef BSD
+ #endif
+ #include <sys/param.h>
+ #endif
+ 
+ 
  #define BUF_SIZE 100		/* should agree with tangle.web */
  
  extern char buffer[];		/* 0..BUF_SIZE.  Input goes here */
***************
*** 28,34 ****
--- 36,45 ----
  extern int sprintf();
  #else
  #ifndef ANSI /*ANSI stdio.h contains sprintf prototype*/
+ #if (defined(BSD) && (BSD > 199103))
+ #else
  extern char *sprintf();
+ #endif
  #endif /*ANSI*/
  #endif
  

*** jtex1.7/ptex/ptex/site.h.orig	Sat Sep  9 17:53:07 1995
--- jtex1.7/ptex/ptex/site.h	Sat Sep  9 17:56:18 1995
***************
*** 18,24 ****
   * Default editor command string: %d expands to the line number where
   * TeX or Metafont found an error and %s expands to the name of the file.
   */
! #define	EDITOR		"/usr/local/bin/jvi +%d %s"
  
  /*
   * If the type "int" is at least 32 bits (including a sign bit), this
--- 18,24 ----
   * Default editor command string: %d expands to the line number where
   * TeX or Metafont found an error and %s expands to the name of the file.
   */
! #define	EDITOR		"/usr/bin/vi +%d %s"
  
  /*
   * If the type "int" is at least 32 bits (including a sign bit), this
***************
*** 106,126 ****
  typedef double real;
  
  /* TeX search paths: This is what we use at U. of Washington. */
! #define	TEXINPUTS	".:/usr/lib/tex/macros"
! #define	TEXFONTS	".:/usr/lib/tex/fonts"
! #define	TEXPOOL		".:/usr/lib/tex"
! #define	TEXFORMATS	".:/usr/lib/tex"
  
  /* Metafont search paths */
! #define	MFINPUTS	".:/usr/lib/mf/inputs"
! #define	MFBASES		".:/usr/lib/mf/bases"
! #define	MFPOOL		".:/usr/lib/mf"
  
  /*
   * BibTeX search path for .bib files.
   * NB: TEXINPUTS is used by BibTeX to search for .bst files.
   */
! #define	BIBINPUTS	".:/usr/lib/bibfiles"
  
  /*
   * Metafont Window Support: More than one may be defined, as long
--- 106,126 ----
  typedef double real;
  
  /* TeX search paths: This is what we use at U. of Washington. */
! #define	TEXINPUTS	".:/usr/local/share/tex/ainputs:/usr/local/share/tex/inputs"
! #define	TEXFONTS	".:/usr/local/share/tex/fonts:/usr/local/share/tex/jfonts/jfms"
! #define	TEXPOOL		".:/usr/local/share/tex/apool"
! #define	TEXFORMATS	".:/usr/local/share/tex/aformats"
  
  /* Metafont search paths */
! #define	MFINPUTS	".:/usr/local/share/mf/inputs"
! #define	MFBASES		".:/usr/local/share/mf/bases"
! #define	MFPOOL		".:/usr/local/share/mf"
  
  /*
   * BibTeX search path for .bib files.
   * NB: TEXINPUTS is used by BibTeX to search for .bst files.
   */
! #define	BIBINPUTS	".:/usr/local/lib/bibfiles"
  
  /*
   * Metafont Window Support: More than one may be defined, as long


*** jtex1.7/ptex/ptex/web2cdir/Makefile.orig	Sat Sep  9 17:53:06 1995
--- jtex1.7/ptex/ptex/web2cdir/Makefile	Sat Sep  9 17:56:19 1995
***************
*** 4,10 ****
  
  SITEDIR=..
  OPT=-O
! CFLAGS=$(OPT) -I$(SITEDIR)
  LDFLAGS=
  #LDFLAGS=-s
  RM=/bin/rm
--- 4,10 ----
  
  SITEDIR=..
  OPT=-O
! CFLAGS=$(OPT) -I$(SITEDIR) -DFLEX -D_HAVE_PRAM_H
  LDFLAGS=
  #LDFLAGS=-s
  RM=/bin/rm

*** jtex1.7/ptex.org/ptex/web2cdir/splitup.c.orig	Sat Sep  9 17:53:06 1995
--- jtex1.7/ptex/ptex/web2cdir/splitup.c	Sat Sep  9 17:56:20 1995
***************
*** 9,14 ****
--- 9,22 ----
  #include <stdio.h>
  #include "site.h"
  
+ 
+ #ifdef _HAVE_PRAM_H
+ #ifdef BSD
+ #undef BSD
+ #endif
+ #include <sys/param.h>
+ #endif
+ 
  int filenumber = 0, ifdef_nesting = 0, has_ini, lines_in_file = 0;
  char *output_name = "tex";
  
***************
*** 29,36 ****
--- 37,48 ----
  #ifdef	SYSV
  extern sprintf();
  #else
+ #if (defined(BSD) && (BSD > 199103))
+ #else
  extern char *sprintf();
  #endif
+ #endif
+ 
  
  FILE *out, *in = stdin, *ini, *temp;
  

*** jtex1.7/ptex.org/ptex/web2cdir/web2c.c.orig	Sat Sep  9 17:53:06 1995
--- jtex1.7/ptex/ptex/web2cdir/web2c.c	Sat Sep  9 17:56:21 1995
***************
*** 19,28 ****
--- 19,38 ----
  #include "site.h"
  #include "web2cy.h"
  
+ #ifdef _HAVE_PRAM_H
+ #ifdef BSD
+ #undef BSD
+ #endif
+ #include <sys/param.h>
+ #endif
+ 
  #ifdef	SYSV
  extern sprintf();
  #else
+ #if (defined(BSD) && (BSD > 199103))
+ #else
  extern char *sprintf();
+ #endif
  #endif
  
  

*** jtex1.7/ptex/ptex/web2cdir/web2c.h.orig	Sat Sep  9 17:53:06 1995
--- jtex1.7/ptex/ptex/web2cdir/web2c.h	Sat Sep  9 17:56:24 1995
***************
*** 1,6 ****
--- 1,13 ----
  #include <stdio.h>
  #include "site.h"
  
+ #ifdef _HAVE_PRAM_H
+ #ifdef BSD
+ #undef BSD
+ #endif
+ #include <sys/param.h>
+ #endif
+ 
  #ifndef	BSD
  #include <string.h>
  #else
***************
*** 10,16 ****
--- 17,26 ----
  #ifdef	SYSV
  extern sprintf();
  #else
+ #if (defined(BSD) && (BSD > 199103))
+ #else
  extern char *sprintf();
+ #endif
  #endif
  
  #define	TRUE	1
