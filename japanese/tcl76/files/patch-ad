--- configure.in.orig	Tue Sep 15 08:14:13 1998
+++ configure.in	Tue Sep 15 08:17:43 1998
@@ -647,7 +647,20 @@
 	LD_FLAGS="-Wl,-Bexport"
 	LD_SEARCH_FLAGS=""
 	;;
-    NetBSD-*|FreeBSD-*|OpenBSD-*)
+    NetBSD-*|FreeBSD-*|OpenBSD-*)
+	if test "X$PORTOBJFORMAT" = "Xelf"; then
+	    SHLIB_CFLAGS="-fpic"
+	    SHLIB_LD='${CC} -shared -Wl,-x'
+	    SHLIB_SEARCH_FLAGS='-Wl,-soname,${TCL_LIB_FILE}'
+	    SHLIB_SUFFIX=".so"
+	    DL_OBJS="tclLoadDl.o"
+	    DL_LIBS=""
+	    LD_FLAGS=""
+	    LD_SEARCH_FLAGS=""
+	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1'
+	    TCL_UNSHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.a'
+	    TCL_LIB_VERSIONS_OK=nodots
+        else
 	# Not available on all versions:  check for include file.
 	AC_CHECK_HEADER(dlfcn.h, [
 	    SHLIB_CFLAGS="-fpic"
@@ -675,6 +688,7 @@
 	TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
 	TCL_UNSHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.a'
 	TCL_LIB_VERSIONS_OK=nodots
+	fi
 	;;
     NEXTSTEP-*)
 	SHLIB_CFLAGS=""
@@ -1012,7 +1026,7 @@
     TCL_SHLIB_CFLAGS="${SHLIB_CFLAGS}"
     TCL_LD_SEARCH_FLAGS="${LD_SEARCH_FLAGS}"
     eval "TCL_LIB_FILE=libtcl${TCL_SHARED_LIB_SUFFIX}"
-    MAKE_LIB="\${SHLIB_LD} -o ${TCL_LIB_FILE} \${OBJS} ${SHLIB_LD_LIBS}"
+    MAKE_LIB="\${SHLIB_LD} -o ${TCL_LIB_FILE} ${SHLIB_SEARCH_FLAGS} \${OBJS} ${SHLIB_LD_LIBS}"
     RANLIB=":"
 else
     if test "$AIX" = "no" ; then
