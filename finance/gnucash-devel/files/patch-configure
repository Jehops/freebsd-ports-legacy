
$FreeBSD$

--- configure.orig	Fri Jul 27 18:29:30 2001
+++ configure	Fri Jul 27 18:58:09 2001
@@ -5001,7 +5001,7 @@
 #line 5002 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
-#include <iconv.h>
+#include <giconv.h>
 int main() {
 iconv_t cd = iconv_open("","");
        iconv(cd,NULL,NULL,NULL,NULL);
@@ -5018,12 +5018,12 @@
 rm -f conftest*
     if test "$am_cv_func_iconv" != yes; then
       am_save_LIBS="$LIBS"
-      LIBS="$LIBS -liconv"
+      LIBS="$LIBS -lgiconv"
       cat > conftest.$ac_ext <<EOF
 #line 5024 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
-#include <iconv.h>
+#include <giconv.h>
 int main() {
 iconv_t cd = iconv_open("","");
          iconv(cd,NULL,NULL,NULL,NULL);
@@ -5061,7 +5061,7 @@
 #include "confdefs.h"
 
 #include <stdlib.h>
-#include <iconv.h>
+#include <giconv.h>
 extern
 #ifdef __cplusplus
 "C"
@@ -5099,7 +5099,7 @@
   fi
   LIBICONV=
   if test "$am_cv_lib_iconv" = yes; then
-    LIBICONV="-liconv"
+    LIBICONV="-lgiconv"
   fi
   
 
@@ -6023,7 +6023,7 @@
   withval="$with_help_prefix"
   GNC_HELPDIR="$with_help_prefix/gnome/help/gnucash"
 else
-  GNC_HELPDIR="\${datadir}/gnome/help/gnucash"
+  GNC_HELPDIR="\${datadir}/help/gnucash"
 fi
 
 
@@ -6461,7 +6461,7 @@
 
 
 if test "$prefer_db1" = "yes"; then
-	for ac_hdr in db_185.h db1/db.h
+	for ac_hdr in db_185.h db.h db1/db.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
@@ -6501,7 +6501,7 @@
 fi
 done
 
-	if test "$ac_cv_header_db_185_h$ac_cv_header_db1_db_h" = nono; then
+	if test "$ac_cv_header_db_185_h$ac_cv_header_db_h" = nono; then
 	  { echo "configure: error: Berkeley db library required for GnuCash" 1>&2; exit 1; }
 	fi
 	cat >> confdefs.h <<\EOF
