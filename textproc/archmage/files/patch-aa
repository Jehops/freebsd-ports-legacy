--- setup.py.orig	Fri Aug 15 08:11:14 2003
+++ setup.py	Sat Feb 26 12:29:32 2005
@@ -12,9 +12,9 @@
        url = "archmage.sf.net",
        version = "0.0.6",
 
-       py_modules = ['chmlib', 'CHM', 'mod_chm'],
-       scripts = ['archmage'],
-       data_files = [ ('/etc/', [ 'arch.conf' ] ),
+       py_modules = ['archmage.chmlib', 'archmage.CHM', 'archmage.mod_chm'],
+       scripts = ['archmage/archmage'],
+       data_files = [ ('etc/', [ 'arch.conf' ] ),
                       ( 'share/archmage/templates/',
                         ['templates/arch_contents.html',
                          'templates/arch_frameset.html',
@@ -65,13 +65,11 @@
                          'templates/icons/7.gif',
                          'templates/icons/8.gif',
                          'templates/icons/9.gif']) ],
-       ext_modules = [ Extension(name = '_chmlib',
+       ext_modules = [ Extension(name = 'archmage._chmlib',
                                  sources =
-                                 [ 'chmlib/chm_lib.c',
-                                   'chmlib/wrapper.c',
-                                   'chmlib/lzx.c',
-                                   'chmlib/az_chmlib_add.c'
+                                 [ 'chmlib/wrapper.c',
                                  ],
-                                 include_dirs=["chmlib"])
+				 libraries=["chm"]
+				)
                      ]
        )
