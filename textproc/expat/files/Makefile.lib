# $FreeBSD$

LIB=		expat
SHLIB_MAJOR?=	1
SHLIB_MINOR?=	2

# If you know what your system's byte order is, define XML_BYTE_ORDER:
# use -DXML_BYTE_ORDER=12 for little-endian byte order;
# use -DXML_BYTE_ORDER=21 for big-endian (network) byte order.
# -DXML_NS adds support for checking of lexical aspects of XML namespaces spec
# -DXML_MIN_SIZE makes a smaller but slower parser
# -DXML_DTD adds full support for parsing DTDs
CFLAGS+=	-Wall -I${.CURDIR}/xmltok -I${.CURDIR}/xmlparse -DXML_NS -DXML_DTD

SRCS=		xmltok/xmltok.c \
		xmltok/xmlrole.c \
		xmlparse/xmlparse.c
INCS=		xmlparse/xmlparse.h \
		xmltok/xmltok.h
NOMAN=		YES
INCDIR=		${LOCALBASE}/include/xml
LIBDIR=		${LOCALBASE}/lib

.include <bsd.lib.mk>

# For FreeBSD 3.x or older
.if !target(_includeinstall)
_includeinstall:
.if defined(INCS)
.for header in ${INCS}
        cd ${.CURDIR} && \
        ${INSTALL} -C -o ${INCOWN} -g ${INCGRP} -m ${INCMODE} \
                ${header} ${DESTDIR}${INCDIR}

.endfor
.endif

beforeinstall: _includeinstall
.endif

_includeinstall: pre-_includeinstall

pre-_includeinstall:
	mkdir -p ${INCDIR}
