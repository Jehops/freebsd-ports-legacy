# New ports collection makefile for: xerces-c
# Date created:        29 December 2001
# Whom:                kiesel
#
# $FreeBSD$
#

PORTNAME=	xerces_c
PORTVERSION=	1.7.0
CATEGORIES=	textproc
MASTER_SITES=	http://xml.apache.org/dist/xerces-c/stable/ \
		http://document-root.de/xerces-c-mirror/
DISTNAME=	xerces-c-src${PORTVERSION:S/./_/g}

MAINTAINER=	ports@FreeBSD.org

INSTALLS_SHLIB=yes
LDCONFIG_DIRS= ${PREFIX}/lib

XERCESWRKSRC=	${WRKSRC}/src/xercesc
CONFIGURE_WRKSRC= ${XERCESWRKSRC}
BUILD_WRKSRC=     ${XERCESWRKSRC}
INSTALL_WRKSRC=   ${XERCESWRKSRC}

USE_GMAKE=	yes
MAKE_ENV+=	XERCESCROOT=${WRKSRC}

GNU_CONFIGURE=	yes
CONFIGURE_ENV+=	XERCESCROOT=${WRKSRC} TRANSCODER="IconvFBSD"
CONFIGURE_SCRIPT= runConfigure
CONFIGURE_ARGS=	-p freebsd -n socket -P ${PREFIX}
.if defined(NO_THREADS)
CONFIGURE_ARGS+= -r none
.endif

PLIST_SUB+=	XERCESC_VER=${PORTVERSION:S/./_/g} \

pre-configure:
	${CHMOD} 700 ${CONFIGURE_WRKSRC}/runConfigure
	${CHMOD} 700 ${CONFIGURE_WRKSRC}/configure

post-install:
	${STRIP_CMD} ${PREFIX}/lib/libxerces-c${PORTVERSION:S/./_/g}.so

.include <bsd.port.mk>
