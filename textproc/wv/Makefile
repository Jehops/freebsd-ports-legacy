# New ports collection makefile for:    wv
# Date created:         Fri Nov  6 09:06:33 PST 1998
# Whom:                 sumikawa@kame.net
#
# $FreeBSD$
#

PORTNAME=	wv
PORTVERSION=	0.7.0
CATEGORIES=	textproc
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR=	wvware

MAINTAINER=	mzaki@e-mail.ne.jp

LIB_DEPENDS=	wmf.2:${PORTSDIR}/graphics/libwmf

USE_GMAKE=	yes
GNU_CONFIGURE=	yes
CONFIGURE_TARGET=	--build=${ARCH}-portbld-freebsd${OSREL}
CONFIGURE_ARGS=	--with-libwmf=${LOCALBASE} --with-libiconv=${LOCALBASE} \
		--with-png=${LOCALBASE} --with-exporter

MAN1=	wvAbw.1 wvCleanLatex.1 wvDVI.1 wvHtml.1 wvLatex.1 wvMime.1 wvPDF.1 \
	wvPS.1 wvRTF.1 wvSummary.1 wvText.1 wvVersion.1 wvWare.1 wvWml.1
MLINKS=	wvWare.1 wvConvert.1

pre-patch:
	@${PERL} -pi -e 's|<iconv.h>|<giconv.h>|g ; \
		 s|-liconv|-lgiconv|g' ${WRKSRC}/configure
	@find ${WRKSRC} -name '*.[ch]' | xargs ${PERL} -pi -e \
		's|"iconv.h"|"giconv.h"|g'

.include <bsd.port.mk>
