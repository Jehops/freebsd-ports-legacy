--- Makefile.orig	Sat Oct 10 06:15:02 1998
+++ Makefile	Wed Feb  5 23:25:16 2003
@@ -1,11 +1,12 @@
 # Copyright (c) 1994, 1995 James Clark
 # See the file COPYING for copying permission.
 
-prefix=/opt/local
+prefix=/usr/local
 exec_prefix=$(prefix)
 # Where to install the binaries
 bindir=$(exec_prefix)/bin
-INSTALL=cp
+INSTALL=install -c
+libdir=$(exec_prefix)/lib
 # You might want to uncomment this on BSD systems
 #INSTALL=install
 
@@ -13,7 +14,7 @@
 # you must use -fno-implicit-templates
 # and -O (or any optimization level >= 1).
 # c++ is a front-end for gcc which takes care of linking with -lstdc++
-CXX=c++ -fno-implicit-templates -O2
+CXX+=-fno-implicit-templates
 WARN=#-Wall -Wno-reorder -Wwrite-strings -Wpointer-arith -Wnested-externs -Woverloaded-virtual -Wbad-function-cast
 # Executables will be *very* large if you use -g.
 DEBUG=
@@ -33,14 +34,14 @@
 # Add -Dsig_atomic_t=int on SunOS 4.1.x with g++ (or any other platform
 #  which doesn't appropriately define sig_atomic_t).
 # Add -DJADE_MIF to include the Jade MIF backend
-XDEFINES=
-DEFINES=-DSP_HAVE_BOOL -DSP_ANSI_CLASS_INST -DSP_MULTI_BYTE $(XDEFINES)
-CXXFLAGS=-ansi $(DEBUG) $(WARN)
+XDEFINES=-DSGML_CATALOG_FILES_DEFAULT=\"/usr/local/share/sgml/catalog\"
+DEFINES=-DSP_HAVE_BOOL -DSP_ANSI_CLASS_INST -DSP_MULTI_BYTE -DSP_HAVE_LOCALE -DSP_HAVE_SOCKET $(XDEFINES)
+CXXFLAGS+=-ansi $(DEBUG) $(WARN)
 # Flag to pass to CXX to make it output list of dependencies as a Makefile.
 CXXDEPGENFLAGS=-MM
 LDFLAGS=
-CC=gcc
-CFLAGS=-O $(DEBUG)
+#CC=gcc
+CFLAGS+=$(DEBUG)
 # Missing library functions
 # Uncomment these if your C++ system doesn't provide them.
 LIBOBJS=#strerror.o memmove.o
@@ -48,14 +49,14 @@
 # If you defined SP_HAVE_SOCKET, add any libraries that are needed for sockets
 # -lsocket -lnsl needed on Solaris 2.x
 # -lnsl on SunOS 4.1.3
-XLIBS=#-lsocket -lnsl
+XLIBS=-lgcc
 # -L/usr/local/lib may be needed on the RS/6000
 LIBS=-lm $(XLIBS)
 # If you're building in another directory, copy or link this Makefile
 # to the build directory, and set srcdir to point to the source directory.
 srcdir=.
 AR=ar
-RANLIB=:
+RANLIB=ranlib
 # Uncomment this for SunOS 4.1.3 or FreeBSD
 # (and probably other BSD flavor systems as well)
 #RANLIB=ranlib
@@ -145,3 +146,5 @@
 	rm -fr sp-$$version
 
 FORCE:
+
+.PHONY: FORCE lib
