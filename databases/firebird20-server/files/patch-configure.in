--- configure.in.orig	Fri Dec  8 21:26:56 2006
+++ configure.in	Fri Jan 12 13:04:42 2007
@@ -445,9 +445,10 @@
 			AC_CHECK_LIB(termcap, tgetent, , \
 				AC_CHECK_LIB(tinfo, tgetent, , \
 					AC_MSG_ERROR(termcap support not found)))))  
-	AC_SUBST(EDITLINE_A, -leditline)
+	AC_SUBST(EDITLINE_A, "-ledit -lreadline")
 fi
 AC_CHECK_LIB(stdc++, main,,, $LIBS)
+AM_PATH_ICU(3, 6)
 
 
 dnl Check for functions
@@ -718,6 +719,10 @@
 AC_SUBST(NEW_FIREBIRD_DIR)
 
 AC_DEFINE_UNQUOTED(FB_PREFIX, $(if test "x$prefix" = "xNONE" ; then echo \"$ac_default_prefix\"; else echo \"$prefix\"; fi), [Installation path prefix])
+AC_DEFINE_UNQUOTED(FB_EXEC_PREFIX, "$exec_prefix", [Executables path prefix])
+AC_DEFINE_UNQUOTED(FB_CONF_PREFIX, "$sysconfdir", [Single-machine data path prefix])
+AC_DEFINE_UNQUOTED(FB_MSG_PREFIX, "$datadir", [Architecture-independent data path prefix])
+AC_DEFINE_UNQUOTED(FB_LIBEXEC_PREFIX, "$libexecdir", [Program executables path prefix])
 
 AC_CONFIG_COMMANDS(,,[
 dnl # rebuild version header if needed
@@ -1026,19 +1031,11 @@
 gen/Makefile.install:builds/install/arch-specific/${INSTALL_PREFIX}/Makefile.in
 Makefile:Makefile.in
 gen/Makefile.extern.editline:${MAKE_SRC_DIR}/Makefile.in.extern.editline
-gen/Makefile.extern.icu:${MAKE_SRC_DIR}/Makefile.in.extern.icu
 )
 
 
 
-if test "$PROD_BUILD_FLG" = N; then
-  DEBUG_ICU=--enable-debug
-fi
-
 AC_OUTPUT
-(cd extern/icu/source
-chmod +x runConfigureICU configure install-sh
-./runConfigureICU "$ICU_PLATFORM" "$DEBUG_ICU" --prefix=`pwd`/..)
 
 
 dnl Print out the build configuration (the most interesting thing)
