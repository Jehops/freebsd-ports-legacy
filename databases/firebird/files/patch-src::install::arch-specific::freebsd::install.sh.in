--- src/install/arch-specific/freebsd/install.sh.in.orig	Thu Nov  6 23:23:29 2003
+++ src/install/arch-specific/freebsd/install.sh.in	Tue Jan 13 17:36:16 2004
@@ -59,7 +59,7 @@
 	if [ -d $InstallPrefix/firebird.old ]; then
 		rm -rf $InstallPrefix/firebird.old
 	fi
-	mv $InstallFirebirdPrefix $InstallPrefix/firebird.old
+	cp -Rp $InstallFirebirdPrefix $InstallPrefix/firebird.old
 fi
 
 if [ `id -u` -ne 0 ]; then
@@ -162,7 +162,7 @@
 #cp -r $BuiltFBDir/doc $DestDir 
 
 cp $BuiltFBDir/firebird.msg $DestDir/firebird.msg 
-cp $BuiltFBDir/security.fdb $DestDir/security.fdb 
+cp $BuiltFBDir/security.fdb $DestDir/security.fdb.sample
 
 
 #cp $BuiltFBDir/include/gds.f $DestDir/include 
@@ -190,19 +190,19 @@
 cp $BuildRootDir/doc/WhatsNew $DestDir/WhatsNew
 cp $BuildRootDir/doc/README.user $DestDir/README
 
-cp $BuiltFBDir/misc/firebird.conf $DestDir/firebird.conf
+cp $BuiltFBDir/misc/firebird.conf $DestDir/firebird.conf.sample
 
-echo "#" >> $DestDir/aliases.conf
-echo "# List of known database aliases" >> $DestDir/aliases.conf
-echo "# ------------------------------" >> $DestDir/aliases.conf
-echo "#" >> $DestDir/aliases.conf
-echo "# Examples:" >> $DestDir/aliases.conf
-echo "#" >> $DestDir/aliases.conf
-echo "# employee = /$FBRootDir/examples/employee.fdb" >> $DestDir/aliases.conf
-echo "#" >> $DestDir/aliases.conf
+echo "#" >> $DestDir/aliases.conf.sample
+echo "# List of known database aliases" >> $DestDir/aliases.conf.sample
+echo "# ------------------------------" >> $DestDir/aliases.conf.sample
+echo "#" >> $DestDir/aliases.conf.sample
+echo "# Examples:" >> $DestDir/aliases.conf.sample
+echo "#" >> $DestDir/aliases.conf.sample
+echo "# employee = $DestDir/examples/employee.fdb" >> $DestDir/aliases.conf.sample
+echo "#" >> $DestDir/aliases.conf.sample
     
 
-chown -R firebird:firebird $InstallFirebirdPrefix
+chown -R $fbUID:$fbGID $InstallFirebirdPrefix
 chmod -R o= $InstallFirebirdPrefix
 
 # Now fix up the mess.
@@ -235,8 +235,8 @@
 chmod -R a=rx $InstallFirebirdPrefix/lib/*
 
 cd $InstallFirebirdPrefix/lib
-ln -sf libfbclient.so libgds.so
-ln -sf libfbclient.so.1 libgds.so.1
+ln -sf libfbembed.so libgds.so
+ln -sf libfbembed.so.1 libgds.so.1
 
 cd $InstallFirebirdPrefix/bin
 for i in `ls`
@@ -265,19 +265,25 @@
 	FileName=$i.`hostname`
 	touch $FileName
 	chmod ug=rw,o= $FileName
-	chown firebird:firebird $FileName
+	chown $fbUID:$fbGID $FileName
 done
 
-touch firebird.log aliases.conf firebird.conf
-chown firebird:firebird firebird.log
+touch firebird.log
+chown $fbUID:$fbGID firebird.log
 chmod ug=rw,o= firebird.log
-chmod a=r firebird.msg aliases.conf firebird.conf README
+chmod a=r firebird.msg README
+chown root:wheel *.sample
+chmod ug=r,o= *.sample
 
 # make databases writable by firebird only
 # local database connections are not a good idea
 chmod ug=rw,o= examples/*.fdb
 chmod ug=rw,o= help/*.fdb
-chmod ug=rw,o= security.fdb
+
+# install the samples if they don't exist
+[ -f aliases.conf ] || install -o $fbUID -g $fbGID -m 444 aliases.conf.sample aliases.conf
+[ -f firebird.conf ] || install -o $fbUID -g $fbGID -m 444 firebird.conf.sample firebird.conf
+[ -f security.fdb ] || install -o $fbUID -g $fbGID -m 660 security.fdb.sample security.fdb
 
 # remove any existing gds service
 cp /etc/services /etc/services.old
