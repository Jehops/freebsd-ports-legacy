--- configure.orig	Fri Sep  8 09:50:33 2000
+++ configure	Sat Sep 23 23:33:39 2000
@@ -1057,7 +1057,7 @@
 PROTOCOL_VERSION=10
 DOT_FRM_VERSION=6
 # See the libtool docs for information on how to do shared lib versions.
-SHARED_LIB_VERSION=9:0:0
+SHARED_LIB_VERSION=6:0:0
 
 # Set all version vars based on $VERSION. How do we do this more elegant ?
 # Remember that regexps needs to quote [ and ] since this is run through m4
@@ -2908,7 +2908,7 @@
   ;;
 esac
 fi
-HOSTNAME="$ac_cv_path_HOSTNAME"
+HOSTNAME="$ac_cv_path_HOSTNAME -s"
 if test -n "$HOSTNAME"; then
   echo "$ac_t""$HOSTNAME" 1>&6
 else
@@ -3036,29 +3036,7 @@
 echo $ac_n "checking "how to check if pid exists"""... $ac_c" 1>&6
 echo "configure:3038: checking "how to check if pid exists"" >&5
 PS=$ac_cv_path_PS
-# Linux style
-if $PS p $$ 2> /dev/null | grep $0 > /dev/null
-then
-  FIND_PROC="$PS p \$\$PID | grep mysqld > /dev/null"
-# Solaris
-elif $PS -p $$ 2> /dev/null | grep $0 > /dev/null
-then
-  FIND_PROC="$PS -p \$\$PID | grep mysqld > /dev/null"
-# BSD style
-elif $PS -uaxww 2> /dev/null | grep $0 > /dev/null
-then
-  FIND_PROC="$PS -uaxww | grep mysqld | grep \" \$\$PID \" > /dev/null"
-# SysV style
-elif $PS -ef 2> /dev/null | grep $0 > /dev/null
-then
-  FIND_PROC="$PS -ef | grep mysqld | grep \" \$\$PID \" > /dev/null"
-# Do anybody use this?
-elif $PS $$ 2> /dev/null | grep $0 > /dev/null
-then
-  FIND_PROC="$PS \$\$PID | grep mysqld > /dev/null"
-else
-  { echo "configure: error: Could not find the right ps switches. Which OS is this ?. See the Installation chapter in the Reference Manual." 1>&2; exit 1; }
-fi
+FIND_PROC="$PS -uaxww | grep mysqld | grep \" \$\$PID \" > /dev/null"
 
 echo "$ac_t"""$FIND_PROC"" 1>&6
 
@@ -5354,8 +5332,6 @@
 #define $ac_tr_lib 1
 EOF
 
-  LIBS="-lc_r $LIBS"
-
 else
   echo "$ac_t""no" 1>&6
 fi
@@ -5578,28 +5554,6 @@
 fi
 
 
-# Build optimized or debug version ?
-# First check for gcc and g++
-if test "$ac_cv_prog_gcc" = "yes"
-then
-  DEBUG_CFLAGS="-g"
-  DEBUG_OPTIMIZE_CC="-O"
-  OPTIMIZE_CFLAGS="-O6"
-else
-  DEBUG_CFLAGS="-g"
-  DEBUG_OPTIMIZE_CC=""
-  OPTIMIZE_CFLAGS="-O"
-fi
-if test "$ac_cv_prog_cxx_g" = "yes"
-then
-  DEBUG_CXXFLAGS="-g"
-  DEBUG_OPTIMIZE_CXX="-O"
-  OPTIMIZE_CXXFLAGS="-O3"
-else
-  DEBUG_CXXFLAGS="-g"
-  DEBUG_OPTIMIZE_CXX=""
-  OPTIMIZE_CXXFLAGS="-O"
-fi
 # Check whether --with-debug or --without-debug was given.
 if test "${with_debug+set}" = set; then
   withval="$with_debug"
@@ -6280,10 +6234,6 @@
 ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 
-if test "$ac_cv_prog_gxx" = "yes"
-then
-  CXXFLAGS="$CXXFLAGS -Werror"
-fi
 mysql_cv_btype_last_arg_accept=none
 cat > conftest.$ac_ext <<EOF
 #line 6290 "configure"
@@ -8290,10 +8240,6 @@
 ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 
-if test "$ac_cv_prog_gxx" = "yes"
-then
-  CXXFLAGS="$CXXFLAGS -Werror"
-fi
 cat > conftest.$ac_ext <<EOF
 #line 8299 "configure"
 #include "confdefs.h"
@@ -8358,10 +8304,6 @@
 ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 
-if test "$ac_cv_prog_gxx" = "yes"
-then
-  CXXFLAGS="$CXXFLAGS -Werror"
-fi
 cat > conftest.$ac_ext <<EOF
 #line 8367 "configure"
 #include "confdefs.h"
@@ -8425,10 +8367,6 @@
 ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cxx_cross
 
-if test "$ac_cv_prog_gxx" = "yes"
-then
-  CXXFLAGS="$CXXFLAGS -Werror"
-fi
 cat > conftest.$ac_ext <<EOF
 #line 8434 "configure"
 #include "confdefs.h"
@@ -8712,7 +8650,7 @@
 #include <pthread.h>
 int main() {
 pthread_attr_t thr_attr;
-pthread_attr_setscope(&thr_attr,0);
+XXXpthread_attr_setscope(&thr_attr,0);
 ; return 0; }
 EOF
 if { (eval echo configure:8719: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
@@ -9670,7 +9608,7 @@
     echo ""
     echo "Configuring MIT Pthreads"
     # We will never install so installation paths are not needed.
-    (cd mit-pthreads; sh ./configure)
+    (cd mit-pthreads; sh ./configure ${CONFIGURE_ARGS})
     echo "End of MIT Pthreads configuration"
     echo ""
   fi
