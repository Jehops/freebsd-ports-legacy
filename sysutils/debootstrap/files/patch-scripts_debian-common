--- scripts/debian-common.orig	2021-01-12 21:19:09 UTC
+++ scripts/debian-common
@@ -200,10 +200,21 @@ echo \"Warning: Fake start-stop-daemon called, doing n
 		predep=$(without "$(without "$(resolve_deps $predep)" "$required")" "$done_predeps")
 		# XXX: progress is tricky due to how dpkg_progress works
 		# -- cjwatson 2009-07-29
+		# This step sometimes fails due to some missing functionality in Linuxulator.  Just ignore it.
+		set +e
 		p; smallyes '' |
 		in_target dpkg --force-overwrite --force-confold --skip-same-version --install $(debfor $predep)
+		rc=$?
 		base=$(without "$base" "$predep")
 		done_predeps="$done_predeps $predep"
+
+		if [ $rc != 0 ]; then
+			warning FREEBSD_00 "Applying FreeBSD-specific workaround..."
+			# ... for "Failed to mount /etc/machine-id: Bad address" with Focal.
+			in_target truncate -s0 /var/lib/dpkg/info/systemd.postinst
+			in_target dpkg --configure systemd
+		fi
+		set -e
 	done
 
 	if [ -n "$base" ]; then
