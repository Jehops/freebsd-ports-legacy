--- logrotate.c.orig	Thu Jun 17 04:37:19 1999
+++ logrotate.c	Wed Dec 29 11:31:57 1999
@@ -1,9 +1,7 @@
-#include <alloca.h>
 #include <ctype.h>
 #include <dirent.h>
 #include <errno.h>
 #include <fcntl.h>
-#include <getopt.h>
 #include <popt.h>
 #include <stdio.h>
 #include <stdlib.h>
@@ -457,6 +455,9 @@
 		    hasErrors = 1;
 		}
 	    }
+
+	    message(MESS_DEBUG, "sleep 10 to wait daemon close log\n");
+	    sleep(10);
 
 	    if (!hasErrors && !log->rotateCount) {
 		message(MESS_DEBUG, "removing rotated log (rotateCount == 0)");
