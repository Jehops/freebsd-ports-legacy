--- Makefile.orig	Fri Apr 26 14:48:53 2002
+++ Makefile	Fri Apr 26 14:51:26 2002
@@ -1,8 +1,4 @@
-CFLAGS = -Wall -W -g -O2 #-m32
-#CFLAGS += -mwin32 -DWIN32_LEAN_AND_MEAN
-SHELL = /bin/sh
-
-all: x86info test
+all: x86info
 
 OBJS =\
 	AMD/identify.o\
@@ -38,13 +34,13 @@
 	get_model_name.o\
 
 x86info: $(OBJS)
-	gcc $(CFLAGS) -o x86info $(OBJS)
+	${CC} $(CFLAGS) -o x86info $(OBJS)
 
 .c.o:
-	gcc $(CFLAGS) -o $@ -c $<
+	${CC} $(CFLAGS) -o $@ -c $<
 
 .S.o:
-	gcc $(CFLAGS) -o $@ -c $<
+	${CC} $(CFLAGS) -o $@ -c $<
 
 nodes:
 	scripts/makenodes
@@ -53,7 +49,7 @@
 	scripts/testnodes
 
 clean:
-	@find . -name "*.o" -exec rm {} \;
-	@find . -name "*~" -exec rm {} \;
-	@rm -f x86info x86info.exe
+	@find . -name "*.o" -exec ${RM} {} \;
+	@find . -name "*~" -exec ${RM} {} \;
+	@${RM-F} x86info
 
