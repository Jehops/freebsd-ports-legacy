--- Makefile.orig	Thu Apr  6 23:18:13 2000
+++ Makefile	Fri May 19 14:45:14 2000
@@ -1,10 +1,11 @@
-ICONDIR = /usr/share/icons/wmbattery
-BINDIR  = /usr/X11R6/bin
-MANDIR  = /usr/X11R6/man/man1
-INCDIR  = -I/usr/X11R6/include
-LIBDIR  = -L/usr/X11R6/lib
+PREFIX	?= /usr/X11R6
+ICONDIR = $(PREFIX)/share/wmbattery/icons
+BINDIR  = $(PREFIX)/bin
+MANDIR  = $(PREFIX)/man/man1
+INCDIR  = -I$(PREFIX)/include
+LIBDIR  = -L$(PREFIX)/lib
 LIBS    = -lXpm -lXext
-CFLAGS  = $(INCDIR) -g -DICONDIR=\"$(ICONDIR)\" -O2 -Wall
+CFLAGS += $(INCDIR) -DICONDIR=\"$(ICONDIR)\"
 
 wmbattery: wmbattery.c wmbattery.h
 	$(CC) $(CFLAGS) $(LIBDIR) $(LIBS) wmbattery.c -o wmbattery
@@ -13,10 +14,10 @@
 	rm -f wmbattery
 
 install: wmbattery
-	install -c -d $(PREFIX)$(ICONDIR) $(PREFIX)$(BINDIR) $(PREFIX)$(MANDIR)
-	install -c -s wmbattery $(PREFIX)$(BINDIR)
-	install -c -m 644 wmbattery.1x $(PREFIX)$(MANDIR)/wmbattery.1
-	install -c -m 644 *.xpm $(PREFIX)$(ICONDIR)
+	-mkdir -p $(ICONDIR) $(BINDIR) $(MANDIR)
+	${BSD_INSTALL_PROGRAM} wmbattery $(BINDIR)
+	${BSD_INSTALL_MAN} wmbattery.1x $(MANDIR)/wmbattery.1
+	${BSD_INSTALL_DATA} *.xpm $(ICONDIR)
 
 test: wmbattery
 	./wmbattery
