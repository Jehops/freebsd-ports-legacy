--- configure.orig	Thu Oct 13 19:03:54 2005
+++ configure	Tue Nov 29 12:41:17 2005
@@ -45,7 +45,7 @@
 
 
 # Directories to search in
-dirs='/usr/local/bin/ /usr/bin/ /usr/ccs/bin/ /bin/ /usr/ucb/bin/ /sbin/ /usr/sbin/ /usr/local/sbin/'
+dirs="${LOCALBASE}/bin/ /usr/bin/ /usr/ccs/bin/ /bin/ /usr/ucb/bin/ /sbin/ /usr/sbin/ ${LOCALBASE}/sbin/"
 
 
 echo ""
@@ -115,8 +115,7 @@
 fi;
 
 # Get current working directory for lib
-echo "use lib '$PWD/';" >> ./config.tmp
-echo "use lib '$PWD/lib/';" >> ./config.tmp
+echo "use lib '${PREFIX}/lib/autopsy/';" >> ./config.tmp
 
 # Write autopsy
 if (test -f ./autopsy) then
@@ -206,7 +206,7 @@
 # INSTALLATION DIRECTORY
 #############################################################################
 echo '' >> $conf;
-echo \$INSTALLDIR = \'$PWD/\'\; >> $conf; 
+echo \$INSTALLDIR = \'${PREFIX}/bin/\'\; >> $conf; 
 
 
 # Now add the variables that need user interaction
@@ -271,8 +271,9 @@
 echo '          http://www.sleuthkit.org/sleuthkit/'
 echo ''
 echo 'Enter the directory where you installed it:'
+tskdir=${LOCALBASE}
 while (test 1 -eq 1) 
-  do read tskdir;
+  do 
   if (test -x "${tskdir}/bin/icat") then
     if (test -x "${tskdir}/bin/fls") then
       echo '  Sleuth Kit bin directory was found';
@@ -284,6 +285,7 @@
   else
     echo 'The Sleuth Kit was not found (try again):';
   fi;
+  read tskdir;
 done
 
 
