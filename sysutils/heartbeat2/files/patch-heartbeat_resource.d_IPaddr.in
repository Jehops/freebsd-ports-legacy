--- heartbeat/resource.d/IPaddr.in.orig	2008-10-16 19:49:31.000000000 +0200
+++ heartbeat/resource.d/IPaddr.in	2008-10-16 19:51:23.000000000 +0200
@@ -105,7 +105,7 @@
 
     case $SYSTYPE in
       *BSD)
-		$IFCONFIG | grep "$ipaddr" -B4 | grep "UP," | cut -d ":" -f 1
+		$IFCONFIG | grep "$ipaddr " -B20 | grep "UP," | tail -n 1 | cut -d ":" -f 1
 		return 0;;
       *)
     		: "comparing $ipaddr to $addr (from ifconfig)"
