
$FreeBSD$

--- wmfsm.c.orig	Thu Aug 26 09:42:39 1999
+++ wmfsm.c	Mon Feb  5 00:38:13 2001
@@ -59,7 +59,7 @@
 #elif  defined(SunOS)
 # define STATFS(a,b) statfs(a,b,sizeof(struct statfs),0)
 # include <sys/statfs.h>
-#elif defined(__OpenBSD__)
+#elif defined(__OpenBSD__) || defined(__FreeBSD__)
 # define STATFS(a,b) statfs(a,b)
 # include <sys/param.h>
 # include <sys/mount.h>
@@ -362,7 +362,7 @@
 
 void readFileSystems(){
 /* Look for the goods between #if defined(__OpenBSD__) -- tschroed */
-#if defined(__OpenBSD__)
+#if defined(__OpenBSD__) || defined(__FreeBSD__)
 #define MAXMOUNT	32
     struct statfs sfs[MAXMOUNT];
     int fscount;
@@ -379,7 +379,7 @@
 	    { numberfs--; fscount--; }
 	else
 	    mp[numberfs]=strdup(sfs[numberfs].f_mntonname);
-#else /* __OpenBSD__ */
+#else /* __OpenBSD__ || __FreeBSD__ */
 
     FILE    *fp;
     char    mountPoint[255],dummy[255],fstype[255],options[255];
@@ -424,7 +424,7 @@
             mp[numberfs++]=strdup(mountPoint);
         }
     }
-#endif /* __OpenBSD__ */
+#endif /* __OpenBSD__ || __FreeBSD__ */
     excludeFileSystems();
 }
 void excludeFileSystems(){
