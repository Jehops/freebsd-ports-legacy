diff -Naur syscp.orig/admin_configfiles.php syscp/admin_configfiles.php
--- syscp.orig/admin_configfiles.php	Sat Dec 29 19:01:45 2007
+++ syscp/admin_configfiles.php	Mon Feb  4 03:38:41 2008
@@ -96,6 +96,7 @@
 			'<SQL_UNPRIVILEGED_PASSWORD>' => 'MYSQL_PASSWORD',
 			'<SQL_DB>' => $sql['db'],
 			'<SQL_HOST>' => $sql['host'],
+			'<ADMIN_EMAIL>' => $settings['panel']['adminmail'],
 			'<SERVERNAME>' => $settings['system']['hostname'],
 			'<SERVERIP>' => $settings['system']['ipaddress'],
 			'<VIRTUAL_MAILBOX_BASE>' => $settings['system']['vmail_homedir'],
diff -Naur syscp.orig/install/install.php syscp/install/install.php
--- syscp.orig/install/install.php	Thu Jan 24 16:05:49 2008
+++ syscp/install/install.php	Mon Feb  4 03:38:41 2008
@@ -369,7 +369,7 @@
 }
 else
 {
-	$mysql_host = '127.0.0.1';
+	$mysql_host = 'localhost';
 }
 
 if(!empty($_POST['mysql_database']))
@@ -582,10 +582,10 @@
 
 	if($apacheversion == "apache2")
 	{
-		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/etc/apache2/sites-enabled/' WHERE `settinggroup` = 'system' AND `varname` = 'apacheconf_vhost'");
-		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/etc/apache2/sites-enabled/' WHERE `settinggroup` = 'system' AND `varname` = 'apacheconf_diroptions'");
-		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/etc/apache2/syscp-htpasswd/' WHERE `settinggroup` = 'system' AND `varname` = 'apacheconf_htpasswddir'");
-		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/etc/init.d/apache2 reload' WHERE `settinggroup` = 'system' AND `varname` = 'apachereload_command'");
+		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/usr/local/etc/apache22/syscp/vhosts.conf' WHERE `settinggroup` = 'system' AND `varname` = 'apacheconf_vhost'");
+		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/usr/local/etc/apache22/syscp/diroptions.conf' WHERE `settinggroup` = 'system' AND `varname` = 'apacheconf_diroptions'");
+		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/usr/local/etc/apache22/syscp/htpasswd/' WHERE `settinggroup` = 'system' AND `varname` = 'apacheconf_htpasswddir'");
+		$db->query("UPDATE `" . TABLE_PANEL_SETTINGS . "` SET `value` = '/usr/local/etc/rc.d/apache22 graceful' WHERE `settinggroup` = 'system' AND `varname` = 'apachereload_command'");
 	}
 
 	// insert the lastcronrun to be the installation date
diff -Naur syscp.orig/install/syscp.sql syscp/install/syscp.sql
--- syscp.orig/install/syscp.sql	Sun Feb  3 16:10:09 2008
+++ syscp/install/syscp.sql	Mon Feb  4 03:38:41 2008
@@ -404,16 +404,16 @@
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (7, 'customer', 'mysqlprefix', 'sql');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (8, 'system', 'lastaccountnumber', '0');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (9, 'system', 'lastguid', '9999');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (10, 'system', 'documentroot_prefix', '/var/kunden/webs/');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (11, 'system', 'logfiles_directory', '/var/kunden/logs/');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (10, 'system', 'documentroot_prefix', '/usr/local/customers/webs/');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (11, 'system', 'logfiles_directory', '/usr/local/customers/logs/');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (12, 'system', 'ipaddress', 'SERVERIP');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (14, 'system', 'apachereload_command', '/etc/init.d/apache reload');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (14, 'system', 'apachereload_command', '/usr/local/etc/rc.d/apache22 graceful');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (15, 'system', 'last_traffic_run', '000000');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (16, 'system', 'vmail_uid', '2000');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (17, 'system', 'vmail_gid', '2000');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (18, 'system', 'vmail_homedir', '/var/kunden/mail/');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (19, 'system', 'bindconf_directory', '/etc/bind/');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (20, 'system', 'bindreload_command', '/etc/init.d/bind9 reload');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (16, 'system', 'vmail_uid', '125');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (17, 'system', 'vmail_gid', '125');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (18, 'system', 'vmail_homedir', '/usr/local/customers/mail/');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (19, 'system', 'bindconf_directory', '/var/named/etc/namedb/');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (20, 'system', 'bindreload_command', '/usr/sbin/rndc reload');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (22, 'panel', 'version', '1.2.19');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (23, 'system', 'hostname', 'SERVERNAME');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (24, 'login', 'maxloginattempts', '3');
@@ -426,7 +426,7 @@
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (32, 'system', 'lastcronrun', '');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (33, 'panel', 'paging', '20');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (34, 'system', 'defaultip', '0');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (35, 'system', 'apacheversion', 'apache1');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (35, 'system', 'apacheversion', 'apache2');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (36, 'system', 'phpappendopenbasedir', '/tmp/');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (37, 'panel', 'natsorting', '1');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (38, 'system', 'deactivateddocroot', '');
@@ -438,9 +438,9 @@
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (44, 'system', 'mod_log_sql', '0');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (45, 'system', 'mod_fcgid', '0');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (46, 'panel', 'sendalternativemail', '0');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (47, 'system', 'apacheconf_vhost', '/etc/apache/vhosts.conf');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (48, 'system', 'apacheconf_diroptions', '/etc/apache/diroptions.conf');
-INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (49, 'system', 'apacheconf_htpasswddir', '/etc/apache/htpasswd/');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (47, 'system', 'apacheconf_vhost', '/usr/local/etc/apache22/syscp/vhosts.conf');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (48, 'system', 'apacheconf_diroptions', '/usr/local/etc/apache22/syscp/diroptions.conf');
+INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (49, 'system', 'apacheconf_htpasswddir', '/usr/local/etc/apache22/syscp/htpasswd/');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (50, 'system', 'webalizer_quiet', '2');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (51, 'ticket', 'noreply_email', 'NO-REPLY@SERVERNAME');
 INSERT INTO `panel_settings` (`settingid`, `settinggroup`, `varname`, `value`) VALUES (52, 'ticket', 'worktime_all', '1');
diff -Naur syscp.orig/lib/configfiles_index.inc.php syscp/lib/configfiles_index.inc.php
--- syscp.orig/lib/configfiles_index.inc.php	Thu Jan 31 19:58:08 2008
+++ syscp/lib/configfiles_index.inc.php	Mon Feb  4 03:59:45 2008
@@ -16,6 +16,131 @@
  */
 
 $configfiles = Array(
+	'freebsd_release' => Array(
+                'label' => 'FreeBSD (RELEASE)',
+                'services' => Array(
+                        'http' => Array(
+                                'label' => $lng['admin']['configfiles']['http'],
+                                'daemons' => Array(
+                                        'apache' => Array(
+                                                'label' => 'Apache',
+                                                'commands' => Array(
+							'mkdir -p ' . $settings['system']['apacheconf_htpasswddir'],
+                                                        'touch ' . $settings['system']['apacheconf_vhost'],
+                                                        'touch ' . $settings['system']['apacheconf_diroptions'],
+                                                        'mkdir -p ' . $settings['system']['documentroot_prefix'],
+                                                        'mkdir -p ' . $settings['system']['logfiles_directory'],
+							'echo "Include etc/apache22/syscp/vhosts.conf" >> /usr/local/etc/apache22/httpd.conf',
+                                                ),
+                                                'restart' => Array(
+                                                        '/usr/local/etc/rc.d/apache' . ($settings['system']['apacheversion'] == 'apache2' ? '22' : '') . ' graceful'
+                                                )
+                                        )
+                                )
+                        ),
+                        'dns' => Array(
+                                'label' => $lng['admin']['configfiles']['dns'],
+                                'daemons' => Array(
+                                        'bind' => Array(
+                                                'label' => 'Bind9',
+                                                'commands' => Array(
+                                                        'echo \'include "syscp_bind.conf";\' >> '.$settings['system']['bindconf_directory'].'named.conf',
+                                                        'touch ' . $settings['system']['bindconf_directory'] . 'syscp_bind.conf'
+                                                ),
+                                                'restart' => Array(
+                                                        '/usr/sbin/rndc reload'
+                                                )
+                                        ),
+                                )
+                        ),
+                        'mail' => Array(
+                                'label' => $lng['admin']['configfiles']['mail'],
+                                'daemons' => Array(
+					'dovecot' => Array(
+                                                'label' => 'Dovecot',
+						'commands' => Array(
+                                                        'mkdir -p /etc/ssl/dovecot',
+							'cd /etc/ssl/dovecot',
+							'openssl req -new -x509 -nodes -out cert.pem -keyout key.pem -days 365',
+							'chmod 0600 *.pem'
+							),
+                                                'files' => Array(
+							'etc_dovecot.conf' => '/usr/local/etc/dovecot.conf',
+                                                        'etc_dovecot-sql.conf' => '/usr/local/etc/dovecot-sql.conf'
+                                                ),
+                                                'restart' => Array(
+                                                        '/usr/local/etc/rc.d/dovecot restart'
+                                                )
+                                        ),
+                                )
+                        ),
+                        'smtp' => Array(
+                                'label' => $lng['admin']['configfiles']['smtp'],
+                                'daemons' => Array(
+                                        'postfix' => Array(
+                                                'label' => 'Postfix',
+                                                'files' => Array(
+                                                        'etc_postfix_main.cf' => '/usr/local/etc/postfix/main.cf',
+							'etc_postfix_master.cf' => '/usr/local/etc/postfix/master.cf',
+                                                        'etc_postfix_mysql-virtual_alias_maps.cf' => '/usr/local/etc/postfix/mysql-virtual_alias_maps.cf',
+                                                        'etc_postfix_mysql-virtual_mailbox_domains.cf' => '/usr/local/etc/postfix/mysql-virtual_mailbox_domains.cf',
+                                                        'etc_postfix_mysql-virtual_mailbox_maps.cf' => '/usr/local/etc/postfix/mysql-virtual_mailbox_maps.cf'
+                                                ),
+                                                'commands' => Array(
+                                                        'mkdir -p ' . $settings['system']['vmail_homedir'],
+                                                        'chown -R postfix:postfix ' . $settings['system']['vmail_homedir'],
+							'mkdir /usr/local/etc/postfix/ssl',
+							'cd /usr/local/etc/postfix/ssl',
+							'openssl req -new -x509 -nodes -out smtpd.pem -keyout smtpd.pem -days 3650',
+							'chmod 750 /usr/local/etc/postfix/ssl',
+							'chmod 640 /usr/local/etc/postfix/ssl/smtpd.pem',
+							'chgrp -R postfix /usr/local/etc/postfix/ssl',
+							'cd /usr/local/etc/postfix',
+							'touch mysql-virtual_alias_maps.cf',
+							'touch mysql-virtual_mailbox_domains.cf',
+							'touch  mysql-virtual_mailbox_maps.cf',
+							'chmod 640 /usr/local/etc/postfix/mysql-virtual_*',
+							'chgrp postfix /usr/local/etc/postfix/mysql-virtual_*'
+                                                ),
+                                                'restart' => Array(
+                                                        '/usr/local/etc/rc.d/postfix reload'
+                                                )
+                                        ),
+                                )
+                        ),
+                        'ftp' => Array(
+                                'label' => $lng['admin']['configfiles']['ftp'],
+                                'daemons' => Array(
+                                        'proftpd' => Array(
+                                                'label' => 'ProFTPd',
+						'commands' => Array(
+							'mkdir -p /etc/ssl/proftpd',
+							'cd /etc/ssl/proftpd',
+							'openssl req -new -x509 -days 365 -nodes -out cert.pem -keyout key.pem',
+							'chmod 640 *.pem'
+						),
+                                                'files' => Array(
+                                                        'etc_proftpd.conf' => '/usr/local/etc/proftpd.conf'
+                                                ),
+                                                'restart' => Array(
+                                                        '/usr/local/etc/rc.d/proftpd restart'
+                                                )
+                                        ),
+                                )
+                        ),
+                        'etc' => Array(
+                                'label' => $lng['admin']['configfiles']['etc'],
+                                'daemons' => Array(
+                                        'cron' => Array(
+                                                'label' => 'Crond (cronscript)',
+                                                'files' => Array(
+                                                        'cron_syscp' => 'crontab -e (As root)'
+                                                )
+                                        )
+                                )
+                        )
+                )
+        ),
 	'debian_sarge' => Array(
 		'label' => 'Debian 3.1 (Sarge)',
 		'services' => Array(
@@ -368,4 +493,4 @@
 	)
 );
 
-?>
\ No newline at end of file
+?>
diff -Naur syscp.orig/scripts/cron_tasks.php syscp/scripts/cron_tasks.php
--- syscp.orig/scripts/cron_tasks.php	Thu Jan 24 14:17:40 2008
+++ syscp/scripts/cron_tasks.php	Mon Feb  4 03:38:41 2008
@@ -361,7 +361,7 @@
 		{
 			safe_exec('mkdir -p ' . escapeshellarg($settings['system']['documentroot_prefix'] . $row['data']['loginname'] . '/webalizer'));
 			safe_exec('mkdir -p ' . escapeshellarg($settings['system']['vmail_homedir'] . $row['data']['loginname']));
-			safe_exec('cp -a ' . $pathtophpfiles . '/templates/misc/standardcustomer/* ' . escapeshellarg($settings['system']['documentroot_prefix'] . $row['data']['loginname'] . '/'));
+			safe_exec('cp -Rp ' . $pathtophpfiles . '/templates/misc/standardcustomer/* ' . escapeshellarg($settings['system']['documentroot_prefix'] . $row['data']['loginname'] . '/'));
 			safe_exec('chown -R ' . (int)$row['data']['uid'] . ':' . (int)$row['data']['gid'] . ' ' . escapeshellarg($settings['system']['documentroot_prefix'] . $row['data']['loginname']));
 			safe_exec('chown -R ' . (int)$settings['system']['vmail_uid'] . ':' . (int)$settings['system']['vmail_gid'] . ' ' . escapeshellarg($settings['system']['vmail_homedir'] . $row['data']['loginname']));
 		}
@@ -721,7 +721,7 @@
 			$bindconf_file.= '# Domain ID: ' . $domain['id'] . ' - CustomerID: ' . $domain['customerid'] . ' - CustomerLogin: ' . $domain['loginname'] . "\n";
 			$bindconf_file.= 'zone "' . $domain['domain'] . '" in {' . "\n";
 			$bindconf_file.= '	type master;' . "\n";
-			$bindconf_file.= '	file "' . $settings['system']['bindconf_directory'] . $domain['zonefile'] . '";' . "\n";
+			$bindconf_file.= '	file "master/'.$domain['zonefile'].'";'."\n";
 			$bindconf_file.= '	allow-query { any; };' . "\n";
 
 			if(count($nameservers) > 1)
@@ -806,4 +806,4 @@
  * END CRONSCRIPT FOOTER
  */
 
-?>
\ No newline at end of file
+?>
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/cron/cron_syscp syscp/templates/misc/configfiles/freebsd_release/cron/cron_syscp
--- syscp.orig/templates/misc/configfiles/freebsd_release/cron/cron_syscp	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/cron/cron_syscp	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,10 @@
+#
+# Set PATH, otherwise restart-scripts won't find start-stop-daemon
+#
+PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin
+#
+# Regular cron jobs for the syscp package
+#
+*/5 * * * *	/usr/local/bin/php -q /usr/local/www/syscp/scripts/cron_tasks.php
+0 0 * * *	/usr/local/bin/php -q /usr/local/www/syscp/scripts/cron_traffic.php
+30 0 * * *	/usr/local/bin/php -q /usr/local/www/syscp/scripts/cron_ticketarchive.php
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot-sql.conf syscp/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot-sql.conf
--- syscp.orig/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot-sql.conf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot-sql.conf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,5 @@
+driver = mysql
+connect = host=<SQL_HOST> dbname=<SQL_DB> user=<SQL_UNPRIVILEGED_USER> password=<SQL_UNPRIVILEGED_PASSWORD>
+default_pass_scheme = CRYPT
+password_query = SELECT username AS user, password_enc AS password FROM mail_users WHERE username = '%u'
+user_query = SELECT CONCAT(homedir,maildir) AS home, concat('maildir:',homedir,maildir) AS mail, uid, gid FROM mail_users where username = '%u'
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot.conf syscp/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot.conf
--- syscp.orig/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot.conf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/dovecot/etc_dovecot.conf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,44 @@
+base_dir = /var/run/dovecot/
+protocols = imap imaps pop3 pop3s
+listen = *
+disable_plaintext_auth = no
+shutdown_clients = no
+ssl_disable = no
+ssl_cert_file = /etc/ssl/dovecot/cert.pem
+ssl_key_file = /etc/ssl/dovecot/key.pem
+login_greeting = <SERVERNAME> Server Ready.
+mail_extra_groups = mail
+verbose_proctitle = yes
+first_valid_uid = <VIRTUAL_UID_MAPS>
+first_valid_gid = <VIRTUAL_GID_MAPS>
+protocol imap {
+  mail_plugins = quota imap_quota
+  imap_client_workarounds = delay-newmail outlook-idle netscape-eoh tb-extra-mailbox-sep
+}
+protocol pop3 {
+  pop3_uidl_format = %08Xu%08Xv
+  mail_plugins = quota
+  pop3_client_workarounds = outlook-no-nuls oe-ns-eoh
+}
+protocol lda {
+  postmaster_address = <ADMIN_EMAIL>
+  sendmail_path = /usr/sbin/sendmail
+}
+auth default {
+  mechanisms = plain login
+  passdb sql {
+    args = /usr/local/etc/dovecot-sql.conf
+  }
+  userdb sql {
+    args = /usr/local/etc/dovecot-sql.conf
+  }
+  user = root
+  socket listen {
+    client {
+      path = /var/spool/postfix/private/auth
+      mode = 0660
+      user = postfix
+      group = postfix
+    }
+  }
+}
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_main.cf syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_main.cf
--- syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_main.cf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_main.cf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,81 @@
+smtpd_banner = $myhostname ESMTP
+biff = no
+append_dot_mydomain = no
+mydestination = $myhostname $mydomain localhost localhost.$mydomain
+smtpd_sender_restrictions = permit_sasl_authenticated, permit_mynetworks
+smtpd_recipient_restrictions =
+  permit_mynetworks,
+  permit_sasl_authenticated,
+  reject_non_fqdn_hostname,
+  reject_non_fqdn_sender,
+  reject_non_fqdn_recipient,
+  reject_unauth_destination,
+  reject_unauth_pipelining,
+  reject_invalid_hostname,
+  reject_rbl_client list.dsbl.org,
+  reject_rbl_client bl.spamcop.net,
+  reject_rbl_client sbl-xbl.spamhaus.org
+smtpd_sasl_auth_enable = yes
+smtpd_sasl_authenticated_header = yes
+smtpd_sasl_local_domain = $myhostname
+smtpd_sasl_security_options = noanonymous
+broken_sasl_auth_clients = yes
+smtpd_sasl_type = dovecot
+smtpd_sasl_path = private/auth    
+smtp_use_tls = yes
+smtpd_use_tls = yes
+smtp_tls_note_starttls_offer = yes
+smtpd_tls_key_file = /usr/local/etc/postfix/ssl/smtpd.pem
+smtpd_tls_cert_file = /usr/local/etc/postfix/ssl/smtpd.pem
+smtpd_tls_CAfile = /usr/local/etc/postfix/ssl/smtpd.pem
+smtpd_tls_loglevel = 0
+smtpd_tls_received_header = yes
+smtpd_tls_session_cache_timeout = 3600s
+tls_random_source = dev:/dev/urandom
+virtual_alias_maps = proxy:mysql:/usr/local/etc/postfix/mysql-virtual_alias_maps.cf
+virtual_gid_maps = static:<VIRTUAL_GID_MAPS>
+virtual_mailbox_base = <VIRTUAL_MAILBOX_BASE>
+virtual_mailbox_domains = proxy:mysql:/usr/local/etc/postfix/mysql-virtual_mailbox_domains.cf
+virtual_mailbox_limit = 51200000
+virtual_mailbox_maps = proxy:mysql:/usr/local/etc/postfix/mysql-virtual_mailbox_maps.cf
+virtual_minimum_uid = 125
+virtual_transport = virtual
+virtual_uid_maps = static:<VIRTUAL_UID_MAPS>
+virtual_create_maildirsize = yes
+virtual_mailbox_extended = yes
+# virtual_mailbox_limit_maps = proxy:mysql:/usr/local/etc/postfix/mysql-virtual_mailbox_limit_maps.cf
+proxy_read_maps = $local_recipient_maps $mydestination $virtual_alias_maps
+  $virtual_alias_domains $virtual_mailbox_maps $virtual_mailbox_domains
+  $relay_recipient_maps $relay_domains $canonical_maps $sender_canonical_maps
+  $recipient_canonical_maps $relocated_maps $transport_maps $mynetworks
+  $virtual_mailbox_limit_maps
+virtual_mailbox_limit_override = yes
+virtual_maildir_limit_message = Sorry, this user has overdrawn their diskspace quota. Please try again later.
+virtual_overquota_bounce = yes
+alias_maps = $alias_database
+queue_directory = /var/spool/postfix
+command_directory = /usr/local/sbin
+daemon_directory = /usr/local/libexec/postfix
+mail_owner = postfix
+myhostname = <SERVERNAME>
+mydomain = <SERVERNAME>
+myorigin = $myhostname
+inet_interfaces = all
+unknown_local_recipient_reject_code = 550
+mynetworks = 127.0.0.0/8
+mynetworks_style = host
+transport_maps = hash:/usr/local/etc/postfix/transport
+vacation_destination_recipient_limit = 1
+mailman_destination_recipient_limit = 1
+debug_peer_level = 2
+debugger_command =
+	 PATH=/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin
+	 xxgdb $daemon_directory/$process_name $process_id & sleep 5
+sendmail_path = /usr/local/sbin/sendmail
+newaliases_path = /usr/local/bin/newaliases
+mailq_path = /usr/local/bin/mailq
+setgid_group = maildrop
+html_directory = no
+manpage_directory = /usr/local/man
+sample_directory = /usr/local/etc/postfix
+readme_directory = no
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_master.cf syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_master.cf
--- syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_master.cf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_master.cf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,28 @@
+smtp      inet  n       -       n       -       -       smtpd
+smtps     inet  n       -       n       -       -       smtpd
+  -o smtpd_tls_wrappermode=yes
+  -o smtpd_sasl_auth_enable=yes
+  -o smtpd_client_restrictions=permit_sasl_authenticated,reject
+pickup    fifo  n       -       n       60      1       pickup
+cleanup   unix  n       -       n       -       0       cleanup
+qmgr      fifo  n       -       n       300     1       qmgr
+tlsmgr    unix  -       -       n       1000?   1       tlsmgr
+rewrite   unix  -       -       n       -       -       trivial-rewrite
+bounce    unix  -       -       n       -       0       bounce
+defer     unix  -       -       n       -       0       bounce
+trace     unix  -       -       n       -       0       bounce
+verify    unix  -       -       n       -       1       verify
+flush     unix  n       -       n       1000?   0       flush
+proxymap  unix  -       -       n       -       -       proxymap
+smtp      unix  -       -       n       -       -       smtp
+relay     unix  -       -       n       -       -       smtp
+	-o fallback_relay=
+showq     unix  n       -       n       -       -       showq
+error     unix  -       -       n       -       -       error
+retry     unix  -       -       n       -       -       error
+discard   unix  -       -       n       -       -       discard
+local     unix  -       n       n       -       -       local
+virtual   unix  -       n       n       -       -       virtual
+lmtp      unix  -       -       n       -       -       lmtp
+anvil     unix  -       -       n       -       1       anvil
+scache	  unix	-	-	n	-	1	scache
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_alias_maps.cf syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_alias_maps.cf
--- syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_alias_maps.cf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_alias_maps.cf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,8 @@
+user = <SQL_UNPRIVILEGED_USER>
+password = <SQL_UNPRIVILEGED_PASSWORD>
+dbname = <SQL_DB>
+table = mail_virtual
+select_field = destination
+where_field = email
+additional_conditions = and destination <> '' and destination <> ' '
+hosts = <SQL_HOST> 
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_domains.cf syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_domains.cf
--- syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_domains.cf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_domains.cf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,8 @@
+user = <SQL_UNPRIVILEGED_USER>
+password = <SQL_UNPRIVILEGED_PASSWORD>
+dbname = <SQL_DB>
+table = panel_domains
+select_field = domain
+where_field = domain
+additional_conditions = and isemaildomain = '1'
+hosts = <SQL_HOST> 
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_maps.cf syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_maps.cf
--- syscp.orig/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_maps.cf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/postfix/etc_postfix_mysql-virtual_mailbox_maps.cf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,7 @@
+user = <SQL_UNPRIVILEGED_USER>
+password = <SQL_UNPRIVILEGED_PASSWORD>
+dbname = <SQL_DB>
+table = mail_users
+select_field = maildir
+where_field = email
+hosts = <SQL_HOST> 
diff -Naur syscp.orig/templates/misc/configfiles/freebsd_release/proftpd/etc_proftpd.conf syscp/templates/misc/configfiles/freebsd_release/proftpd/etc_proftpd.conf
--- syscp.orig/templates/misc/configfiles/freebsd_release/proftpd/etc_proftpd.conf	Thu Jan  1 00:00:00 1970
+++ syscp/templates/misc/configfiles/freebsd_release/proftpd/etc_proftpd.conf	Mon Feb  4 03:38:41 2008
@@ -0,0 +1,57 @@
+ServerName                      "<SERVERNAME> FTP Server"
+ServerType                      standalone
+ServerIdent                     off
+# DisplayConnect                  /etc/issue
+# emerg, alert, crit (empfohlen), error, warn. notice, info, debug
+SyslogLevel                     emerg
+SystemLog                       /var/log/xferlog
+LogFormat                       auth    "%v [%P] %h %t \"%r\" %s"
+ExtendedLog                     /var/log/xferlog        AUTH auth
+DeferWelcome                    off
+MultilineRFC2228                on
+DefaultServer                   on
+ShowSymlinks                    on
+AllowOverwrite                  on
+TimeoutNoTransfer               600
+TimeoutStalled                  600
+TimeoutIdle                     1200
+DisplayLogin                    welcome.msg
+DisplayChdir                    .message
+ListOptions                     "-l"
+DenyFilter                      \*.*/
+Port                            21
+MaxInstances                    30
+User                            nobody
+Group                           nogroup
+<Directory /*>
+  Umask                         022  022
+  AllowOverwrite                on
+</Directory>
+DefaultRoot ~
+RequireValidShell off
+AuthOrder mod_sql.c
+SQLAuthTypes Crypt
+SQLAuthenticate users groups
+SQLConnectInfo <SQL_DB>@<SQL_HOST> <SQL_UNPRIVILEGED_USER> <SQL_UNPRIVILEGED_PASSWORD>
+SQLUserInfo ftp_users username password uid gid homedir shell
+SQLGroupInfo ftp_groups groupname gid members
+SQLUserWhereClause "login_enabled = 'y'"
+SQLLog PASS login
+SQLNamedQuery login UPDATE "last_login=now(), login_count=login_count+1 WHERE username='%u'" ftp_users
+SQLLog RETR download
+SQLNamedQuery download UPDATE "down_count=down_count+1, down_bytes=down_bytes+%b WHERE username='%u'" ftp_users
+SQLLog STOR upload
+SQLNamedQuery upload UPDATE "up_count=up_count+1, up_bytes=up_bytes+%b WHERE username='%u'" ftp_users
+<IfModule mod_delay.c>
+  DelayEngine off
+</IfModule>
+<IfModule mod_tls.c>
+   TLSEngine on
+   TLSLog /var/log/xferlog
+   TLSProtocol SSLv23
+   TLSRequired off
+   TLSRSACertificateFile /etc/ssl/proftpd/cert.pem
+   TLSRSACertificateKeyFile /etc/ssl/proftpd/key.pem
+   TLSVerifyClient off
+   TLSRenegotiate required off
+</IfModule> 
