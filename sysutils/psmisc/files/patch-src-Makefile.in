--- src/Makefile.in.orig	Sat Nov  5 05:18:47 2005
+++ src/Makefile.in	Wed Nov 16 17:34:55 2005
@@ -14,7 +14,7 @@
 
 @SET_MAKE@
 
-SOURCES = $(fuser_SOURCES) $(killall_SOURCES) $(oldfuser_SOURCES) $(pstree_SOURCES)
+SOURCES = $(killall_SOURCES) $(pstree_SOURCES)
 
 srcdir = @srcdir@
 top_srcdir = @top_srcdir@
@@ -38,8 +38,7 @@
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
-bin_PROGRAMS = fuser$(EXEEXT) killall$(EXEEXT) pstree$(EXEEXT) \
-	oldfuser$(EXEEXT)
+bin_PROGRAMS = killall$(EXEEXT) pstree$(EXEEXT)
 subdir = src
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
@@ -75,10 +74,8 @@
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
 LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
-SOURCES = $(fuser_SOURCES) $(killall_SOURCES) $(oldfuser_SOURCES) \
-	$(pstree_SOURCES)
-DIST_SOURCES = $(fuser_SOURCES) $(killall_SOURCES) $(oldfuser_SOURCES) \
-	$(pstree_SOURCES)
+SOURCES = $(killall_SOURCES) $(pstree_SOURCES)
+DIST_SOURCES = $(killall_SOURCES) $(pstree_SOURCES)
 ETAGS = etags
 CTAGS = ctags
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
@@ -181,9 +178,8 @@
 oldfuser_SOURCES = oldfuser.c comm.h signals.c signals.h loop.h i18n.h
 fuser_SOURCES = fuser.c comm.h signals.c signals.h i18n.h fuser.h
 killall_SOURCES = killall.c comm.h signals.c signals.h i18n.h
-killall_LDADD = @SELINUX_LIB@
 pstree_SOURCES = pstree.c comm.h i18n.h
-pstree_LDADD = @TERMCAP_LIB@ @SELINUX_LIB@
+pstree_LDADD = @TERMCAP_LIB@
 BUILT_SOURCES = signames.h
 EXTRA_DIST = signames.c 
 CLEANFILES = signames.h
@@ -460,12 +456,11 @@
 
 signames.h: signames.c Makefile
 		@CPP@ -dM $< |\
-		tr -s '\t ' ' ' | sort -n -k 3 | sed \
-	's:#define SIG\([A-Z]\+[0-9]*\) \([0-9]\+\) *\(\|/\*.*\)$$:{\
-\2,"\1" },:p;d' | \
-		  grep -v '[0-9][0-9][0-9]' >signames.h || \
+		sed 's|\t | |g; s| $$||' | sort -n -k 3 |\
+		grep '^#define SIG[A-Z0-9]* [0-9]*$$'|sed 's|#define SIG||'|\
+		awk '{print "{" $$2 ",\"" $$1 "\" },"}' >signames.h || \
 		  { rm -f signames.h; exit 1; }
-		grep '^{ 1,"HUP" },$$' signames.h >/dev/null || \
+		grep '^{1,"HUP" },$$' signames.h >/dev/null || \
 		  { rm -f signames.h; exit 1; }
 
 install-exec-hook:
