
$FreeBSD$

--- configure.orig	Thu Feb 21 14:19:32 2002
+++ configure	Wed Feb 27 00:22:58 2002
@@ -7005,7 +7005,7 @@
 
 CC="$_save_cc"
 
-LDFLAGS="$_save_ldflags -L$_mozilla_lib_place $_mozilla_all_nspr_flags -lgtksuperwin"
+LDFLAGS="$_save_ldflags -L$_mozilla_lib_place $_mozilla_all_nspr_flags -lstdc++ -lgtksuperwin"
 _mozilla_gtk_super_win_libs=
 echo $ac_n "checking for gdk_superwin_get_type in -lgtksuperwin""... $ac_c" 1>&6
 echo "configure:7012: checking for gdk_superwin_get_type in -lgtksuperwin" >&5
@@ -7048,7 +7048,7 @@
 fi
 
 
-LDFLAGS="$_save_ldflags -L$_mozilla_lib_place $_mozilla_all_nspr_flags -lgtkembedmoz $_mozilla_xpcom_libs"
+LDFLAGS="$_save_ldflags -L$_mozilla_lib_place $_mozilla_all_nspr_flags -lstdc++ -lgtkembedmoz $_mozilla_xpcom_libs"
 _mozilla_gtk_moz_embed_libs=
 echo $ac_n "checking for gtk_moz_embed_get_type in -lgtkembedmoz""... $ac_c" 1>&6
 echo "configure:7055: checking for gtk_moz_embed_get_type in -lgtkembedmoz" >&5
@@ -7057,7 +7057,7 @@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lgtkembedmoz  $LIBS"
+LIBS="-lgtkembedmoz  -lgtksuperwin $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 7063 "configure"
 #include "confdefs.h"
@@ -7585,14 +7585,14 @@
    #
    # Check for libiconv
    #
-   echo $ac_n "checking for libiconv_open in -liconv""... $ac_c" 1>&6
-echo "configure:7590: checking for libiconv_open in -liconv" >&5
+   echo $ac_n "checking for libiconv_open in -lgiconv""... $ac_c" 1>&6
+echo "configure:7590: checking for libiconv_open in -lgiconv" >&5
 ac_lib_var=`echo iconv'_'libiconv_open | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-liconv  $LIBS"
+LIBS="-lgiconv  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 7598 "configure"
 #include "confdefs.h"
@@ -7632,7 +7632,7 @@
 fi
 
 if test "x$with_libiconv" = "xyes" ; then
-  ICONV_LIBS="-liconv"
+  ICONV_LIBS="-lgiconv"
 fi
 
 	
@@ -9141,7 +9141,7 @@
 fi
 
 if test x$SCROLLKEEPER_CONFIG = xno; then
-  { echo "configure: error: Couldn't find scrollkeeper-config" 1>&2; exit 1; }
+  echo "configure: warning: Couldn't find scrollkeeper-config" 1>&2
 fi
 
 
@@ -12061,6 +12061,7 @@
 s%@MOZILLA_COMPONENT_RPATH_FLAGS@%$MOZILLA_COMPONENT_RPATH_FLAGS%g
 s%@MOZILLA_COMPONENT_LDFLAGS@%$MOZILLA_COMPONENT_LDFLAGS%g
 s%@MOZILLA_COMPONENT_LIBS@%$MOZILLA_COMPONENT_LIBS%g
+s%@MOZILLA_LIB_PLACE@%$_mozilla_lib_place%g
 s%@BUILD_MOZILLA_COMPONENT_TRUE@%$BUILD_MOZILLA_COMPONENT_TRUE%g
 s%@BUILD_MOZILLA_COMPONENT_FALSE@%$BUILD_MOZILLA_COMPONENT_FALSE%g
 s%@MOZILLA_PROFILES_CFLAGS@%$MOZILLA_PROFILES_CFLAGS%g
