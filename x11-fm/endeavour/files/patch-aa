--- Makefile.orig	Tue Feb  1 19:02:33 2000
+++ Makefile	Wed Jun 21 21:09:33 2000
@@ -18,7 +18,7 @@
 #   You may modify any value as needed. Change only the ones you are
 #   absolutly sure that requires modification.
 #
-PREFIX = /usr
+PREFIX ?= /usr
 
 
 # ########################################################################
@@ -57,8 +57,7 @@
 #                               this option unless you are attempting
 #                               to debug the program.
 #
-CFLAGS = -D__USE_BSD -DUSE_XSHM -DUSE_IMLIB \
-         -O2
+CFLAGS += -D__USE_BSD -DUSE_XSHM -DUSE_IMLIB
 
 
 # ########################################################################
@@ -72,7 +71,7 @@
 #   to the LIB line depending on what you have set in the CFLAGS line
 #   farther above.
 #
-LIB = -lm -lImlib -lpng -ltiff -lgif -ljpeg -lX11 -lXpm -lXext -lz
+LIB = `imlib-config --libs` -lXpm
 # If you do not have Imlib, comment the above line and uncomment this line.
 #LIB = -lm -lX11 -lXpm -lXext
 
@@ -83,7 +82,7 @@
 #   Each argument is of the format -L<dir> where <dir> is the full
 #   path to the directory.
 #
-LIB_DIR = -L/usr/X11R6/lib
+LIB_DIR =
 
 # Header File Directories:
 #
@@ -93,7 +92,7 @@
 #   Each argument is of the format -I<dir> where <dir> is the full
 #   path to the directory.
 #
-INC = -I/usr/include
+INC = `imlib-config --cflags`
 
 
 # ########################################################################
@@ -101,7 +100,7 @@
 #
 include Makefile.srclist
 
-CC  = gcc
+CC  ?= gcc
 BIN = endeavour
 OBJ = $(SRC:.c=.o)
 .c.o:
