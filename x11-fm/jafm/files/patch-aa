*** Makefile.orig	Fri Oct 24 13:44:05 1997
--- Makefile	Sat Mar 18 21:41:42 2000
***************
*** 5,16 ****
  # requires GNU make
  
  
! INSTALLDIR=/usr/local
  #INSTALLDIR=/nb/rupert
  
! JAFMDIR=$(INSTALLDIR)/lib/jafm
  ZICDIR=$(JAFMDIR)/zic
  APPLDIR=$(JAFMDIR)/appl
  
  
  .SUFFIXES: .cc .o .cc.o
--- 5,17 ----
  # requires GNU make
  
  
! INSTALLDIR=${PREFIX}
  #INSTALLDIR=/nb/rupert
  
! JAFMDIR=$(INSTALLDIR)/share/jafm
  ZICDIR=$(JAFMDIR)/zic
  APPLDIR=$(JAFMDIR)/appl
+ QTDIR=${X11BASE}
  
  
  .SUFFIXES: .cc .o .cc.o
***************
*** 26,40 ****
  M%.cc:	%.hh
  	$(MOC) $< -o $@
  
! CC  = gcc
  MOC = ${QTDIR}/bin/moc
! Cxx =g++ 
  
! INCFLAGS=-I${QTDIR}/include
! CxxFLAGS= -Wall #-pipe
! CFLAGS= -Wall #-pipe
! OPT=-g
! DEFINES=
  # FILES
  
  HEADERS= iconview.hh menus.hh icon.hh dirbar.hh icondesk.hh deskicon.hh
--- 27,41 ----
  M%.cc:	%.hh
  	$(MOC) $< -o $@
  
! CC  ?= gcc
  MOC = ${QTDIR}/bin/moc
! Cxx ?= g++ 
  
! INCFLAGS = -I${QTDIR}/include/X11/qt -I${QTDIR}/include
! CxxFLAGS ?= -Wall #-pipe
! CFLAGS ?= -Wall #-pipe
! #OPT = -g
! #DEFINES =
  # FILES
  
  HEADERS= iconview.hh menus.hh icon.hh dirbar.hh icondesk.hh deskicon.hh
***************
*** 50,77 ****
  
  MOBJS=  Miconview.o Mmenus.o Micon.o Mdirbar.o Micondesk.o Msfm.o Mdeskicon.o
  
! LIBDIR=-L${QTDIR}/lib -L/usr/X11/lib
  
  jafm	: $(OBJS) $(MOBJS)
  	$(Cxx) $(CxxLFAGS) -o jafm $(OBJS) $(MOBJS) $(LIBDIR) -lqt -lX11 -lXext
  
  # must do this properly next time...
  install: jafm
! 	mkdir -p -m 755 $(JAFMDIR)
! 	mkdir -p -m 755 $(INSTALLDIR)/bin
! 	mkdir -p -m 755 $(APPLDIR)
! 	mkdir -p -m 755 $(ZICDIR) 
! 	cp system.jafmrules $(JAFMDIR)/system.jafmrules
! 	chmod 755 $(JAFMDIR)/system.jafmrules
! 	cp jafm $(INSTALLDIR)/bin/jafm
! 	chmod 755 $(INSTALLDIR)/bin/jafm
! 	cp zic/*.zic $(ZICDIR)
! 	chmod 644 $(ZICDIR)/*
! 	cp  appl/* $(APPLDIR)
! 	chmod 644 $(APPLDIR)/*
! 	mkdir -p -m 755 $(INSTALLDIR)/man/man8
! 	cp jafm.8 $(INSTALLDIR)/man/man8
! 	chmod 644 $(INSTALLDIR)/man/man8/jafm.8
  
  dep: $(MSOURCES)
  	makedepend -I. -I$(QTDIR)/include $(SOURCES) $(MSOURCES) >/dev/null 2>&1
--- 51,71 ----
  
  MOBJS=  Miconview.o Mmenus.o Micon.o Mdirbar.o Micondesk.o Msfm.o Mdeskicon.o
  
! LIBDIR=-L${QTDIR}/lib
  
  jafm	: $(OBJS) $(MOBJS)
  	$(Cxx) $(CxxLFAGS) -o jafm $(OBJS) $(MOBJS) $(LIBDIR) -lqt -lX11 -lXext
  
  # must do this properly next time...
  install: jafm
! 	mkdir -p $(JAFMDIR)
! 	mkdir -p $(APPLDIR)
! 	mkdir -p $(ZICDIR) 
! 	${BSD_INSTALL_DATA} system.jafmrules $(JAFMDIR)/system.jafmrules
! 	${BSD_INSTALL_PROGRAM} jafm $(INSTALLDIR)/bin/jafm
! 	${BSD_INSTALL_DATA} zic/*.zic $(ZICDIR)
! 	${BSD_INSTALL_DATA} appl/* $(APPLDIR)
! 	${BSD_INSTALL_MAN} jafm.8 $(INSTALLDIR)/man/man8
  
  dep: $(MSOURCES)
  	makedepend -I. -I$(QTDIR)/include $(SOURCES) $(MSOURCES) >/dev/null 2>&1
