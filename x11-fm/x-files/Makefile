# New ports collection makefile for:	x-files
# Version required:     1.43
# Date created:		14 April 1998
# Whom:			Donald J. Maddox <dmaddox@conterra.com>
#
# $FreeBSD$
#

DISTNAME=       X-Files-2.00b1
PKGNAME=	x-files-2.00b1
CATEGORIES=	x11-fm tk80
MASTER_SITES=   http://www.hut.fi/~mkivinie/X-Files/data/

MAINTAINER=     dmaddox@conterra.com

BUILD_DEPENDS=	tclsh8.0:${PORTSDIR}/lang/tcl80
RUN_DEPENDS=	wish8.0:${PORTSDIR}/x11-toolkits/tk80

WRKSRC=		${WRKDIR}/X-Files
NO_BUILD=	yes
USE_X_PREFIX=	yes

pre-install:
	@tclsh8.0 ${SCRIPTDIR}/mktclIndex ${WRKSRC}
	@${RM} -f ${WRKSRC}/xfinstall.tcl
	@${SED} s#@X11BASE@#${X11BASE}# <${WRKSRC}/X-Files.tcl >${WRKSRC}/tmpfile
	@${MV} ${WRKSRC}/tmpfile ${WRKSRC}/X-Files.tcl

do-install:
	@${MKDIR} ${PREFIX}/lib/X11/X-Files
.for file in *.tcl xfiles* xflogo.gif Registration.form
	@${INSTALL_DATA} ${WRKSRC}/${file} ${PREFIX}/lib/X11/X-Files
.endfor
	@${CHMOD} 0555 ${PREFIX}/lib/X11/X-Files/X-Files.tcl
	@${LN} -s ${PREFIX}/lib/X11/X-Files/X-Files.tcl ${PREFIX}/bin/X-Files
	@${INSTALL_DATA} ${WRKSRC}/X-Files.xpm ${X11BASE}/include/X11/pixmaps
	@${INSTALL_MAN} ${WRKSRC}/X-Files.1x ${X11BASE}/man/man1

.include <bsd.port.mk>
