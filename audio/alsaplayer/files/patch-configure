--- configure.orig	Tue Jul 15 14:34:50 2003
+++ configure	Tue Jul 15 15:07:57 2003
@@ -2591,13 +2591,13 @@
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-g"
   else
     CFLAGS="-g"
   fi
 else
   if test "$GCC" = yes; then
-    CFLAGS="-O2"
+    CFLAGS=""
   else
     CFLAGS=
   fi
@@ -3419,13 +3419,13 @@
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-g"
   else
     CXXFLAGS="-g"
   fi
 else
   if test "$GXX" = yes; then
-    CXXFLAGS="-O2"
+    CXXFLAGS=""
   else
     CXXFLAGS=
   fi
@@ -8351,6 +8351,7 @@
 
 # This can be used to rebuild libtool when needed
 LIBTOOL_DEPS="$ac_aux_dir/ltmain.sh"
+$ac_aux_dir/ltconfig $LIBTOOL_DEPS
 
 # Always use our own libtool.
 LIBTOOL='$(SHELL) $(top_builddir)/libtool'
@@ -14618,7 +14619,11 @@
 echo "$as_me:$LINENO: checking for gcc optimization flags" >&5
 echo $ECHO_N "checking for gcc optimization flags... $ECHO_C" >&6
 old_cflags=$CFLAGS
-CFLAGS="$CFLAGS -O2 -fexpensive-optimizations -funroll-loops -finline-functions -ffast-math -Wall"
+if test "$ARCH_TYPE" = "alpha"; then
+  CFLAGS="$CFLAGS -fexpensive-optimizations -funroll-loops -finline-functions -Wall"
+else
+  CFLAGS="$CFLAGS -fexpensive-optimizations -funroll-loops -finline-functions -ffast-math -Wall"
+fi
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@ -14647,7 +14652,11 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-   EXTRA_OPT_CFLAGS="-O2 -fexpensive-optimizations -funroll-loops -finline-functions -ffast-math -Wall"
+   if test "$ARCH_TYPE" = "alpha"; then
+     EXTRA_OPT_CFLAGS="-fexpensive-optimizations -funroll-loops -finline-functions -Wall"
+   else
+     EXTRA_OPT_CFLAGS="-fexpensive-optimizations -funroll-loops -finline-functions -ffast-math -Wall"
+   fi
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
