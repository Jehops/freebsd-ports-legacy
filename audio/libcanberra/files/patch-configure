--- configure.orig	2008-08-09 15:27:31.000000000 -0400
+++ configure	2008-08-09 15:28:04.000000000 -0400
@@ -935,15 +935,19 @@ VORBIS_LIBS
 HAVE_DSO
 HAVE_PULSE
 HAVE_ALSA
+HAVE_OSS
 HAVE_NULL
 BUILTIN_DSO
 BUILTIN_PULSE
 BUILTIN_ALSA
+BUILTIN_OSS
 BUILTIN_NULL
 HAVE_PULSE_TRUE
 HAVE_PULSE_FALSE
 HAVE_ALSA_TRUE
 HAVE_ALSA_FALSE
+HAVE_OSS_TRUE
+HAVE_OSS_FALSE
 HAVE_NULL_TRUE
 HAVE_NULL_FALSE
 BUILTIN_DSO_TRUE
@@ -952,6 +956,8 @@ BUILTIN_PULSE_TRUE
 BUILTIN_PULSE_FALSE
 BUILTIN_ALSA_TRUE
 BUILTIN_ALSA_FALSE
+BUILTIN_OSS_TRUE
+BUILTIN_OSS_FALSE
 BUILTIN_NULL_TRUE
 BUILTIN_NULL_FALSE
 HTML_DIR
@@ -978,6 +984,7 @@ enable_largefile
 enable_rpath
 with_libiconv_prefix
 enable_alsa
+enable_oss
 enable_pulse
 enable_null
 enable_gtk
@@ -1650,6 +1657,7 @@ Optional Features:
   --disable-largefile     omit support for large files
   --disable-rpath         do not hardcode runtime library paths
   --disable-alsa          Disable optional ALSA support
+  --disable-oss           Disable optional OSS support
   --disable-pulse         Disable optional PulseAudio support
   --disable-null          Disable optional null output
   --disable-gtk           Disable optional GTK+ support
@@ -6080,7 +6088,7 @@ ia64-*-hpux*)
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6083 "configure"' > conftest.$ac_ext
+  echo '#line 6091 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -8509,11 +8517,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8512: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8520: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:8516: \$? = $ac_status" >&5
+   echo "$as_me:8524: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -8799,11 +8807,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8802: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8810: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:8806: \$? = $ac_status" >&5
+   echo "$as_me:8814: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -8903,11 +8911,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8906: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8914: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:8910: \$? = $ac_status" >&5
+   echo "$as_me:8918: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -11305,7 +11313,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11308 "configure"
+#line 11316 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -11405,7 +11413,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11408 "configure"
+#line 11416 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -13814,11 +13822,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13817: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13825: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:13821: \$? = $ac_status" >&5
+   echo "$as_me:13829: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -13918,11 +13926,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13921: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13929: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:13925: \$? = $ac_status" >&5
+   echo "$as_me:13933: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -15503,11 +15511,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15506: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15514: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:15510: \$? = $ac_status" >&5
+   echo "$as_me:15518: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -15607,11 +15615,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15610: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15618: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:15614: \$? = $ac_status" >&5
+   echo "$as_me:15622: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -17824,11 +17832,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:17827: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:17835: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:17831: \$? = $ac_status" >&5
+   echo "$as_me:17839: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -18114,11 +18122,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18117: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18125: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18121: \$? = $ac_status" >&5
+   echo "$as_me:18129: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -18218,11 +18226,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18221: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18229: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:18225: \$? = $ac_status" >&5
+   echo "$as_me:18233: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -21692,6 +21700,46 @@ if test "${ac_cv_c_bigendian+set}" = set
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_bigendian=unknown
+    # See if __BIG_ENDIAN__ or __LITTLE_ENDIAN__ is defined.
+       cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#if ! (defined __BIG_ENDIAN__ || defined __LITTLE_ENDIAN__)
+	       neither is defined;
+	     #endif
+	     typedef int dummy;
+
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_cv_c_bigendian=universal
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
     if test $ac_cv_c_bigendian = unknown; then
       # See if sys/param.h defines the BYTE_ORDER macro.
       cat >conftest.$ac_ext <<_ACEOF
@@ -23490,7 +23538,7 @@ fi
 
 # We must check for the threads library under a number of different
 # names; the ordering is very important because some systems
-# (e.g. DEC) have both -pthread and -pthreads, where one of the
+# (e.g. DEC) have both -lpthread and -lpthreads, where one of the
 # libraries is broken (non-POSIX).
 
 # Create a list of thread flags to try.  Items starting with a "-" are
@@ -23503,7 +23551,7 @@ acx_pthread_flags="pthreads none -Kthrea
 # The ordering *is* (sometimes) important.  Some notes on the
 # individual items follow:
 
-# pthreads: AIX (must check this before -pthread)
+# pthreads: AIX (must check this before -lpthread)
 # none: in case threads are in libc; should be tried before -Kthread and
 #       other compiler flags to prevent continual compiler warnings
 # -Kthread: Sequent (threads in libc, but -Kthread needed for pthread.h)
@@ -23526,10 +23574,10 @@ case "${host_cpu}-${host_os}" in
         # On Solaris (at least, for some versions), libc contains stubbed
         # (non-functional) versions of the pthreads routines, so link-based
         # tests will erroneously succeed.  (We need to link with -pthreads/-mt/
-        # -pthread.)  (The stubs are missing pthread_cleanup_push, or rather
+        # -lpthread.)  (The stubs are missing pthread_cleanup_push, or rather
         # a function called by this macro, so we could check for that, but
         # who knows whether they'll stub that too in a future libc.)  So,
-        # we'll just look for -pthreads and -pthread first:
+        # we'll just look for -pthreads and -lpthread first:
 
         acx_pthread_flags="-pthreads pthread -mt -pthread $acx_pthread_flags"
         ;;
@@ -23609,9 +23657,9 @@ $as_echo_n "checking for the pthreads li
         # Check for various functions.  We must include pthread.h,
         # since some functions may be macros.  (On the Sequent, we
         # need a special flag -Kthread to make this header compile.)
-        # We check for pthread_join because it is in -pthread on IRIX
+        # We check for pthread_join because it is in -lpthread on IRIX
         # while pthread_create is in libc.  We check for pthread_attr_init
-        # due to DEC craziness with -pthreads.  We check for
+        # due to DEC craziness with -lpthreads.  We check for
         # pthread_cleanup_push because it is one of the few pthread
         # functions on Solaris that doesn't have a non-functional libc stub.
         # We try pthread_create on general principles.
@@ -23916,12 +23964,12 @@ $as_echo "no" >&6; }
 
       #
       # Linux gcc on some architectures such as mips/mipsel forgets
-      # about -pthread
+      # about -lpthread
       #
       if test x"$ok" = xno; then
-         { $as_echo "$as_me:$LINENO: checking whether -pthread fixes that" >&5
-$as_echo_n "checking whether -pthread fixes that... " >&6; }
-         LIBS="-pthread $PTHREAD_LIBS $save_LIBS"
+         { $as_echo "$as_me:$LINENO: checking whether -lpthread fixes that" >&5
+$as_echo_n "checking whether -lpthread fixes that... " >&6; }
+         LIBS="-lpthread $PTHREAD_LIBS $save_LIBS"
          cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@ -23975,7 +24023,7 @@ rm -f core conftest.err conftest.$ac_obj
          if test "x$ok" = xyes; then
             { $as_echo "$as_me:$LINENO: result: yes" >&5
 $as_echo "yes" >&6; }
-            PTHREAD_LIBS="-pthread $PTHREAD_LIBS"
+            PTHREAD_LIBS="-lpthread $PTHREAD_LIBS"
          else
             { $as_echo "$as_me:$LINENO: result: no" >&5
 $as_echo "no" >&6; }
@@ -25735,6 +25783,197 @@ fi
 
 
 
+### OSS support (optional) ###
+# Check whether --enable-oss was given.
+if test "${enable_oss+set}" = set; then
+  enableval=$enable_oss;
+            case "${enableval}" in
+                yes) alsa=yes ;;
+                no) alsa=no ;;
+                *) { { $as_echo "$as_me:$LINENO: error: bad value ${enableval} for --disable-oss" >&5
+$as_echo "$as_me: error: bad value ${enableval} for --disable-oss" >&2;}
+   { (exit 1); exit 1; }; } ;;
+            esac
+
+else
+  oss=auto
+fi
+
+
+if test "x${oss}" != xno ; then
+
+
+
+for ac_header in soundcard.h sys/soundcard.h machine/soundcard.h
+do
+as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+$as_echo_n "checking for $ac_header... " >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  $as_echo_n "(cached) " >&6
+fi
+ac_res=`eval 'as_val=${'$as_ac_Header'}
+		 $as_echo "$as_val"'`
+	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+else
+  # Is the header compilable?
+{ $as_echo "$as_me:$LINENO: checking $ac_header usability" >&5
+$as_echo_n "checking $ac_header usability... " >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_header_compiler=yes
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_header_compiler=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+{ $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+$as_echo "$ac_header_compiler" >&6; }
+
+# Is the header present?
+{ $as_echo "$as_me:$LINENO: checking $ac_header presence" >&5
+$as_echo_n "checking $ac_header presence... " >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+$as_echo "$ac_try_echo") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  ac_header_preproc=yes
+else
+  $as_echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+
+rm -f conftest.err conftest.$ac_ext
+{ $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+$as_echo "$ac_header_preproc" >&6; }
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+$as_echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+$as_echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+$as_echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+$as_echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+$as_echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+$as_echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+$as_echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+$as_echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    ( cat <<\_ASBOX
+## --------------------------------------------------- ##
+## Report this to mzyvopnaoreen (at) 0pointer (dot) de ##
+## --------------------------------------------------- ##
+_ASBOX
+     ) | sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+$as_echo_n "checking for $ac_header... " >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  $as_echo_n "(cached) " >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+ac_res=`eval 'as_val=${'$as_ac_Header'}
+		 $as_echo "$as_val"'`
+	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+
+fi
+if test `eval 'as_val=${'$as_ac_Header'}
+		 $as_echo "$as_val"'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+    if test "${ac_cv_header_sys_soundcard_h}" = "yes" || \
+	test "${ac_cv_header_soundcard_h}" = "yes" || \
+	test "${ac_cv_header_machine_soundcard_h}" = "yes"; then
+	HAVE_OSS=1
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_OSS 1
+_ACEOF
+
+    else
+	HAVE_OSS=0
+        if test "x$oss" = xyes ; then
+            { { $as_echo "$as_me:$LINENO: error: *** OSS not found ***" >&5
+$as_echo "$as_me: error: *** OSS not found ***" >&2;}
+   { (exit 1); exit 1; }; }
+        fi
+    fi
+else
+    HAVE_OSS=0
+fi
+
 ### PulseAudio (optional) ####
 
 # Check whether --enable-pulse was given.
@@ -26143,6 +26382,7 @@ HAVE_DSO=0
 BUILTIN_DSO=0
 BUILTIN_PULSE=0
 BUILTIN_ALSA=0
+BUILTIN_OSS=0
 BUILTIN_NULL=0
 
 case "x$with_builtin" in
@@ -26155,6 +26395,7 @@ $as_echo "$as_me: error: *** PulseAudio 
 
         BUILTIN_PULSE=1
         HAVE_ALSA=0
+	HAVE_OSS=0
         HAVE_NULL=0
      ;;
 
@@ -26166,10 +26407,24 @@ $as_echo "$as_me: error: *** ALSA select
         fi
 
         BUILTIN_ALSA=1
+	HAVE_OSS=0
         HAVE_PULSE=0
         HAVE_NULL=0
      ;;
 
+     xoss)
+        if test "x$HAV_OSS" != x1 ; then
+	        { { $as_echo "$as_me:$LINENO: error: *** OSS selected for builtin driver, but not enabled. ***" >&5
+$as_echo "$as_me: error: *** OSS selected for builtin driver, but not enabled. ***" >&2;}
+   { (exit 1); exit 1; }; }
+	fi
+
+	BUILTIN_OSS=1
+	HAVE_ALSA=0
+	HAVE_PULSE=0
+	HAVE_NULL=0
+     ;;
+
      xnull)
         if test "x$HAVE_NULL" != x1 ; then
                 { { $as_echo "$as_me:$LINENO: error: *** Null output selected for builtin driver, but not enabled. ***" >&5
@@ -26180,6 +26435,7 @@ $as_echo "$as_me: error: *** Null output
         BUILTIN_NULL=1
         HAVE_PULSE=0
         HAVE_ALSA=0
+	HAVE_OSS=0
      ;;
 
      xdso)
@@ -26198,7 +26454,7 @@ $as_echo "$as_me: error: *** Unknown dri
    { (exit 1); exit 1; }; }
 esac
 
-if test "x$HAVE_PULSE" != x1 -a "x$HAVE_ALSA" != x1 -a "x$HAVE_NULL" != x1 ; then
+if test "x$HAVE_PULSE" != x1 -a "x$HAVE_ALSA" != x1 -a "x$HAVE_OSS" != x1 -a "x$HAVE_NULL" != x1 ; then
    { { $as_echo "$as_me:$LINENO: error: *** No backend enabled. ***" >&5
 $as_echo "$as_me: error: *** No backend enabled. ***" >&2;}
    { (exit 1); exit 1; }; }
@@ -26212,6 +26468,8 @@ fi
 
 
 
+
+
  if test "x$HAVE_PULSE" = x1; then
   HAVE_PULSE_TRUE=
   HAVE_PULSE_FALSE='#'
@@ -26228,6 +26486,14 @@ else
   HAVE_ALSA_FALSE=
 fi
 
+ if test "x$HAVE_OSS" = x1; then
+  HAVE_OSS_TRUE=
+  HAVE_OSS_FALSE='#'
+else
+  HAVE_OSS_TRUE='#'
+  HAVE_OSS_FALSE=
+fi
+
  if test "x$HAVE_NULL" = x1; then
   HAVE_NULL_TRUE=
   HAVE_NULL_FALSE='#'
@@ -26260,6 +26526,14 @@ else
   BUILTIN_ALSA_FALSE=
 fi
 
+ if test "x$BUILTIN_OSS" = x1; then
+  BUILTIN_OSS_TRUE=
+  BUILTIN_OSS_FALSE='#'
+else
+  BUILTIN_OSS_TRUE='#'
+  BUILTIN_OSS_FALSE=
+fi
+
  if test "x$BUILTIN_NULL" = x1; then
   BUILTIN_NULL_TRUE=
   BUILTIN_NULL_FALSE='#'
@@ -26539,6 +26813,13 @@ $as_echo "$as_me: error: conditional \"H
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${HAVE_OSS_TRUE}" && test -z "${HAVE_OSS_FALSE}"; then
+  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_OSS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+$as_echo "$as_me: error: conditional \"HAVE_OSS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${HAVE_NULL_TRUE}" && test -z "${HAVE_NULL_FALSE}"; then
   { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_NULL\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
@@ -26567,6 +26848,13 @@ $as_echo "$as_me: error: conditional \"B
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILTIN_OSS_TRUE}" && test -z "${BUILTIN_OSS_FALSE}"; then
+  { { $as_echo "$as_me:$LINENO: error: conditional \"BUILTIN_OSS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+$as_echo "$as_me: error: conditional \"BUILTIN_OSS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILTIN_NULL_TRUE}" && test -z "${BUILTIN_NULL_FALSE}"; then
   { { $as_echo "$as_me:$LINENO: error: conditional \"BUILTIN_NULL\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
@@ -26926,9 +27214,9 @@ _ACEOF
 
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 # Files that config.status was made for.
-config_files="`echo $ac_config_files`"
-config_headers="`echo $ac_config_headers`"
-config_commands="`echo $ac_config_commands`"
+config_files="$ac_config_files"
+config_headers="$ac_config_headers"
+config_commands="$ac_config_commands"
 
 _ACEOF
 
@@ -27379,9 +27667,9 @@ cat >>$CONFIG_STATUS <<_ACEOF || ac_writ
   }
   split(mac1, mac2, "(") #)
   macro = mac2[1]
-  prefix = substr(line, 1, index(line, defundef) - 1)
   if (D_is_set[macro]) {
     # Preserve the white space surrounding the "#".
+    prefix = substr(line, 1, index(line, defundef) - 1)
     print prefix "define", macro P[macro] D[macro]
     next
   } else {
@@ -27389,7 +27677,7 @@ cat >>$CONFIG_STATUS <<_ACEOF || ac_writ
     # in the case of _POSIX_SOURCE, which is predefined and required
     # on some systems where configure will not decide to define it.
     if (defundef == "undef") {
-      print "/*", prefix defundef, macro, "*/"
+      print "/*", line, "*/"
       next
     }
   }
@@ -28123,6 +28411,15 @@ if test "x$BUILTIN_ALSA" = "x1" ; then
    ENABLE_BUILTIN_ALSA=yes
 fi
 
+ENABLE_OSS=no
+if test "x$HAVE_OSS" = "x1" ; then
+    ENABLE_OSS=yes
+fi
+ENABLE_BUILTIN_OSS=no
+if test "x$BUILTIN_OSS" = "x1" ; then
+    ENABLE_BUILTIN_OSS=yes
+fi
+
 ENABLE_NULL=no
 if test "x$HAVE_NULL" = "x1" ; then
    ENABLE_NULL=yes
@@ -28152,6 +28449,8 @@ echo "
     Builtin PulseAudio:     ${ENABLE_BUILTIN_PULSE}
     Enable ALSA:            ${ENABLE_ALSA}
     Builtin ALSA:           ${ENABLE_BUILTIN_ALSA}
+    Enable OSS:             ${ENABLE_OSS}
+    Builtin OSS:            ${ENABLE_BUILTIN_OSS}
     Enable Null Output:     ${ENABLE_NULL}
     Builtin Null Output:    ${ENABLE_BUILTIN_NULL}
     Enable GTK+:            ${ENABLE_GTK}
