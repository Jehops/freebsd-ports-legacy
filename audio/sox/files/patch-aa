*** sbdsp.c.orig	Thu Aug 18 06:11:01 1994
--- sbdsp.c	Mon Jan 27 02:47:53 1997
***************
*** 21,27 ****
  #include <i386/isa/sblast.h>
  #else
  #ifdef LINUXSOUND
! #include <linux/soundcard.h>
  #else
  #include <sys/sb.h>
  #endif
--- 21,27 ----
  #include <i386/isa/sblast.h>
  #else
  #ifdef LINUXSOUND
! #include <machine/soundcard.h>
  #else
  #include <sys/sb.h>
  #endif
***************
*** 78,84 ****
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, &ft->info.rate);
  #else
  #if defined(LINUXSOUND)
! 	ioctl(fileno(ft->fp), SNDCTL_DSP_SPEED, ft->info.rate);
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 0);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
--- 78,88 ----
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, &ft->info.rate);
  #else
  #if defined(LINUXSOUND)
!   #if SOUND_VERSION >= 200
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, &ft->info.rate);
!   #else
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, ft->info.rate);
!   #endif
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 0);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
***************
*** 148,154 ****
  #else
  #if defined(LINUXSOUND)
  	ioctl(fileno(ft->fp), SNDCTL_DSP_SYNC, 0);
! 	ioctl(fileno(ft->fp), SNDCTL_DSP_SPEED, ft->info.rate);
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 1);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
--- 152,162 ----
  #else
  #if defined(LINUXSOUND)
  	ioctl(fileno(ft->fp), SNDCTL_DSP_SYNC, 0);
!   #if SOUND_VERSION >= 200
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, &ft->info.rate);
!   #else
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, ft->info.rate);
!   #endif
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 1);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
