diff -c -r sbdsp.c.orig sbdsp.c
*** sbdsp.c.orig	Mon Jul 26 21:58:00 1993
--- sbdsp.c	Mon Oct 17 16:07:59 1994
***************
*** 21,27 ****
  #include <i386/isa/sblast.h>
  #else
  #ifdef LINUXSOUND
! #include <linux/soundcard.h>
  #else
  #include <sys/sb.h>
  #endif
--- 21,27 ----
  #include <i386/isa/sblast.h>
  #else
  #ifdef LINUXSOUND
! #include <machine/soundcard.h>
  #else
  #include <sys/sb.h>
  #endif
***************
*** 77,83 ****
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, &off);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, &ft->info.rate);
  #elif defined(LINUXSOUND)
! 	ioctl(fileno(ft->fp), SNDCTL_DSP_SPEED, ft->info.rate);
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 0);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
--- 77,87 ----
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, &off);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, &ft->info.rate);
  #elif defined(LINUXSOUND)
!   #if SOUND_VERSION >= 200
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, &ft->info.rate);
!   #else
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, ft->info.rate);
!   #endif
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 0);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
***************
*** 143,149 ****
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, &ft->info.rate);
  #elif defined(LINUXSOUND)
  	ioctl(fileno(ft->fp), SNDCTL_DSP_SYNC, 0);
! 	ioctl(fileno(ft->fp), SNDCTL_DSP_SPEED, ft->info.rate);
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 1);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
--- 147,157 ----
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, &ft->info.rate);
  #elif defined(LINUXSOUND)
  	ioctl(fileno(ft->fp), SNDCTL_DSP_SYNC, 0);
!   #if SOUND_VERSION >= 200
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, &ft->info.rate);
!   #else
! 	ioctl(fileno(ft->fp), SOUND_PCM_WRITE_RATE, ft->info.rate);
!   #endif
  #else
  	ioctl(fileno(ft->fp), DSP_IOCTL_VOICE, 1);
  	ioctl(fileno(ft->fp), DSP_IOCTL_SPEED, ft->info.rate);
diff -c -r st.h.orig st.h
*** st.h.orig	Mon Jul 26 21:58:00 1993
--- st.h	Mon Oct 17 16:19:26 1994
***************
*** 34,39 ****
--- 34,43 ----
  #include "amiga.h"
  #endif /* AMIGA */
  
+ #ifdef bsd
+ #include <sys/param.h>
+ #endif
+ 
  /*
   * Handler structure for each format.
   */
***************
*** 211,218 ****
--- 215,226 ----
  #if defined(i386) || !defined(__STDC__)
  /* usually be a const in stdlib.h ?? */
  /* this is turning out to be a headache */
+ 
+ #if BSD < 199306
  extern char *sys_errlist[];
  #define strerror(errno)	sys_errlist[errno]
+ #endif
+ 
  #endif
  #endif
  
