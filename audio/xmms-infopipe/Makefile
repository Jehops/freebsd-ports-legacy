# Created by: mig
# $FreeBSD$

PORTNAME=	xmms-infopipe
PORTVERSION=	1.3
PORTREVISION=	8
CATEGORIES=	audio
MASTER_SITES=	http://www.beastwithin.org/users/wwwwolf/code/xmms/
MASTER_SITE_SUBDIR=	${PORTNAME}

MAINTAINER=	ports@FreeBSD.org
COMMENT=	Create a named pipe to retrieve xmms info about currently playing song

LIB_DEPENDS=	libxmms.so:${PORTSDIR}/multimedia/xmms
RUN_DEPENDS=	xmms-config:${PORTSDIR}/multimedia/xmms

USE_GNOME=	gtk12
NO_STAGE=	yes
USES=		gmake
GNU_CONFIGURE=	yes

LIBDIR?=	${PREFIX}/lib/xmms/General
SRCLIBDIR?=	src/.libs

PLIST_FILES=	lib/xmms/General/libinfopipe.so

post-patch:
	@${REINPLACE_CMD} -e '/objformat=/s|=.*|=elf|' ${WRKSRC}/configure

do-install:
	cd ${WRKSRC}/${SRCLIBDIR};\
	${MKDIR} ${LIBDIR};\
	${INSTALL_PROGRAM} libinfopipe-1.3.so.1 ${LIBDIR}/libinfopipe.so

.include <bsd.port.mk>
