Index: Makefile
diff -u Makefile.orig Makefile
--- Makefile.orig	Wed Mar 19 20:12:30 2003
+++ Makefile	Wed May 21 13:58:26 2003
@@ -3,17 +3,17 @@
 # You may want to rename the binary-file.
 BIN_FILENAME = gkrellmms
 
-GTK_INCLUDE ?= `pkg-config gtk+-2.0 --cflags`
-GTK_LIB ?= `pkg-config gtk+-2.0 --libs`
+GTK_INCLUDE ?= `pkg-config gtk+-2.0 gthread-2.0 --cflags`
+GTK_LIB ?= `pkg-config gtk+-2.0 gthread-2.0 --libs`
 IMLIB_INCLUDE ?= 
 IMLIB_LIB ?= 
 XMMS_INCLUDE ?= `xmms-config --cflags`
 XMMS_LIB ?= `xmms-config --libs`
 PLUGIN_DIR ?= /usr/local/lib/gkrellm2/plugins
 
-FLAGS = -O2 -Wall -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE) $(XMMS_INCLUDE)
+FLAGS = -Wall -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE) $(XMMS_INCLUDE)
 LIBS = $(GTK_LIB) $(IMLIB_LIB) $(XMMS_LIB)
-LFLAGS = -shared -lpthread
+LFLAGS = -shared
 
 LOCALEDIR ?= /usr/share/locale
 ifeq ($(enable_nls),1)
@@ -24,8 +24,7 @@
 FLAGS += -DPACKAGE="\"$(PACKAGE)\"" 
 export PACKAGE LOCALEDIR
 
-CC ?= gcc 
-CC += $(CFLAGS) $(FLAGS)
+CFLAGS += $(FLAGS)
 
 INSTALL = install -c
 INSTALL_PROGRAM = $(INSTALL) -s
@@ -36,7 +35,7 @@
 	(cd po && ${MAKE} all )
 
 $(BIN_FILENAME).so: $(OBJS)
-	$(CC) $(OBJS) -o $(BIN_FILENAME).so $(LFLAGS) $(LIBS)
+	$(CC) $(CFLAGS) $(OBJS) -o $(BIN_FILENAME).so $(LFLAGS) $(LIBS)
 
 clean:
 	rm -f *.o core *.so* *.bak *~
