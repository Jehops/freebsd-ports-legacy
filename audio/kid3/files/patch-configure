--- ./configure.orig	Tue Jun 27 22:55:03 2006
+++ ./configure	Sat Sep 23 01:27:55 2006
@@ -31630,22 +31630,146 @@
 
 fi;
 if test "$with_musicbrainz" != "no"; then
+  if test "${ac_cv_header_tunepimp_0_5_tp_c_h+set}" = set; then
+  echo "$as_me:$LINENO: checking for tunepimp-0.5/tp_c.h" >&5
+echo $ECHO_N "checking for tunepimp-0.5/tp_c.h... $ECHO_C" >&6
+if test "${ac_cv_header_tunepimp_0_5_tp_c_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_tunepimp_0_5_tp_c_h" >&5
+echo "${ECHO_T}$ac_cv_header_tunepimp_0_5_tp_c_h" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking tunepimp-0.5/tp_c.h usability" >&5
+echo $ECHO_N "checking tunepimp-0.5/tp_c.h usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <tunepimp-0.5/tp_c.h>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
 
+# Is the header present?
+echo "$as_me:$LINENO: checking tunepimp-0.5/tp_c.h presence" >&5
+echo $ECHO_N "checking tunepimp-0.5/tp_c.h presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <tunepimp-0.5/tp_c.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
 
-   kde_safe_cppflags=$CPPFLAGS
-   CPPFLAGS="$CPPFLAGS $all_includes"
-    ac_ext=cc
-ac_cpp='$CXXCPP $CPPFLAGS'
-ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
-
-ac_link='rm -rf SunWS_cache; ${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h: present but cannot be compiled" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: tunepimp-0.5/tp_c.h: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: tunepimp-0.5/tp_c.h: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for tunepimp-0.5/tp_c.h" >&5
+echo $ECHO_N "checking for tunepimp-0.5/tp_c.h... $ECHO_C" >&6
+if test "${ac_cv_header_tunepimp_0_5_tp_c_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_header_tunepimp_0_5_tp_c_h=$ac_header_preproc
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_tunepimp_0_5_tp_c_h" >&5
+echo "${ECHO_T}$ac_cv_header_tunepimp_0_5_tp_c_h" >&6
 
-   if test "${ac_cv_header_tunepimp_tp_c_h+set}" = set; then
+fi
+if test $ac_cv_header_tunepimp_0_5_tp_c_h = yes; then
+  build_musicbrainz="yes"
+else
+  if test "${ac_cv_header_tunepimp_tp_c_h+set}" = set; then
   echo "$as_me:$LINENO: checking for tunepimp/tp_c.h" >&5
 echo $ECHO_N "checking for tunepimp/tp_c.h... $ECHO_C" >&6
 if test "${ac_cv_header_tunepimp_tp_c_h+set}" = set; then
@@ -31788,19 +31912,14 @@
 fi
 
 
-   CPPFLAGS=$kde_safe_cppflags
-   ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
+fi
 
 
 fi
 if test "$build_musicbrainz" = "yes"; then
-  echo "$as_me:$LINENO: checking for tp_SetPUIDCollisionThreshold in -ltunepimp" >&5
-echo $ECHO_N "checking for tp_SetPUIDCollisionThreshold in -ltunepimp... $ECHO_C" >&6
-if test "${ac_cv_lib_tunepimp_tp_SetPUIDCollisionThreshold+set}" = set; then
+  echo "$as_me:$LINENO: checking for tr_GetPUID in -ltunepimp" >&5
+echo $ECHO_N "checking for tr_GetPUID in -ltunepimp... $ECHO_C" >&6
+if test "${ac_cv_lib_tunepimp_tr_GetPUID+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -31818,11 +31937,11 @@
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char tp_SetPUIDCollisionThreshold ();
+char tr_GetPUID ();
 int
 main ()
 {
-tp_SetPUIDCollisionThreshold ();
+tr_GetPUID ();
   ;
   return 0;
 }
@@ -31848,20 +31967,20 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_lib_tunepimp_tp_SetPUIDCollisionThreshold=yes
+  ac_cv_lib_tunepimp_tr_GetPUID=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_tunepimp_tp_SetPUIDCollisionThreshold=no
+ac_cv_lib_tunepimp_tr_GetPUID=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_tunepimp_tp_SetPUIDCollisionThreshold" >&5
-echo "${ECHO_T}$ac_cv_lib_tunepimp_tp_SetPUIDCollisionThreshold" >&6
-if test $ac_cv_lib_tunepimp_tp_SetPUIDCollisionThreshold = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_tunepimp_tr_GetPUID" >&5
+echo "${ECHO_T}$ac_cv_lib_tunepimp_tr_GetPUID" >&6
+if test $ac_cv_lib_tunepimp_tr_GetPUID = yes; then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_TUNEPIMP 5
@@ -31977,6 +32096,7 @@
 
 fi;
 if test "$with_vorbis" != "no"; then
+
 
 
 
