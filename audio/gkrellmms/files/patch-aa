Index: Makefile
diff -u Makefile.orig Makefile
--- Makefile.orig	Sun Jul  2 01:45:19 2000
+++ Makefile	Fri Sep 15 03:30:01 2000
@@ -3,27 +3,27 @@
 # You may want to rename the binary-file.
 BIN_FILENAME = gkrellmms
 
-GTK_INCLUDE = `gtk-config --cflags`
-GTK_LIB = `gtk-config --libs`
+GTK_INCLUDE = `$(GTK_CONFIG) --cflags gthread`
+GTK_LIB = `$(GTK_CONFIG) --libs gthread`
 IMLIB_INCLUDE = `imlib-config --cflags-gdk`
 IMLIB_LIB = `imlib-config --libs-gdk`
 
-FLAGS = -O2 -Wall -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE)
+CFLAGS += -fPIC $(GTK_INCLUDE) $(IMLIB_INCLUDE)
 LIBS = $(GTK_LIB) $(IMLIB_LIB)
-LFLAGS = -shared -lpthread -lxmms
-
-CC = gcc $(CFLAGS) $(FLAGS)
+LFLAGS = -shared -lxmms
 
 OBJS = gkrellmms.o options.o playlist.o
 
+all:	$(BIN_FILENAME).so
+
 $(BIN_FILENAME).so: $(OBJS)
-	$(CC) $(OBJS) -o $(BIN_FILENAME).so $(LFLAGS) $(LIBS)
+	$(CC) $(CFLAGS) $(OBJS) -o $(BIN_FILENAME).so $(LFLAGS) $(LIBS)
 
 clean:
 	rm -f *.o core *.so* *.bak *~
 
 install: 
-	install -c -s -m 755 $(BIN_FILENAME).so /usr/share/gkrellm/plugins
+	install -c -s -m 755 $(BIN_FILENAME).so $(PREFIX)/libexec/gkrellm/plugins
 
 gkrellmms.c.o: gkrellmms.c
 options.c.o: options.c
