--- Makefile.orig	Sun Feb  8 23:53:04 1998
+++ Makefile	Wed Nov 25 07:05:28 1998
@@ -21,6 +21,7 @@
 	@echo ""
 	@echo "make linux-help     Linux, more help"
 	@echo "make freebsd        FreeBSD"
+	@echo "make freebsd-elf    FreeBSD ELF"
 	@echo "make solaris        Solaris 2.x (tested: 2.5 and 2.5.1) using SparcWorks cc"
 	@echo "make solaris-gcc    Solaris 2.x using GNU cc (somewhat slower)"
 	@echo "make sunos          SunOS 4.x (tested: 4.1.4)"
@@ -140,8 +141,16 @@
 freebsd:
 	$(MAKE) CC=cc LDFLAGS= \
 		OBJECTS='decode_i386.o dct64_i386.o getbits_.o audio_oss.o' \
-		CFLAGS='-Wall -ansi -pedantic -O4 -m486 -fomit-frame-pointer \
-			-funroll-all-loops -ffast-math -DROT_I386 \
+		CFLAGS+='$(CFLAGS) -Wall -O2 -ansi -pedantic -fomit-frame-pointer \
+			-funroll-all-loops -ffast-math -DROT_I386 -DREAD_MMAP \
+			-DI386_ASSEM -DREAL_IS_FLOAT -DUSE_MMAP -DOSS' \
+		mpg123-make
+
+freebsd-elf:
+	$(MAKE) CC=cc LDFLAGS= \
+		OBJECTS='decode_i386.o dct64_i386.o getbits.o audio_oss.o' \
+		CFLAGS+='$(CFLAGS) -Wall -O2 -ansi -pedantic -fomit-frame-pointer \
+			-funroll-all-loops -ffast-math -DROT_I386 -DREAD_MMAP \
 			-DI386_ASSEM -DREAL_IS_FLOAT -DUSE_MMAP -DOSS' \
 		mpg123-make
 
@@ -251,7 +260,7 @@
 	@ $(MAKE) BINNAME=mpg123m mpg123
 
 mpg123-make:
-	@ $(MAKE) BINNAME=mpg123 mpg123
+	@ $(MAKE) CFLAGS="$(CFLAGS)" BINNAME=mpg123 mpg123
 
 mpg123: mpg123.o common.o $(OBJECTS) decode_2to1.o decode_4to1.o \
 		tabinit.o audio.o layer1.o layer2.o layer3.o buffer.o \
