--- ltmain.sh.orig	Tue Dec 15 01:22:13 1998
+++ ltmain.sh	Wed Dec 23 03:12:43 1998
@@ -923,6 +923,18 @@
         versuffix="$current.$revision"
         ;;
 
+      freebsd-aout)
+        version_vars="$version_vars major versuffix"
+        major="$current"
+        versuffix="$current.$revision"
+        ;;
+
+      freebsd-elf)
+        version_vars="$version_vars major versuffix"
+        major="$current"
+        versuffix="$current"
+        ;;
+
       *)
         $echo "$modename: unknown library version type \`$version_type'" 1>&2
         echo "Fatal configuration error.  See the $PACKAGE docs for more information." 1>&2
--- ltconfig.orig	Tue Dec 15 01:22:13 1998
+++ ltconfig	Wed Dec 23 03:14:11 1998
@@ -1106,9 +1106,10 @@
   ;;
 
 freebsd2* | freebsd3*)
-  version_type=sunos
+  objformat=`test -x /usr/bin/objformat && /usr/bin/objformat || echo aout`
+  version_type=freebsd-$objformat
   library_names_spec='$libname.so.$versuffix $libname.so'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
+  finish_cmds='PATH="\$PATH:/sbin" OBJFORMAT="$objformat" ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
