# ports collection makefile for:   lame
# Date created:        11 January 1998
# Whom:                yoshiaki Uchikawa
#
# $FreeBSD$
#

PORTNAME=	lame
PORTVERSION=	3.91
CATEGORIES=	audio
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE} \
		ftp://lame.sourceforge.net/pub/
MASTER_SITE_SUBDIR=	lame

MAINTAINER=	yoshiaki@kt.rim.or.jp

BUILD_DEPENDS=	nasm:${PORTSDIR}/devel/nasm

GNU_CONFIGURE=	yes
INSTALLS_SHLIB=	yes
WANT_GTK=	yes
CONFIGURE_ARGS=	--enable-nasm

.include <bsd.port.pre.mk>

.if (defined(HAVE_GTK) || defined(WITH_GTK)) && !defined(WITHOUT_GTK)
USE_GTK=	yes
PLIST_SUB+=	WITH_GTK=''
.else
PLIST_SUB+=	WITH_GTK='@comment '
.endif

MAN1=		lame.1

post-build:
.if defined(HAVE_GTK) && !defined(WITHOUT_GTK)
	(cd ${WRKSRC}/frontend && make mp3x)
.endif

post-install:
.if defined(HAVE_GTK) && !defined(WITHOUT_GTK)
	${INSTALL_PROGRAM} ${WRKSRC}/frontend/mp3x ${PREFIX}/bin/
.endif

.include <bsd.port.post.mk>
