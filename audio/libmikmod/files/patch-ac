--- configure.orig	Mon Feb 14 12:20:17 2000
+++ configure	Tue Mar  7 13:04:53 2000
@@ -2063,14 +2063,14 @@
   libmikmod_threads=-lpthread
 else
   echo "$ac_t""no" 1>&6
-echo $ac_n "checking for pthread_create in -lc_r""... $ac_c" 1>&6
-echo "configure:2068: checking for pthread_create in -lc_r" >&5
-ac_lib_var=`echo c_r'_'pthread_create | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
+echo "configure:2068: checking for pthread_create in -lpthread" >&5
+ac_lib_var=`echo pthread'_'pthread_create | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lc_r  $LIBS"
+LIBS="-lpthread  $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 2076 "configure"
 #include "confdefs.h"
@@ -2098,7 +2098,7 @@
 fi
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  libmikmod_threads=-lc_r
+  libmikmod_threads=-pthread
 else
   echo "$ac_t""no" 1>&6
 fi
@@ -3790,9 +3790,9 @@
 #define HAVE_PTHREAD 1
 EOF
 
-	CFLAGS="$CFLAGS -D_REENTRANT"
+	CFLAGS="$CFLAGS -D_REENTRANT -D_THREAD_SAFE"
 	LIBRARY_LIB="$libmikmod_threads $LIBRARY_LIB"
-	REENTRANT="-D_REENTRANT"
+	REENTRANT="-D_REENTRANT -D_THREAD_SAFE"
 fi
 		
 # =================
