=== modified file 'Makefile'
--- Makefile	2009-09-06 19:57:52 +0000
+++ Makefile	2009-11-13 03:32:40 +0000
@@ -1,17 +1,23 @@
-PREFIX ?= /usr/local
-LIBINSTALLDIR ?= /lib
-XDGCONFDIR ?= /etc/xdg
-
-EXAILELIBDIR = $(DESTDIR)$(PREFIX)$(LIBINSTALLDIR)/exaile
-EXAILESHAREDIR = $(DESTDIR)$(PREFIX)/share/exaile
-
-all: compile
+PREFIX 		?= /usr/local
+LIBINSTALLDIR 	?= /lib
+XDGCONFDIR 	?= /etc/xdg
+
+EXAILELIBDIR 	= $(DESTDIR)$(PREFIX)$(LIBINSTALLDIR)/exaile
+EXAILESHAREDIR 	= $(DESTDIR)$(PREFIX)/share/exaile
+EXAILECONFDIR 	= $(DESTDIR)$(XDGCONFDIR)/exaile
+
+all: compile locale
+	@echo "Ready to install..."
+
+# The no_locale stuff is by request of BSD people, please ensure
+# all methods that deal with locale stuff have a no_locale variant
+all_no_locale: compile
 	@echo "Ready to install..."
 
 compile:
 	python -m compileall -q xl xlgui
 	-python -O -m compileall -q xl xlgui
-	cd plugins && make && cd ..
+	make -C plugins compile
 
 make-install-dirs:
 	mkdir -p $(DESTDIR)$(PREFIX)/bin
@@ -35,18 +41,18 @@
 	mkdir -p $(EXAILESHAREDIR)/data/migrations/migration_200907100931
 	mkdir -p $(DESTDIR)$(PREFIX)/share/pixmaps
 	mkdir -p $(DESTDIR)$(PREFIX)/share/applications
-	mkdir -p $(DESTDIR)$(XDGCONFDIR)/exaile
+	mkdir -p $(EXAILECONFDIR)
 
 uninstall:
 	rm -f  $(DESTDIR)$(PREFIX)/bin/exaile
 	rm -rf $(EXAILELIBDIR)
 	rm -rf $(EXAILESHAREDIR)
-	rm -rf $(DESTDIR)$(XDGCONFDIR)/exaile
+	rm -rf $(EXAILECONFDIR)/exaile
 	rm -f $(DESTDIR)$(PREFIX)/share/applications/exaile.desktop
 	rm -f $(DESTDIR)$(PREFIX)/share/pixmaps/exaile.png
-	cd plugins && make uninstall && cd ..
+	make -C plugins uninstall
 
-install: install-target locale install-locale
+install: install-target install-locale
 
 install_no_locale: install-target
 
@@ -79,7 +85,7 @@
 	    	$(EXAILESHAREDIR)/data/migrations/migration_200907100931/
 	install -m 644 data/exaile.desktop \
 		$(DESTDIR)$(PREFIX)/share/applications/	
-	install -m 644 data/config/settings.ini $(DESTDIR)$(XDGCONFDIR)/exaile
+	install -m 644 data/config/settings.ini $(EXAILECONFDIR)
 	# the printf here is for bsd compat, dont use echo!
 	cd $(DESTDIR)$(PREFIX)/bin && \
 	 printf "#!/bin/sh\n\
@@ -87,8 +93,7 @@
 	 --datadir=$(PREFIX)/share/exaile/data --startgui \"\$$@\"" \
 	 > exaile && \
 	 chmod 755 exaile
-	cd plugins && make install DESTDIR=$(DESTDIR) PREFIX=$(PREFIX) \
-		&& cd ..
+	make -C plugins install
 
 locale:
 	cd po && find . -name "*.po" -exec ../tools/compilepo.sh {} \; && cd ..
@@ -102,19 +107,13 @@
 	    `echo $$f | sed "s|^po|$(DESTDIR)$(PREFIX)/share/locale|"` ; \
 	  done
 
-plugins_extra_install:
-	cd plugins && make extra_install DESTDIR=$(DESTDIR) PREFIX=$(PREFIX) \
-	    && cd ..
-
 plugins_dist:
-	cd plugins && make dist && cd ..
+	make -C plugins dist
 
 clean:
 	-find . -name "*.py[co]" -exec rm -f {} \;
-	find . -name "*.class" -exec rm -f {} \;
-	find . -name "*.bak" -exec rm -f {} \;
 	find po/* -depth -type d -exec rm -r {} \;
-	cd plugins && make clean && cd ..
+	make -C plugins clean
 
 pot:
 	@echo "[encoding: UTF-8]" > po/POTFILES.in
@@ -124,13 +123,11 @@
 	find plugins -name "*.py" >> po/POTFILES.in
 	find plugins -name "*.glade" >> po/POTFILES.in
 	find plugins -name PLUGININFO >> po/POTFILES.in
-	python tools/createpot.py
-
-translations:
-	python tools/createpot.py compile
+	cd po && XGETTEXT_ARGS="--language=Python" intltool-update \
+	    --pot --gettext-package=messages --verbose && cd ..
 
 potball:
-	tar --bzip2 --format=posix -cf exaile-po.tar.bz2 po/ \
+	tar --bzip2 --format=posix -cf build/exaile-po.tar.bz2 po/ \
 	    --transform s/po/./
 
 .PHONY: dist 

=== removed file 'tools/createpot.py'
--- tools/createpot.py	2009-08-25 21:38:12 +0000
+++ tools/createpot.py	1970-01-01 00:00:00 +0000
@@ -1,77 +0,0 @@
-#!/usr/bin/env python
-# Copyright (C) 2008-2009 Adam Olsen 
-#
-# This program is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2, or (at your option)
-# any later version.
-#
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with this program; if not, write to the Free Software
-# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
-#
-#
-# The developers of the Exaile media player hereby grant permission 
-# for non-GPL compatible GStreamer and Exaile plugins to be used and 
-# distributed together with GStreamer and Exaile. This permission is 
-# above and beyond the permissions granted by the GPL license by which 
-# Exaile is covered. If you modify this code, you may extend this 
-# exception to your version of the code, but you are not obligated to 
-# do so. If you do not wish to do so, delete this exception statement 
-# from your version.
-#
-#
-# The developers of the Exaile media player hereby grant permission 
-# for non-GPL compatible GStreamer and Exaile plugins to be used and 
-# distributed together with GStreamer and Exaile. This permission is 
-# above and beyond the permissions granted by the GPL license by which 
-# Exaile is covered. If you modify this code, you may extend this 
-# exception to your version of the code, but you are not obligated to 
-# do so. If you do not wish to do so, delete this exception statement 
-# from your version.
-#
-#
-# The developers of the Exaile media player hereby grant permission 
-# for non-GPL compatible GStreamer and Exaile plugins to be used and 
-# distributed together with GStreamer and Exaile. This permission is 
-# above and beyond the permissions granted by the GPL license by which 
-# Exaile is covered. If you modify this code, you may extend this 
-# exception to your version of the code, but you are not obligated to 
-# do so. If you do not wish to do so, delete this exception statement 
-# from your version.
-
-
-import os, sys, glob
-
-command = None
-try:
-    command = sys.argv[1]
-except IndexError:
-    pass
-
-os.environ['XGETTEXT_ARGS'] = '--language=Python'
-os.chdir('po')
-os.system('intltool-update --pot --gettext-package=messages --verbose')
-
-if command != 'compile':
-    print "\n\n**********\n"
-    print "Now edit messages.pot, save it as <locale>.po, and post it on\n" \
-        "our bug tracker (https://bugs.launchpad.net/exaile/)\n\n" \
-        "Thank you!"
-
-else:
-
-    files = glob.glob('*.po')
-    for f in files:
-        l = os.path.splitext(f)
-        os.system('mkdir -p -m 0777 %s/LC_MESSAGES' % l[0])
-
-        print "Generating translation for %s locale" % l[0]
-        os.system('msgmerge -o - %s messages.pot | msgfmt -c -o %s/LC_MESSAGES/exaile.mo -' % (f, l[0]))
-
-os.chdir('..')

