--- SConstruct.orig	Fri Apr 23 07:51:57 2004
+++ SConstruct	Mon Apr  9 19:20:43 2007
@@ -53,8 +53,8 @@
 env.make_so = None
 env.detect = detect.Detect()
 
+env['CXX'] = os.environ['CXX']
 if os.environ.has_key('DISTCC_HOSTS'):
-	env['CXX'] = os.environ['CXX']
 	env['ENV']['DISTCC_HOSTS'] = os.environ['DISTCC_HOSTS']
 	env['ENV']['HOME'] = os.environ['HOME']
 
@@ -87,7 +87,7 @@
 env.optimize_resampler_hack=0
 
 if (env['optimize']):
-	env.Append(CXXFLAGS=['-O3','-ffast-math']);
+	env.Append(CXXFLAGS="%%CFLAGS%%");
 	env.optimize_resampler_hack=0
 
 profile=0;
