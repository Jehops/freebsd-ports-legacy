# Created by: Sascha Klauder <sklauder@trimind.de>
# $FreeBSD$

PORTNAME=	gogglesmm
PORTVERSION=	1.1.3
CATEGORIES=	audio

MAINTAINER=	jhale@FreeBSD.org
COMMENT=	Music collection manager and player

LICENSE=	GPLv3+
LICENSE_FILE=	${WRKSRC}/COPYING

LIB_DEPENDS=	libtag.so:audio/taglib \
		libexpat.so:textproc/expat2 \
		libFOX-1.7.so:x11-toolkits/fox17

USE_GITHUB=	yes

USES=		cmake compiler:c++11-lib desktop-file-utils \
		localbase:ldflags pkgconfig sqlite
USE_XORG=	ice sm x11
INSTALLS_ICONS=	yes

OPTIONS_DEFINE=		ALSA DBUS DOCS FAAD FLAC GCRYPT MAD NLS \
			OGG OPENGL OPUS PULSEAUDIO
OPTIONS_RADIO=		VORBISDEC
VORBISDEC_DESC=		Vorbis decoder library
OPTIONS_RADIO_VORBISDEC=	TREMOR VORBIS
OPTIONS_DEFAULT=	DBUS FAAD FLAC MAD OGG OPENGL OPUS VORBIS
OPTIONS_SUB=		yes

ALSA_LIB_DEPENDS=	libasound.so:audio/alsa-lib
ALSA_CMAKE_ON=		-DWITH_ALSA:BOOL=ON
ALSA_CMAKE_OFF=		-DWITH_ALSA:BOOL=OFF

DBUS_LIB_DEPENDS=	libdbus-1.so:devel/dbus
DBUS_CMAKE_ON=		-DWITH_DBUS:BOOL=ON
DBUS_CMAKE_OFF=		-DWITH_DBUS:BOOL=OFF

FAAD_LIB_DEPENDS=	libfaad.so:audio/faad
FAAD_CMAKE_ON=		-DWITH_FAAD:BOOL=ON
FAAD_CMAKE_OFF=		-DWITH_FAAD:BOOL=OFF

FLAC_LIB_DEPENDS=	libFLAC.so:audio/flac
FLAC_CMAKE_ON=		-DWITH_FLAC:BOOL=ON
FLAC_CMAKE_OFF=		-DWITH_FLAC:BOOL=OFF
FLAC_IMPLIES=		OGG

GCRYPT_DESC=		Use libgcrypt for md5 calculation
GCRYPT_LIB_DEPENDS=	libgcrypt.so:security/libgcrypt
GCRYPT_CMAKE_ON=	-DWITH_GCRYPT:BOOL=ON
GCRYPT_CMAKE_OFF=	-DWITH_GCRYPT:BOOL=OFF

MAD_LIB_DEPENDS=	libmad.so:audio/libmad
MAD_CMAKE_ON=		-DWITH_MAD:BOOL=ON
MAD_CMAKE_OFF=		-DWITH_MAD:BOOL=OFF

NLS_USES=		gettext
NLS_LDFLAGS=		-lintl
NLS_CMAKE_ON=		-DWITH_NLS:BOOL=ON
NLS_CMAKE_OFF=		-DWITH_NLS:BOOL=OFF

OGG_LIB_DEPENDS=	libogg.so:audio/libogg
OGG_CMAKE_ON=		-DWITH_OGG:BOOL=ON
OGG_CMAKE_OFF=		-DWITH_OGG:BOOL=OFF

OPENGL_LIB_DEPENDS=	libepoxy.so:graphics/libepoxy
OPENGL_USE=		GL=gl,glu
OPENGL_CMAKE_ON=	-DWITH_OPENGL:BOOL=ON
OPENGL_CMAKE_OFF=	-DWITH_OPENGL:BOOL=OFF

OPUS_LIB_DEPENDS=	libopus.so:audio/opus
OPUS_CMAKE_ON=		-DWITH_OPUS:BOOL=ON
OPUS_CMAKE_OFF=		-DWITH_OPUS:BOOL=OFF
OPUS_IMPLIES=		OGG

PULSEAUDIO_LIB_DEPENDS=	libpulse.so:audio/pulseaudio
PULSEAUDIO_CMAKE_ON=	-DWITH_PULSE:BOOL=ON
PULSEAUDIO_CMAKE_OFF=	-DWITH_PULSE:BOOL=OFF

TREMOR_LIB_DEPENDS=	libvorbisidec.so:audio/libtremor
TREMOR_CMAKE_ON=	-DWITH_TREMOR:BOOL=ON
TREMOR_CMAKE_OFF=	-DWITH_TREMOR:BOOL=OFF
TREMOR_IMPLIES=		OGG

VORBIS_LIB_DEPENDS=	libvorbis.so:audio/libvorbis
VORBIS_CMAKE_ON=	-DWITH_VORBIS:BOOL=ON
VORBIS_CMAKE_OFF=	-DWITH_VORBIS:BOOL=OFF
VORBIS_IMPLIES=		OGG

.include <bsd.port.options.mk>

.if ${PORT_OPTIONS:MOGG} && !${PORT_OPTIONS:MTREMOR} && !${PORT_OPTIONS:MVORBIS}
IGNORE=	you have selected an option that requires a Vorbis decoder. Run 'make config' and select one
.endif

post-install-DOCS-on:
	@${MKDIR} ${STAGEDIR}${DOCSDIR}
	(cd ${WRKSRC} && ${INSTALL_DATA} AUTHORS ChangeLog README \
		${STAGEDIR}${DOCSDIR})

.include <bsd.port.mk>
