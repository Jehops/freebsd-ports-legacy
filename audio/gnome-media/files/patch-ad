--- gmix/gmix.c.orig	Tue Oct  8 19:40:43 2002
+++ gmix/gmix.c	Fri Oct 11 09:20:13 2002
@@ -60,7 +60,7 @@
 #ifdef HAVE_LINUX_SOUNDCARD_H 
 #include <linux/soundcard.h>
 #else 
-#include <machine/soundcard.h>
+#include <sys/soundcard.h>
 #endif
 #endif
 
@@ -722,6 +722,7 @@
 	
 	cnt = 0;
 	devices = NULL;
+	num_mixers = 0;
 	device_by_name = g_hash_table_new (g_str_hash, g_str_equal);
 		
 	do {
@@ -730,9 +731,8 @@
 			devices = g_list_append (devices, new_device);
 			g_hash_table_insert (device_by_name, new_device->info.name, new_device);
 		}
-	} while (new_device);
-	
-	num_mixers = cnt - 1;
+    	} while ((errno == EACCES) || (errno == EINVAL) || (errno == ENXIO) \
+		|| new_device);
 }
 
 device_info *
