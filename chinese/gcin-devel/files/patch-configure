--- configure.orig	Fri Sep 16 13:38:02 2005
+++ configure	Tue Sep 20 22:14:33 2005
@@ -1,12 +1,12 @@
-#!/bin/bash
+#!/bin/sh
 
 MAKE=make
-which gmake >& /dev/null
+which gmake > /dev/null
 if [ $? = 0 ]; then
   MAKE=gmake
 fi
 
-uname | grep FreeBSD >& /dev/null
+uname | grep FreeBSD > /dev/null
 if [ $? = 0 ]; then
   FREEBSD=1
 else
@@ -59,7 +59,7 @@
 QT_IM='N'
 for i in qt3 qt4
 do
-  QT_IM_DIR=/usr/lib/$i/plugins/lib/inputmethods
+  QT_IM_DIR=$prefix/lib/$i/plugins/lib/inputmethods
   echo "testing if you have QT_IM_MODULE dir:$QT_IM_DIR support"
   if [ -d  $QT_IM_DIR ]; then
     QT_IM='Y'
@@ -77,7 +77,7 @@
 
 bindir=$prefix/bin
 datadir=$prefix/share
-mandir=$datadir/man
+mandir=$prefix/man
 libdir=$prefix/lib
 includedir=$prefix/include
 optdir=/opt
@@ -100,20 +100,13 @@
   grep -v qt3/plugins/inputmethods gcin.spec.tmp > gcin.spec
 fi
 
-grep Cooker /etc/mandriva-release 2>1 | grep 2006 >& /dev/null
-if [ $? = 0 ]; then
-  NEW_GTK_IM='Y'
-  echo "!!!! new gtk-im(im-gcin.so) will be enabled because you are using Cooker 2006."
-  echo "!!!! You have to install the latest libwidget_gtk2.so"
-fi
-
 
 OPTFLAGS="-g"
 if [ $prefix = /usr ]; then
   OPTFLAGS="-O"
 fi
 
-echo "CC=gcc" > config.mak
+echo "CC=$CC" > config.mak
 echo "MAKE=$MAKE" >> config.mak
 echo "GTKINC=$GTKINC" >> config.mak
 echo "prefix=$prefix" >> config.mak
@@ -133,8 +126,8 @@
 echo "GCIN_SCRIPT_DIR=\$(datadir_r)/gcin/script" >> config.mak
 echo "GCIN_SCRIPT_DIR_i=\$(datadir)/gcin/script" >> config.mak
 echo "OPTFLAGS=$OPTFLAGS" >> config.mak
-echo "DOC_DIR=\$(datadir_r)/doc/gcin-$GCIN_VERSION" >> config.mak
-echo "DOC_DIR_i=\$(datadir)/doc/gcin-$GCIN_VERSION" >> config.mak
+echo "DOC_DIR=\$(datadir_r)/doc/gcin" >> config.mak
+echo "DOC_DIR_i=\$(datadir)/doc/gcin" >> config.mak
 echo "GCIN_ICON_DIR=\$(datadir_r)/icons/gcin" >> config.mak
 echo "SYS_ICON_DIR=\$(datadir_r)/icons" >> config.mak
 echo "GCIN_ICON_DIR_i=\$(datadir)/icons/gcin" >> config.mak
