--- configure.orig	Wed Feb 22 21:25:55 2006
+++ configure	Wed Feb 22 21:34:26 2006
@@ -1,4 +1,4 @@
-#!/bin/bash
+#!/bin/sh
 
 if [ "$1" = "-h" -o "$1" = "--help" -o "$1" = "-help" ]; then
     echo "** valid options:"
@@ -9,12 +9,12 @@
 fi
 
 MAKE=make
-which gmake >& /dev/null
+which gmake > /dev/null
 if [ $? = 0 ]; then
   MAKE=gmake
 fi
 
-uname | grep FreeBSD >& /dev/null
+uname | grep FreeBSD > /dev/null
 if [ $? = 0 ]; then
   FREEBSD=1
 else
@@ -74,7 +74,7 @@
 QT_IM='N'
 for i in qt3 qt4
 do
-  QT_IM_DIR=/usr/lib/$i/plugins/$LIB/inputmethods
+  QT_IM_DIR=$prefix/lib/$i/plugins/$LIB/inputmethods
   echo "testing if you have QT_IM_MODULE dir:$QT_IM_DIR support"
   if [ -d  $QT_IM_DIR ]; then
     QT_IM='Y'
@@ -92,7 +92,7 @@
 
 bindir=$prefix/bin
 datadir=$prefix/share
-mandir=$datadir/man
+mandir=$prefix/man
 libdir=$prefix/lib
 includedir=$prefix/include
 optdir=/opt
@@ -105,8 +105,8 @@
   GCIN_SETUP_DESKTOP=/opt/gnome/share/control-center-2.0/capplets
   GCIN_SETUP_DESKTOP_rpm='$(optdir)/gnome/share/control-center-2.0/capplets'
 else
-  GCIN_SETUP_DESKTOP=/usr/share/control-center-2.0/capplets
-  GCIN_SETUP_DESKTOP_rpm='$(datadir)/control-center-2.0/capplets'
+  GCIN_SETUP_DESKTOP=$prefix/share/gnome/control-center-2.0/capplets
+  GCIN_SETUP_DESKTOP_rpm='$(datadir)/gnome/control-center-2.0/capplets'
 fi
 
 
@@ -115,14 +115,6 @@
   grep -v qt3/plugins/inputmethods gcin.spec.tmp > gcin.spec
 fi
 
-grep Cooker /etc/mandriva-release 2>&1 | grep 2006 >& /dev/null
-if [ $? = 0 ]; then
-  new_gtk_im='Y'
-  echo "!!!! new gtk-im(im-gcin.so) will be enabled because you are using Cooker 2006."
-  echo "!!!! You have to install the latest libwidget_gtk2.so"
-  echo "http://www.csie.nctu.edu.tw/~cp76/linux/mozilla/mdk-firefox-thunderbird-1.0.6/cooker-new-gtkim-libwidget_gtk2.so.gz"
-fi
-
 
 OPTFLAGS="-g"
 if [ $prefix = /usr ]; then
@@ -130,7 +122,7 @@
 fi
 
 
-echo "CC=gcc" > config.mak
+echo "CC=$CC" > config.mak
 echo "MAKE=$MAKE" >> config.mak
 echo "GTKINC=$GTKINC" >> config.mak
 echo "prefix=$prefix" >> config.mak
@@ -150,8 +142,8 @@
 echo "GCIN_SCRIPT_DIR=\$(datadir_r)/gcin/script" >> config.mak
 echo "GCIN_SCRIPT_DIR_i=\$(datadir)/gcin/script" >> config.mak
 echo "OPTFLAGS=$OPTFLAGS" >> config.mak
-echo "DOC_DIR=\$(datadir_r)/doc/gcin-$GCIN_VERSION" >> config.mak
-echo "DOC_DIR_i=\$(datadir)/doc/gcin-$GCIN_VERSION" >> config.mak
+echo "DOC_DIR=\$(datadir_r)/doc/gcin" >> config.mak
+echo "DOC_DIR_i=\$(datadir)/doc/gcin" >> config.mak
 echo "GCIN_ICON_DIR=\$(datadir_r)/icons/gcin" >> config.mak
 echo "SYS_ICON_DIR=\$(datadir_r)/icons" >> config.mak
 echo "GCIN_ICON_DIR_i=\$(datadir)/icons/gcin" >> config.mak
