# New ports collection makefile for:   qterm
# Date created:                10 Mar 2001
# Whom:                        Shen Chuan-Hsing
#
# $FreeBSD$
#

PORTNAME=	qterm
PORTVERSION=	0.4.0
PORTREVISION=	1
CATEGORIES=	chinese
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE} \
		http://www.yuanjue.net/download/
MASTER_SITE_SUBDIR=	${PORTNAME}
PKGNAMEPREFIX=	zh-

MAINTAINER=	yuanjue@yuanjue.net
COMMENT=	QTerm is a BBS client for BSD/Linux

USE_BZIP2=	yes
USE_QT_VER=	3
HAS_CONFIGURE=	yes
CONFIGURE_TARGET=--build=${MACHINE_ARCH}-portbld-freebsd${OSREL}
CONFIGURE_ARGS=	--enable-mt --prefix=${PREFIX} \
		--x-libraries=${X11BASE}/lib --x-includes=${X11BASE}/include

.if !defined(WITHOUT_PYTHON)
USE_PYTHON=	2.3+
CONFIGURE_ARGS+=	--with-pythondir=${LOCALBASE}
.endif

pre-everything::
.if !defined(WITHOUT_PYTHON)
	@${ECHO_MSG} "Define WITHOUT_PYTHON to disable Python scripts support."
.endif

post-patch:
	@${REINPLACE_CMD} -e 's,-lssl,-lssl -lcrypto,' \
		${WRKSRC}/configure

post-install:
	@${CHMOD} +w ${DATADIR}/qterm.cfg
	@${CHMOD} +w ${DATADIR}/address.cfg
	@${CAT} ${PKGMESSAGE}

.include <bsd.port.pre.mk>

.if ${OSVERSION} < 500016
BROKEN=	Does not build on 4.x
.endif

.include <bsd.port.post.mk>
