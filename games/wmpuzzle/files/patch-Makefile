$FreeBSD$

--- Makefile.orig	Wed Mar 13 23:09:33 2002
+++ Makefile	Wed May 15 20:32:38 2002
@@ -1,45 +1,18 @@
-# $Id: Makefile,v 1.11 2002/03/13 17:09:33 godisch Exp $
+CC ?= gcc
+CFLAGS += -c -Wall -pedantic
+INCDIR = -I${X11BASE}/include -I/usr/local/include
+LIBDIR = -L${X11BASE}/lib -L/usr/local/lib
+LIBS   = -lXpm -lXext -lX11 -lgnugetopt
+OBJS =  wmpuzzle.o wmgeneral.o
 
-prefix      = /usr/local
-exec_prefix = ${prefix}
-bindir      = ${exec_prefix}/bin
-mandir      = ${prefix}/share/man
+.c.o:
+	${CC} ${CFLAGS} ${INCDIR} $< -o $*.o
 
-DESTDIR     =
-
-CFLAGS      = -O2 -Wall -pedantic
-LIBS        = -L/usr/X11R6/lib -lX11 -lXpm -lXext
-XPMS        = xpm/debian.xpm xpm/eagle.xpm xpm/earth.xpm xpm/linux.xpm
+wmpuzzle: $(OBJS)
+	${CC} -o wmpuzzle $^ ${LIBDIR} ${LIBS}
 
 all: wmpuzzle
 
-wmpuzzle: wmpuzzle.o wmgeneral.o
-	$(CC) $(LIBS) -o $@ $^
-
-wmpuzzle.o: wmpuzzle.c wmpuzzle.h $(XPMS)
-wmgeneral.o: wmgeneral.c wmgeneral.h
-
-install: install-bin install-doc
-
-install-bin: wmpuzzle
-	install -D -s -m 755 $< $(DESTDIR)$(bindir)/wmpuzzle
-
-install-doc: wmpuzzle.6
-	install -D -m 644 $< $(DESTDIR)$(mandir)/man6/wmpuzzle.6
-
-uninstall: uninstall-bin uninstall-doc
-
-uninstall-bin:
-	rm -f $(DESTDIR)$(bindir)/wmpuzzle
-
-uninstall-doc:
-	rm -f $(DESTDIR)$(mandir)/man6/wmpuzzle.6
-
 clean:
 	rm -f *.o
-
-distclean: clean
-	rm -f wmpuzzle
-
-.PHONY: all clean dist-clean install install-bin install-doc \
-	uninstall uninstall-bin uninstall-doc
+	rm -f wmpuzzle core
