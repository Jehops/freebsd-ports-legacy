CFLAGS?= -O -pipe
CPPFLAGS+= -I/usr/local/include `sdl-config --cflags`
LDFLAGS+= -L/usr/local/lib -pthread `sdl-config --libs`
PREFIX?= /usr/local
INSTALL?=	install
INSTALL_PROGRAM?= install -s -o root -g wheel -m 555

all:	bonus.o events.o font.o level.o main.o planet.o scene.o menu.o sound.o
	gcc ${LDFLAGS} bonus.o events.o font.o level.o main.o planet.o scene.o menu.o sound.o -o openjazz-bin
bonus.o:	bonus.c
	gcc ${CFLAGS} ${CPPFLAGS} -c bonus.c
events.o:	events.c
	gcc ${CFLAGS} ${CPPFLAGS} -c events.c
font.o:	font.c
	gcc ${CFLAGS} ${CPPFLAGS} -c font.c
level.o: level.c
	gcc ${CFLAGS} ${CPPFLAGS} -c level.c
main.o:	main.c
	gcc ${CFLAGS} ${CPPFLAGS} -c main.c
planet.o:	planet.c
	gcc ${CFLAGS} ${CPPFLAGS} -c planet.c
scene.o:	scene.c
	gcc ${CFLAGS} ${CPPFLAGS} -c scene.c
menu.o:	menu.c
	gcc ${CFLAGS} ${CPPFLAGS} -c menu.c
sound.o:	sound.c
	gcc ${CFLAGS} ${CPPFLAGS} -c sound.c
install:	all
	${INSTALL} -d ${PREFIX}/bin
	${INSTALL_PROGRAM} openjazz-bin ${PREFIX}/bin
uninstall:
	rm -f ${PREFIX}/bin/openjazz-bin
clean:
	rm -f *.o openjazz-bin
