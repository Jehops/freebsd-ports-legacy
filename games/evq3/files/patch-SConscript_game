--- SConscript_game.orig	Fri Apr 20 18:09:05 2007
+++ SConscript_game	Fri Apr 20 18:10:16 2007
@@ -79,16 +79,10 @@
 
 game_env = env.Copy()
 
-if env['arch'] == 'linux-i386':
-	if env['lua'] == 1:
+if sys.platform != 'win32':
+	if env['lua'] != 0:
 		game_env.Append(CCFLAGS='-DLUA')
-		game_env.Append(CCFLAGS='-Ilua/include')
-		game_env.SharedLibrary('game', [game_src, dll_src, lua_src], LIBS=['m'])
+		game_env.SharedLibrary('game', [game_src, dll_src], LIBS=['m', 'lua'])
 	else:
 		game_env.SharedLibrary('game', [game_src, dll_src], LIBS=['m'])
-	game_env.InstallAs('#baseq3/qagamei386.so', 'libgame.so')
-	
-elif env['arch'] == 'linux-x86_64':
-	game_env.SharedLibrary('game', [game_src, dll_src], LIBS=['m'])
-	game_env.InstallAs('#baseq3/qagamex86_64.so', 'libgame.so')
-
+	game_env.InstallAs('#baseq3/qagame.so', 'libgame.so')
