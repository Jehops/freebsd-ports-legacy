--- Makefile.orig	Wed Sep  6 05:32:09 2006
+++ Makefile	Wed Sep  6 05:32:14 2006
@@ -1,17 +1,17 @@
 # EDIT THESE SETTINGS
 
-PLIBPREFIX=/usr
-ODEPREFIX=/usr
-CXX=g++
+PLIBPREFIX=$(X11BASE)
+ODEPREFIX=$(X11BASE)
+CXX?=g++
 
 # END OF CUSTOM SETTINGS
 
-CXXFLAGS=-I$(ODEPREFIX)/include -I$(PLIBPREFIX)/include -O2 -g -Wall
-LFLAGS=-L$(PLIBPREFIX)/lib -L/usr/X11R6/lib
+CXXFLAGS+=-I$(ODEPREFIX)/include -I$(PLIBPREFIX)/include -g -Wall
+LFLAGS+=-L$(PLIBPREFIX)/lib
 
 OBJS=staticworldobject.o carobject.o controllerpad.o controllerkey.o main.o dynamicobject.o texture.o tga.o intro.o soundenginealsa.o vectortext.o postscore.o cartobject.o
 
-LIBS= $(ODEPREFIX)/lib/libode.a -lplibssgaux -lplibssg -lplibsg -lplibpu -lplibfnt -lplibul -lglut -lGLU -lGL -lasound
+LIBS= $(ODEPREFIX)/lib/libode.a -lplibssgaux -lplibssg -lplibsg -lplibpu -lplibfnt -lplibul -lglut -lGLU -lGL
 
 
 all: sturmbahnfahrer
@@ -65,47 +65,46 @@
 clean:
 	rm -f *.o sturmbahnfahrer
 
-GAMEDIR=$(DESTDIR)/usr/share/games/sturmbahnfahrer
+GAMEDIR=$(DATADIR)
 install: sturmbahnfahrer
 	# Directories
-	mkdir -p $(DESTDIR)/usr/games/
 	mkdir -p $(GAMEDIR)/images/
 	mkdir -p $(GAMEDIR)/sounds/
 	mkdir -p $(GAMEDIR)/models/
 	# Binary
-	install sturmbahnfahrer $(DESTDIR)/usr/games/sturmbahnfahrer
+	${BSD_INSTALL_PROGRAM} sturmbahnfahrer $(PREFIX)/bin/
 	# Images
-	install -m 644 images/engine.tga $(GAMEDIR)/images/engine.tga
-	install -m 644 images/info_carpet_smooth.rgb $(GAMEDIR)/images/info_carpet_smooth.rgb
-	install -m 644 images/info_door_smooth.rgb $(GAMEDIR)/images/info_door_smooth.rgb
-	install -m 644 images/info_jump_smooth.rgb $(GAMEDIR)/images/info_jump_smooth.rgb
+	${BSD_INSTALL_DATA} images/engine.tga $(GAMEDIR)/images/engine.tga
+	${BSD_INSTALL_DATA} images/info_carpet_smooth.rgb $(GAMEDIR)/images/info_carpet_smooth.rgb
+	${BSD_INSTALL_DATA} images/info_door_smooth.rgb $(GAMEDIR)/images/info_door_smooth.rgb
+	${BSD_INSTALL_DATA} images/info_jump_smooth.rgb $(GAMEDIR)/images/info_jump_smooth.rgb
 	# Sounds
-	install -m 644 sounds/rpm_graph.txt $(GAMEDIR)/sounds/rpm_graph.txt
-	install -m 644 sounds/camaro_s16_le.wav $(GAMEDIR)/sounds/camaro_s16_le.wav
-	install -m 644 sounds/detonationnorm_s16_le.wav $(GAMEDIR)/sounds/detonationnorm_s16_le.wav
+	${BSD_INSTALL_DATA} sounds/rpm_graph.txt $(GAMEDIR)/sounds/rpm_graph.txt
+	${BSD_INSTALL_DATA} sounds/camaro_s16_le.wav $(GAMEDIR)/sounds/camaro_s16_le.wav
+	${BSD_INSTALL_DATA} sounds/detonationnorm_s16_le.wav $(GAMEDIR)/sounds/detonationnorm_s16_le.wav
 	# Models
-	install -m 644 models/baseplate.3ds $(GAMEDIR)/models/baseplate.3ds
-	install -m 644 models/car.3ds $(GAMEDIR)/models/car.3ds
-	install -m 644 models/carpet.3ds $(GAMEDIR)/models/carpet.3ds
-	install -m 644 models/crate.3ds $(GAMEDIR)/models/crate.3ds
-	install -m 644 models/cratejump.3ds $(GAMEDIR)/models/cratejump.3ds
-	install -m 644 models/crate_low.3ds $(GAMEDIR)/models/crate_low.3ds
-	install -m 644 models/door.3ds $(GAMEDIR)/models/door.3ds
-	install -m 644 models/doorstand.3ds $(GAMEDIR)/models/doorstand.3ds
-	install -m 644 models/ferriswheelcart.3ds $(GAMEDIR)/models/ferriswheelcart.3ds
-	install -m 644 models/ferriswheelstand.3ds $(GAMEDIR)/models/ferriswheelstand.3ds
-	install -m 644 models/ferriswheelwheel.3ds $(GAMEDIR)/models/ferriswheelwheel.3ds
-	install -m 644 models/finishdoor.3ds $(GAMEDIR)/models/finishdoor.3ds
-	install -m 644 models/finishplank.3ds $(GAMEDIR)/models/finishplank.3ds
-	install -m 644 models/grid.3ds $(GAMEDIR)/models/grid.3ds
-	install -m 644 models/jumpboard.3ds $(GAMEDIR)/models/jumpboard.3ds
-	install -m 644 models/licplate.ac $(GAMEDIR)/models/licplate.ac
-	install -m 644 models/licplate.bmp $(GAMEDIR)/models/licplate.bmp
-	install -m 644 models/ramp.3ds $(GAMEDIR)/models/ramp.3ds
-	install -m 644 models/spikegate.3ds $(GAMEDIR)/models/spikegate.3ds
-	install -m 644 models/track.3ds $(GAMEDIR)/models/track.3ds
-	install -m 644 models/truck.3ds $(GAMEDIR)/models/truck.3ds
-	install -m 644 models/wheel.3ds $(GAMEDIR)/models/wheel.3ds
+	${BSD_INSTALL_DATA} models/baseplate.3ds $(GAMEDIR)/models/baseplate.3ds
+	${BSD_INSTALL_DATA} models/car.3ds $(GAMEDIR)/models/car.3ds
+	${BSD_INSTALL_DATA} models/carpet.3ds $(GAMEDIR)/models/carpet.3ds
+	${BSD_INSTALL_DATA} models/crate.3ds $(GAMEDIR)/models/crate.3ds
+	${BSD_INSTALL_DATA} models/cratejump.3ds $(GAMEDIR)/models/cratejump.3ds
+	${BSD_INSTALL_DATA} models/crate_low.3ds $(GAMEDIR)/models/crate_low.3ds
+	${BSD_INSTALL_DATA} models/door.3ds $(GAMEDIR)/models/door.3ds
+	${BSD_INSTALL_DATA} models/doorstand.3ds $(GAMEDIR)/models/doorstand.3ds
+	${BSD_INSTALL_DATA} models/ferriswheelcart.3ds $(GAMEDIR)/models/ferriswheelcart.3ds
+	${BSD_INSTALL_DATA} models/ferriswheelstand.3ds $(GAMEDIR)/models/ferriswheelstand.3ds
+	${BSD_INSTALL_DATA} models/ferriswheelwheel.3ds $(GAMEDIR)/models/ferriswheelwheel.3ds
+	${BSD_INSTALL_DATA} models/finishdoor.3ds $(GAMEDIR)/models/finishdoor.3ds
+	${BSD_INSTALL_DATA} models/finishplank.3ds $(GAMEDIR)/models/finishplank.3ds
+	${BSD_INSTALL_DATA} models/grid.3ds $(GAMEDIR)/models/grid.3ds
+	${BSD_INSTALL_DATA} models/jumpboard.3ds $(GAMEDIR)/models/jumpboard.3ds
+	${BSD_INSTALL_DATA} models/licplate.ac $(GAMEDIR)/models/licplate.ac
+	${BSD_INSTALL_DATA} models/licplate.bmp $(GAMEDIR)/models/licplate.bmp
+	${BSD_INSTALL_DATA} models/ramp.3ds $(GAMEDIR)/models/ramp.3ds
+	${BSD_INSTALL_DATA} models/spikegate.3ds $(GAMEDIR)/models/spikegate.3ds
+	${BSD_INSTALL_DATA} models/track.3ds $(GAMEDIR)/models/track.3ds
+	${BSD_INSTALL_DATA} models/truck.3ds $(GAMEDIR)/models/truck.3ds
+	${BSD_INSTALL_DATA} models/wheel.3ds $(GAMEDIR)/models/wheel.3ds
 
 
 deb:
