--- SConstruct	Mon Mar  6 16:56:17 2006
+++ SConstruct	Tue Mar 21 02:12:54 2006
@@ -1,3 +1,6 @@
+import os
+import sys
+
 # create build environment and options
 env = Environment()
 opts = Options()
@@ -38,12 +41,14 @@
 
 # PLATFORM posix or pure cygwin
 else:
-
+	SDL_CONFIG = os.environ['SDL_CONFIG']	
 	# determine compiler and linker flags for SDL
-	env.ParseConfig('sdl-config --cflags')
-	env.ParseConfig('sdl-config --libs')
+	env.ParseConfig(SDL_CONFIG + ' --cflags')
+	env.ParseConfig(SDL_CONFIG + ' --libs')
 	# add additional compiler flags
-	env.Append(CCFLAGS = ['-O2'])
+        env.Replace(CC = os.environ['CC'])
+        env.Replace(CXX = os.environ['CXX'])
+        env.Replace(CXXFLAGS = os.environ['CXXFLAGS'] + ' `' + SDL_CONFIG + ' --cflags`')
 	# add additional libraries to link against
 	env.Append(LIBS = ['SDL_image', 'SDL_ttf'])
 
@@ -71,7 +76,7 @@
 if not env.GetOption('clean'):
 	print ":: Checking for libs"
 	conf = Configure(env)
-	if not conf.CheckLibWithHeader('libSDL', 'SDL.h', 'c', 'SDL_Init(SDL_INIT_VIDEO);'):
+	if not conf.CheckLibWithHeader('libSDL-1.1', 'SDL.h', 'c', 'SDL_Init(SDL_INIT_VIDEO);'):
 		print 'Did not find libSDL, exiting!'
 		Exit(1)
 	if not conf.CheckLibWithHeader('libSDL_image', 'SDL_image.h', 'c', 'IMG_GetError();'):
