--- Makefile.orig	Sun Mar 23 03:02:53 1997
+++ Makefile	Wed Sep 30 23:28:35 1998
@@ -1,14 +1,17 @@
 # $Id: patch-aa,v 1.4 1999/01/10 17:21:34 simokawa Exp $
 DIST		= shhcards
 VERMAJ		= 1
-VERMIN		= 0
-VERPAT		= 4
-VERSION		= $(VERMAJ).$(VERMIN).$(VERPAT)
+VERMIN		= 1
+ifeq ($(PORTOBJFORMAT),elf)
+VERSION		= $(VERMAJ)
+else
+VERSION		= $(VERMAJ).$(VERMIN)
+endif
 
 ###########################################################################
 
 # Define SHARED as 1 for Linux shared ELF library
-#SHARED		= 1
+SHARED		= 1
 
 ifeq ($(SHARED),1)
 LIBTARGET	= lib$(DIST).so.$(VERSION)
@@ -28,8 +31,8 @@
 INSTALL		= install -m 644
 MKDIRP		= install -d -m 755
 
-CC		= gcc
-OPTIM		= -O2
+#CC		= gcc
+OPTIM		= $(CFLAGS)
 
 ###########################################################################
 
@@ -87,7 +90,11 @@
 
 $(LIBTARGET): $(LIBOBJS)
 ifeq ($(SHARED),1)
-	$(CC) -shared -Wl,-soname,$(LIBTARGETSOMAJ) -o $(LIBTARGET) $(LIBOBJS)
+ifeq ($(PORTOBJFORMAT),elf)
+	$(CC) -shared -Wl,-soname,$(LIBTARGET) -o $(LIBTARGET) $(LIBOBJS)
+else
+	$(CC) -shared -o $(LIBTARGET) $(LIBOBJS)
+endif
 else
 	ar rcs $(LIBTARGET) $(LIBOBJS)
 endif
