--- Makefile.orig	Sun Jul  5 11:52:26 1998
+++ Makefile	Sun May 30 21:07:36 1999
@@ -1,14 +1,17 @@
 # $Id: Makefile,v 1.4 1998/07/05 16:52:26 sverrehu Exp $
 DIST		= shhcards
 VERMAJ		= 1
-VERMIN		= 0
-VERPAT		= 4
-VERSION		= $(VERMAJ).$(VERMIN).$(VERPAT)
+VERMIN		= 1
+ifeq ($(PORTOBJFORMAT),elf)
+VERSION		= $(VERMAJ)
+else
+VERSION		= $(VERMAJ).$(VERMIN)
+endif
 
 ###########################################################################
 
 # Define SHARED as 1 for Linux shared ELF library
-#SHARED		= 1
+SHARED		= 1
 
 ifeq ($(SHARED),1)
 LIBTARGET	= lib$(DIST).so.$(VERSION)
@@ -28,8 +31,8 @@
 INSTALL		= install -m 644
 MKDIRP		= install -d -m 755
 
-CC		= gcc
-OPTIM		= -O2
+#CC		= gcc
+OPTIM		= $(CFLAGS)
 
 ###########################################################################
 
@@ -68,10 +71,10 @@
 endif
 
 # Alpha at USIT
-ifeq ($(HOSTTYPE),alpha)
-INCDIR		= -I. -I/usr/include/X11 -I/usr/local/X11R5/include
-LIBDIR		= -L. -L/usr/lib/X11 -L/usr/local/X11R5/lib
-endif
+#ifeq ($(HOSTTYPE),alpha)
+#INCDIR		= -I. -I/usr/include/X11 -I/usr/local/X11R5/include
+#LIBDIR		= -L. -L/usr/lib/X11 -L/usr/local/X11R5/lib
+#endif
 
 ###########################################################################
 
@@ -87,7 +90,11 @@
 
 $(LIBTARGET): $(LIBOBJS)
 ifeq ($(SHARED),1)
-	$(CC) -shared -Wl,-soname,$(LIBTARGETSOMAJ) -o $(LIBTARGET) $(LIBOBJS)
+ifeq ($(PORTOBJFORMAT),elf)
+	$(CC) -shared -Wl,-soname,$(LIBTARGET) -o $(LIBTARGET) $(LIBOBJS)
+else
+	$(CC) -shared -o $(LIBTARGET) $(LIBOBJS)
+endif
 else
 	ar rcs $(LIBTARGET) $(LIBOBJS)
 endif
