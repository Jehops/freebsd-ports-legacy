--- Makefile.orig	Mon Jul  6 01:52:26 1998
+++ Makefile	Tue Jul  4 21:38:46 2000
@@ -8,7 +8,7 @@
 ###########################################################################
 
 # Define SHARED as 1 for Linux shared ELF library
-#SHARED		= 1
+SHARED		= 1
 
 ifeq ($(SHARED),1)
 LIBTARGET	= lib$(DIST).so.$(VERSION)
@@ -22,13 +22,13 @@
 LIBHEAD		= $(DIST).h
 TARGETS		= $(LIBTARGET)
 
-INSTBASEDIR	= /usr/local
+INSTBASEDIR	= ${PREFIX}
 INSTLIBDIR	= $(INSTBASEDIR)/lib
 INSTINCDIR	= $(INSTBASEDIR)/include
-INSTALL		= install -m 644
-MKDIRP		= install -d -m 755
+INSTALL		= ${BSD_INSTALL_DATA}
+MKDIRP		= mkdir -p
 
-CC		= gcc
+#CC		= gcc
 OPTIM		= -O2
 
 ###########################################################################
@@ -36,8 +36,8 @@
 # Where are Xpm and X11?
 
 # GNU/Linux at home
-INCDIR		= -I. -I/usr/local/include -I/usr/X11R6/include
-LIBDIR		= -L. -L/usr/local/lib -L/usr/X11R6/lib -L/usr/local/lib/X11
+INCDIR		= -I. -I${X11BASE}/include
+LIBDIR		= -L. -L${X11BASE}/lib
 EXTRA_LD_OPT	= 
 EXTRA_LIBS	= 
 
@@ -68,14 +68,14 @@
 endif
 
 # Alpha at USIT
-ifeq ($(HOSTTYPE),alpha)
-INCDIR		= -I. -I/usr/include/X11 -I/usr/local/X11R5/include
-LIBDIR		= -L. -L/usr/lib/X11 -L/usr/local/X11R5/lib
-endif
+#ifeq ($(HOSTTYPE),alpha)
+#INCDIR		= -I. -I/usr/include/X11 -I/usr/local/X11R5/include
+#LIBDIR		= -L. -L/usr/lib/X11 -L/usr/local/X11R5/lib
+#endif
 
 ###########################################################################
 
-CCOPT		= -Wall $(OPTIM) $(INCDIR) $(CFLAGS)
+CCOPT		= $(INCDIR) $(CFLAGS)
 LDOPT		= $(LIBDIR) $(LDFLAGS)
 
 # Object files to store in the library
@@ -87,7 +87,7 @@
 
 $(LIBTARGET): $(LIBOBJS)
 ifeq ($(SHARED),1)
-	$(CC) -shared -Wl,-soname,$(LIBTARGETSOMAJ) -o $(LIBTARGET) $(LIBOBJS)
+	$(CC) -shared -Wl,-soname,$(LIBTARGETSOMAJ) -o $(LIBTARGETSOMAJ) $(LIBOBJS)
 else
 	ar rcs $(LIBTARGET) $(LIBOBJS)
 endif
@@ -106,12 +106,10 @@
 
 install: $(LIBTARGET)
 	$(MKDIRP) $(INSTLIBDIR) $(INSTINCDIR)
-	$(INSTALL) $(LIBTARGET) $(INSTLIBDIR)
+	$(INSTALL) $(LIBTARGETSOMAJ) $(INSTLIBDIR)
 	$(INSTALL) $(LIBHEAD) $(INSTINCDIR)
 ifeq ($(SHARED),1)
-	ln -sf $(LIBTARGET) $(INSTLIBDIR)/$(LIBTARGETSOMAJ)
 	ln -sf $(LIBTARGETSOMAJ) $(INSTLIBDIR)/$(LIBTARGETSO)
-	echo "If you use GNU/Linux, remember to run ldconfig"
 endif
 
 depend dep:
