--- src/serialization/string_utils.cpp.orig	Sun Dec 24 19:41:45 2006
+++ src/serialization/string_utils.cpp	Sun Dec 24 19:42:29 2006
@@ -609,7 +609,7 @@
 {
 	if(s.size() > 0) {
 		utf8_iterator itor(s);
-#if defined(__APPLE__) || defined(__AMIGAOS4__)
+#if __FreeBSD__ < 5
 		// FIXME: Should we support towupper on recent OSX platforms?
 		wchar_t uchar = *itor;
 		if(uchar >= 0 && uchar < 0x100)
@@ -631,7 +631,7 @@
 		std::string res;
 
 		for(;itor != utf8_iterator::end(s); ++itor) {
-#if defined(__APPLE__) || defined(__AMIGAOS4__)
+#if __FreeBSD__ < 5
 			// FIXME: Should we support towupper on recent OSX platforms?
 			wchar_t uchar = *itor;
 			if(uchar >= 0 && uchar < 0x100)
@@ -654,7 +654,7 @@
 		std::string res;
 
 		for(;itor != utf8_iterator::end(s); ++itor) {
-#if defined(__APPLE__) || defined(__OpenBSD__) || defined(__AMIGAOS4__)
+#if __FreeBSD__ < 5
 			// FIXME: Should we support towupper on recent OSX platforms?
 			wchar_t uchar = *itor;
 			if(uchar >= 0 && uchar < 0x100)
