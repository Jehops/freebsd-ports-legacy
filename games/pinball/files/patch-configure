--- configure.orig	Wed Nov  6 12:03:53 2002
+++ configure	Mon Nov 11 00:39:54 2002
@@ -713,8 +713,8 @@
 
 
 
-CFLAGS="-g -W -Wall -O2"
-CXXFLAGS="-g -W -Wall -O2"
+#CFLAGS="-g -W -Wall -O2"
+#CXXFLAGS="-g -W -Wall -O2"
 
 SDL_VERSION=1.2.0
 ALLEGRO_VERSION=4.0.0
@@ -5599,7 +5599,7 @@
 fi
 
 
-if test x"$use_allegro" == "xno"; then
+if test x"$use_allegro" = xno; then
 
 cat >> confdefs.h <<\EOF
 #define EM_USE_SDL 1
@@ -6997,7 +6997,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include "allegro.h"
+#include <allegro.h>
 
 char*
 my_strdup (char *str)
@@ -7092,7 +7092,7 @@
 #include "confdefs.h"
 
 #include <stdio.h>
-#include "ALLEGRO.h"
+#include <allegro.h>
 
 int main(int argc, char *argv[])
 { return 0; }
@@ -7225,6 +7225,7 @@
 int main () { int i; for (i = 0; i < 256; i++)
 if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
 exit (0); }
+END_OF_MAIN();
 
 EOF
 if { (eval echo configure:7231: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
