--- Makefile.orig	Thu May  8 01:28:12 1997
+++ Makefile	Sat Aug 12 03:01:04 2000
@@ -1,26 +1,31 @@
 # Makefile for XWorm.
 
 #CC = cc
-CC = gcc
+CC ?= gcc
 
 HPFLAGS = -O -D_HPUX_SOURCE
 SUNFLAGS = -O
 LINUXFLAGS = -O
+FREEBSDFLAGS= ${CFLAGS} -DXWORMDIR=\"${PREFIX}/share/xworm\"
 
-INCDIR = -I/usr/include/X11R5 -I/usr/include -I/usr/X11R6/include
+INCDIR = -I${X11BASE}/include
 
 HPLINK = -L/usr/local/lib/X11R5 -lXt -lX11 -lm
 SUNLINK = -L/usr/local/lib/X11R5 -lXt -lX11 -lm -lsocket -lnsl -lICE -lSM
-LINUXLINK = -L/usr/X11R6/lib -lXt -lX11 -lm
+LINUXLINK = -L${X11BASE}/lib -lXt -lX11 -lm
+.if ${PORTOBJFORMAT} == "elf"
+LINUXLINK+= -Wl,-rpath,${X11BASE}/lib
+.endif
 
 all: 
 	@echo "Makefile for XWorm v1.02 - written by The Last Viking (C) 1995-97 Ekran Design."
 	@echo " "
 	@echo "type:"
 	@echo " "
-	@echo "  make hp     [HP/UX and similar systems]"
-	@echo "  make sun    [Sun-Os/SUN systems]"
-	@echo "  make linux  [linux systems]"
+	@echo "  make hp      [HP/UX and similar systems]"
+	@echo "  make sun     [Sun-Os/SUN systems]"
+	@echo "  make linux   [linux systems]"
+	@echo "  make freebsd [FreeBSD systems]"
 	@echo " "
 	@echo "xworm.font, xworm.grid and xworm.raw has to be in the same directory as xworm"
 	@echo "please check the Makefile if you have problems compiling the program"
@@ -33,6 +38,9 @@
 
 linux: xworm.c
 	$(CC) $(LINUXFLAGS) $(INCDIR) xworm.c -o xworm $(LINUXLINK)
+
+freebsd: xworm.c
+	$(CC) $(FREEBSDFLAGS) $(INCDIR) xworm.c -o xworm $(LINUXLINK)
 
 clean:
 	rm -f core xworm
