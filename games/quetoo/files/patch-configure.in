--- configure.in.orig	Sat Jun  3 00:56:38 2006
+++ configure.in	Sat Jun  3 01:01:40 2006
@@ -129,14 +129,19 @@
 	)
 )
 
-if test "x$with_sdl" != xno; then
-	AC_CHECK_HEADER(SDL/SDL.h,
+if test "x${with_sdl}" != xno; then
+	SDL_CFLAGS=`${SDL_CONFIG} --cflags`
+	save_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$CPPFLAGS $SDL_CFLAGS"
+
+	AC_CHECK_HEADER(SDL.h,
 		HAVE_SDL=yes
-		SDL_CFLAGS=`sdl-config --cflags`
-		SDL_LIBS=`sdl-config --libs`
+		SDL_LIBS=`${SDL_CONFIG} --libs`
 		SND_REFS="$SND_REFS snd_sdl.la",
 		HAVE_SDL=no
 	)
+
+	CPPFLAGS="$save_CPPFLAGS"
 fi
 AC_SUBST(HAVE_SDL)
 AC_SUBST(SDL_CFLAGS)
@@ -207,14 +212,18 @@
 )
 
 if test "x${with_mysql}" != xno ; then
+	MYSQL_CFLAGS=`mysql_config --cflags`
+	save_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$CPPFLAGS $MYSQL_CFLAGS"
 	
-	AC_CHECK_HEADER(mysql/mysql.h,
+	AC_CHECK_HEADER(mysql.h,
 		HAVE_MYSQL=yes
 		AC_DEFINE(HAVE_MYSQL, 1, [Define this if you have MySQL])
-		MYSQL_CFLAGS=`mysql_config --cflags`
 		MYSQL_LIBS=`mysql_config --libs`,
 		HAVE_MYSQL=no
 	)
+
+	CPPFLAGS="$save_CPPFLAGS"
 fi
 AC_SUBST(MYSQL_CFLAGS)
 AC_SUBST(MYSQL_LIBS)
