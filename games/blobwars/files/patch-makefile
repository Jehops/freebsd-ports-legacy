--- makefile.orig	2008-01-21 23:17:53.000000000 +0300
+++ makefile	2008-07-11 22:35:03.000000000 +0400
@@ -7,9 +7,8 @@
 RELEASE = 1
 USEPAK = 1
 
-PREFIX=$(DESTDIR)/usr
-BINDIR = $(PREFIX)/games/
-DATADIR = $(PREFIX)/share/games/blobwars/
+BINDIR = $(PREFIX)/bin/
+DATADIR = $(PREFIX)/share/$(PROG)/
 DOCDIR = $(PREFIX)/share/doc/$(PROG)/
 ICONDIR = $(PREFIX)/share/icons/hicolor/
 DESKTOPDIR = $(PREFIX)/share/applications/
@@ -19,7 +18,7 @@
 CXXFLAGS += -DPAKNAME=\"$(PAKNAME)\" -DPAKLOCATION=\"$(DATADIR)\" -DUNIX -DGAMEPLAYMANUAL=\"$(DOCDIR)index.html\" -Wall
 CXXFLAGS += -DLOCALEDIR=\"$(LOCALEDIR)\"
 CXXFLAGS += $(CFLAGS)
-LIBS = `sdl-config --libs` -lSDL_mixer -lSDL_image -lSDL_ttf -lz
+LIBS = `sdl-config --libs` -lSDL_mixer -lSDL_image -lSDL_ttf -lz -lintl
 
 OBJS += aquaBoss.o bosses.o bullets.o cutscene.o
 OBJS += CAudio.o CBoss.o CCollision.o CCutscene.o CData.o CEffect.o CEngine.o CEntity.o CFileData.o CGame.o 
@@ -38,7 +37,7 @@
 LOCALE_MO = $(patsubst %.po,%.mo,$(wildcard locale/*.po))
 
 # top-level rule to create the program.
-all: $(PROG) pak $(LOCALE_MO)
+all: $(PROG) pak buildpak $(LOCALE_MO)
 
 # compiling other source files.
 %.o: src/%.cpp src/%.h src/defs.h src/defines.h src/headers.h
@@ -66,30 +65,20 @@
 
 # install
 install:
-
-	./pak data gfx music sound $(PAKNAME)
-
-	mkdir -p $(BINDIR)
 	mkdir -p $(DATADIR)
-	mkdir -p $(DOCDIR)
-	mkdir -p $(ICONDIR)16x16/apps
-	mkdir -p $(ICONDIR)32x32/apps
-	mkdir -p $(ICONDIR)64x64/apps
-	mkdir -p $(DESKTOPDIR)
-
-	install -o root -g games -m 755 $(PROG) $(BINDIR)$(PROG)
-	install -o root -g games -m 644 $(PAKNAME) $(DATADIR)$(PAKNAME)
-	install -o root -g games -m 644 $(DOCS) $(DOCDIR)
-	cp $(ICONS)$(PROG).png $(ICONDIR)32x32/apps/
-	cp $(ICONS)$(PROG)-mini.png $(ICONDIR)16x16/apps/$(PROG).png
-	cp $(ICONS)$(PROG)-large.png $(ICONDIR)64x64/apps/$(PROG).png
-	cp $(ICONS)$(PROG).desktop $(DESKTOPDIR)
+	mkdir -p $(PREFIX)/share/applications
+	mkdir -p $(PREFIX)/share/pixmaps
+
+	$(BSD_INSTALL_PROGRAM) $(PROG) $(BINDIR)$(PROG)
+	$(BSD_INSTALL_DATA) $(PAKNAME) $(DATADIR)$(PAKNAME)
+	$(BSD_INSTALL_DATA) $(ICONS)$(PROG).desktop $(PREFIX)/share/applications
+	$(BSD_INSTALL_DATA) $(ICONS)$(PROG).png $(PREFIX)/share/pixmaps
 
 	@for f in $(LOCALE_MO); do \
 		lang=`echo $$f | sed -e 's/^locale\///;s/\.mo$$//'`; \
 		mkdir -p $(LOCALEDIR)$$lang/LC_MESSAGES; \
-		echo "cp $$f $(LOCALEDIR)$$lang/LC_MESSAGES/$(PROG).mo"; \
-		cp $$f $(LOCALEDIR)$$lang/LC_MESSAGES/$(PROG).mo; \
+		echo "$(BSD_INSTALL_DATA) $$f $(LOCALEDIR)$$lang/LC_MESSAGES/$(PROG).mo"; \
+		$(BSD_INSTALL_DATA) $$f $(LOCALEDIR)$$lang/LC_MESSAGES/$(PROG).mo; \
 	done
 
 uninstall:
