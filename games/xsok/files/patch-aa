--- src/Imakefile.orig	Sun Mar 17 20:54:27 1996
+++ src/Imakefile	Tue Sep 12 05:02:42 2000
@@ -46,17 +46,18 @@
 # BINDIR and LIBDIR should be predefined by the templates
 # BINDIR = /usr/bin/X11
 # LIBDIR = /usr/lib/X11
-XSOKLIBDIR = /usr/games/lib/xsok
-APPDEFSDIR = $(LIBDIR)
-XSOKMANDIR = /usr/man/man6
-XSOKDOCDIR = /usr/doc/xsok
+XSOKLIBDIR = $(LIBDIR)/xsok
+APPDEFSDIR = $(LIBDIR)/app-defaults
+XSOKMANDIR = $(MANDIR)
+MANSUFFIX = 6
+XSOKDOCDIR = $(X11BASE)/share/doc/xsok
 
 # This is the name of the save directory, where solved games are stored:
 # an alternative path would be $(XSOKLIBDIR)/save
 # The directory XSOKSAVEDIR must have permissions rwx for world, else
 # xsok must be installed suid, and XSOKDIR must have write permissions for
 # the owner of xsok
-XSOKSAVEDIR = /var/games/xsok
+XSOKSAVEDIR = $(XSOKLIBDIR)
 
 # paths for installation in user's home-directory.
 LXSOKBINDIR = $(HOME)/bin
@@ -65,7 +66,7 @@
 
 # xsok needs to know where the xpm library resides
 XPMLIB 			= -L$(USRLIBDIR) -lXpm
-XPMINCLUDE		= -I $(INCDIR)
+XPMINCLUDE		= -I$(INCDIR)/X11
 
 # *****************************************************************************
 # I hope you don't need to change anything below this point
@@ -74,14 +75,14 @@
 CC = c89
 CCOPTIONS =
 #else
-CC = gcc
+XCOMM CC = gcc
 #ifdef EXTRA_WARNINGS
 CCOPTIONS = -O2 -pipe -ansi -fno-common -Wall -Wshadow -Wpointer-arith \
 	-Wcast-qual -Wcast-align -Waggregate-return \
 	-Wstrict-prototypes -Wmissing-prototypes \
 	-Wnested-externs -Wwrite-strings
 #else
-CCOPTIONS = -O2 -pipe -ansi -Wall -fno-common
+XCOMM CCOPTIONS = -O2 -pipe -ansi -Wall -fno-common
 #endif
 #endif
 
@@ -109,7 +110,7 @@
 # *.c  require  version.h xsok.h
 # X*.c additionally require X-sok.h and Tableau.h
 # X-widget.c additionally requires TableauP.h
-LIBCONTS = *.gz *.help keys
+LIBCONTS = *.xpm *.gz *.help keys
 
 all::	$(ALLTARGETS)
 
@@ -132,9 +133,9 @@
 
 # the install targets require that make has been run in the lib directory
 install:: $(MYPROGS)
-	(umask 022 && mkdirhier $(XSOKLIBDIR))
+	(umask 022 && $(MKDIRHIER) $(XSOKLIBDIR))
 	# chmod 755 $(XSOKLIBDIR)
-	(umask 022 && mkdirhier $(XSOKSAVEDIR))
+	(umask 022 && $(MKDIRHIER) $(XSOKSAVEDIR))
 	chmod 777 $(XSOKSAVEDIR)
 	(cd ../lib; tar cf - $(LIBCONTS) | (cd $(XSOKLIBDIR); tar xf -))
 	chown -R root $(XSOKLIBDIR) $(XSOKSAVEDIR)
@@ -142,14 +143,11 @@
 	(cd ../lib && ../src/mergescores $(XSOKSAVEDIR)/Xsok.score \
 	   $(XSOKSAVEDIR)/Sokoban.score $(XSOKSAVEDIR)/Cyberbox.score)
 	chmod 666 $(XSOKSAVEDIR)/[A-z]*.score
-	(umask 022 && mkdirhier $(XSOKDOCDIR))
+	(umask 022 && $(MKDIRHIER) $(XSOKDOCDIR))
 	if [ -r ../doc/xsok.dvi ]; then cp ../doc/xsok.dvi $(XSOKDOCDIR); fi
-	cp ../doc/cyberbox.doc $(XSOKDOCDIR)
-	cp ../etc/COPYRIGHT* $(XSOKDOCDIR)
+	$(INSTALL) $(INSTALLFLAGS) ../doc/cyberbox.doc $(XSOKDOCDIR)
+	$(INSTALL) $(INSTALLFLAGS) ../etc/COPYRIGHT* $(XSOKDOCDIR)
 	chmod -R a+r $(XSOKDOCDIR)
-	mkdirhier $(XSOKMANDIR)
-	cp xsok.man $(XSOKMANDIR)/xsok.6x
-	chmod 644 $(XSOKMANDIR)/xsok.6x
 
 ComplexProgramTarget($(MYPROG))
 InstallAppDefaults(XSok)
