--- pdns/iputils.hh.orig	Sat Aug 30 16:27:48 2003
+++ pdns/iputils.hh		Mon Nov 10 17:27:02 2003
@@ -51,10 +51,13 @@
   Netmask(const string &mask) 
   {
     char *p;
-    char bits=32;
+    u_int8_t bits=32;
+    d_mask=0xFFFFFFFF;
+
     if((p=strchr(mask.c_str(),'/')))
-      bits=atoi(p+1);
+      bits = (u_int8_t) atoi(p+1);
 
+    if( bits < 32 )
     d_mask=~(0xFFFFFFFF>>bits);
 
     struct in_addr a;
