--- configure.in.orig	Tue Aug 29 09:14:45 2000
+++ configure.in	Fri Sep 15 11:49:51 2000
@@ -940,8 +940,8 @@
     AC_MSG_RESULT(no)
   else
     AC_MSG_RESULT(yes)
-    AC_CHECK_LIB(dl, dlopen, LIBS="$LIBS -ldl",
-      AC_CHECK_FUNC(dlopen,,
+    AC_CHECK_FUNC(dlopen,,
+      AC_CHECK_LIB(dl, dlopen, LIBS="$LIBS -ldl",
         AC_CHECK_LIB(dld, dld_link, LIBS="$LIBS -ldld",
           AC_CHECK_LIB(dld, shl_load, LIBS="$LIBS -ldld", 
             AC_MSG_ERROR(Cannot find dlopen. Please run ./configure --without-tcl
@@ -970,7 +970,7 @@
       else
         #if test x"$withval" != x"yes"; then
         if test -d "$withval"; then
-          TCL_LIBS="$LIBS -L$withval -ltcl"
+          TCL_LIBS="$LIBS -L$withval -ltcl83"
           search_tcl=0
           has_tcl=1
         fi
@@ -991,10 +991,10 @@
 
     AC_DEFUN(AC_SEARCH_TCL,
     [ AC_MSG_CHECKING("location of tcl.h")
-      AC_CHECK_TCL(/usr/include, tcl.h, -ltcl,, "found in /usr/include")
-      AC_CHECK_TCL(/usr/include/tcl, tcl.h, -ltcl, -I/usr/include/tcl, "found in /usr/include/tcl")
-      AC_CHECK_TCL(/usr/local/include, tcl.h, -L/usr/local/lib -ltcl, -I/usr/local/include, "found in /usr/local")
-      AC_CHECK_TCL(/usr/local/include/tcl, tcl.h, -L/usr/local/lib -L/usr/local/lib/tcl -ltcl, -I/usr/local/include/tcl, "found in /usr/local/include/tcl")
+      AC_CHECK_TCL(/usr/include, tcl.h, -ltcl83,, "found in /usr/include")
+      AC_CHECK_TCL(/usr/include/tcl, tcl.h, -ltcl83, -I/usr/include/tcl, "found in /usr/include/tcl")
+      AC_CHECK_TCL(/usr/local/include, tcl.h, -L/usr/local/lib -ltcl83, -I/usr/local/include, "found in /usr/local")
+      AC_CHECK_TCL(/usr/local/include/tcl, tcl.h, -L/usr/local/lib -L/usr/local/lib/tcl -ltcl83, -I/usr/local/include/tcl, "found in /usr/local/include/tcl")
     ])
 
     if test x"$search_tcl" != x"0"; then
