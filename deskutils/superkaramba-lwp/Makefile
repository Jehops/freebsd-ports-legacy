# New ports collection makefile for:	superkaramba-lwp
# Date created:				Sun, May 28, 2006
# Whom:					Jason E. Hale <bsdkaffee@gmail.com>
#
# $FreeBSD$

PORTNAME=		lwp
PORTVERSION=		13.5.1
CATEGORIES=		deskutils kde
MASTER_SITES=		http://www.message.co.nz/~matt-sarah/ \
			http://mirror1.liquidweather.net/ \
			http://liquidweather.net/ \
			http://liquidweather.innetrex.net/
PKGNAMEPREFIX=		superkaramba-
EXTRACT_SUFX=		.skz

MAINTAINER=		bsdkaffee@gmail.com
COMMENT=		Liquid Weather ++ a Superkaramba weather applet

EXTRACT_DEPENDS=	unzip:${PORTSDIR}/archivers/unzip
BUILD_DEPENDS=		zip:${PORTSDIR}/archivers/zip
RUN_DEPENDS=		convert:${PORTSDIR}/graphics/ImageMagick \
			superkaramba:${PORTSDIR}/misc/kdeutils3 \
			pyuic:${PORTSDIR}/x11-toolkits/py-qt

WRKSRC=			${WRKDIR}/${DISTNAME}

EXTRACT_CMD=		${UNZIP_CMD}
EXTRACT_BEFORE_ARGS=	-q -d ${DISTNAME}
EXTRACT_AFTER_ARGS=	# empty

NO_BUILD=		yes

PLIST_SUB=		LWPVER=${DISTFILES}

.include <bsd.port.pre.mk>

post-extract:
	@cd ${WRKSRC} && ${RM} -f *~ locale/*/LC_MESSAGES/*.po*
	@cd ${WRKSRC} && ${REINPLACE_CMD} -e 's|/usr/bin|${LOCALBASE}/bin|' \
		mkfile.py test_gui.py

pre-install:
	@cd ${WRKSRC} && zip -qr ${DISTFILES} *

do-install:
	@${MKDIR} ${PREFIX}/share/apps/superkaramba/themes
	@cd ${WRKSRC} && ${INSTALL_DATA} ${DISTFILES} \
		${PREFIX}/share/apps/superkaramba/themes

.include <bsd.port.post.mk>
