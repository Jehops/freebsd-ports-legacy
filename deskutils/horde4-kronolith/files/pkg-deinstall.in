#!/bin/sh
#
# $FreeBSD$
#
# Backup Kronolith config files, if needed.

if [ x$2 != xDEINSTALL ]; then
    exit
fi

if [ -z "${PACKAGE_BUILDING}" ]; then
  for cf in `ls %%KRONOLITHDIR%%/config/*php`; do
    diff -bBqw $cf $cf.dist >/dev/null 2>&1
    case $? in
      0)  # original config file, delete it
          rm -f $cf
          ;;
      1)  # config file has been updated, leave it alone
          ;;
      *)  # not found?
          ;;
    esac
  done
fi
