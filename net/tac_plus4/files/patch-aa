--- Makefile.orig	Sat Apr  3 08:03:48 1999
+++ Makefile	Tue Nov  9 21:48:01 1999
@@ -31,13 +31,13 @@
 # OS=-DMIPS
 
 # For Solaris (SUNOS 5.3, 5.4, 5.5, 5.6) uncomment the following two lines
-OS=-DSOLARIS
-OSLIBS=-lsocket -lnsl
+# OS=-DSOLARIS
+# OSLIBS=-lsocket -lnsl
 
 # For FreeBSD
-# OS=-DFREEBSD
+OS=-DFREEBSD
 # You may also need to add:
-# OSLIBS=-lcrypt
+OSLIBS=-lcrypt
 # NOTE: If you want your password encryption to be compatible with
 # e.g. SunOS, you may need to instead use:
 # OSLIBS=-ldescrypt
@@ -62,12 +62,12 @@
 # FLAGS   = -DTAC_PLUS_USERID=$(USERID) -DTAC_PLUS_GROUPID=$(GROUPID)
 
 # Definitions for SKEY functionality
-# DEFINES = -DSKEY
-# LIBS = ../crimelab/skey/src/libskey.a
+DEFINES = -DSKEY
+LIBS = -lskey -lmd
 # INCLUDES = -I../crimelab/skey/src
 
 # Debugging flags
-DEBUG = -g
+# DEBUG = -g
 
 # Enforce a limit on maximum sessions per user. See the user's guide
 # for more information.
@@ -83,13 +83,13 @@
 # possible), containing its process id. Uncomment and modify the
 # following line to change this filename
 
-# PIDFILE = -DTAC_PLUS_PIDFILE=\"/var/run/tac_plus.pid\" 
+PIDFILE = -DTAC_PLUS_PIDFILE=\"/var/run/tac_plus.pid\" 
 
 #
 # End of customisable section of Makefile
 #
 
-CFLAGS = $(DEBUG) $(DEFINES) $(INCLUDES) $(FLAGS) $(OS) $(PIDFILE) $(MAXSESS)
+CFLAGS += $(DEBUG) $(DEFINES) $(INCLUDES) $(FLAGS) $(OS) $(PIDFILE) $(MAXSESS)
 
 HFILES = expire.h parse.h regmagic.h md5.h regexp.h tac_plus.h 
 
@@ -128,8 +128,8 @@
 	-rm -f *.o *~ *.BAK tac_plus generate_passwd
 
 install:
-	cp tac_plus /usr/local/bin
-	cp tac_plus.1 /usr/man/manl/tac_plus.1
+	cp tac_plus $(PREFIX)/sbin
+	cp tac_plus.1 $(PREFIX)/man1/tac_plus.1
 
 depend:
 	makedepend $(CFLAGS) $(SRCS)
