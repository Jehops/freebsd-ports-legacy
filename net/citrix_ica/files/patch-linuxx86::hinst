--- linuxx86/hinst.orig	Wed Aug 22 14:52:20 2001
+++ linuxx86/hinst	Tue Jan 22 11:15:58 2002
@@ -1961,10 +1961,32 @@
 #
 ###############################################################################
 
+check_for_ns() {
+	BIN=`/usr/bin/file $1/plugins/libnullplugin.so | /usr/bin/awk '{print $11}'`
+	case ${BIN} in
+	\(SYSV\),)
+		NETSCAPE_DIR="$1"
+		PLUGIN_PATH="$s/plugins"
+		FOUND_NS="TRUE"
+	esac
+}
+
+NSCP="/usr/local/libexec/netscape \
+        /usr/local/libexec/netscape-linux \
+        /usr/local/netscape \
+        /usr/local/netscape-linux \
+        /usr/local/lib/netscape \
+        /usr/local/lib/netscape-linux \
+        $MOZILLA_HOME"
+
+for dir in ${NSCP}; do
+        if [ -e $dir/plugins/libnullplugin.so ]; then
+                check_for_ns $dir;
+        fi
+done
+
 INST_DIR=$ICAInstDir
 TMP_NAME=/tmp/ICAnetscape.$$
-NETSCAPE_DIR="/usr/local/lib/netscape"
-PLUGIN_PATH="/usr/local/netscape/plugins"
 PLUGIN_NAME=npica.so
 PLUGIN_CLASS=ICAClObj.class
 
@@ -2004,14 +2026,12 @@
   $ECHO_CMD $integrate_netscape1
   search_ok=0
   
-  if (test -d "/usr/lib/netscape"\
-   || test -d "/usr/local/netscape"\
-   || test -d "/opt/netscape"\
-   || test -d "/usr/local/lib/netscape")
-  then
+  case ${FOUND_NS} in
+  TRUE)
   	$ECHO_CMD $integrate_netscape3
   	found_netscape 
-  else
+	;;
+  *) 
 	echo_no_nl $integrate_netscape2
  	getyesno $INSTALLER_NO
 	if [ "$ANSWER" = "$INSTALLER_YES" ]
@@ -2020,7 +2040,8 @@
 	else
   		$ECHO_CMD $integrate_netscape6
 	fi
-  fi;
+	;;
+  esac;
 }
 
 ################################################################################
