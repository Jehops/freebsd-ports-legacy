--- linuxx86/hinst.orig	Thu May 22 12:30:28 2003
+++ linuxx86/hinst	Mon Aug 11 16:52:05 2003
@@ -2132,10 +2132,34 @@
 #
 ###############################################################################
 
+check_for_ns() {
+	BIN=`/usr/bin/file $1/plugins/libnullplugin.so | /usr/bin/awk '{print $11}'`
+	case ${BIN} in
+	\(SYSV\),)
+		NETSCAPE_DIR="$1"
+		PLUGIN_PATH="$s/plugins"
+		FOUND_NS="TRUE"
+	esac
+}
+
+NSCP="/usr/local/libexec/netscape \
+	/usr/local/libexec/netscape-linux \
+	/usr/local/netscape \
+	/usr/local/netscape-linux \
+	/usr/local/lib/netscape \
+	/usr/local/lib/netscape-linux \
+	/usr/local/lib/linux-mozilla \
+	/usr/local/lib/mozilla \
+	$MOZILLA_HOME"
+
+for dir in ${NSCP}; do
+	if [ -e $dir/plugins/libnullplugin.so ]; then
+		check_for_ns $dir;
+	fi
+done
+
 INST_DIR=$ICAInstDir
 TMP_NAME=/tmp/ICAnetscape.$$
-NETSCAPE_DIR="/usr/local/lib/netscape"
-PLUGIN_PATH="/usr/local/netscape/plugins"
 PLUGIN_NAME=npica.so
 PLUGIN_CLASS=ICAClObj.class
 MAILCAP_FILE=mailcap
@@ -2206,36 +2230,29 @@
 
 netscape_integrate()
 {
-  $ECHO_CMD $integrate_netscape1
   if test -z "$SU_INSTALL"
   then
     set_npui_variables
     found_netscape 
   else
     search_ok=0
-    EXTRA_BROWSERS=`find_browsers`
-  
-    if  test -d "/usr/lib/netscape"\
-	|| test -d "/usr/local/netscape"\
-	|| test -d "/opt/netscape"\
-	|| test -d "/usr/local/lib/netscape"\
-	|| test -d "/usr/dt/appconfig/netscape"\
-	|| test "$MOZILLA_HOME" != "" -a -d "$MOZILLA_HOME"\
-	|| test "$EXTRA_BROWSERS" != ""
-    then
+
+   case ${FOUND_NS} in
+   TRUE)
   	$ECHO_CMD $integrate_netscape3
   	found_netscape 
-    else
+	;;
+   *)
 	echo_no_nl $integrate_netscape2
  	getyesno $INSTALLER_NO
-	if [ "$ANSWER" = "$INSTALLER_YES" ]
-	then
+	if [ "$ANSWER" = "$INSTALLER_YES" ]; then
 		found_netscape
 	else
   		$ECHO_CMD $integrate_netscape6
 	fi
-    fi
-  fi
+   	;;
+   esac
+   fi
 
     # Create utility script files in install root.
     create_wfica_script
@@ -2866,37 +2883,6 @@
     echo "$BINDIR"
 }
 
-################################################################################
-#
-# find_browsers
-#
-# Returns a list of directories containing new-style mozilla-based browsers 
-# that may be launched by files on the $PATH.
-#
-################################################################################
-find_browsers()
-{
-    PROGS="netscape mozilla"
-    DIST_BIN_DIR=""
-    STANDARD_DIRS="/usr/local/netscape /usr/local/mozilla"
-    for d in `echo $PATH | sed "s/:/ /g"` $STANDARD_DIRS
-    do
-	echo $d
-    done | sort -u | while read d
-    do 
-	for p in $PROGS
-	do    
-	    # Find the each instance of each named browser
-	    PROG=$d/$p
-	    if test -f $PROG
-	    then
-		# Where is the installation and what version is it?
-		find_extra_bin_dirs $PROG
-	    fi
-	done
-    done | sort -u
-}
-
 BROWSER_LIST_KEY="BROWSER_DIR"
 ################################################################################
 #
@@ -3119,6 +3105,8 @@
 wfcmgr_NAME='Citrix ICA Client'
 DEFAULT_DT_TARGET_DIRS="/usr/share/applications \
                         /usr/share/applnk/Applications \
+			/usr/local/share/applnk/Internet \
+			/usr/local/share/applnk/Networking \
                         /usr/share/applnk-redhat/Internet \
                         /usr/share/applnk-mdk/Networking"
 DEFAULT_DT_FOLDER="Applications"
