diff -Nur servers/slapd/back-perl/add.c.orig servers/slapd/back-perl/add.c
--- servers/slapd/back-perl/add.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/add.c	Thu Jun  5 11:44:06 2003
@@ -13,17 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/bind.c.orig servers/slapd/back-perl/bind.c
--- servers/slapd/back-perl/bind.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/bind.c	Thu Jun  5 11:44:06 2003
@@ -13,18 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-/* init.c - initialize Perl backend */
-	
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+	
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/close.c.orig servers/slapd/back-perl/close.c
--- servers/slapd/back-perl/close.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/close.c	Thu Jun  5 11:44:06 2003
@@ -13,18 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-/* init.c - initialize shell backend */
-	
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+	
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/compare.c.orig servers/slapd/back-perl/compare.c
--- servers/slapd/back-perl/compare.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/compare.c	Thu Jun  5 11:44:06 2003
@@ -13,17 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "lutil.h"
 #include "perl_back.h"
diff -Nur servers/slapd/back-perl/config.c.orig servers/slapd/back-perl/config.c
--- servers/slapd/back-perl/config.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/config.c	Thu Jun  5 11:44:06 2003
@@ -13,17 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-	
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+	
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/delete.c.orig servers/slapd/back-perl/delete.c
--- servers/slapd/back-perl/delete.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/delete.c	Thu Jun  5 11:44:06 2003
@@ -13,17 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/init.c.orig servers/slapd/back-perl/init.c
--- servers/slapd/back-perl/init.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/init.c	Thu Jun 12 22:25:21 2003
@@ -13,18 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
- /* init.c - initialize shell backend */
-	
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+	
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
@@ -37,7 +38,7 @@
 
 #ifdef SLAPD_PERL_DYNAMIC
 
-int back_perl_LTX_init_module(int argc, char *argv[])
+int init_module(int argc, char *argv[])
 {
 	BackendInfo bi;
 
diff -Nur servers/slapd/back-perl/modify.c.orig servers/slapd/back-perl/modify.c
--- servers/slapd/back-perl/modify.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/modify.c	Thu Jun  5 11:44:06 2003
@@ -13,17 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/modrdn.c.orig servers/slapd/back-perl/modrdn.c
--- servers/slapd/back-perl/modrdn.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/modrdn.c	Thu Jun  5 11:44:06 2003
@@ -26,17 +26,19 @@
  *
  */
 
-#include "portable.h"
-
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
diff -Nur servers/slapd/back-perl/search.c.orig servers/slapd/back-perl/search.c
--- servers/slapd/back-perl/search.c.orig	Sun May 25 03:56:59 2003
+++ servers/slapd/back-perl/search.c	Thu Jun  5 11:44:06 2003
@@ -13,17 +13,19 @@
  *	 in file LICENSE in the top-level directory of the distribution.
  */
 
-#include "portable.h"
-
-#include <stdio.h>
+#include <EXTERN.h>
+#include <perl.h>
+#undef _ /* #defined used by both Perl and ac/localize.h */
 
-#include "slap.h"
 #ifdef HAVE_WIN32_ASPERL
 #include "asperl_undefs.h"
 #endif
 
-#include <EXTERN.h>
-#include <perl.h>
+#include "portable.h"
+
+#include <stdio.h>
+
+#include "slap.h"
 
 #include "perl_back.h"
 
