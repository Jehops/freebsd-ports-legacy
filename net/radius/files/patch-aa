--- Makefile~	Mon Jul 13 17:19:54 1998
+++ Makefile	Thu Sep 17 18:27:41 1998
@@ -51,11 +51,11 @@
 # Where the configuration files live.
 RADDB		= ./raddb
 # Some installation stuff.
-DAEMON_INSDIR	= /usr/private/etc
-BIN_INSDIR	= /usr/private/etc
-MAN_INSDIR	= /usr/local/man
-RADDB_INSDIR	= /usr/private/etc/raddb.new
-RADACCT_INSDIR	= /usr/private/etc/radacct
+DAEMON_INSDIR	= ${PREFIX}/sbin
+BIN_INSDIR	= ${PREFIX}/bin
+MAN_INSDIR	= ${PREFIX}/man
+RADDB_INSDIR	= ${PREFIX}/lib/radius/db
+RADACCT_INSDIR	= ${PREFIX}/lib/radius/acct
 # The server does not need to be owned by root, unless some shadow password
 # scheme needs it.  You might create a user id "radius" for just this purpose.
 # The O G and M macros are for AIX, OSF/1 and HP-UX, see below.
@@ -67,8 +67,8 @@
 
 # Define COMPRESS to hold the pathname of your favourite compress program if
 # you need to override the default value of /usr/ucb/compress:
-#COMPRESS	= -DRAD_COMPRESS=\"/usr/local/bin/gzip\"
-#COMPRESS_ARGS	= -DCOMPRESS_ARGS=\"-9\"
+COMPRESS	= -DRAD_COMPRESS=\"/usr/bin/gzip\"
+COMPRESS_ARGS	= -DCOMPRESS_ARGS=\"-9\"
 
 # Define SRV to hold any combination of server names you'd like to override:
 #SRV3	  = -DDEFAULT_TACACS_SERVER=\"vms.dns.name\"
@@ -122,17 +122,22 @@
 # radiusd -- the default
 #
 #--------------------------------------------------------------------------
+.if !defined(MAKE_EBONES)
 DEFS	  = -DHAVE_SETVBUF -DNOSHADOW $(MERIT) $(STUFF) 
 RADLIBS	  =
 INCS	  =
+.endif
 
 #
 # mkerb
 #
 #--------------------------------------------------------------------------
-#DEFS	  = -DHAVE_SETVBUF -DM_KERB -DNOSHADOW $(MERIT) $(STUFF)
-#RADLIBS	  = /usr/kerberos/lib/libkrb.a /usr/kerberos/lib/libdes.a
-#INCS	  = -I/usr/kerberos/include
+.if defined(MAKE_EBONES)
+DEFS	  = -DHAVE_SETVBUF -DM_KERB -DKRB_INSTANCE=\"$(KRB_INSTANCE)\" \
+	    -DNOSHADOW $(MERIT) $(STUFF)
+RADLIBS	  = -lkrb -ldes
+INCS	  = -I/usr/include
+.endif
 
 #
 # akerb
@@ -228,12 +233,12 @@
 #
 #--------------------------------------------------------------------------
 
-CC	  = cc
-CFLAGS	  = -g $(DEFS) $(INCS)
-LDFLAGS	  =
-LIBS	  =
-RANLIB	  = ranlib
-INSTALL	  = /bin/install
+#CC	  = cc
+#CFLAGS	  = -g $(DEFS) $(INCS)
+#LDFLAGS	  =
+#LIBS	  =
+#RANLIB	  = ranlib
+#INSTALL	  = /bin/install
 
 #
 # Solaris 2.x [[NB: if BIND/named not SMCC, try CFLAGS = ... -DBSD=1 ...]]
@@ -316,14 +321,17 @@
 #
 #--------------------------------------------------------------------------
 
-#CC	  = cc
-#CFLAGS	  = -O $(DEFS) $(INCS)
-#LDFLAGS	  =
-#LIBS	  = -lcrypt -lcompat
-#UTILS	  = $(RADCHECK) $(RADPWTST) $(RADPASS) $(DNSCHECK)
-#RANLIB	  = ranlib
-#INSTALL	  = /usr/bin/install
-
+CC	  = cc
+CFLAGS += -DRADIUS_DIR=\"${RADDB_INSDIR}\" -DDEFAULT_DIR2=\"${RADDB_INSDIR}\" \
+	-DRADACCT_DIR=\"${PREFIX}/lib/radius/acct\" \
+	-DRADIUS_COMPRESS=\"/usr/bin/gzip\" \
+	$(DEFS) $(INCS)
+LDFLAGS	  =
+LIBS	  = -lcrypt -lcompat
+UTILS	  = $(RADCHECK) $(RADPWTST) $(RADPASS) $(DNSCHECK)
+RANLIB	  = ranlib
+INSTALL	  = /usr/bin/install -c
+  
 #
 # AIX 3.2.5 (if using xlc(1) add -D_ALL_SOURCE to CFLAGS below)
 # May need '-qchars=signed' added to CFLAGS below to fix bug in wait status.
@@ -684,21 +692,21 @@
 		/bin/mkdir -p $(RADDB_INSDIR) ;\
 	fi
 	$(INSTALL) $(M) 660 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/authfile \
-						$(RADDB_INSDIR)/authfile
+						$(RADDB_INSDIR)/authfile.sample
 	$(INSTALL) $(M) 660 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/clients \
-						$(RADDB_INSDIR)/clients
+						$(RADDB_INSDIR)/clients.sample
 	$(INSTALL) $(M) 755 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/conversion.pl \
-						$(RADDB_INSDIR)/conversion.pl
+						$(RADDB_INSDIR)/conversion.pl.sample
 	$(INSTALL) $(M) 644 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/dictionary \
-						$(RADDB_INSDIR)/dictionary
+						$(RADDB_INSDIR)/dictionary.sample
 	$(INSTALL) $(M) 644 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/engine.config \
-						$(RADDB_INSDIR)/engine.config
+						$(RADDB_INSDIR)/engine.config.sample
 	$(INSTALL) $(M) 660 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/users \
-						$(RADDB_INSDIR)/users
+						$(RADDB_INSDIR)/users.sample
 	$(INSTALL) $(M) 644 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/vendors \
-						$(RADDB_INSDIR)/vendors
+						$(RADDB_INSDIR)/vendors.sample
 	$(INSTALL) $(M) 644 $(O) $(RADOWN) $(G) $(RADGRP) $(RADDB)/xas.fsm \
-						$(RADDB_INSDIR)/xas.fsm
+						$(RADDB_INSDIR)/xas.fsm.sample
 	-if [ ! -d $(RADACCT_INSDIR) ] ;\
 	then \
 		/bin/mkdir -p $(RADACCT_INSDIR) ;\
