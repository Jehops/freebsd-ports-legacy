--- src/main/Makefile.in.orig	Fri Jun 10 04:35:36 2005
+++ src/main/Makefile.in	Sat Jun 18 11:06:37 2005
@@ -14,7 +14,7 @@
 CFLAGS		+= -DHOSTINFO=\"${HOSTINFO}\"
 CFLAGS          += -DRADIUSD_VERSION=\"${RADIUSD_VERSION}\"
 CFLAGS          += $(SNMP_INCLUDE) 
-LDFLAGS		+= -L../lib
+LDFLAGS_MAIN	= -L../lib $(LDFLAGS)
 MODULE_LIBS	= $(STATIC_MODULES)
 MODULE_OBJS	=
 VFLAGS		= -DRADIUSD_MAJOR_VERSION=$(RADIUSD_MAJOR_VERSION)
@@ -52,7 +52,7 @@
 
 radiusd: $(SERVER_OBJS) ../lib/libradius.a $(MODULE_OBJS)
 	$(LIBTOOL) --mode=link $(CC) -export-dynamic -dlopen self \
-		$(CFLAGS) $(LDFLAGS) -o $@ \
+		$(CFLAGS) $(LDFLAGS_MAIN) -o $@ \
 		$(SERVER_OBJS) $(LCRYPT) $(MODULE_LIBS) $(LIBS) \
 		$(PTHREADLIB) $(LIBLTDL) $(LCRYPT)
 
@@ -123,13 +123,13 @@
 	$(CC) $(CFLAGS) -o radius_snmp.o -c radius_snmp.c
 
 radclient: radclient.o ../lib/libradius.a
-	$(CC) $(CFLAGS) $(LDFLAGS) -o radclient radclient.o $(LIBS)
+	$(CC) $(CFLAGS) $(LDFLAGS_MAIN) -o radclient radclient.o $(LIBS)
 
 radclient.o: radclient.c $(INCLUDES)
 	$(CC) $(CFLAGS) -c radclient.c
 
 radrelay: radrelay.o mainconfig.o util.o nas.o client.o log.o conffile.o files.o xlat.o ../lib/libradius.a
-	$(CC) $(CFLAGS) $(LDFLAGS) -o radrelay radrelay.o mainconfig.o util.o nas.o client.o log.o conffile.o files.o xlat.o $(LIBS)
+	$(CC) $(CFLAGS) $(LDFLAGS_MAIN) -o radrelay radrelay.o mainconfig.o util.o nas.o client.o log.o conffile.o files.o xlat.o $(LIBS)
 
 radrelay.o: radrelay.c $(INCLUDES)
 	$(CC) $(CFLAGS) -c radrelay.c
@@ -138,7 +138,7 @@
 	$(CC) $(CFLAGS) -c radwho.c
 
 radwho: radwho.o util.o log.o conffile.o ../lib/libradius.a
-	$(CC) $(LDFLAGS) -o radwho radwho.o util.o log.o conffile.o $(LIBS) $(LCRYPT)
+	$(CC) $(LDFLAGS_MAIN) -o radwho radwho.o util.o log.o conffile.o $(LIBS) $(LCRYPT)
 
 clean:
 	rm -rf *.o *.so *~ $(BINARIES) .libs
