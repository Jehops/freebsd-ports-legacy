--- Makefile.orig	Mon Sep 22 20:48:07 2003
+++ Makefile	Sun Nov  2 12:28:29 2003
@@ -1,7 +1,7 @@
 #Possible optimizations -fomit-frame-pointer -ffast-math
 OBS= bandwidthd.o graph.o conf.tab.o conf.l.o
-LIBS= -lgd -lpng -lpcap 
-CFLAGS= -O3 -Wall
+LIBS+= -lgd -lpng -lpcap ${LDFLAGS} 
+CFLAGS+= 
 NONWALLCFLAGS= -O3 #-g -DDEBUG
 
 # Debugging stuff
@@ -20,7 +20,7 @@
 	$(CC) $(CFLAGS) $(OBS) -o bandwidthd $(LIBS) 
 
 conf.tab.c: conf.y
-	bison -d conf.y
+	yacc -d conf.y
 
 conf.l.c: conf.l
 	lex -s -i -t -I conf.l > conf.l.c
@@ -34,12 +34,12 @@
 	rm -f *.o bandwidthd *~ conf.tab.c conf.tab.h conf.l.c DEADJOE
 
 install: all
-	mkdir -p /usr/local/bandwidthd/etc
-	mkdir -p /usr/local/bandwidthd/htdocs
-	cp bandwidthd /usr/local/bandwidthd	
-	cp etc/bandwidthd.conf /usr/local/bandwidthd/etc/
-	cp htdocs/legend.gif /usr/local/bandwidthd/htdocs/
-	cp htdocs/logo.gif /usr/local/bandwidthd/htdocs/
+	mkdir -p ${PREFIX}/bandwidthd/etc
+	mkdir -p ${PREFIX}/bandwidthd/htdocs
+	cp bandwidthd ${PREFIX}/bandwidthd
+	cp etc/bandwidthd.conf ${PREFIX}/bandwidthd/etc/bandwidthd.conf-dist
+	cp htdocs/legend.gif ${PREFIX}/bandwidthd/htdocs/
+	cp htdocs/logo.gif ${PREFIX}/bandwidthd/htdocs/
 
 #**** Stuff where -WALL is turned off to reduce the noise in a compile so I can see my own errors *******************
 conf.l.o: conf.l.c
