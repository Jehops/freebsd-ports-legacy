--- telnetd/telnetd.c.orig	Sat Aug  2 14:40:48 1997
+++ telnetd/telnetd.c	Sat Oct 17 22:13:52 1998
@@ -140,7 +140,7 @@
 	highpty = getnpty();
 #endif /* CRAY */
 
-	while ((ch = getopt(argc, argv, "d:a:e:lhnr:I:D:B:sS:a:X:z:")) != EOF) {
+	while ((ch = getopt(argc, argv, "d:a:e:lhnr:I:D:B:sS:a:X:z:q")) != EOF) {
 		switch(ch) {
 
 #ifdef USE_SSL
@@ -203,6 +203,11 @@
 
 			}
 			break;
+
+		case 'q':
+			ssl_quiet_flag = 1;
+			break;
+			
 #endif /* USE_SSL */
 
 #ifdef	AUTHENTICATE
@@ -584,7 +589,7 @@
 #ifdef USE_SSL
         /* might as well output something useful here ... */
 	fprintf(stderr, " [-z ssl] [-z secure] [-z debug] [-z verify=int]\n\t");
-	fprintf(stderr, " [-z cert=file] [-z key=file]\n\t");
+	fprintf(stderr, " [-z cert=file] [-z key=file] [-q]\n\t");
 #endif /* USE_SSL */
 	fprintf(stderr, " [port]\n");
 	exit(1);
@@ -656,7 +661,12 @@
 		fflush(stderr);
 	    }
 
-	    fatal(net,"[SSL required - connection rejected]");
+	    if (ssl_quiet_flag) {
+		sleep(1);
+		exit(1);
+	    }
+	    else
+		fatal(net,"[SSL required - connection rejected]");
 
 	}
     }
