--- Makefile.orig	Wed Apr 15 11:49:24 1998
+++ Makefile	Wed Apr 15 11:50:42 1998
@@ -17,7 +17,7 @@
 
 # You probably want to change this:
 #INSTROOT = ${HOME}
-INSTROOT = /depot/collections0/netpipes4.0
+INSTROOT = ${PREFIX}
 INSTBIN = ${INSTROOT}/bin
 INSTMAN = ${INSTROOT}/man
 
@@ -52,7 +52,7 @@
 #CFLAGS = -DUSE_IOCTL -DNO_MEMMOVE -DNO_STRERROR $(CDEBUGFLAGS)
 
 # Linux
-CFLAGS = -DUSE_IOCTL -DPOSIX_SIG -DHAVE_INET_ATON $(CDEBUGFLAGS)
+#CFLAGS = -DUSE_IOCTL -DPOSIX_SIG -DHAVE_INET_ATON $(CDEBUGFLAGS)
 
 # SGI
 #CFLAGS = -DSYSV $(CDEBUGFLAGS)
@@ -61,7 +61,7 @@
 #CFLAGS = -DPOSIX_SIG $(CDEBUGFLAGS)
 
 # FreeBSD
-#CFLAGS = -DPOSIX_SIG $(CDEBUGFLAGS)
+CFLAGS = -DPOSIX_SIG $(CDEBUGFLAGS)
 
 # AIX 4.1.4 and 3.2.5
 #CFLAGS = -DPOSIX_SIG -DAIX $(CDEBUGFLAGS)
@@ -103,14 +103,9 @@
 	${CC} ${CFLAGS} -o $@ ${EOBJS} ${LDLIBS}
 
 install : all
-	[ -d ${INSTROOT} ] || mkdir ${INSTROOT}
-	[ -d ${INSTBIN} ] || mkdir ${INSTBIN}
-	cp ${PROGRAMS} ${INSTBIN}/
-	- rm -f ${INSTBIN}/getsockname
-	ln -s getpeername ${INSTBIN}/getsockname
-	[ -d ${INSTMAN} ] || mkdir ${INSTMAN}
-	[ -d ${INSTMAN}/man1 ] || mkdir ${INSTMAN}/man1
-	cp ${MANPAGES} ${INSTMAN}/man1/
+	${BSD_INSTALL_MAN} ${MANPAGES} ${INSTMAN}/man1/
+	${BSD_INSTALL_PROGRAM} ${PROGRAMS} ${INSTBIN}/
+	ln -f -s ${INSTBIN}/getpeername ${INSTBIN}/getsockname
 
 clean	:
 	rm -f ${FOBJS} ${HOBJS} ${SOBJS} ${GOBJS} ${TOBJS} ${EOBJS}
