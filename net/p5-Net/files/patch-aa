*** Configure.orig	Wed Nov  5 06:27:54 1997
--- Configure	Sat Nov 22 20:18:47 1997
***************
*** 195,212 ****
  
  #---------------------------------------------------------------------------
  
! if(!-f $config_pm && $have_old && !$opt_d)
!  {
!   $msg = <<EDQ;
  
! Ah, I see you already have installed libnet before.
! 
! Do you want to modify/update your configuration (y|n) ?
! EDQ
! 
!  $opt_d = 1
! 	unless get_bool($msg,0);
!  }
  
  #---------------------------------------------------------------------------
  
--- 195,215 ----
  
  #---------------------------------------------------------------------------
  
! #if(!-f $config_pm && $have_old && !$opt_d)
! # {
! #  $msg = <<EDQ;
! #
! #Ah, I see you already have installed libnet before.
! #
! #Do you want to modify/update your configuration (y|n) ?
! #EDQ
! #
! # $opt_d = 1
! #	unless get_bool($msg,0);
! # }
! #
  
! $opt_d = 0;
  
  #---------------------------------------------------------------------------
  
***************
*** 223,229 ****
  Do you want me to perform hostname lookups (y|n) ?
  EDQ
  
! $cfg{'test_exist'} = get_bool($msg, $oldcfg{'test_exist'});
  
  print <<EDQ unless $cfg{'test_exist'};
  
--- 226,233 ----
  Do you want me to perform hostname lookups (y|n) ?
  EDQ
  
! #$cfg{'test_exist'} = get_bool($msg, $oldcfg{'test_exist'});
! $cfg{'test_exist'} = 1;
  
  print <<EDQ unless $cfg{'test_exist'};
  
***************
*** 238,308 ****
  
  #---------------------------------------------------------------------------
  
! print <<EDQ;
! 
! The following questions all require a list of host names, separated
! with spaces. If you do not have a host available for any of the
! services, then enter a single space, followed by <CR>. To accept the
! default, hit <CR>
! 
! EDQ
  
  $msg = 'Enter a list of available NNTP hosts :';
  
! $def = $oldcfg{'nntp_hosts'} ||
! 	[ default_hostname($ENV{NNTPSERVER},$ENV{NEWSHOST},'news') ];
  
! $cfg{'nntp_hosts'} = get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available SMTP hosts :';
  
! $def = $oldcfg{'smtp_hosts'} ||
! 	[ default_hostname(split(/:/,$ENV{SMTPHOSTS} || ""), 'mailhost') ];
  
! $cfg{'smtp_hosts'} = get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available POP3 hosts :';
  
! $def = $oldcfg{'pop3_hosts'} || [];
  
! $cfg{'pop3_hosts'} = get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available SNPP hosts :';
  
! $def = $oldcfg{'snpp_hosts'} || [];
  
! $cfg{'snpp_hosts'} = get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available PH Hosts   :'  ;
  
! $def = $oldcfg{'ph_hosts'} ||
! 	[ default_hostname('dirserv') ];
  
! $cfg{'ph_hosts'}   =  get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available TIME Hosts   :'  ;
  
! $def = $oldcfg{'time_hosts'} || [];
  
! $cfg{'time_hosts'} = get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available DAYTIME Hosts   :'  ;
  
! $def = $oldcfg{'daytime_hosts'} || $oldcfg{'time_hosts'};
  
! $cfg{'daytime_hosts'} = get_host_list($msg,$def);
  
  #---------------------------------------------------------------------------
  
--- 242,312 ----
  
  #---------------------------------------------------------------------------
  
! #print <<EDQ;
! #
! #The following questions all require a list of host names, separated
! #with spaces. If you do not have a host available for any of the
! #services, then enter a single space, followed by <CR>. To accept the
! #default, hit <CR>
! #
! #EDQ
  
  $msg = 'Enter a list of available NNTP hosts :';
  
! #$def = $oldcfg{'nntp_hosts'} ||
! #        [ default_hostname($ENV{NNTPSERVER},$ENV{NEWSHOST},'news') ];
  
! $cfg{'nntp_hosts'} = [ default_hostname($ENV{NNTPSERVER},$ENV{NEWSHOST},'news') ];
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available SMTP hosts :';
  
! #$def = $oldcfg{'smtp_hosts'} ||
! #        [ default_hostname(split(/:/,$ENV{SMTPHOSTS} || ""), 'mailhost') ];
  
! $cfg{'smtp_hosts'} = [ default_hostname(split(/:/,$ENV{SMTPHOSTS} || ""), 'mailhost') ];
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available POP3 hosts :';
  
! #$def = $oldcfg{'pop3_hosts'} || [];
  
! $cfg{'pop3_hosts'} = [];
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available SNPP hosts :';
  
! #$def = $oldcfg{'snpp_hosts'} || [];
  
! $cfg{'snpp_hosts'} = [];
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available PH Hosts   :'  ;
  
! #$def = $oldcfg{'ph_hosts'} ||
! #        [ default_hostname('dirserv') ];
  
! $cfg{'ph_hosts'}   =  [ default_hostname('dirserv') ];
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available TIME Hosts   :'  ;
  
! #$def = $oldcfg{'time_hosts'} || [];
  
! $cfg{'time_hosts'} = [];
  
  #---------------------------------------------------------------------------
  
  $msg = 'Enter a list of available DAYTIME Hosts   :'  ;
  
! #$def = $oldcfg{'daytime_hosts'} || $oldcfg{'time_hosts'};
  
! $cfg{'daytime_hosts'} = [];
  
  #---------------------------------------------------------------------------
  
***************
*** 318,326 ****
  FTP proxy hostname :
  EDQ
  
! $def = $oldcfg{'ftp_firewall'} || $ENV{FTP_FIREWALL};
  
! $cfg{'ftp_firewall'} = get_hostname($msg,$def);
  
  #---------------------------------------------------------------------------
  
--- 322,330 ----
  FTP proxy hostname :
  EDQ
  
! # $def = $oldcfg{'ftp_firewall'} || $ENV{FTP_FIREWALL};
  
! $cfg{'ftp_firewall'} = $ENV{FTP_FIREWALL};
  
  #---------------------------------------------------------------------------
  
***************
*** 341,377 ****
  
  #---------------------------------------------------------------------------
  
! print <<EDQ;
! 
! Normally when FTP needs a data connection the client tells the server
! a port to connect to, and the server initiates a connection to the client.
! 
! Some setups, in particular firewall setups, can/do not work using this
! protocol. In these situations the client must make the connection to the
! server, this is called a passive transfer.
! EDQ
  
  $msg = "\nShould all FTP connections via a firewall/proxy be passive (y|n) ?";
  
! $def = $oldcfg{'ftp_ext_passive'} || 0;
! 
! $cfg{'ftp_ext_passive'} = get_bool($msg,$def);
  
  
! $def = $oldcfg{'ftp_int_passive'} || 0;
  
  $msg = "\nShould all other FTP connections be passive (y|n) ?";
  
! $cfg{'ftp_int_passive'} = get_bool($msg,$def);
  
  
  #---------------------------------------------------------------------------
  
! $def = $oldcfg{'inet_domain'} || $ENV{LOCALDOMAIN};
  
! $ans = Prompt("\nWhat is your local internet domain name :",$def);
  
! $cfg{'inet_domain'} = ($ans =~ /(\S+)/)[0];
  
  #---------------------------------------------------------------------------
  
--- 345,380 ----
  
  #---------------------------------------------------------------------------
  
! #print <<EDQ;
! #
! #Normally when FTP needs a data connection the client tells the server
! #a port to connect to, and the server initiates a connection to the client.
! #
! #Some setups, in particular firewall setups, can/do not work using this
! #protocol. In these situations the client must make the connection to the
! #server, this is called a passive transfer.
! #EDQ
  
  $msg = "\nShould all FTP connections via a firewall/proxy be passive (y|n) ?";
  
! # $def = $oldcfg{'ftp_ext_passive'} || 0;
  
+ $cfg{'ftp_ext_passive'} = 0;
  
! # $def = $oldcfg{'ftp_int_passive'} || 0;
  
  $msg = "\nShould all other FTP connections be passive (y|n) ?";
  
! $cfg{'ftp_int_passive'} = 0;
  
  
  #---------------------------------------------------------------------------
  
! # $def = $oldcfg{'inet_domain'} || $ENV{LOCALDOMAIN};
  
! # $ans = Prompt("\nWhat is your local internet domain name :",$def);
  
! $cfg{'inet_domain'} = "";
  
  #---------------------------------------------------------------------------
  
***************
*** 387,393 ****
  Do you want me to run these tests (y|n) ?
  EDQ
  
! $cfg{'test_hosts'} = get_bool($msg,$oldcfg{'test_hosts'});
  
  #---------------------------------------------------------------------------
  
--- 390,396 ----
  Do you want me to run these tests (y|n) ?
  EDQ
  
! $cfg{'test_hosts'} = 0;
  
  #---------------------------------------------------------------------------
  
