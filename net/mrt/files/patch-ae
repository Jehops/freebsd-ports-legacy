--- configure.in.orig	Sat Jan 15 23:11:53 2000
+++ configure.in	Thu Feb  1 05:16:05 2001
@@ -555,10 +555,12 @@
 #ifdef __KAME__
 yes
 #endif
-], [  	    LIBS="$LIBS -L/usr/local/v6/lib -linet6"
+], [  	AC_FILE_EXIST(/usr/local/v6/lib/libinet6.a, [
+            LIBS="$LIBS -L/usr/local/v6/lib -linet6"]);
+        AC_FILE_EXIST(/usr/include/netinet6/ip6_mroute.h, [
+            AC_DEFINE(HAVE_MROUTING6)]);
             AC_DEFINE(WIDE_IPV6)
             AC_DEFINE(RFC2292)
-  	    AC_DEFINE(HAVE_MROUTING6)
 dnl KAME's netinet/ip6.h can not be detected due to error
 	    AC_DEFINE(HAVE_NETINET_IP6_H)
             AC_MSG_RESULT(yes... KAME IPv6)], 
