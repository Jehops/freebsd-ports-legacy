*** src/config.cpp.orig	Mon Aug 13 17:19:15 2001
--- src/config.cpp	Fri Aug 17 18:03:23 2001
*************** void read_config (options *opts)
*** 161,167 ****
        // Do not free key and value as they are assigned as pointers to opts->audio_codecs
        cpt++;
      }
!   
  }
  
  
--- 161,175 ----
        // Do not free key and value as they are assigned as pointers to opts->audio_codecs
        cpt++;
      }
! 
!   /* handle old config files which do not have a Devices section */
!   if(opts->audio_device == NULL) opts->audio_device="/dev/dsp";
!   if(opts->audio_mixer == NULL)  opts->audio_mixer="/dev/mixer";
! #ifdef __linux__
!   if(opts->video_device == NULL) opts->video_device="/dev/video";
! #else
!   if(opts->video_device == NULL) opts->video_device="/dev/bktr0";
! #endif
  }
  
  
*************** void init_config (void)
*** 419,425 ****
--- 427,437 ----
  
    gnome_config_set_string ("Devices/audio_device", "/dev/dsp");
    gnome_config_set_string ("Devices/audio_mixer", "/dev/mixer");
+ #ifdef __linux__
    gnome_config_set_string ("Devices/video_device", "/dev/video");
+ #else
+   gnome_config_set_string ("Devices/video_device", "/dev/bktr0");
+ #endif
    gnome_config_set_int ("Devices/video_channel", 0);
  
    gnome_config_set_string ("Placement/Dock", 
