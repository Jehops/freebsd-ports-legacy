
$FreeBSD$

--- apps/Makefile.orig	Mon Jan 12 03:56:38 2004
+++ apps/Makefile	Fri Jan 30 01:47:34 2004
@@ -59,17 +59,17 @@
 	$(CC) $(SOLINK) -o $@ $< -ltonezone
 
 install: all
-	for x in $(APPS); do $(INSTALL) -m 755 $$x $(DESTDIR)$(MODULES_DIR) ; done
+	for x in $(APPS); do $(BSD_INSTALL_PROGRAM) $$x $(DESTDIR)$(MODULES_DIR) ; done
 
 app_todd.o: app_todd.c
-	gcc -pipe -O6 -g  -Iinclude -I../include -D_REENTRANT -march=i586 -DDO_CRASH -c -o  app_todd.o app_todd.c
+	$(CC) $(CFLAGS) -Iinclude -I../include -D_REENTRANT -DDO_CRASH -c -o  app_todd.o app_todd.c
 
 app_todd.so: app_todd.o
-	$(CC) $(SOLINK) -o $@ $< -L/usr/local/ssl/lib -lssl -lcrypto
+	$(CC) $(SOLINK) -o $@ $< -lssl -lcrypto
 
 app_voicemail.so : app_voicemail.o
 ifeq ($(USE_MYSQL_VM_INTERFACE),1)
-	$(CC) $(SOLINK) -o $@ $(MLFLAGS) $< -L/usr/lib/mysql -lmysqlclient -lz
+	$(CC) $(SOLINK) -o $@ $(MLFLAGS) $< -L$(LOCALBASE)/lib/mysql -lmysqlclient -lz
 else
 ifeq ($(USE_POSTGRES_VM_INTERFACE),1)
 	$(CC) $(SOLINK) -o $@ $(MLFLAGS) $< -lpq
@@ -88,7 +88,7 @@
 	$(CC) $(SOLINK) -o $@ $< -lodbc
 
 look:	look.c
-	gcc -pipe -O6 -g look.c -o look -lncurses
+	$(CC) $(CFLAGS) look.c -o look -lncurses
 
 ifneq ($(wildcard .depend),)
 include .depend
