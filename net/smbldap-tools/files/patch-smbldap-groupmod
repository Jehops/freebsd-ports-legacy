--- smbldap-groupmod.orig	2010-10-07 11:45:07.992987934 +0200
+++ smbldap-groupmod	2010-10-07 11:46:51.438545715 +0200
@@ -142,7 +142,7 @@
 	$config{groupsdn}=$group_entry->dn;
 	if (is_group_member("$config{groupsdn}",$member)) {
 	    my $delete=1;
-	    if (defined $group_entry->get_value('sambaSID')) {
+	    if (defined ($user_entry) && defined $group_entry->get_value('sambaSID')) {
 		if ($group_entry->get_value('sambaSID') eq $user_entry->get_value('sambaPrimaryGroupSID')) {
 		    $delete=0;
 		    print "Cannot delete user ($member) from his primary group ($groupName)\n";
