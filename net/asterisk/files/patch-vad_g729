--- main/frame.c.orig	2009-05-14 12:43:39.000000000 +0300
+++ main/frame.c	2009-05-14 12:43:54.000000000 +0300
@@ -266,7 +266,7 @@
 	/* Make sure we have enough data */
 	if (s->len < s->size) {
 		/* Or, if this is a G.729 frame with VAD on it, send it immediately anyway */
-		if (!((s->flags & AST_SMOOTHER_FLAG_G729) && (s->size % 10)))
+		if (!((s->flags & AST_SMOOTHER_FLAG_G729) && (s->len % 10)))
 			return NULL;
 	}
 	len = s->size;
