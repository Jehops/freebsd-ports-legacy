
$FreeBSD$

--- agi/Makefile.orig	Sat Oct 25 20:27:53 2003
+++ agi/Makefile	Fri Jan 30 02:31:07 2004
@@ -11,21 +11,24 @@
 # the GNU General Public License
 #
 
-AGIS=agi-test.agi eagi-test eagi-sphinx-test
+AGIS_BIN=eagi-test eagi-sphinx-test
+AGIS_SCR=agi-test.agi
+AGIS=$(AGIS_SCR) $(AGIS_BIN)
 
 CFLAGS+=
 
 all: depend $(AGIS)
 
 install: all
-	mkdir -p $(DESTDIR)$(AGI_DIR)
-	for x in $(AGIS); do $(INSTALL) -m 755 $$x $(DESTDIR)$(AGI_DIR) ; done
+	$(MKDIR) $(DESTDIR)$(AGI_DIR)
+	for x in $(AGIS_BIN); do $(BSD_INSTALL_PROGRAM) $$x $(DESTDIR)$(AGI_DIR) ; done
+	for x in $(AGIS_SCR); do $(BSD_INSTALL_SCRIPT) $$x $(DESTDIR)$(AGI_DIR) ; done
 
 eagi-test: eagi-test.o
-	$(CC) -o eagi-test eagi-test.o
+	$(CC) $(CFLAGS) -o eagi-test eagi-test.o
 	
 eagi-sphinx-test: eagi-sphinx-test.o
-	$(CC) -o eagi-sphinx-test eagi-sphinx-test.o
+	$(CC) $(CFLAGS) -o eagi-sphinx-test eagi-sphinx-test.o
 
 clean:
 	rm -f *.so *.o look .depend
