#!/bin/sh
#
# rabbitmq for rc.d usage
# $Id$

# PROVIDE: rabbitmq
# REQUIRE: DAEMON
# BEFORE: LOGIN
# KEYWORD: shutdown
#
# Add the following line to /etc/rc.conf to enable RabitMQ
#
#  rabbitmq_enable="YES"

. "%%RC_SUBR%%"

name=rabbitmq
rcvar=`set_rcvar`

# Set some defaults
rabbitmq_enable=${rabbitmq_enable:-"NO"}
rabbitmq_user=${rabbitmq_user:-"rabbitmq"}

prefix=%%PREFIX%%
start_cmd="env HOME=/var/db/rabbitmq su -m ${rabbitmq_user} -c 'sh -c \"${prefix}/sbin/rabbitmq-server -detached\"'"
stop_cmd="env HOME=/var/db/rabbitmq su -m ${rabbitmq_user} -c 'sh -c \"${prefix}/sbin/rabbitmqctl stop\"'"

load_rc_config $name

run_rc_command "$1"
