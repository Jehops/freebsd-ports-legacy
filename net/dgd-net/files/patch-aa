*** Makefile.orig	Thu Jan  2 23:38:50 1997
--- Makefile	Thu Jan  2 23:41:13 1997
***************
*** 3,24 ****
  #
  HOST=	NETBSD
  DEFINES=-D$(HOST) #-DDUMP_FUNCS
! DEBUG=	-g -DDEBUG
  CCFLAGS=$(DEFINES) $(DEBUG)
  CFLAGS=	-I. -Icomp -Ilex -Ied -Ikfun $(CCFLAGS)
! LDFLAGS=
! LIBS=
! CC=	gcc
  LD=	$(CC)
  DMAKE=	make
  BIN=	../bin
  
  OBJ=	alloc.o error.o hash.o swap.o str.o array.o object.o data.o path.o \
! 	editor.o comm.net.o call_out.o interpret.o config.o dgd.o
  EDOBJ=	alloc.o error.o
  LEXOBJ=	alloc.o hash.o
  COMPOBJ=alloc.o error.o hash.o path.o str.o array.o object.o data.o \
! 	interpret.o config.o
  
  a.out:	$(OBJ) always
  	cd comp; $(MAKE) 'DMAKE=$(DMAKE)' 'CC=$(CC)' 'CCFLAGS=$(CCFLAGS)' dgd
--- 3,27 ----
  #
  HOST=	NETBSD
  DEFINES=-D$(HOST) #-DDUMP_FUNCS
! DEBUG=-O2
! #DEBUG=	-g -DDEBUG
  CCFLAGS=$(DEFINES) $(DEBUG)
  CFLAGS=	-I. -Icomp -Ilex -Ied -Ikfun $(CCFLAGS)
! LDFLAGS=-s
! LIBS=-lcrypt -lgnuregex
! CC=	cc
  LD=	$(CC)
  DMAKE=	make
  BIN=	../bin
  
  OBJ=	alloc.o error.o hash.o swap.o str.o array.o object.o data.o path.o \
! 	editor.o comm.net.o call_out.o interpret.o config.o dgd.o rgx.o
  EDOBJ=	alloc.o error.o
  LEXOBJ=	alloc.o hash.o
  COMPOBJ=alloc.o error.o hash.o path.o str.o array.o object.o data.o \
! 	interpret.o config.o rgx.o
! 
! all: a.out comp/a.out
  
  a.out:	$(OBJ) always
  	cd comp; $(MAKE) 'DMAKE=$(DMAKE)' 'CC=$(CC)' 'CCFLAGS=$(CCFLAGS)' dgd
***************
*** 38,44 ****
  	-mv $(BIN)/driver $(BIN)/driver.old
  	cp a.out $(BIN)/driver
  
! install: $(BIN)/driver
  
  comp.sub: $(COMPOBJ)
  	@for i in $(COMPOBJ); do echo ../$$i; done > comp.sub
--- 41,51 ----
  	-mv $(BIN)/driver $(BIN)/driver.old
  	cp a.out $(BIN)/driver
  
! $(BIN)/precomp: comp/a.out
! 	-mv $(BIN)/precomp $(BIN)/precomp.old
! 	cp comp/a.out $(BIN)/precomp
! 
! install: $(BIN)/driver $(BIN)/precomp
  
  comp.sub: $(COMPOBJ)
  	@for i in $(COMPOBJ); do echo ../$$i; done > comp.sub
***************
*** 54,60 ****
  
  comp/a.out:
  	cd comp; $(DMAKE) 'DMAKE=$(DMAKE)' 'CC=$(CC)' 'CCFLAGS=$(CCFLAGS)' \
! 			  'LIBS=$(LIBS)' a.out
  
  clean:
  	rm -f a.out $(OBJ) comp.sub lex.sub ed.sub
--- 61,67 ----
  
  comp/a.out:
  	cd comp; $(DMAKE) 'DMAKE=$(DMAKE)' 'CC=$(CC)' 'CCFLAGS=$(CCFLAGS)' \
! 			'LDFLAGS=$(LDFLAGS)' 'LIBS=$(LIBS)' a.out
  
  clean:
  	rm -f a.out $(OBJ) comp.sub lex.sub ed.sub
***************
*** 92,94 ****
--- 99,102 ----
  call_out.o config.o dgd.o: call_out.h
  error.o comm.o call_out.o config.o dgd.o: comm.h
  config.o: version.h
+ rgx.o: str.h array.h rgx.h interpret.h
