--- Makefile.orig	Tue Aug 24 03:48:00 1999
+++ Makefile	Sat Feb  5 22:30:00 2000
@@ -1,22 +1,24 @@
 
 RSA_KEY_LENGTH	=	1024
 
-CFLAGS	=	-g -DDEBUG
+CFLAGS	?=	-O2
+CFLAGS	+=	-g -DDEBUG $(OPENSSL_CFLAGS)
 # CFLAGS	=	-O6 -mpentium
-CC	=	cc $(CFLAGS)
-INC	=	-I/usr/local/include
-LIB	=	-L/usr/local/lib
+CC	?=	cc
+CC	+=	$(CFLAGS)
+INC	=	-I$(OPENSSLINC)
+LIB	=	-L$(OPENSSLLIB)
 
 all: rsa_kg pkey_gen tund keygen
 
 rsa_kg: rsa_kg.c tund.h
-	$(CC) -o rsa_kg rsa_kg.c $(INC) $(LIB) -lcrypto
+	$(CC) -o rsa_kg rsa_kg.c $(INC) $(LIB) -lcrypto $(EXTRA_SSL_LIBS)
 
 pkey_gen: pkey_gen.c tund.h
-	$(CC) -o pkey_gen pkey_gen.c $(INC) $(LIB) -lcrypto
+	$(CC) -o pkey_gen pkey_gen.c $(INC) $(LIB) -lcrypto $(EXTRA_SSL_LIBS)
 
 tund: main.o tund.o secur.o scb.o utils.o md5.o alarm.o cipher.o search.o
-	$(CC) -static -o tund main.o tund.o secur.o scb.o utils.o md5.o alarm.o cipher.o search.o $(LIB) -lmd -lcrypto
+	$(CC) -static -o tund main.o tund.o secur.o scb.o utils.o md5.o alarm.o cipher.o search.o $(LIB) -lmd -lcrypto $(EXTRA_SSL_LIBS)
 
 main.o: main.c tund.h
 	$(CC) -c main.c $(INC)
