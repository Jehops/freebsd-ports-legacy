--- src/rateup.c.orig	Sat Apr 12 15:41:20 2003
+++ src/rateup.c	Mon Jun  2 10:42:04 2003
@@ -62,7 +62,7 @@
 #ifdef __MINGW32_VERSION
 #define LLD "%I64d"
 #else
-#define LLD "%lld"
+#define LLD "%qd"
 #endif
 
 /* WATCOM C/C++ 10.6 under Win95/NT */
@@ -840,12 +840,14 @@ char *file;
     struct HISTORY *hist;
     long long rd[5];
     time_t cur;
+    long lasttime;
 
     if ((fi = fopen(file,"r")) != NULL) {
-	if (fscanf(fi,"%ld %s %s\n",(long int *)&last.time,&last.in[0],&last.out[0]) != 3){
+	if (fscanf(fi,"%ld %s %s\n",&lasttime,&last.in[0],&last.out[0]) != 3){
            fprintf(stderr,"Read Error: File %s lin 1\n",file);
 	   retcode = 1;
 	}
+	last.time = lasttime;
         cur = last.time;
 	x = histvalid=0;
 	hist = history;
