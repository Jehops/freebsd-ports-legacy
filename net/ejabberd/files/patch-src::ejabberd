--- ejabberd.orig	Wed Oct 20 21:59:31 2004
+++ ejabberd	Wed Oct 20 21:59:15 2004
@@ -0,0 +1,33 @@
+#!/bin/sh
+
+[ -r /var/run/ejabberd/.erlang.cookie ] && HOME=/var/run/ejabberd
+[ -f %%PREFIX%%/etc/ejabberd.defaults ] && .  %%PREFIX%%/etc/ejabberd.defaults
+
+CONFIG=%%PREFIX%%/etc/ejabberd.cfg
+LOG=/var/log/ejabberd/ejabberd.log
+SASL_LOG=/var/log/ejabberd/sasl.log
+SPOOL=/var/spool/ejabberd
+
+ARGS=
+
+while [ $# -ne 0 ]
+do
+    PARAM=$1
+    shift
+    case $PARAM in
+	--) break ;;
+	--config) CONFIG=$1 ; shift ;;
+	--log) LOG=$1 ; shift ;;
+	--sasl-log) SASL_LOG=$1 ; shift ;;
+	--spool) SPOOL=$1 ; shift ;;
+	*) ARGS="$ARGS $PARAM" ;;
+    esac
+done
+
+exec erl -sname ejabberd \
+    -s ejabberd \
+    -ejabberd config \"$CONFIG\" log_path \"$LOG\" \
+    -sasl sasl_error_logger \{file,\"$SASL_LOG\"\} \
+    -mnesia dir \"$SPOOL\" \
+    $ERL_OPTIONS $ARGS "$@"
+
