--- src/Makefile	Sun Nov 25 07:37:30 2001
+++ src/Makefile	Sun Dec  2 19:34:46 2001
@@ -1,6 +1,6 @@
 #CC = gcc
-CFLAGS =-g -march=i586 -O2 -Wall `glib-config --cflags glib gthread` -Wpointer-arith -Wcast-qual -Wwrite-strings #-Wshadow
-LDFLAGS = -g `glib-config --libs glib gthread`
+CFLAGS += -g -Wall `${GLIB_CONFIG} --cflags glib gthread` -Wpointer-arith -Wcast-qual -Wwrite-strings -I${LOCALBASE}/include ${PTHREAD_CFLAGS}
+LDFLAGS += -g `${GLIB_CONFIG} --libs glib gthread` ${PTHREAD_LIBS}
 
 CSRC = main.c action.c dc_com.c display.c key.c keyboard.c network.c typical_action.c dc_manage.c db.c he3.c gts.c user_manage.c md.c timed_out_string.c sema.c
 
@@ -15,7 +15,7 @@
 	$(CC) $(CFLAGS) $(LDFLAGS) $(COBJ) -o dctc
 
 hublist: $(COBJ1)
-	$(CC) $(CFLAGS) $(LDFLAGS) $(COBJ1) -o hublist
+	$(CC) $(CFLAGS) $(LDFLAGS) $(COBJ1) -o dc_hublist
 
 depend:
 	makedepend -- $(CFLAGS) -- $(CSRC) $(CSRC1)
