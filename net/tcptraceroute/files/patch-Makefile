--- Makefile.orig	Wed Aug  1 07:52:40 2001
+++ Makefile	Sun Mar 24 10:36:40 2002
@@ -1,20 +1,27 @@
 # tcptraceroute -- A traceroute implementation using TCP packets
 # Copyright (c) 2001, Michael C. Toren <mct@toren.net>
 
-CC = gcc
-CFLAGS = -O2 -Wall
-DESTDIR=/usr/local/bin
+CC ?= cc
+CFLAGS ?= -O2 -Wall
+LNETINC= -I/usr/local/include
+LNETLIB= -L/usr/local/lib
+
+BINDIR= ${PREFIX}/bin
+MANDIR= ${PREFIX}/man
+
+all: tcptraceroute
 
 tcptraceroute: tcptraceroute.c
-	$(CC) $(CFLAGS) `libnet-config --defines` \
+	$(CC) $(CFLAGS) `libnet-config --defines` $(LNETINC) \
 		-o tcptraceroute tcptraceroute.c \
-		`libnet-config --libs` -lpcap
+		$(LNETLIB) `libnet-config --libs` -lpcap
 
 static:
 	$(MAKE) tcptraceroute CFLAGS="$(CFLAGS) -static"
 
 install: tcptraceroute
-	install -D tcptraceroute $(DESTDIR)/tcptraceroute
+	install -c -s tcptraceroute $(BINDIR)/tcptraceroute
+	install -c -m 444 tcptraceroute.8 $(MANDIR)/man8/tcptraceroute.8
 
 distrib: clean changelog man
 
