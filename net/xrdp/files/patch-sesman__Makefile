--- sesman/Makefile.orig	Sun May 27 20:18:14 2007
+++ sesman/Makefile	Mon Sep 10 00:58:31 2007
@@ -17,7 +17,7 @@
 	  -DSESMAN_SESSVC_FILE=\"sessvc\"
 
 CFLAGS = -Wall -O2 -I../common -I/usr/include/nptl -I./libscp $(DEFINES)
-LDFLAGS = -L/usr/gnu/lib -L/usr/lib/nptl -L./libscp -Wl,-rpath,. -lpthread -ldl -lscp
+LDFLAGS = -L./libscp -lpthread -lscp -Wl,-rpath=$(DESTDIR)
 C_OS_FLAGS = $(CFLAGS) -c
 CC = gcc
 
@@ -54,10 +54,11 @@
 	make -C libscp clean
 
 install:
-	install sesman $(DESTDIR)/sesman
-	install startwm.sh $(DESTDIR)/startwm.sh
-	install sesman.ini $(CFGDIR)/sesman.ini
-	install sessvc $(DESTDIR)/sessvc
+	$(BSD_INSTALL_PROGRAM) sesman $(PREFIX)/bin/sesman
+	$(BSD_INSTALL_SCRIPT) startwm.sh $(DESTDIR)/startwm.sh
+	$(BSD_INSTALL_DATA) sesman.ini $(CFGDIR)/sesman.ini.sample
+	@test -f $(CFGDIR)/sesman.ini || cp $(CFGDIR)/sesman.ini.sample $(CFGDIR)/sesman.ini
+	$(BSD_INSTALL_PROGRAM) sessvc $(PREFIX)/bin/sessvc
 	make -C tools install
 	make -C libscp install
 
