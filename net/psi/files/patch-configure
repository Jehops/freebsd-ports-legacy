--- configure.orig	Sat Nov 20 16:05:03 2004
+++ configure	Mon Mar 28 02:12:08 2005
@@ -94,6 +94,8 @@
 			shift
 			;;
 		--help) show_usage; exit ;;
+		--with-*)
+			shift ;;
 		*) show_usage; exit ;;
 	esac
 done
@@ -882,9 +884,14 @@
 			"}\n";
 
 		QString extra;
+		QString pthread_cflags = getenv("PTHREAD_CFLAGS");
+		QString pthread_ldflags = getenv("PTHREAD_LDFLAGS");
+
 		if(!path.isEmpty())
 			extra += QString("-L") + path + ' ';
 		extra += QString("-l") + name;
+		extra += ' ' + pthread_cflags + ' ' + pthread_ldflags + ' ';
+
 		if(!doCompileAndLink(str, extra))
 			return false;
 		return true;
@@ -1110,14 +1117,6 @@
 	echo
 	exit 1;
 fi
-cat >Makefile.tmp <<EOT
-export QTDIR = $QTDIR
-export PATH = $QTDIR/bin:$PATH
-EOT
-cat Makefile >> Makefile.tmp
-rm -f Makefile
-cp -f Makefile.tmp Makefile
-rm -f Makefile.tmp
 
 echo
 echo Good, your configure finished.  Now run \'make\'.
