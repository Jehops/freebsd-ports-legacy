Index: client/src/Updater.m3
===================================================================
RCS file: /home/cvsupcvs/cvsup/client/src/Updater.m3,v
retrieving revision 1.97
diff -u -r1.97 Updater.m3
--- client/src/Updater.m3	2001/04/15 21:53:13	1.97
+++ client/src/Updater.m3	2001/05/26 22:58:36
@@ -733,7 +733,7 @@
       IF SupFileRec.Option.KeepBadFiles IN sfr.options THEN
 	Warn(self, "Bad version saved in " & tempPath);
       ELSE
-	DeleteFile(tempPath);
+	DeleteFile(self, tempPath);
       END;
     END;
   END UpdateFile;
@@ -1231,7 +1231,7 @@
       IF NOT SupFileRec.Option.CheckoutMode IN sfr.options THEN
 	(* Try the attic. *)
 	WITH atticName = SupMisc.AtticName(destPath) DO
-	  DeleteFile(atticName);
+	  DeleteFile(self, atticName);
 	  (* We always delete the Attic directory when it becomes empty.
 	     FIXME - Is that the right thing to do?. *)
 	  TRY
@@ -1239,7 +1239,7 @@
 	  EXCEPT OSError.E => (* Ignore. *) END;
 	END;
       END;
-      DeleteFile(destPath);
+      DeleteFile(self, destPath);
       IF SupFileRec.Option.CheckoutMode IN sfr.options
       OR NOT self.proto.v.dirsAreExplicit THEN
 	(* Delete the directory automatically if it is now empty. *)
@@ -1280,14 +1280,13 @@
     END;
   END MakeDirectories;
 
-PROCEDURE DeleteFile(path: Pathname.T)
-  RAISES {Error} =
+PROCEDURE DeleteFile(self: T; path: Pathname.T) =
   BEGIN
     TRY
       FileAttr.Delete(path);
     EXCEPT OSError.E(l) =>
       IF l.head # EnoentAtom THEN
-	RAISE Error("Cannot delete \"" & path & "\": " &
+	Warn(self, "Cannot delete \"" & path & "\": " &
 	  ErrMsg.StrError(l));
       END;
     END;
