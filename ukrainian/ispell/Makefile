# Created by: mi
# $FreeBSD$

PORTNAME=	ispell-uk
PORTVERSION=	0.7
CATEGORIES=	ukrainian textproc
MASTER_SITES=   SF/${PORTNAME}/OldFiles

MAINTAINER=     mi@aldan.algebra.com
COMMENT=	Ukrainian (KOI8-U) dictionary for ISPELL

BUILD_DEPENDS=  buildhash:${PORTSDIR}/textproc/ispell

MAKE_JOBS_UNSAFE=	yes

USES=		gmake perl5
USE_BZIP2=	YES
ALL_TARGET=	koi

# Still need gmake for other reasons :-\
NO_STAGE=	yes
#post-patch:
#	${PERL} -pi -e 's,\$$\(MAKE\) -C (\w+),cd \1 && make,g' \
#		${WRKSRC}/Makefile.in

do-configure:
	cd ${WRKSRC} && ${SH} ./makeconfig.sh \
		-ispell=${PREFIX}/share/ispell -default=koi

do-install:
	${INSTALL_DATA} ${WRKSRC}/ukrainian-koi.hash \
		${PREFIX}/share/ispell/ukrainian.hash
	${INSTALL_DATA} ${WRKSRC}/Affix/ukrainian-koi.aff \
		${PREFIX}/share/ispell/ukrainian.aff
	${INSTALL_DATA} ${WRKSRC}/Dictionary/ukrainian-koi.dict \
		${PREFIX}/share/ispell/ukrainian.dict
	${INSTALL_SCRIPT} ${FILESDIR}/ispell-uk ${PREFIX}/bin

.include <bsd.port.pre.mk>

.if ${ARCH} == "powerpc" && ${OSVERSION} > 900000
BROKEN=		Does not install on powerpc-9
.endif

.include <bsd.port.post.mk>
