*** pico/makefile.bsf.orig	Sun May 23 18:49:12 1999
--- pico/makefile.bsf	Sun May 23 18:54:45 1999
***************
*** 0 ****
--- 1,105 ----
+ #
+ #   Michael Seibel
+ #   Networks and Distributed Computing
+ #   Computing and Communications
+ #   University of Washington
+ #   Administration Builiding, AG-44
+ #   Seattle, Washington, 98195, USA
+ #   Internet: mikes@cac.washington.edu
+ #
+ #   Please address all bugs and comments to "pine-bugs@cac.washington.edu"
+ #
+ #
+ #   Pine and Pico are registered trademarks of the University of Washington.
+ #   No commercial use of these trademarks may be made without prior written
+ #   permission of the University of Washington.
+ #
+ #   Pine, Pico, and Pilot software and its included text are Copyright
+ #   1989-1996 by the University of Washington.
+ #
+ #   The full text of our legal notices is contained in the file called
+ #   CPYRIGHT, included with this distribution.
+ #
+ 
+ #
+ # Makefile for the FreeBSD shared-lib version of the PINE composer library and 
+ # stand-alone editor pico.
+ #
+ 
+ #includes symbol info for debugging 
+ DASHO=		# -g
+ #for normal build
+ #DASHO=		-O
+ 
+ STDCFLAGS=	-DBSDI -DBSDI2 -DPOSIX -DJOB_CONTROL -DANSI -DMOUSE -DTERMCAP_WINS
+ CFLAGS+=		$(EXTRACFLAGS) $(DASHO) $(STDCFLAGS)
+ 
+ # switches for library building
+ LIBCMD=		ar
+ LIBARGS=	ru
+ RANLIB=		ranlib
+ 
+ LIBS=		$(EXTRALIBES) -ltermcap
+ 
+ OFILES=		attach.o ansi.o basic.o bind.o browse.o buffer.o \
+ 		composer.o display.o file.o fileio.o line.o osdep.o \
+ 		pico.o random.o region.o search.o spell.o tcap.o window.o word.o hangul.o
+ 
+ # Lets be elite and not retype in the above
+ .if $(PORTOBJFORMAT) == "elf"
+ SOLIB=		libpico.so.1
+ .else
+ SOLIB=		libpico.so.1.3
+ .endif
+ SOFILES=	${OFILES:.o=.so}
+ 
+ CFILES=		attach.c ansi.c basic.c bind.c browse.c buffer.c \
+ 		composer.c display.c file.c fileio.c line.c osdep.c \
+ 		pico.c random.c region.c search.c spell.c tcap.c window.c word.c hangul.c
+ 
+ HFILES=		estruct.h edef.h efunc.h ebind.h pico.h osdep.h
+ 
+ # Need this for the shared library rule to work correctly
+ .SUFFIXES: .o .so
+ 
+ #
+ # dependencies for the Unix versions of pico and libpico.a
+ #
+ all:		pico pilot
+ 
+ osdep.c:	os_unix.c
+ 		rm -f osdep.c
+ 		cp os_unix.c osdep.c
+ 
+ osdep.h:	os_unix.h
+ 		rm -f osdep.h
+ 		cp os_unix.h osdep.h
+ 
+ libpico.a:	osdep.c osdep.h $(OFILES)
+ 		$(LIBCMD) $(LIBARGS) libpico.a $(OFILES)
+ 		$(RANLIB) libpico.a
+ 
+ $(SOLIB):	osdep.c osdep.h $(SOFILES)
+ .if $(PORTOBJFORMAT) == "elf"
+ 		ld -Bshareable -x -soname $(SOLIB) -o $(SOLIB) $(SOFILES)
+ 		ln -sf $(SOLIB) libpico.so
+ .else
+ 		ld -Bshareable -x -o libpico.so.1.3 $(SOFILES)
+ .endif
+ 
+ pico:		main.c $(SOLIB)
+ 		$(CC) $(CFLAGS) main.c -L. -lpico $(LIBS) -o pico
+ 
+ pilot:		pilot.c $(SOLIB)
+ 		$(CC) $(CFLAGS) pilot.c -L. -lpico $(LIBS) -o pilot
+ 
+ .c.so:		; $(CC) -fpic -DPIC -c $(CFLAGS) ${@:.so=.c} -o $@
+ 
+ .c.o:		; $(CC) -c $(CFLAGS) $*.c
+ 
+ $(OFILES):	$(HFILES)
+ 
+ $(SOFILES):	$(HFILES)
+ 
+ clean:
+ 		rm -f *.a *.so.1.3 *.o *.so *~ osdep.c osdep.h pico pilot
